/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,n,r,a={354:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)};function r(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function s(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}for(var i=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,a){return new e(this.left+t,this.top+n,this.width+r,this.height+a)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find((function(e){return 0!==e.width}));return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return i.fromClientRect(e,t.getBoundingClientRect())},l=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),n--)}else t.push(a)}return t},A=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],a=-1,s="";++a<n;){var i=e[a];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(a+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="undefined"==typeof Uint8Array?[]:new Uint8Array(256),h=0;h<64;h++)c[u.charCodeAt(h)]=h;for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"==typeof Uint8Array?[]:new Uint8Array(256),f=0;f<64;f++)p[d.charCodeAt(f)]=f;for(var m=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},g=function(){function e(e,t,n,r,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=a,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b="undefined"==typeof Uint8Array?[]:new Uint8Array(256),w=0;w<64;w++)b[y.charCodeAt(w)]=w;var v=10,x=13,B=15,k=17,C=18,N=19,S=20,I=21,E=22,F=24,T=25,L=26,U=27,_=28,R=30,D=32,Q=33,O=34,$=35,M=37,P=38,H=39,z=40,V=42,W=[9001,65288],K="×",G="÷",j=function(e){var t,n,r,a=function(e){var t,n,r,a,s,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<o;t+=4)n=p[e.charCodeAt(t)],r=p[e.charCodeAt(t+1)],a=p[e.charCodeAt(t+2)],s=p[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|a>>2,u[l++]=(3&a)<<6|63&s;return A}(e),s=Array.isArray(a)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n}(a):new Uint32Array(a),i=Array.isArray(a)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n}(a):new Uint16Array(a),o=m(i,12,s[4]/2),l=2===s[5]?m(i,(24+s[4])/2):(t=s,n=Math.ceil((24+s[4])/4),t.slice?t.slice(n,r):new Uint32Array(Array.prototype.slice.call(t,n,r)));return new g(s[0],s[1],s[2],s[3],o,l)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),q=[R,36],X=[1,2,3,5],J=[v,8],Y=[U,L],Z=X.concat(J),ee=[P,H,z,O,$],te=[B,x],ne=function(e,t,n,r){var a=r[n];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=n;s<=r.length;){if((l=r[++s])===t)return!0;if(l!==v)break}if(a===v)for(s=n;s>0;){var i=r[--s];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){var l;if((l=r[++o])===t)return!0;if(l!==v)break}if(i!==v)break}return!1},re=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==v)return r;n--}return 0},ae=function(e,t,n,r,a){if(0===n[r])return K;var s=r-1;if(Array.isArray(a)&&!0===a[s])return K;var i=s-1,o=s+1,l=t[s],A=i>=0?t[i]:0,u=t[o];if(2===l&&3===u)return K;if(-1!==X.indexOf(l))return"!";if(-1!==X.indexOf(u))return K;if(-1!==J.indexOf(u))return K;if(8===re(s,t))return G;if(11===j.get(e[s]))return K;if((l===D||l===Q)&&11===j.get(e[o]))return K;if(7===l||7===u)return K;if(9===l)return K;if(-1===[v,x,B].indexOf(l)&&9===u)return K;if(-1!==[k,C,N,F,_].indexOf(u))return K;if(re(s,t)===E)return K;if(ne(23,E,s,t))return K;if(ne([k,C],I,s,t))return K;if(ne(12,12,s,t))return K;if(l===v)return G;if(23===l||23===u)return K;if(16===u||16===l)return G;if(-1!==[x,B,I].indexOf(u)||14===l)return K;if(36===A&&-1!==te.indexOf(l))return K;if(l===_&&36===u)return K;if(u===S)return K;if(-1!==q.indexOf(u)&&l===T||-1!==q.indexOf(l)&&u===T)return K;if(l===U&&-1!==[M,D,Q].indexOf(u)||-1!==[M,D,Q].indexOf(l)&&u===L)return K;if(-1!==q.indexOf(l)&&-1!==Y.indexOf(u)||-1!==Y.indexOf(l)&&-1!==q.indexOf(u))return K;if(-1!==[U,L].indexOf(l)&&(u===T||-1!==[E,B].indexOf(u)&&t[o+1]===T)||-1!==[E,B].indexOf(l)&&u===T||l===T&&-1!==[T,_,F].indexOf(u))return K;if(-1!==[T,_,F,k,C].indexOf(u))for(var c=s;c>=0;){if((h=t[c])===T)return K;if(-1===[_,F].indexOf(h))break;c--}if(-1!==[U,L].indexOf(u))for(c=-1!==[k,C].indexOf(l)?i:s;c>=0;){var h;if((h=t[c])===T)return K;if(-1===[_,F].indexOf(h))break;c--}if(P===l&&-1!==[P,H,O,$].indexOf(u)||-1!==[H,O].indexOf(l)&&-1!==[H,z].indexOf(u)||-1!==[z,$].indexOf(l)&&u===z)return K;if(-1!==ee.indexOf(l)&&-1!==[S,L].indexOf(u)||-1!==ee.indexOf(u)&&l===U)return K;if(-1!==q.indexOf(l)&&-1!==q.indexOf(u))return K;if(l===F&&-1!==q.indexOf(u))return K;if(-1!==q.concat(T).indexOf(l)&&u===E&&-1===W.indexOf(e[o])||-1!==q.concat(T).indexOf(u)&&l===C)return K;if(41===l&&41===u){for(var d=n[s],p=1;d>0&&41===t[--d];)p++;if(p%2!=0)return K}return l===D&&u===Q?K:G},se=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=function(e,t){void 0===t&&(t="strict");var n=[],r=[],a=[];return e.forEach((function(e,s){var i=j.get(e);if(i>50?(a.push(!0),i-=50):a.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(s),n.push(16);if(4===i||11===i){if(0===s)return r.push(s),n.push(R);var o=n[s-1];return-1===Z.indexOf(o)?(r.push(r[s-1]),n.push(o)):(r.push(s),n.push(R))}return r.push(s),31===i?n.push("strict"===t?I:M):i===V||29===i?n.push(R):43===i?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(M):n.push(R):void n.push(i)})),[r,n,a]}(e,t.lineBreak),r=n[0],a=n[1],s=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(a=a.map((function(e){return-1!==[T,R,V].indexOf(e)?M:e})));var i="keep-all"===t.wordBreak?s.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0;return[r,a,i]},ie=function(){function e(e,t,n,r){this.codePoints=e,this.required="!"===t,this.start=n,this.end=r}return e.prototype.slice=function(){return A.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),oe=45,le=43,Ae=-1,ue=function(e){return e>=48&&e<=57},ce=function(e){return ue(e)||e>=65&&e<=70||e>=97&&e<=102},he=function(e){return 10===e||9===e||32===e},de=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},pe=function(e){return de(e)||ue(e)||e===oe},fe=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},me=function(e,t){return 92===e&&10!==t},ge=function(e,t,n){return e===oe?de(t)||me(t,n):!!de(e)||!(92!==e||!me(e,t))},ye=function(e,t,n){return e===le||e===oe?!!ue(t)||46===t&&ue(n):ue(46===e?t:e)},be=function(e){var t=0,n=1;e[t]!==le&&e[t]!==oe||(e[t]===oe&&(n=-1),t++);for(var r=[];ue(e[t]);)r.push(e[t++]);var a=r.length?parseInt(A.apply(void 0,r),10):0;46===e[t]&&t++;for(var s=[];ue(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(A.apply(void 0,s),10):0;69!==e[t]&&101!==e[t]||t++;var l=1;e[t]!==le&&e[t]!==oe||(e[t]===oe&&(l=-1),t++);for(var u=[];ue(e[t]);)u.push(e[t++]);var c=u.length?parseInt(A.apply(void 0,u),10):0;return n*(a+o*Math.pow(10,-i))*Math.pow(10,l*c)},we={type:2},ve={type:3},xe={type:4},Be={type:13},ke={type:8},Ce={type:21},Ne={type:9},Se={type:10},Ie={type:11},Ee={type:12},Fe={type:14},Te={type:23},Le={type:1},Ue={type:25},_e={type:24},Re={type:26},De={type:27},Qe={type:28},Oe={type:29},$e={type:31},Me={type:32},Pe=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(l(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Me;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(pe(t)||me(n,r)){var a=ge(t,n,r)?2:1;return{type:5,value:this.consumeName(),flags:a}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Be;break;case 39:return this.consumeStringToken(39);case 40:return we;case 41:return ve;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Fe;break;case le:if(ye(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return xe;case oe:var s=e,i=this.peekCodePoint(0),o=this.peekCodePoint(1);if(ye(s,i,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ge(s,i,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===oe&&62===o)return this.consumeCodePoint(),this.consumeCodePoint(),_e;break;case 46:if(ye(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(42===l&&47===(l=this.consumeCodePoint()))return this.consumeToken();if(l===Ae)return this.consumeToken()}break;case 58:return Re;case 59:return De;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===oe&&this.peekCodePoint(2)===oe)return this.consumeCodePoint(),this.consumeCodePoint(),Ue;break;case 64:var u=this.peekCodePoint(0),c=this.peekCodePoint(1),h=this.peekCodePoint(2);if(ge(u,c,h))return{type:7,value:this.consumeName()};break;case 91:return Qe;case 92:if(me(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return Oe;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ke;break;case 123:return Ie;case 125:return Ee;case 117:case 85:var d=this.peekCodePoint(0),p=this.peekCodePoint(1);return d!==le||!ce(p)&&63!==p||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ne;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Ce;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Se;break;case Ae:return Me}return he(e)?(this.consumeWhiteSpace(),$e):ue(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):de(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:A(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();ce(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(A.apply(void 0,e.map((function(e){return 63===e?48:e}))),16),end:parseInt(A.apply(void 0,e.map((function(e){return 63===e?70:e}))),16)};var r=parseInt(A.apply(void 0,e),16);if(this.peekCodePoint(0)===oe&&ce(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];ce(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(A.apply(void 0,a),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ae)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ae||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Te)}for(;;){var r=this.consumeCodePoint();if(r===Ae||41===r)return{type:22,value:A.apply(void 0,e)};if(he(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ae||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:A.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Te);if(34===r||39===r||40===r||fe(r))return this.consumeBadUrlRemnants(),Te;if(92===r){if(!me(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Te;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;he(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===Ae)return;me(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var n=Math.min(5e4,e);t+=A.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Ae||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(10===r)return this._value.splice(0,n),Le;if(92===r){var a=this._value[n+1];a!==Ae&&void 0!==a&&(10===a?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):me(r,a)&&(t+=this.consumeStringSlice(n),t+=A(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=4,n=this.peekCodePoint(0);for(n!==le&&n!==oe||e.push(this.consumeCodePoint());ue(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&ue(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;ue(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((69===n||101===n)&&((r===le||r===oe)&&ue(a)||ue(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;ue(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[be(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),a=this.peekCodePoint(1),s=this.peekCodePoint(2);return ge(r,a,s)?{type:15,number:t,flags:n,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ce(e)){for(var t=A(e);ce(this.peekCodePoint(0))&&t.length<6;)t+=A(this.consumeCodePoint());he(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||function(e){return e>=55296&&e<=57343}(n)||n>1114111?65533:n}return e===Ae?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(pe(t))e+=A(t);else{if(!me(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=A(this.consumeEscapedCodePoint())}}},e}(),He=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Pe;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Je(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?Me:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),ze=function(e){return 15===e.type},Ve=function(e){return 17===e.type},We=function(e){return 20===e.type},Ke=function(e){return 0===e.type},Ge=function(e,t){return We(e)&&e.value===t},je=function(e){return 31!==e.type},qe=function(e){return 31!==e.type&&4!==e.type},Xe=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},Je=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Ye=function(e){return 17===e.type||15===e.type},Ze=function(e){return 16===e.type||Ye(e)},et=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},tt={type:17,number:0,flags:4},nt={type:16,number:50,flags:4},rt={type:16,number:100,flags:4},at=function(e,t,n){var r=e[0],a=e[1];return[st(r,t),st(void 0!==a?a:r,n)]},st=function(e,t){if(16===e.type)return e.number/100*t;if(ze(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},it="grad",ot="turn",lt=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case it:return Math.PI/200*t.number;case"rad":return t.number;case ot:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},At=function(e){return 15===e.type&&("deg"===e.unit||e.unit===it||"rad"===e.unit||e.unit===ot)},ut=function(e){switch(e.filter(We).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[tt,tt];case"to top":case"bottom":return ct(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[tt,rt];case"to right":case"left":return ct(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[rt,rt];case"to bottom":case"top":return ct(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[rt,tt];case"to left":case"right":return ct(270)}return 0},ct=function(e){return Math.PI*e/180},ht=function(e,t){if(18===t.type){var n=wt[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return ft(parseInt(r+r,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(4===t.value.length){r=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);var i=t.value.substring(3,4);return ft(parseInt(r+r,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),ft(parseInt(r,16),parseInt(a,16),parseInt(s,16),1);if(8===t.value.length)return r=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8),ft(parseInt(r,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}if(20===t.type){var o=xt[t.value.toUpperCase()];if(void 0!==o)return o}return xt.TRANSPARENT},dt=function(e){return!(255&e)},pt=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+r+","+n+","+t/255+")":"rgb("+a+","+r+","+n+")"},ft=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},mt=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},gt=function(e,t){var n=t.filter(qe);if(3===n.length){var r=n.map(mt),a=r[0],s=r[1],i=r[2];return ft(a,s,i,1)}if(4===n.length){var o=n.map(mt),l=(a=o[0],s=o[1],i=o[2],o[3]);return ft(a,s,i,l)}return 0};function yt(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var bt=function(e,t){var n=t.filter(qe),r=n[0],a=n[1],s=n[2],i=n[3],o=(17===r.type?ct(r.number):lt(e,r))/(2*Math.PI),l=Ze(a)?a.number/100:0,A=Ze(s)?s.number/100:0,u=void 0!==i&&Ze(i)?st(i,1):1;if(0===l)return ft(255*A,255*A,255*A,1);var c=A<=.5?A*(l+1):A+l-A*l,h=2*A-c,d=yt(h,c,o+1/3),p=yt(h,c,o),f=yt(h,c,o-1/3);return ft(255*d,255*p,255*f,u)},wt={hsl:bt,hsla:bt,rgb:gt,rgba:gt},vt=function(e,t){return ht(e,He.create(t).parseComponentValue())},xt={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Bt={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(We(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},kt={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ct=function(e,t){var n=ht(e,t[0]),r=t[1];return r&&Ze(r)?{color:n,stop:r}:{color:n,stop:null}},Nt=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=tt),null===r.stop&&(r.stop=rt);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(null!==o){var l=st(o,t);l>s?a.push(l):a.push(s),s=l}else a.push(null)}var A=null;for(i=0;i<a.length;i++){var u=a[i];if(null===u)null===A&&(A=i);else if(null!==A){for(var c=i-A,h=(u-a[A-1])/(c+1),d=1;d<=c;d++)a[A+d-1]=h*d;A=null}}return e.map((function(e,n){return{color:e.color,stop:Math.max(Math.min(1,a[n]/t),0)}}))},St=function(e,t,n){var r="number"==typeof e?e:function(e,t,n){var r=t/2,a=n/2,s=st(e[0],t)-r,i=a-st(e[1],n);return(Math.atan2(i,s)+2*Math.PI)%(2*Math.PI)}(e,t,n),a=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),s=t/2,i=n/2,o=a/2,l=Math.sin(r-Math.PI/2)*o,A=Math.cos(r-Math.PI/2)*o;return[a,s-A,s+A,i-l,i+l]},It=function(e,t){return Math.sqrt(e*e+t*t)},Et=function(e,t,n,r,a){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var s=t[0],i=t[1],o=It(n-s,r-i);return(a?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e}),{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Ft=function(e,t){var n=ct(180),r=[];return Xe(t).forEach((function(t,a){if(0===a){var s=t[0];if(20===s.type&&-1!==["top","left","right","bottom"].indexOf(s.value))return void(n=ut(t));if(At(s))return void(n=(lt(e,s)+ct(270))%ct(360))}var i=Ct(e,t);r.push(i)})),{angle:n,stops:r,type:1}},Tt="closest-side",Lt="farthest-side",Ut="closest-corner",_t="farthest-corner",Rt="circle",Dt="ellipse",Qt="cover",Ot="contain",$t=function(e,t){var n=0,r=3,a=[],s=[];return Xe(t).forEach((function(t,i){var o=!0;if(0===i?o=t.reduce((function(e,t){if(We(t))switch(t.value){case"center":return s.push(nt),!1;case"top":case"left":return s.push(tt),!1;case"right":case"bottom":return s.push(rt),!1}else if(Ze(t)||Ye(t))return s.push(t),!1;return e}),o):1===i&&(o=t.reduce((function(e,t){if(We(t))switch(t.value){case Rt:return n=0,!1;case Dt:return n=1,!1;case Ot:case Tt:return r=0,!1;case Lt:return r=1,!1;case Ut:return r=2,!1;case Qt:case _t:return r=3,!1}else if(Ye(t)||Ze(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),o)),o){var l=Ct(e,t);a.push(l)}})),{size:r,shape:n,stops:a,position:s,type:2}},Mt=function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Ht[t.name];if(void 0===r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)};var Pt,Ht={"linear-gradient":function(e,t){var n=ct(180),r=[];return Xe(t).forEach((function(t,a){if(0===a){var s=t[0];if(20===s.type&&"to"===s.value)return void(n=ut(t));if(At(s))return void(n=lt(e,s))}var i=Ct(e,t);r.push(i)})),{angle:n,stops:r,type:1}},"-moz-linear-gradient":Ft,"-ms-linear-gradient":Ft,"-o-linear-gradient":Ft,"-webkit-linear-gradient":Ft,"radial-gradient":function(e,t){var n=0,r=3,a=[],s=[];return Xe(t).forEach((function(t,i){var o=!0;if(0===i){var l=!1;o=t.reduce((function(e,t){if(l)if(We(t))switch(t.value){case"center":return s.push(nt),e;case"top":case"left":return s.push(tt),e;case"right":case"bottom":return s.push(rt),e}else(Ze(t)||Ye(t))&&s.push(t);else if(We(t))switch(t.value){case Rt:return n=0,!1;case Dt:return n=1,!1;case"at":return l=!0,!1;case Tt:return r=0,!1;case Qt:case Lt:return r=1,!1;case Ot:case Ut:return r=2,!1;case _t:return r=3,!1}else if(Ye(t)||Ze(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),o)}if(o){var A=Ct(e,t);a.push(A)}})),{size:r,shape:n,stops:a,position:s,type:2}},"-moz-radial-gradient":$t,"-ms-radial-gradient":$t,"-o-radial-gradient":$t,"-webkit-radial-gradient":$t,"-webkit-gradient":function(e,t){var n=ct(180),r=[],a=1;return Xe(t).forEach((function(t,n){var s=t[0];if(0===n){if(We(s)&&"linear"===s.value)return void(a=1);if(We(s)&&"radial"===s.value)return void(a=2)}if(18===s.type)if("from"===s.name){var i=ht(e,s.values[0]);r.push({stop:tt,color:i})}else if("to"===s.name)i=ht(e,s.values[0]),r.push({stop:rt,color:i});else if("color-stop"===s.name){var o=s.values.filter(qe);if(2===o.length){i=ht(e,o[1]);var l=o[0];Ve(l)&&r.push({stop:{type:16,number:100*l.number,flags:l.flags},color:i})}}})),1===a?{angle:(n+ct(180))%ct(360),stops:r,type:a}:{size:3,shape:0,stops:r,position:[],type:a}}},zt={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return qe(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!Ht[e.name])}(e)})).map((function(t){return Mt(e,t)}))}},Vt={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(We(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Wt={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Xe(t).map((function(e){return e.filter(Ze)})).map(et)}},Kt={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Xe(t).map((function(e){return e.filter(We).map((function(e){return e.value})).join(" ")})).map(Gt)}},Gt=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Pt||(Pt={}));var jt,qt={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Xe(t).map((function(e){return e.filter(Xt)}))}},Xt=function(e){return We(e)||Ze(e)},Jt=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Yt=Jt("top"),Zt=Jt("right"),en=Jt("bottom"),tn=Jt("left"),nn=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return et(t.filter(Ze))}}},rn=nn("top-left"),an=nn("top-right"),sn=nn("bottom-right"),on=nn("bottom-left"),ln=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},An=ln("top"),un=ln("right"),cn=ln("bottom"),hn=ln("left"),dn=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return ze(t)?t.number:0}}},pn=dn("top"),fn=dn("right"),mn=dn("bottom"),gn=dn("left"),yn={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},bn={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},wn={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(We).reduce((function(e,t){return e|vn(t.value)}),0)}},vn=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},xn={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Bn={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(jt||(jt={}));var kn,Cn={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?jt.STRICT:jt.NORMAL}},Nn={name:"line-height",initialValue:"normal",prefix:!1,type:4},Sn=function(e,t){return We(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Ze(e)?st(e,t):t},In={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Mt(e,t)}},En={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Fn={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Tn=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Ln=Tn("top"),Un=Tn("right"),_n=Tn("bottom"),Rn=Tn("left"),Dn={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(We).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Qn={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},On=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},$n=On("top"),Mn=On("right"),Pn=On("bottom"),Hn=On("left"),zn={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Vn={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Wn={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ge(t[0],"none")?[]:Xe(t).map((function(t){for(var n={color:xt.TRANSPARENT,offsetX:tt,offsetY:tt,blur:tt},r=0,a=0;a<t.length;a++){var s=t[a];Ye(s)?(0===r?n.offsetX=s:1===r?n.offsetY=s:n.blur=s,r++):n.color=ht(e,s)}return n}))}},Kn={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gn={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=jn[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},jn={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),n=t[0],r=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],16===t.length?[n,r,a,s,i,o]:null}},qn={type:16,number:50,flags:4},Xn=[qn,qn],Jn={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Ze);return 2!==n.length?Xn:[n[0],n[1]]}},Yn={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(kn||(kn={}));for(var Zn={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return kn.BREAK_ALL;case"keep-all":return kn.KEEP_ALL;default:return kn.NORMAL}}},er={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Ve(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},tr={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},nr={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Ve(t)?t.number:1}},rr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ar={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(We).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},sr={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},ir={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},or={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return Ve(t)?t.number:We(t)&&"bold"===t.value?700:400}},lr={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(We).map((function(e){return e.value}))}},Ar={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ur=function(e,t){return 0!==(e&t)},cr={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},hr={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],a=t.filter(je),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(20===i.type){var l=o&&Ve(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},dr={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(je),a=0;a<r.length;a++){var s=r[a],i=r[a+1];if(We(s)&&"none"!==s.value){var o=i&&Ve(i)?i.number:0;n.push({counter:s.value,reset:o})}}return n}},pr={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(ze).map((function(t){return tr.parse(e,t)}))}},fr={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],a=t.filter(Ke);if(a.length%2!=0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;r.push({open:i,close:o})}return r}},mr=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},gr={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Ge(t[0],"none")?[]:Xe(t).map((function(t){for(var n={color:255,offsetX:tt,offsetY:tt,blur:tt,spread:tt,inset:!1},r=0,a=0;a<t.length;a++){var s=t[a];Ge(s,"inset")?n.inset=!0:Ye(s)?(0===r?n.offsetX=s:1===r?n.offsetY=s:2===r?n.blur=s:n.spread=s,r++):n.color=ht(e,s)}return n}))}},yr={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[];return t.filter(We).forEach((function(e){switch(e.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}})),[0,1,2].forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n}},br={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},wr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return ze(t)?t.number:0}},vr=function(){function e(e,t){var n,r;this.animationDuration=kr(e,pr,t.animationDuration),this.backgroundClip=kr(e,Bt,t.backgroundClip),this.backgroundColor=kr(e,kt,t.backgroundColor),this.backgroundImage=kr(e,zt,t.backgroundImage),this.backgroundOrigin=kr(e,Vt,t.backgroundOrigin),this.backgroundPosition=kr(e,Wt,t.backgroundPosition),this.backgroundRepeat=kr(e,Kt,t.backgroundRepeat),this.backgroundSize=kr(e,qt,t.backgroundSize),this.borderTopColor=kr(e,Yt,t.borderTopColor),this.borderRightColor=kr(e,Zt,t.borderRightColor),this.borderBottomColor=kr(e,en,t.borderBottomColor),this.borderLeftColor=kr(e,tn,t.borderLeftColor),this.borderTopLeftRadius=kr(e,rn,t.borderTopLeftRadius),this.borderTopRightRadius=kr(e,an,t.borderTopRightRadius),this.borderBottomRightRadius=kr(e,sn,t.borderBottomRightRadius),this.borderBottomLeftRadius=kr(e,on,t.borderBottomLeftRadius),this.borderTopStyle=kr(e,An,t.borderTopStyle),this.borderRightStyle=kr(e,un,t.borderRightStyle),this.borderBottomStyle=kr(e,cn,t.borderBottomStyle),this.borderLeftStyle=kr(e,hn,t.borderLeftStyle),this.borderTopWidth=kr(e,pn,t.borderTopWidth),this.borderRightWidth=kr(e,fn,t.borderRightWidth),this.borderBottomWidth=kr(e,mn,t.borderBottomWidth),this.borderLeftWidth=kr(e,gn,t.borderLeftWidth),this.boxShadow=kr(e,gr,t.boxShadow),this.color=kr(e,yn,t.color),this.direction=kr(e,bn,t.direction),this.display=kr(e,wn,t.display),this.float=kr(e,xn,t.cssFloat),this.fontFamily=kr(e,sr,t.fontFamily),this.fontSize=kr(e,ir,t.fontSize),this.fontStyle=kr(e,Ar,t.fontStyle),this.fontVariant=kr(e,lr,t.fontVariant),this.fontWeight=kr(e,or,t.fontWeight),this.letterSpacing=kr(e,Bn,t.letterSpacing),this.lineBreak=kr(e,Cn,t.lineBreak),this.lineHeight=kr(e,Nn,t.lineHeight),this.listStyleImage=kr(e,In,t.listStyleImage),this.listStylePosition=kr(e,En,t.listStylePosition),this.listStyleType=kr(e,Fn,t.listStyleType),this.marginTop=kr(e,Ln,t.marginTop),this.marginRight=kr(e,Un,t.marginRight),this.marginBottom=kr(e,_n,t.marginBottom),this.marginLeft=kr(e,Rn,t.marginLeft),this.opacity=kr(e,nr,t.opacity);var a=kr(e,Dn,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=kr(e,Qn,t.overflowWrap),this.paddingTop=kr(e,$n,t.paddingTop),this.paddingRight=kr(e,Mn,t.paddingRight),this.paddingBottom=kr(e,Pn,t.paddingBottom),this.paddingLeft=kr(e,Hn,t.paddingLeft),this.paintOrder=kr(e,yr,t.paintOrder),this.position=kr(e,Vn,t.position),this.textAlign=kr(e,zn,t.textAlign),this.textDecorationColor=kr(e,rr,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=kr(e,ar,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=kr(e,Wn,t.textShadow),this.textTransform=kr(e,Kn,t.textTransform),this.transform=kr(e,Gn,t.transform),this.transformOrigin=kr(e,Jn,t.transformOrigin),this.visibility=kr(e,Yn,t.visibility),this.webkitTextStrokeColor=kr(e,br,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=kr(e,wr,t.webkitTextStrokeWidth),this.wordBreak=kr(e,Zn,t.wordBreak),this.zIndex=kr(e,er,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return dt(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return ur(this.display,4)||ur(this.display,33554432)||ur(this.display,268435456)||ur(this.display,536870912)||ur(this.display,67108864)||ur(this.display,134217728)},e}(),xr=function(e,t){this.content=kr(e,cr,t.content),this.quotes=kr(e,fr,t.quotes)},Br=function(e,t){this.counterIncrement=kr(e,hr,t.counterIncrement),this.counterReset=kr(e,dr,t.counterReset)},kr=function(e,t,n){var r=new Pe,a=null!=n?n.toString():t.initialValue;r.write(a);var s=new He(r.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,We(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return lt(e,s.parseComponentValue());case"color":return ht(e,s.parseComponentValue());case"image":return Mt(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Ye(o)?o:tt;case"length-percentage":var l=s.parseComponentValue();return Ze(l)?l:tt;case"time":return tr.parse(e,s.parseComponentValue())}}},Cr=function(e,t){var n=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===n||t===n},Nr=function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Cr(t,3),this.styles=new vr(e,window.getComputedStyle(t,null)),Fa(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),Cr(t,4)&&(this.flags|=16)},Sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ir="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Er=0;Er<64;Er++)Ir[Sr.charCodeAt(Er)]=Er;for(var Fr=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Tr=function(){function e(e,t,n,r,a,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=a,this.data=s}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ur="undefined"==typeof Uint8Array?[]:new Uint8Array(256),_r=0;_r<64;_r++)Ur[Lr.charCodeAt(_r)]=_r;var Rr,Dr=8,Qr=9,Or=11,$r=12,Mr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],a=-1,s="";++a<n;){var i=e[a];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(a+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Pr=function(e){var t,n,r,a=function(e){var t,n,r,a,s,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),u=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<o;t+=4)n=Ir[e.charCodeAt(t)],r=Ir[e.charCodeAt(t+1)],a=Ir[e.charCodeAt(t+2)],s=Ir[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|a>>2,u[l++]=(3&a)<<6|63&s;return A}(e),s=Array.isArray(a)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n}(a):new Uint32Array(a),i=Array.isArray(a)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n}(a):new Uint16Array(a),o=Fr(i,12,s[4]/2),l=2===s[5]?Fr(i,(24+s[4])/2):(t=s,n=Math.ceil((24+s[4])/4),t.slice?t.slice(n,r):new Uint32Array(Array.prototype.slice.call(t,n,r)));return new Tr(s[0],s[1],s[2],s[3],o,l)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Hr="×",zr=function(e){return Pr.get(e)},Vr=function(e,t,n){var r=n-2,a=t[r],s=t[n-1],i=t[n];if(2===s&&3===i)return Hr;if(2===s||3===s||4===s)return"÷";if(2===i||3===i||4===i)return"÷";if(s===Dr&&-1!==[Dr,Qr,Or,$r].indexOf(i))return Hr;if(!(s!==Or&&s!==Qr||i!==Qr&&10!==i))return Hr;if((s===$r||10===s)&&10===i)return Hr;if(13===i||5===i)return Hr;if(7===i)return Hr;if(1===s)return Hr;if(13===s&&14===i){for(;5===a;)a=t[--r];if(14===a)return Hr}if(15===s&&15===i){for(var o=0;15===a;)o++,a=t[--r];if(o%2==0)return Hr}return"÷"},Wr=function(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),n--)}else t.push(a)}return t}(e),n=t.length,r=0,a=0,s=t.map(zr);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=Hr;r<n&&(e=Vr(0,s,++r))===Hr;);if(e!==Hr||r===n){var i=Mr.apply(null,t.slice(a,r));return a=r,{value:i,done:!1}}return{done:!0,value:null}}}},Kr=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Gr=function(e,t,n,r,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},jr=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},qr={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var r=t.getBoundingClientRect(),a=Math.round(r.height);if(e.body.removeChild(n),123===a)return!0}}return!1}(document);return Object.defineProperty(qr,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=qr.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,a=l(r.data).map((function(e){return A(e)})),s=0,i={},o=a.every((function(e,t){n.setStart(r,s),n.setEnd(r,s+e.length);var a=n.getBoundingClientRect();s+=e.length;var o=a.x>i.x||a.y>i.y;return i=a,0===t||o}));return e.body.removeChild(t),o}(document);return Object.defineProperty(qr,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(qr,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var a=new Image,s=t.toDataURL();a.src=s;var i=Gr(n,n,0,0,a);return r.fillStyle="red",r.fillRect(0,0,n,n),jr(i).then((function(t){r.drawImage(t,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var i=e.createElement("div");return i.style.backgroundImage="url("+s+")",i.style.height=n+"px",Kr(a)?jr(Gr(n,n,0,0,i)):Promise.reject(!1)})).then((function(e){return r.drawImage(e,0,0),Kr(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(qr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(qr,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(qr,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(qr,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(qr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Xr=function(e,t){this.text=e,this.bounds=t},Jr=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(r,t);var s=o(e,r);return r.firstChild&&a.replaceChild(r.firstChild,r),s}}return i.EMPTY},Yr=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var a=r.createRange();return a.setStart(e,t),a.setEnd(e,t+n),a},Zr=function(e){if(qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return function(e){for(var t,n=Wr(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r}(e)},ea=function(e,t){return 0!==t.letterSpacing?Zr(e):function(e,t){if(qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return na(e,t)}(e,t)},ta=[32,160,4961,65792,65793,4153,4241],na=function(e,t){for(var n,r=function(e,t){var n=l(e),r=se(n,t),a=r[0],s=r[1],i=r[2],o=n.length,A=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var e=K;u<o&&(e=ae(n,s,a,++u,i))===K;);if(e!==K||u===o){var t=new ie(n,e,A,u);return A=u,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),a=[],s=function(){if(n.value){var e=n.value.slice(),t=l(e),r="";t.forEach((function(e){-1===ta.indexOf(e)?r+=A(e):(r.length&&a.push(r),a.push(A(e)),r="")})),r.length&&a.push(r)}};!(n=r.next()).done;)s();return a},ra=function(e,t,n){this.text=aa(t.data,n.textTransform),this.textBounds=function(e,t,n,r){var a=ea(t,n),s=[],o=0;return a.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(qr.SUPPORT_RANGE_BOUNDS){var a=Yr(r,o,t.length).getClientRects();if(a.length>1){var l=Zr(t),A=0;l.forEach((function(t){s.push(new Xr(t,i.fromDOMRectList(e,Yr(r,A+o,t.length).getClientRects()))),A+=t.length}))}else s.push(new Xr(t,i.fromDOMRectList(e,a)))}else{var u=r.splitText(t.length);s.push(new Xr(t,Jr(e,r))),r=u}else qr.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));o+=t.length})),s}(e,this.text,n,t)},aa=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(sa,ia);case 2:return e.toUpperCase();default:return e}},sa=/(^|\s|:|-|\(|\))([a-z])/g,ia=function(e,t,n){return e.length>0?t+n.toUpperCase():e},oa=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(Nr),la=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(Nr),Aa=function(e){function n(t,n){var r=e.call(this,t,n)||this,a=new XMLSerializer,s=o(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(Nr),ua=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(Nr),ca=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(Nr),ha=[{type:15,flags:0,unit:"px",number:3}],da=[{type:16,flags:0,number:50}],pa="checkbox",fa="radio",ma="password",ga=707406591,ya=function(e){function n(t,n){var r,a,s,o=e.call(this,t,n)||this;switch(o.type=n.type.toLowerCase(),o.checked=n.checked,o.value=0===(s=(a=n).type===ma?new Array(a.value.length+1).join("•"):a.value).length?a.placeholder||"":s,o.type!==pa&&o.type!==fa||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=(r=o.bounds).width>r.height?new i(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new i(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r),o.type){case pa:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=ha;break;case fa:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=da}return o}return t(n,e),n}(Nr),ba=function(e){function n(t,n){var r=e.call(this,t,n)||this,a=n.options[n.selectedIndex||0];return r.value=a&&a.text||"",r}return t(n,e),n}(Nr),wa=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(Nr),va=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=Ca(t,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?vt(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):xt.TRANSPARENT,s=n.contentWindow.document.body?vt(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):xt.TRANSPARENT;r.backgroundColor=dt(a)?dt(s)?r.styles.backgroundColor:s:a}}catch(e){}return r}return t(n,e),n}(Nr),xa=["OL","UL","MENU"],Ba=function(e,t,n,r){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Ia(a)&&a.data.trim().length>0)n.textNodes.push(new ra(e,a,n.styles));else if(Ea(a))if(Va(a)&&a.assignedNodes)a.assignedNodes().forEach((function(t){return Ba(e,t,n,r)}));else{var i=ka(e,a);i.styles.isVisible()&&(Na(a,i,r)?i.flags|=4:Sa(i.styles)&&(i.flags|=2),-1!==xa.indexOf(a.tagName)&&(i.flags|=8),n.elements.push(i),a.slot,a.shadowRoot?Ba(e,a.shadowRoot,i,r):Ha(a)||Ra(a)||za(a)||Ba(e,a,i,r))}},ka=function(e,t){return $a(t)?new oa(e,t):Qa(t)?new la(e,t):Ra(t)?new Aa(e,t):La(t)?new ua(e,t):Ua(t)?new ca(e,t):_a(t)?new ya(e,t):za(t)?new ba(e,t):Ha(t)?new wa(e,t):Ma(t)?new va(e,t):new Nr(e,t)},Ca=function(e,t){var n=ka(e,t);return n.flags|=4,Ba(e,t,n,n),n},Na=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Da(e)&&n.styles.isTransparent()},Sa=function(e){return e.isPositioned()||e.isFloating()},Ia=function(e){return e.nodeType===Node.TEXT_NODE},Ea=function(e){return e.nodeType===Node.ELEMENT_NODE},Fa=function(e){return Ea(e)&&void 0!==e.style&&!Ta(e)},Ta=function(e){return"object"==typeof e.className},La=function(e){return"LI"===e.tagName},Ua=function(e){return"OL"===e.tagName},_a=function(e){return"INPUT"===e.tagName},Ra=function(e){return"svg"===e.tagName},Da=function(e){return"BODY"===e.tagName},Qa=function(e){return"CANVAS"===e.tagName},Oa=function(e){return"VIDEO"===e.tagName},$a=function(e){return"IMG"===e.tagName},Ma=function(e){return"IFRAME"===e.tagName},Pa=function(e){return"STYLE"===e.tagName},Ha=function(e){return"TEXTAREA"===e.tagName},za=function(e){return"SELECT"===e.tagName},Va=function(e){return"SLOT"===e.tagName},Wa=function(e){return e.tagName.indexOf("-")>0},Ka=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){return this.counters[e]||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,a=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(a=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var s=[];return a&&r.forEach((function(e){var n=t.counters[e.counter];s.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),s},e}(),Ga={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ja={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},qa={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Xa={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Ja=function(e,t,n,r,a,s){return e<t||e>n?is(e,a,s.length>0):r.integers.reduce((function(t,n,a){for(;e>=n;)e-=n,t+=r.values[a];return t}),"")+s},Ya=function(e,t,n,r){var a="";do{n||e--,a=r(e)+a,e/=t}while(e*t>=t);return a},Za=function(e,t,n,r,a){var s=n-t+1;return(e<0?"-":"")+(Ya(Math.abs(e),s,r,(function(e){return A(Math.floor(e%s)+t)}))+a)},es=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Ya(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+n},ts=function(e,t,n,r,a,s){if(e<-9999||e>9999)return is(e,4,a.length>0);var i=Math.abs(e),o=a;if(0===i)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var A=i%10;0===A&&ur(s,1)&&""!==o?o=t[A]+o:A>1||1===A&&0===l||1===A&&1===l&&ur(s,2)||1===A&&1===l&&ur(s,4)&&e>100||1===A&&l>1&&ur(s,8)?o=t[A]+(l>0?n[l-1]:"")+o:1===A&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(e<0?r:"")+o},ns="十百千萬",rs="拾佰仟萬",as="マイナス",ss="마이너스",is=function(e,t,n){var r=n?". ":"",a=n?"、":"",s=n?", ":"",i=n?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Za(e,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return es(e,"〇一二三四五六七八九",a);case 6:return Ja(e,1,3999,Ga,3,r).toLowerCase();case 7:return Ja(e,1,3999,Ga,3,r);case 8:return Za(e,945,969,!1,r);case 9:return Za(e,97,122,!1,r);case 10:return Za(e,65,90,!1,r);case 11:return Za(e,1632,1641,!0,r);case 12:case 49:return Ja(e,1,9999,ja,3,r);case 35:return Ja(e,1,9999,ja,3,r).toLowerCase();case 13:return Za(e,2534,2543,!0,r);case 14:case 30:return Za(e,6112,6121,!0,r);case 15:return es(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return es(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return ts(e,"零一二三四五六七八九",ns,"負",a,14);case 47:return ts(e,"零壹貳參肆伍陸柒捌玖",rs,"負",a,15);case 42:return ts(e,"零一二三四五六七八九",ns,"负",a,14);case 41:return ts(e,"零壹贰叁肆伍陆柒捌玖",rs,"负",a,15);case 26:return ts(e,"〇一二三四五六七八九","十百千万",as,a,0);case 25:return ts(e,"零壱弐参四伍六七八九","拾百千万",as,a,7);case 31:return ts(e,"영일이삼사오육칠팔구","십백천만",ss,s,7);case 33:return ts(e,"零一二三四五六七八九","十百千萬",ss,s,0);case 32:return ts(e,"零壹貳參四五六七八九","拾百千",ss,s,7);case 18:return Za(e,2406,2415,!0,r);case 20:return Ja(e,1,19999,Xa,3,r);case 21:return Za(e,2790,2799,!0,r);case 22:return Za(e,2662,2671,!0,r);case 22:return Ja(e,1,10999,qa,3,r);case 23:return es(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return es(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Za(e,3302,3311,!0,r);case 28:return es(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return es(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Za(e,3792,3801,!0,r);case 37:return Za(e,6160,6169,!0,r);case 38:return Za(e,4160,4169,!0,r);case 39:return Za(e,2918,2927,!0,r);case 40:return Za(e,1776,1785,!0,r);case 43:return Za(e,3046,3055,!0,r);case 44:return Za(e,3174,3183,!0,r);case 45:return Za(e,3664,3673,!0,r);case 46:return Za(e,3872,3881,!0,r);default:return Za(e,48,57,!0,r)}},os="data-html2canvas-ignore",ls=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Ka,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,s=us(e,t);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=s.contentWindow,A=l.document,u=ds(s).then((function(){return r(n,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(ys),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,hs(A)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(A,n)})).then((function(){return s}))]:[2,s]}}))}))}));return A.open(),A.write(ms(document.doctype)+"<html></html>"),gs(this.referenceElement.ownerDocument,i,o),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),u},e.prototype.createElementClone=function(e){if(Cr(e,2),Qa(e))return this.createCanvasClone(e);if(Oa(e))return this.createVideoClone(e);if(Pa(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return $a(t)&&($a(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Wa(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return fs(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(e){if(this.context.logger.error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(t){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var a=e.getContext("2d"),s=r.getContext("2d");if(s)if(!this.options.allowTaint&&a)s.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var o=i.getContextAttributes();!1===(null==o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}s.drawImage(e,0,0)}return r}catch(t){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(t){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){Ea(t)&&("SCRIPT"===t.tagName||t.hasAttribute(os)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&Ea(t)&&Pa(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(Ea(a)&&Va(a)&&"function"==typeof a.assignedNodes){var s=a.assignedNodes();s.length&&s.forEach((function(e){return r.appendChildNode(t,e,n)}))}else this.appendChildNode(t,a,n)},e.prototype.cloneNode=function(e,t){if(Ia(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Ea(e)&&(Fa(e)||Ta(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var a=n.getComputedStyle(e),s=n.getComputedStyle(e,":before"),i=n.getComputedStyle(e,":after");this.referenceElement===e&&Fa(r)&&(this.clonedReferenceElement=r),Da(r)&&xs(r);var o=this.counters.parse(new Br(this.context,a)),l=this.resolvePseudoContent(e,r,s,Rr.BEFORE);Wa(e)&&(t=!0),Oa(e)||this.cloneChildNodes(e,r,t),l&&r.insertBefore(l,r.firstChild);var A=this.resolvePseudoContent(e,r,i,Rr.AFTER);return A&&r.appendChild(A),this.counters.pop(o),(a&&(this.options.copyStyles||Ta(e))&&!Ma(e)||t)&&fs(a,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Ha(e)||za(e))&&(Ha(r)||za(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var a=this;if(n){var s=n.content,i=t.ownerDocument;if(i&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==n.display){this.counters.parse(new Br(this.context,n));var o=new xr(this.context,n),l=i.createElement("html2canvaspseudoelement");fs(n,l),o.content.forEach((function(t){if(0===t.type)l.appendChild(i.createTextNode(t.value));else if(22===t.type){var n=i.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(We);r.length&&l.appendChild(i.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var s=t.values.filter(qe),A=s[0],u=s[1];if(A&&We(A)){var c=a.counters.getCounterValue(A.value),h=u&&We(u)?Fn.parse(a.context,u.value):3;l.appendChild(i.createTextNode(is(c,h,!1)))}}else if("counters"===t.name){var d=t.values.filter(qe),p=(A=d[0],d[1]);if(u=d[2],A&&We(A)){var f=a.counters.getCounterValues(A.value),m=u&&We(u)?Fn.parse(a.context,u.value):3,g=p&&0===p.type?p.value:"",y=f.map((function(e){return is(e,m,!1)})).join(g);l.appendChild(i.createTextNode(y))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(i.createTextNode(mr(o.quotes,a.quoteDepth++,!0)));break;case"close-quote":l.appendChild(i.createTextNode(mr(o.quotes,--a.quoteDepth,!1)));break;default:l.appendChild(i.createTextNode(t.value))}})),l.className=bs+" "+ws;var A=r===Rr.BEFORE?" "+bs:" "+ws;return Ta(t)?t.className.baseValue+=A:t.className+=A,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Rr||(Rr={}));var As,us=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(os,"true"),e.body.appendChild(n),n},cs=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},hs=function(e){return Promise.all([].slice.call(e.images,0).map(cs))},ds=function(e){return new Promise((function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var a=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval((function(){a.body.childNodes.length>0&&"complete"===a.readyState&&(clearInterval(n),t(e))}),50)}}))},ps=["all","d","content"],fs=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===ps.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},ms=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},gs=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},ys=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},bs="___html2canvas___pseudoelement_before",ws="___html2canvas___pseudoelement_after",vs='{\n    content: "" !important;\n    display: none !important;\n}',xs=function(e){Bs(e,"."+bs+":before"+vs+"\n         ."+ws+":after"+vs)},Bs=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},ks=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Cs=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:Ls(e)||Es(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,i=this;return a(this,(function(a){switch(a.label){case 0:return t=ks.isSameOrigin(e),n=!Fs(e)&&!0===this._options.useCORS&&qr.SUPPORT_CORS_IMAGES&&!t,r=!Fs(e)&&!t&&!Ls(e)&&"string"==typeof this._options.proxy&&qr.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||Fs(e)||Ls(e)||r||n?(s=e,r?[4,this.proxy(s)]:[3,2]):[2];case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(Ts(s)||n)&&(r.crossOrigin="anonymous"),r.src=s,!0===r.complete&&setTimeout((function(){return e(r)}),500),i._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")}),i._options.imageTimeout)}))];case 3:return[2,a.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise((function(a,s){var i=qr.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===i)a(o.response);else{var e=new FileReader;e.addEventListener("load",(function(){return a(e.result)}),!1),e.addEventListener("error",(function(e){return s(e)}),!1),e.readAsDataURL(o.response)}else s("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=s;var l=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&o instanceof XMLHttpRequest&&(o.responseType=i),t._options.imageTimeout){var A=t._options.imageTimeout;o.timeout=A,o.ontimeout=function(){return s("Timed out ("+A+"ms) proxying "+r)}}o.send()}))},e}(),Ns=/^data:image\/svg\+xml/i,Ss=/^data:image\/.*;base64,/i,Is=/^data:image\/.*/i,Es=function(e){return qr.SUPPORT_SVG_DRAWING||!Us(e)},Fs=function(e){return Is.test(e)},Ts=function(e){return Ss.test(e)},Ls=function(e){return"blob"===e.substr(0,4)},Us=function(e){return"svg"===e.substr(-3).toLowerCase()||Ns.test(e)},_s=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Rs=function(e,t,n){return new _s(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Ds=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Rs(this.start,this.startControl,t),a=Rs(this.startControl,this.endControl,t),s=Rs(this.endControl,this.end,t),i=Rs(r,a,t),o=Rs(a,s,t),l=Rs(i,o,t);return n?new e(this.start,r,i,l):new e(l,o,s,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Qs=function(e){return 1===e.type},Os=function(e){var t=e.styles,n=e.bounds,r=at(t.borderTopLeftRadius,n.width,n.height),a=r[0],s=r[1],i=at(t.borderTopRightRadius,n.width,n.height),o=i[0],l=i[1],A=at(t.borderBottomRightRadius,n.width,n.height),u=A[0],c=A[1],h=at(t.borderBottomLeftRadius,n.width,n.height),d=h[0],p=h[1],f=[];f.push((a+o)/n.width),f.push((d+u)/n.width),f.push((s+p)/n.height),f.push((l+c)/n.height);var m=Math.max.apply(Math,f);m>1&&(a/=m,s/=m,o/=m,l/=m,u/=m,c/=m,d/=m,p/=m);var g=n.width-o,y=n.height-c,b=n.width-u,w=n.height-p,v=t.borderTopWidth,x=t.borderRightWidth,B=t.borderBottomWidth,k=t.borderLeftWidth,C=st(t.paddingTop,e.bounds.width),N=st(t.paddingRight,e.bounds.width),S=st(t.paddingBottom,e.bounds.width),I=st(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||s>0?$s(n.left+k/3,n.top+v/3,a-k/3,s-v/3,As.TOP_LEFT):new _s(n.left+k/3,n.top+v/3),this.topRightBorderDoubleOuterBox=a>0||s>0?$s(n.left+g,n.top+v/3,o-x/3,l-v/3,As.TOP_RIGHT):new _s(n.left+n.width-x/3,n.top+v/3),this.bottomRightBorderDoubleOuterBox=u>0||c>0?$s(n.left+b,n.top+y,u-x/3,c-B/3,As.BOTTOM_RIGHT):new _s(n.left+n.width-x/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=d>0||p>0?$s(n.left+k/3,n.top+w,d-k/3,p-B/3,As.BOTTOM_LEFT):new _s(n.left+k/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=a>0||s>0?$s(n.left+2*k/3,n.top+2*v/3,a-2*k/3,s-2*v/3,As.TOP_LEFT):new _s(n.left+2*k/3,n.top+2*v/3),this.topRightBorderDoubleInnerBox=a>0||s>0?$s(n.left+g,n.top+2*v/3,o-2*x/3,l-2*v/3,As.TOP_RIGHT):new _s(n.left+n.width-2*x/3,n.top+2*v/3),this.bottomRightBorderDoubleInnerBox=u>0||c>0?$s(n.left+b,n.top+y,u-2*x/3,c-2*B/3,As.BOTTOM_RIGHT):new _s(n.left+n.width-2*x/3,n.top+n.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=d>0||p>0?$s(n.left+2*k/3,n.top+w,d-2*k/3,p-2*B/3,As.BOTTOM_LEFT):new _s(n.left+2*k/3,n.top+n.height-2*B/3),this.topLeftBorderStroke=a>0||s>0?$s(n.left+k/2,n.top+v/2,a-k/2,s-v/2,As.TOP_LEFT):new _s(n.left+k/2,n.top+v/2),this.topRightBorderStroke=a>0||s>0?$s(n.left+g,n.top+v/2,o-x/2,l-v/2,As.TOP_RIGHT):new _s(n.left+n.width-x/2,n.top+v/2),this.bottomRightBorderStroke=u>0||c>0?$s(n.left+b,n.top+y,u-x/2,c-B/2,As.BOTTOM_RIGHT):new _s(n.left+n.width-x/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=d>0||p>0?$s(n.left+k/2,n.top+w,d-k/2,p-B/2,As.BOTTOM_LEFT):new _s(n.left+k/2,n.top+n.height-B/2),this.topLeftBorderBox=a>0||s>0?$s(n.left,n.top,a,s,As.TOP_LEFT):new _s(n.left,n.top),this.topRightBorderBox=o>0||l>0?$s(n.left+g,n.top,o,l,As.TOP_RIGHT):new _s(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||c>0?$s(n.left+b,n.top+y,u,c,As.BOTTOM_RIGHT):new _s(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||p>0?$s(n.left,n.top+w,d,p,As.BOTTOM_LEFT):new _s(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||s>0?$s(n.left+k,n.top+v,Math.max(0,a-k),Math.max(0,s-v),As.TOP_LEFT):new _s(n.left+k,n.top+v),this.topRightPaddingBox=o>0||l>0?$s(n.left+Math.min(g,n.width-x),n.top+v,g>n.width+x?0:Math.max(0,o-x),Math.max(0,l-v),As.TOP_RIGHT):new _s(n.left+n.width-x,n.top+v),this.bottomRightPaddingBox=u>0||c>0?$s(n.left+Math.min(b,n.width-k),n.top+Math.min(y,n.height-B),Math.max(0,u-x),Math.max(0,c-B),As.BOTTOM_RIGHT):new _s(n.left+n.width-x,n.top+n.height-B),this.bottomLeftPaddingBox=d>0||p>0?$s(n.left+k,n.top+Math.min(w,n.height-B),Math.max(0,d-k),Math.max(0,p-B),As.BOTTOM_LEFT):new _s(n.left+k,n.top+n.height-B),this.topLeftContentBox=a>0||s>0?$s(n.left+k+I,n.top+v+C,Math.max(0,a-(k+I)),Math.max(0,s-(v+C)),As.TOP_LEFT):new _s(n.left+k+I,n.top+v+C),this.topRightContentBox=o>0||l>0?$s(n.left+Math.min(g,n.width+k+I),n.top+v+C,g>n.width+k+I?0:o-k+I,l-(v+C),As.TOP_RIGHT):new _s(n.left+n.width-(x+N),n.top+v+C),this.bottomRightContentBox=u>0||c>0?$s(n.left+Math.min(b,n.width-(k+I)),n.top+Math.min(y,n.height+v+C),Math.max(0,u-(x+N)),c-(B+S),As.BOTTOM_RIGHT):new _s(n.left+n.width-(x+N),n.top+n.height-(B+S)),this.bottomLeftContentBox=d>0||p>0?$s(n.left+k+I,n.top+w,Math.max(0,d-(k+I)),p-(B+S),As.BOTTOM_LEFT):new _s(n.left+k+I,n.top+n.height-(B+S))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(As||(As={}));var $s=function(e,t,n,r,a){var s=(Math.sqrt(2)-1)/3*4,i=n*s,o=r*s,l=e+n,A=t+r;switch(a){case As.TOP_LEFT:return new Ds(new _s(e,A),new _s(e,A-o),new _s(l-i,t),new _s(l,t));case As.TOP_RIGHT:return new Ds(new _s(e,t),new _s(e+i,t),new _s(l,A-o),new _s(l,A));case As.BOTTOM_RIGHT:return new Ds(new _s(l,t),new _s(l,t+o),new _s(e+i,A),new _s(e,A));case As.BOTTOM_LEFT:default:return new Ds(new _s(l,A),new _s(l-i,A),new _s(e,t+o),new _s(e,t))}},Ms=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Ps=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Hs=function(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6},zs=function(e,t){this.path=e,this.target=t,this.type=1},Vs=function(e){this.opacity=e,this.type=2,this.target=6},Ws=function(e){return 1===e.type},Ks=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},Gs=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},js=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Os(this.container),this.container.styles.opacity<1&&this.effects.push(new Vs(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new Hs(n,r,a))}if(0!==this.container.styles.overflowX){var s=Ms(this.curves),i=Ps(this.curves);Ks(s,i)?this.effects.push(new zs(s,6)):(this.effects.push(new zs(s,2)),this.effects.push(new zs(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var a=n.effects.filter((function(e){return!Ws(e)}));if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,a),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var s=Ms(n.curves),i=Ps(n.curves);Ks(s,i)||r.unshift(new zs(i,6))}}else r.unshift.apply(r,a);n=n.parent}return r.filter((function(t){return ur(t.target,e)}))},e}(),qs=function(e,t,n,r){e.container.elements.forEach((function(a){var s=ur(a.flags,4),i=ur(a.flags,2),o=new js(a,e);ur(a.styles.display,2048)&&r.push(o);var l=ur(a.flags,8)?[]:r;if(s||i){var A=s||a.styles.isPositioned()?n:t,u=new Gs(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var c=a.styles.zIndex.order;if(c<0){var h=0;A.negativeZIndex.some((function(e,t){return c>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),A.negativeZIndex.splice(h,0,u)}else if(c>0){var d=0;A.positiveZIndex.some((function(e,t){return c>=e.element.container.styles.zIndex.order?(d=t+1,!1):d>0})),A.positiveZIndex.splice(d,0,u)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else a.styles.isFloating()?A.nonPositionedFloats.push(u):A.nonPositionedInlineLevel.push(u);qs(o,u,s?u:n,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),qs(o,t,n,l);ur(a.flags,8)&&Xs(a,l)}))},Xs=function(e,t){for(var n=e instanceof ca?e.start:1,r=e instanceof ca&&e.reversed,a=0;a<t.length;a++){var s=t[a];s.container instanceof ua&&"number"==typeof s.container.value&&0!==s.container.value&&(n=s.container.value),s.listValue=is(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},Js=function(e,t){switch(t){case 0:return Zs(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Zs(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Zs(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Zs(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Ys=function(e,t){var n=[];return Qs(e)?n.push(e.subdivide(.5,!1)):n.push(e),Qs(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Zs=function(e,t,n,r){var a=[];return Qs(e)?a.push(e.subdivide(.5,!1)):a.push(e),Qs(n)?a.push(n.subdivide(.5,!0)):a.push(n),Qs(r)?a.push(r.subdivide(.5,!0).reverse()):a.push(r),Qs(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},ei=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},ti=function(e){var t=e.styles,n=e.bounds,r=st(t.paddingLeft,n.width),a=st(t.paddingRight,n.width),s=st(t.paddingTop,n.width),i=st(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},ni=function(e,t,n){var r=function(e,t){return 0===e?t.bounds:2===e?ti(t):ei(t)}(ii(e.styles.backgroundOrigin,t),e),a=function(e,t){return 0===e?t.bounds:2===e?ti(t):ei(t)}(ii(e.styles.backgroundClip,t),e),s=si(ii(e.styles.backgroundSize,t),n,r),i=s[0],o=s[1],l=at(ii(e.styles.backgroundPosition,t),r.width-i,r.height-o);return[oi(ii(e.styles.backgroundRepeat,t),l,s,r,a),Math.round(r.left+l[0]),Math.round(r.top+l[1]),i,o]},ri=function(e){return We(e)&&e.value===Pt.AUTO},ai=function(e){return"number"==typeof e},si=function(e,t,n){var r=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Ze(i)&&o&&Ze(o))return[st(i,n.width),st(o,n.height)];var l=ai(s);if(We(i)&&(i.value===Pt.CONTAIN||i.value===Pt.COVER))return ai(s)?n.width/n.height<s!=(i.value===Pt.COVER)?[n.width,n.width/s]:[n.height*s,n.height]:[n.width,n.height];var A=ai(r),u=ai(a),c=A||u;if(ri(i)&&(!o||ri(o)))return A&&u?[r,a]:l||c?c&&l?[A?r:a*s,u?a:r/s]:[A?r:n.width,u?a:n.height]:[n.width,n.height];if(l){var h=0,d=0;return Ze(i)?h=st(i,n.width):Ze(o)&&(d=st(o,n.height)),ri(i)?h=d*s:o&&!ri(o)||(d=h/s),[h,d]}var p=null,f=null;if(Ze(i)?p=st(i,n.width):o&&Ze(o)&&(f=st(o,n.height)),null===p||o&&!ri(o)||(f=A&&u?p/r*a:n.height),null!==f&&ri(i)&&(p=A&&u?f/a*r:n.width),null!==p&&null!==f)return[p,f];throw new Error("Unable to calculate background-size for element")},ii=function(e,t){var n=e[t];return void 0===n?e[0]:n},oi=function(e,t,n,r,a){var s=t[0],i=t[1],o=n[0],l=n[1];switch(e){case 2:return[new _s(Math.round(r.left),Math.round(r.top+i)),new _s(Math.round(r.left+r.width),Math.round(r.top+i)),new _s(Math.round(r.left+r.width),Math.round(l+r.top+i)),new _s(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new _s(Math.round(r.left+s),Math.round(r.top)),new _s(Math.round(r.left+s+o),Math.round(r.top)),new _s(Math.round(r.left+s+o),Math.round(r.height+r.top)),new _s(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new _s(Math.round(r.left+s),Math.round(r.top+i)),new _s(Math.round(r.left+s+o),Math.round(r.top+i)),new _s(Math.round(r.left+s+o),Math.round(r.top+i+l)),new _s(Math.round(r.left+s),Math.round(r.top+i+l))];default:return[new _s(Math.round(a.left),Math.round(a.top)),new _s(Math.round(a.left+a.width),Math.round(a.top)),new _s(Math.round(a.left+a.width),Math.round(a.height+a.top)),new _s(Math.round(a.left),Math.round(a.height+a.top))]}},li="Hidden Text",Ai=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),a=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(li)),n.appendChild(a),n.appendChild(r);var i=r.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(li)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:i,middle:o}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),ui=function(e,t){this.context=e,this.options=t},ci=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new Ai(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},n.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Ws(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},n.prototype.renderNode=function(e){return r(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return ur(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Zr(e.text).reduce((function(t,a){return r.ctx.fillText(a,t,e.bounds.top+n),t+r.ctx.measureText(a).width}),e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=mi(e.fontFamily).join(", "),r=ze(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s,i,o,l,A,u,c=this;return a(this,(function(a){return n=this.createFontStyle(t),r=n[0],s=n[1],i=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(s,i),l=o.baseline,A=o.middle,u=t.paintOrder,e.textBounds.forEach((function(e){u.forEach((function(n){switch(n){case 0:c.ctx.fillStyle=pt(t.color),c.renderTextWithLetterSpacing(e,t.letterSpacing,l);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach((function(n){c.ctx.shadowColor=pt(n.color),c.ctx.shadowOffsetX=n.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=n.offsetY.number*c.options.scale,c.ctx.shadowBlur=n.blur.number,c.renderTextWithLetterSpacing(e,t.letterSpacing,l)})),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),t.textDecorationLine.length&&(c.ctx.fillStyle=pt(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:c.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+A),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(c.ctx.strokeStyle=pt(t.webkitTextStrokeColor),c.ctx.lineWidth=t.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}}))})),[2]}))}))},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=ti(e),a=Ps(t);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,(function(){var t,r,s,o,l,A,u,c,h,d,p,f,m,g,y,b,w,v;return a(this,(function(a){switch(a.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,s=t.styles,o=0,l=t.textNodes,a.label=1;case 1:return o<l.length?(A=l[o],[4,this.renderTextNode(A,s)]):[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof oa))return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return y=a.sent(),this.renderReplacedElement(t,r,y),[3,8];case 7:return a.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof la&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Aa))return[3,12];a.label=9;case 9:return a.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return y=a.sent(),this.renderReplacedElement(t,r,y),[3,12];case 11:return a.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof va&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:u=a.sent(),t.width&&t.height&&this.ctx.drawImage(u,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),a.label=14;case 14:if(t instanceof ya&&(c=Math.min(t.bounds.width,t.bounds.height),t.type===pa?t.checked&&(this.ctx.save(),this.path([new _s(t.bounds.left+.39363*c,t.bounds.top+.79*c),new _s(t.bounds.left+.16*c,t.bounds.top+.5549*c),new _s(t.bounds.left+.27347*c,t.bounds.top+.44071*c),new _s(t.bounds.left+.39694*c,t.bounds.top+.5649*c),new _s(t.bounds.left+.72983*c,t.bounds.top+.23*c),new _s(t.bounds.left+.84*c,t.bounds.top+.34085*c),new _s(t.bounds.left+.39363*c,t.bounds.top+.79*c)]),this.ctx.fillStyle=pt(ga),this.ctx.fill(),this.ctx.restore()):t.type===fa&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+c/2,t.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=pt(ga),this.ctx.fill(),this.ctx.restore())),hi(t)&&t.value.length){switch(h=this.createFontStyle(s),w=h[0],d=h[1],p=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=pt(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=pi(t.styles.textAlign),v=ti(t),f=0,t.styles.textAlign){case 1:f+=v.width/2;break;case 2:f+=v.width}m=v.add(f,0,0,-v.height/2+1),this.ctx.save(),this.path([new _s(v.left,v.top),new _s(v.left+v.width,v.top),new _s(v.left+v.width,v.top+v.height),new _s(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Xr(t.value,m),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ur(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];y=void 0,b=g.url,a.label=15;case 15:return a.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=a.sent(),this.ctx.drawImage(y,t.bounds.left-(y.width+10),t.bounds.top),[3,18];case 17:return a.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=pt(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new i(t.bounds.left,t.bounds.top+st(t.styles.paddingTop,t.bounds.width),t.bounds.width,Sn(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Xr(e.listValue,v),s.letterSpacing,Sn(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),a.label=20;case 20:return[2]}}))}))},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,i,o,l,A,u,c,h,d,p,f,m;return a(this,(function(a){switch(a.label){case 0:return ur(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:a.sent(),t=0,n=e.negativeZIndex,a.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:a.sent(),a.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:a.sent(),r=0,s=e.nonInlineLevel,a.label=7;case 7:return r<s.length?(m=s[r],[4,this.renderNode(m)]):[3,10];case 8:a.sent(),a.label=9;case 9:return r++,[3,7];case 10:i=0,o=e.nonPositionedFloats,a.label=11;case 11:return i<o.length?(m=o[i],[4,this.renderStack(m)]):[3,14];case 12:a.sent(),a.label=13;case 13:return i++,[3,11];case 14:l=0,A=e.nonPositionedInlineLevel,a.label=15;case 15:return l<A.length?(m=A[l],[4,this.renderStack(m)]):[3,18];case 16:a.sent(),a.label=17;case 17:return l++,[3,15];case 18:u=0,c=e.inlineLevel,a.label=19;case 19:return u<c.length?(m=c[u],[4,this.renderNode(m)]):[3,22];case 20:a.sent(),a.label=21;case 21:return u++,[3,19];case 22:h=0,d=e.zeroOrAutoZIndexOrTransformedOrOpacity,a.label=23;case 23:return h<d.length?(m=d[h],[4,this.renderStack(m)]):[3,26];case 24:a.sent(),a.label=25;case 25:return h++,[3,23];case 26:p=0,f=e.positiveZIndex,a.label=27;case 27:return p<f.length?(m=f[p],[4,this.renderStack(m)]):[3,30];case 28:a.sent(),a.label=29;case 29:return p++,[3,27];case 30:return[2]}}))}))},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var r=Qs(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Qs(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var a=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return a.width=Math.max(1,t),a.height=Math.max(1,n),a.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),a},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,i,o;return a(this,(function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var s,i,o,l,A,u,c,h,d,p,f,m,g,y,b,w,v,x,B,k,C,N,S,I,E,F,T,L,U,_,R;return a(this,(function(a){switch(a.label){case 0:if(0!==n.type)return[3,5];s=void 0,i=n.url,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.context.cache.match(i)];case 2:return s=a.sent(),[3,4];case 3:return a.sent(),r.context.logger.error("Error loading background-image "+i),[3,4];case 4:return s&&(o=ni(e,t,[s.width,s.height,s.width/s.height]),w=o[0],N=o[1],S=o[2],B=o[3],k=o[4],y=r.ctx.createPattern(r.resizeImage(s,B,k),"repeat"),r.renderRepeat(w,y,N,S)),[3,6];case 5:1===n.type?(l=ni(e,t,[null,null,null]),w=l[0],N=l[1],S=l[2],B=l[3],k=l[4],A=St(n.angle,B,k),u=A[0],c=A[1],h=A[2],d=A[3],p=A[4],(f=document.createElement("canvas")).width=B,f.height=k,m=f.getContext("2d"),g=m.createLinearGradient(c,d,h,p),Nt(n.stops,u).forEach((function(e){return g.addColorStop(e.stop,pt(e.color))})),m.fillStyle=g,m.fillRect(0,0,B,k),B>0&&k>0&&(y=r.ctx.createPattern(f,"repeat"),r.renderRepeat(w,y,N,S))):function(e){return 2===e.type}(n)&&(b=ni(e,t,[null,null,null]),w=b[0],v=b[1],x=b[2],B=b[3],k=b[4],C=0===n.position.length?[nt]:n.position,N=st(C[0],B),S=st(C[C.length-1],k),I=function(e,t,n,r,a){var s=0,i=0;switch(e.size){case 0:0===e.shape?s=i=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-a)):1===e.shape&&(s=Math.min(Math.abs(t),Math.abs(t-r)),i=Math.min(Math.abs(n),Math.abs(n-a)));break;case 2:if(0===e.shape)s=i=Math.min(It(t,n),It(t,n-a),It(t-r,n),It(t-r,n-a));else if(1===e.shape){var o=Math.min(Math.abs(n),Math.abs(n-a))/Math.min(Math.abs(t),Math.abs(t-r)),l=Et(r,a,t,n,!0),A=l[0],u=l[1];i=o*(s=It(A-t,(u-n)/o))}break;case 1:0===e.shape?s=i=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-a)):1===e.shape&&(s=Math.max(Math.abs(t),Math.abs(t-r)),i=Math.max(Math.abs(n),Math.abs(n-a)));break;case 3:if(0===e.shape)s=i=Math.max(It(t,n),It(t,n-a),It(t-r,n),It(t-r,n-a));else if(1===e.shape){o=Math.max(Math.abs(n),Math.abs(n-a))/Math.max(Math.abs(t),Math.abs(t-r));var c=Et(r,a,t,n,!1);A=c[0],u=c[1],i=o*(s=It(A-t,(u-n)/o))}}return Array.isArray(e.size)&&(s=st(e.size[0],r),i=2===e.size.length?st(e.size[1],a):s),[s,i]}(n,N,S,B,k),E=I[0],F=I[1],E>0&&F>0&&(T=r.ctx.createRadialGradient(v+N,x+S,0,v+N,x+S,E),Nt(n.stops,2*E).forEach((function(e){return T.addColorStop(e.stop,pt(e.color))})),r.path(w),r.ctx.fillStyle=T,E!==F?(L=e.bounds.left+.5*e.bounds.width,U=e.bounds.top+.5*e.bounds.height,R=1/(_=F/E),r.ctx.save(),r.ctx.translate(L,U),r.ctx.transform(1,0,0,_,0,0),r.ctx.translate(-L,-U),r.ctx.fillRect(v,R*(x-U)+U,B,k*R),r.ctx.restore()):r.ctx.fill())),a.label=6;case 6:return t--,[2]}}))},r=this,s=0,i=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return s<i.length?(o=i[s],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,(function(){return a(this,(function(r){return this.path(Js(n,t)),this.ctx.fillStyle=pt(e),this.ctx.fill(),[2]}))}))},n.prototype.renderDoubleBorder=function(e,t,n,s){return r(this,void 0,void 0,(function(){var r,i;return a(this,(function(a){switch(a.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,s)]:[3,2];case 1:return a.sent(),[2];case 2:return r=function(e,t){switch(t){case 0:return Zs(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Zs(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Zs(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Zs(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(s,n),this.path(r),this.ctx.fillStyle=pt(e),this.ctx.fill(),i=function(e,t){switch(t){case 0:return Zs(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Zs(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Zs(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Zs(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(s,n),this.path(i),this.ctx.fill(),[2]}}))}))},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s,i,o,l,A,u=this;return a(this,(function(a){switch(a.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!dt(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],s=di(ii(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),dt(t.backgroundColor)||(this.ctx.fillStyle=pt(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:a.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){u.ctx.save();var n,r,a,s,i,o=Ms(e.curves),l=t.inset?0:1e4,A=(n=o,r=-l+(t.inset?1:-1)*t.spread.number,a=(t.inset?1:-1)*t.spread.number,s=t.spread.number*(t.inset?-2:2),i=t.spread.number*(t.inset?-2:2),n.map((function(e,t){switch(t){case 0:return e.add(r,a);case 1:return e.add(r+s,a);case 2:return e.add(r+s,a+i);case 3:return e.add(r,a+i)}return e})));t.inset?(u.path(o),u.ctx.clip(),u.mask(A)):(u.mask(o),u.ctx.clip(),u.path(A)),u.ctx.shadowOffsetX=t.offsetX.number+l,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=pt(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?pt(t.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()})),a.label=2;case 2:i=0,o=0,l=r,a.label=3;case 3:return o<l.length?0!==(A=l[o]).style&&!dt(A.color)&&A.width>0?2!==A.style?[3,5]:[4,this.renderDashedDottedBorder(A.color,A.width,i,e.curves,2)]:[3,11]:[3,13];case 4:return a.sent(),[3,11];case 5:return 3!==A.style?[3,7]:[4,this.renderDashedDottedBorder(A.color,A.width,i,e.curves,3)];case 6:return a.sent(),[3,11];case 7:return 4!==A.style?[3,9]:[4,this.renderDoubleBorder(A.color,A.width,i,e.curves)];case 8:return a.sent(),[3,11];case 9:return[4,this.renderSolidBorder(A.color,i,e.curves)];case 10:a.sent(),a.label=11;case 11:i++,a.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},n.prototype.renderDashedDottedBorder=function(e,t,n,s,i){return r(this,void 0,void 0,(function(){var r,o,l,A,u,c,h,d,p,f,m,g,y,b,w,v;return a(this,(function(a){return this.ctx.save(),r=function(e,t){switch(t){case 0:return Ys(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Ys(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Ys(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return Ys(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(s,n),o=Js(s,n),2===i&&(this.path(o),this.ctx.clip()),Qs(o[0])?(l=o[0].start.x,A=o[0].start.y):(l=o[0].x,A=o[0].y),Qs(o[1])?(u=o[1].end.x,c=o[1].end.y):(u=o[1].x,c=o[1].y),h=0===n||2===n?Math.abs(l-u):Math.abs(A-c),this.ctx.beginPath(),3===i?this.formatPath(r):this.formatPath(o.slice(0,2)),d=t<3?3*t:2*t,p=t<3?2*t:t,3===i&&(d=t,p=t),f=!0,h<=2*d?f=!1:h<=2*d+p?(d*=m=h/(2*d+p),p*=m):(g=Math.floor((h+p)/(d+p)),y=(h-g*d)/(g-1),p=(b=(h-(g+1)*d)/g)<=0||Math.abs(p-y)<Math.abs(p-b)?y:b),f&&(3===i?this.ctx.setLineDash([0,d+p]):this.ctx.setLineDash([d,p])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=pt(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Qs(o[0])&&(w=o[3],v=o[0],this.ctx.beginPath(),this.formatPath([new _s(w.end.x,w.end.y),new _s(v.start.x,v.start.y)]),this.ctx.stroke()),Qs(o[1])&&(w=o[1],v=o[2],this.ctx.beginPath(),this.formatPath([new _s(w.end.x,w.end.y),new _s(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=pt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=new js(e,null),a=new Gs(r),qs(r,a,a,s=[]),Xs(r.container,s),t=a,[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}var r,a,s}))}))},n}(ui),hi=function(e){return e instanceof wa||e instanceof ba||e instanceof ya&&e.type!==fa&&e.type!==pa},di=function(e,t){switch(e){case 0:return Ms(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);default:return Ps(t)}},pi=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},fi=["-apple-system","system-ui"],mi=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===fi.indexOf(e)})):e},gi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return t=Gr(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,yi(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=pt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},n}(ui),yi=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},bi=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,s([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,s([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),wi=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new bi({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new Cs(this,t)}return e.instanceCount=1,e}();"undefined"!=typeof window&&ks.setContext(window);var vi=function(e,t){return r(void 0,void 0,void 0,(function(){var r,s,l,A,u,c,h,d,p,f,m,g,y,b,w,v,x,B,k,C,N,S,I,E,F,T,L,U,_,R,D,Q,O,$,M,P,H,z;return a(this,(function(a){switch(a.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(s=r.defaultView))throw new Error("Document is not attached to a Window");return l={allowTaint:null!==(S=t.allowTaint)&&void 0!==S&&S,imageTimeout:null!==(I=t.imageTimeout)&&void 0!==I?I:15e3,proxy:t.proxy,useCORS:null!==(E=t.useCORS)&&void 0!==E&&E},A=n({logging:null===(F=t.logging)||void 0===F||F,cache:t.cache},l),u={windowWidth:null!==(T=t.windowWidth)&&void 0!==T?T:s.innerWidth,windowHeight:null!==(L=t.windowHeight)&&void 0!==L?L:s.innerHeight,scrollX:null!==(U=t.scrollX)&&void 0!==U?U:s.pageXOffset,scrollY:null!==(_=t.scrollY)&&void 0!==_?_:s.pageYOffset},c=new i(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),h=new wi(A,c),d=null!==(R=t.foreignObjectRendering)&&void 0!==R&&R,p={allowTaint:null!==(D=t.allowTaint)&&void 0!==D&&D,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:d,copyStyles:d},h.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),f=new ls(h,e,p),(m=f.clonedReferenceElement)?[4,f.toIFrame(r,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=a.sent(),y=Da(m)||"HTML"===m.tagName?function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),a=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new i(0,0,r,a)}(m.ownerDocument):o(h,m),b=y.width,w=y.height,v=y.left,x=y.top,B=xi(h,m,t.backgroundColor),k={canvas:t.canvas,backgroundColor:B,scale:null!==(O=null!==(Q=t.scale)&&void 0!==Q?Q:s.devicePixelRatio)&&void 0!==O?O:1,x:(null!==($=t.x)&&void 0!==$?$:0)+v,y:(null!==(M=t.y)&&void 0!==M?M:0)+x,width:null!==(P=t.width)&&void 0!==P?P:Math.ceil(b),height:null!==(H=t.height)&&void 0!==H?H:Math.ceil(w)},d?(h.logger.debug("Document cloned, using foreign object rendering"),[4,new gi(h,k).render(m)]):[3,3];case 2:return C=a.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+v+","+x+" with size "+b+"x"+w+" using computed rendering"),h.logger.debug("Starting DOM parsing"),N=Ca(h,m),B===N.styles.backgroundColor&&(N.styles.backgroundColor=xt.TRANSPARENT),h.logger.debug("Starting renderer for element at "+k.x+","+k.y+" with size "+k.width+"x"+k.height),[4,new ci(h,k).render(N)];case 4:C=a.sent(),a.label=5;case 5:return(null===(z=t.removeContainer)||void 0===z||z)&&(ls.destroy(g)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,C]}}))}))},xi=function(e,t,n){var r=t.ownerDocument,a=r.documentElement?vt(e,getComputedStyle(r.documentElement).backgroundColor):xt.TRANSPARENT,s=r.body?vt(e,getComputedStyle(r.body).backgroundColor):xt.TRANSPARENT,i="string"==typeof n?vt(e,n):null===n?xt.TRANSPARENT:4294967295;return t===r.documentElement?dt(a)?dt(s)?i:s:a:i};return function(e,t){return void 0===t&&(t={}),vi(e,t)}}()},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},551:()=>{},937:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),a=n.n(r),s=n(6314),i=n.n(s)()(a());i.push([e.id,"/* Container utama untuk menengahkan form di halaman */\n.auth-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: calc(100vh - 150px);\n  padding: 2rem;\n  background-color: #f9fafb;\n}\n\n/* Kartu utama yang membungkus form */\n.auth-card {\n  width: 100%;\n  max-width: 420px;\n  background-color: #ffffff;\n  padding: 2.5rem;\n  border-radius: 0.75rem;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);\n  /* === ANIMASI BARU === */\n  animation: fadeInUp 0.6s ease-out forwards;\n}\n\n/* Menyembunyikan elemen form di awal untuk efek stagger */\n.auth-card > form > * {\n  opacity: 0;\n  animation: subtleFadeIn 0.5s ease-out forwards;\n}\n\n/* Utilitas untuk perataan dan margin */\n.text-center {\n  text-align: center;\n}\n.mb-3 {\n  margin-bottom: 1.5rem;\n}\n.mt-3 {\n  margin-top: 1.5rem;\n}\n\n/* Judul form */\n.auth-card h2 {\n  font-size: 1.875rem;\n  font-weight: 700;\n  color: #111827;\n  margin-bottom: 0.5rem;\n  /* === ANIMASI BARU (Stagger Delay) === */\n  animation-delay: 0.3s;\n}\n\n/* Paragraf/sub-judul */\n.auth-card p {\n  color: #6b7280;\n}\n.auth-card .mb-3 {\n  /* === ANIMASI BARU (Stagger Delay) === */\n  animation-delay: 0.4s;\n}\n\n\n/* Grup form (label + input) */\n.form-group {\n  margin-bottom: 1.25rem;\n}\n/* === ANIMASI BARU (Stagger Delay) === */\n.auth-card .form-group:nth-of-type(1) {\n    animation-delay: 0.5s;\n}\n.auth-card .form-group:nth-of-type(2) {\n    animation-delay: 0.6s;\n}\n\n.form-group label {\n  display: block;\n  font-weight: 600;\n  color: #374151;\n  margin-bottom: 0.5rem;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 0.75rem 1rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.375rem;\n  font-size: 1rem;\n  transition: border-color 0.2s, box-shadow 0.2s;\n}\n\n.form-group input:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);\n}\n\n/* Tombol utama */\n.btn-primary {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.5rem;\n  background-color: #4caf50; /* Warna Hijau */\n  color: #ffffff;\n  font-size: 1rem;\n  font-weight: 600;\n  padding: 0.75rem;\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: background-color 0.2s, transform 0.1s; /* Menambah transisi untuk transform */\n  /* === ANIMASI BARU (Stagger Delay) === */\n  animation-delay: 0.7s;\n}\n\n.btn-primary:hover {\n  background-color: #45a049; /* Hijau lebih gelap saat hover */\n}\n\n/* === EFEK KLIK BARU === */\n.btn-primary:active {\n  transform: scale(0.98); /* Efek tombol ditekan */\n}\n\n/* Paragraf terakhir (link) */\n.auth-card .mt-3 {\n    /* === ANIMASI BARU (Stagger Delay) === */\n    animation-delay: 0.8s;\n}\n\n/* Link untuk ke halaman register */\n.link-primary {\n  color: #4caf50; /* Warna Hijau */\n  font-weight: 600;\n  text-decoration: none;\n}\n\n.link-primary:hover {\n  text-decoration: underline;\n}\n\n/* === DEFINISI KEYFRAMES UNTUK ANIMASI === */\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes subtleFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n/* Tambahkan ini di AuthPage.css */\n.label-group {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 0.5rem;\n}\n\n.link-forgot-password {\n    font-size: 0.875rem; /* 14px */\n    color: #16a34a; /* green-600 */\n    text-decoration: none;\n    font-weight: 500;\n}\n\n.link-forgot-password:hover {\n    text-decoration: underline;\n}",""]);const o=i},961:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(6221)},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1234:()=>{},1247:(e,t,n)=>{"use strict";var r=n(9982),a=n(6540),s=n(961);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function A(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(i(188))}function c(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=c(e)))return t;e=e.sibling}return null}var h=Object.assign,d=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var S=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var I=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var E=Symbol.iterator;function F(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}var T=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===T?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case B:return"Suspense";case k:return"SuspenseList";case S:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case f:return"Portal";case v:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return L(e(t))}catch(e){}}return null}var U=Array.isArray,_=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},Q=[],O=-1;function $(e){return{current:e}}function M(e){0>O||(e.current=Q[O],Q[O]=null,O--)}function P(e,t){O++,Q[O]=e.current,e.current=t}var H=$(null),z=$(null),V=$(null),W=$(null);function K(e,t){switch(P(V,t),P(z,e),P(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ac(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sc(t=ac(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(H),P(H,e)}function G(){M(H),M(z),M(V)}function j(e){null!==e.memoizedState&&P(W,e);var t=H.current,n=sc(t,e.type);t!==n&&(P(z,e),P(H,n))}function q(e){z.current===e&&(M(H),M(z)),W.current===e&&(M(W),jc._currentValue=D)}var X=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,Y=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ae=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,ie=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,Ae=r.unstable_setDisableYieldValue,ue=null,ce=null;function he(e){if("function"==typeof le&&Ae(e),ce&&"function"==typeof ce.setStrictMode)try{ce.setStrictMode(ue,e)}catch(e){}}var de=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(pe(e)/fe|0)|0},pe=Math.log,fe=Math.LN2,me=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,s=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?a=ye(r):0!==(i&=o)?a=ye(i):n||0!==(n=o&~e)&&(a=ye(n)):0!==(o=r&~s)?a=ye(o):0!==i?a=ye(i):n||0!==(n=r&~e)&&(a=ye(n)),0===a?0:0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(n=t&-t)||32===s&&4194048&n)?t:a}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ve(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=me;return!(4194048&(me<<=1))&&(me=256),e}function Be(){var e=ge;return!(62914560&(ge<<=1))&&(ge=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-de(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Se(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-de(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Ie(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ee(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Fe(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:Ah(e.type)}var Te=Math.random().toString(36).slice(2),Le="__reactFiber$"+Te,Ue="__reactProps$"+Te,_e="__reactContainer$"+Te,Re="__reactEvents$"+Te,De="__reactListeners$"+Te,Qe="__reactHandles$"+Te,Oe="__reactResources$"+Te,$e="__reactMarker$"+Te;function Me(e){delete e[Le],delete e[Ue],delete e[Re],delete e[De],delete e[Qe]}function Pe(e){var t=e[Le];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_e]||n[Le]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bc(e);null!==e;){if(n=e[Le])return n;e=bc(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Le]||e[_e]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ve(e){var t=e[Oe];return t||(t=e[Oe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[$e]=!0}var Ke=new Set,Ge={};function je(e,t){qe(e,t),qe(e+"Capture",t)}function qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Xe,Je,Ye=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(a=t,X.call(et,a)||!X.call(Ze,a)&&(Ye.test(a)?et[a]=!0:(Ze[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function at(e){if(void 0===Xe)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var st=!1;function it(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch((function(){}))}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),i=s[0],o=s[1];if(i&&o){var l=i.split("\n"),A=o.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<A.length&&!A[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===A.length)for(r=l.length-1,a=A.length-1;1<=r&&0<=a&&l[r]!==A[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==A[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==A[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return at("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ct(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function dt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function ft(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,a,s,i,o){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?yt(e,i,At(t)):null!=n?yt(e,i,At(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=s&&(e.defaultChecked=!!s),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+At(o):e.removeAttribute("name")}function gt(e,t,n,r,a,s,i,o){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return;n=null!=n?""+At(n):"",t=null!=t?""+At(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:a)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function yt(e,t,n){"number"===t&&dt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+At(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+At(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+At(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function vt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(U(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=At(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Bt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Bt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&kt(e,a,r)}else for(var s in t)t.hasOwnProperty(s)&&kt(e,s,t[s])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),It=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Et(e){return It.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ft=null;function Tt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Ut=null;function _t(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Ue]||null;if(!a)throw Error(i(90));mt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Rt=!1;function Dt(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==Lt||null!==Ut)&&(PA(),Lt&&(t=Lt,e=Ut,Ut=Lt=null,_t(t),e)))for(t=0;t<e.length;t++)_t(e[t])}}function Qt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ue]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Ot=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),$t=!1;if(Ot)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){$t=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(e){$t=!1}var Pt=null,Ht=null,zt=null;function Vt(){if(zt)return zt;var e,t,n=Ht,r=n.length,a="value"in Pt?Pt.value:Pt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return zt=a.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function jt(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var qt,Xt,Jt,Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=jt(Yt),en=h({},Yt,{view:0,detail:0}),tn=jt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(qt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=qt=0,Jt=e),qt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=jt(nn),an=jt(h({},nn,{dataTransfer:0})),sn=jt(h({},en,{relatedTarget:0})),on=jt(h({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=jt(h({},Yt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),An=jt(h({},Yt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return dn}var fn=jt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=jt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=jt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=jt(h({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=jt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=jt(h({},Yt,{newState:0,oldState:0})),vn=[9,13,27,32],xn=Ot&&"CompositionEvent"in window,Bn=null;Ot&&"documentMode"in document&&(Bn=document.documentMode);var kn=Ot&&"TextEvent"in window&&!Bn,Cn=Ot&&(!xn||Bn&&8<Bn&&11>=Bn),Nn=String.fromCharCode(32),Sn=!1;function In(e,t){switch(e){case"keyup":return-1!==vn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function En(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1,Tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Tn[e.type]:"textarea"===t}function Un(e,t,n,r){Lt?Ut?Ut.push(r):Ut=[r]:Lt=r,0<(t=Vu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _n=null,Rn=null;function Dn(e){Du(e,0)}function Qn(e){if(ht(ze(e)))return e}function On(e,t){if("change"===e)return t}var $n=!1;if(Ot){var Mn;if(Ot){var Pn="oninput"in document;if(!Pn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),Pn="function"==typeof Hn.oninput}Mn=Pn}else Mn=!1;$n=Mn&&(!document.documentMode||9<document.documentMode)}function zn(){_n&&(_n.detachEvent("onpropertychange",Vn),Rn=_n=null)}function Vn(e){if("value"===e.propertyName&&Qn(Rn)){var t=[];Un(t,Rn,e,Tt(e)),Dt(Dn,t)}}function Wn(e,t,n){"focusin"===e?(zn(),Rn=n,(_n=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&zn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Rn)}function Gn(e,t){if("click"===e)return Qn(t)}function jn(e,t){if("input"===e||"change"===e)return Qn(t)}var qn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Xn(e,t){if(qn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!X.call(t,a)||!qn(e[a],t[a]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=dt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=dt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ot&&"documentMode"in document&&11>=document.documentMode,rr=null,ar=null,sr=null,ir=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ir||null==rr||rr!==dt(r)||(r="selectionStart"in(r=rr)&&tr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Xn(sr,r)||(sr=r,0<(r=Vu(ar,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ar={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},cr={};function hr(e){if(ur[e])return ur[e];if(!Ar[e])return e;var t,n=Ar[e];for(t in n)if(n.hasOwnProperty(t)&&t in cr)return ur[e]=n[t];return e}Ot&&(cr=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);var dr=hr("animationend"),pr=hr("animationiteration"),fr=hr("animationstart"),mr=hr("transitionrun"),gr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,vr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){wr.set(e,t),je(t,[e])}vr.push("scrollEnd");var Br=new WeakMap;function kr(e,t){if("object"==typeof e&&null!==e){var n=Br.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Br.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Nr=0,Sr=0;function Ir(){for(var e=Nr,t=Sr=Nr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var a=Cr[t];Cr[t++]=null;var s=Cr[t];if(Cr[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==s&&Lr(n,a,s)}}function Er(e,t,n,r){Cr[Nr++]=e,Cr[Nr++]=t,Cr[Nr++]=n,Cr[Nr++]=r,Sr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Fr(e,t,n,r){return Er(e,t,n,r),Ur(e)}function Tr(e,t){return Er(e,null,null,t),Ur(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(a=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,a&&null!==t&&(a=31-de(n),null===(r=(e=s.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),s):null}function Ur(e){if(50<LA)throw LA=0,UA=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var _r={};function Rr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new Rr(e,t,n,r)}function Qr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Or(e,t){var n=e.alternate;return null===n?((n=Dr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $r(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Mr(e,t,n,r,a,s){var o=0;if(r=e,"function"==typeof e)Qr(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case S:return(e=Dr(31,n,t,a)).elementType=S,e.lanes=s,e;case m:return Pr(n.children,a,s,t);case g:o=8,a|=24;break;case y:return(e=Dr(12,n,t,2|a)).elementType=y,e.lanes=s,e;case B:return(e=Dr(13,n,t,a)).elementType=B,e.lanes=s,e;case k:return(e=Dr(19,n,t,a)).elementType=k,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case v:o=10;break e;case w:o=9;break e;case x:o=11;break e;case C:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Dr(o,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Pr(e,t,n,r){return(e=Dr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Dr(6,e,null,t)).lanes=n,e}function zr(e,t,n){return(t=Dr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Wr=0,Kr=null,Gr=0,jr=[],qr=0,Xr=null,Jr=1,Yr="";function Zr(e,t){Vr[Wr++]=Gr,Vr[Wr++]=Kr,Kr=e,Gr=t}function ea(e,t,n){jr[qr++]=Jr,jr[qr++]=Yr,jr[qr++]=Xr,Xr=e;var r=Jr;e=Yr;var a=32-de(r)-1;r&=~(1<<a),n+=1;var s=32-de(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Jr=1<<32-de(t)+a|n<<a|r,Yr=s+e}else Jr=1<<s|n<<a|r,Yr=e}function ta(e){null!==e.return&&(Zr(e,1),ea(e,1,0))}function na(e){for(;e===Kr;)Kr=Vr[--Wr],Vr[Wr]=null,Gr=Vr[--Wr],Vr[Wr]=null;for(;e===Xr;)Xr=jr[--qr],jr[qr]=null,Yr=jr[--qr],jr[qr]=null,Jr=jr[--qr],jr[qr]=null}var ra=null,aa=null,sa=!1,ia=null,oa=!1,la=Error(i(519));function Aa(e){throw fa(kr(Error(i(418,"")),e)),la}function ua(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Le]=e,t[Ue]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<_u.length;n++)Qu(_u[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),gt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ct(t);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),vt(t,r.value,r.defaultValue,r.children),ct(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=Ju),t=!0):t=!1,t||Aa(e)}function ca(e){for(ra=e.return;ra;)switch(ra.tag){case 5:case 13:return void(oa=!1);case 27:case 3:return void(oa=!0);default:ra=ra.return}}function ha(e){if(e!==ra)return!1;if(!sa)return ca(e),sa=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ic(e.type,e.memoizedProps)),t=!t),t&&aa&&Aa(e),ca(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){aa=gc(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}aa=null}}else 27===n?(n=aa,dc(e.type)?(e=yc,yc=null,aa=e):aa=n):aa=ra?gc(e.stateNode.nextSibling):null;return!0}function da(){aa=ra=null,sa=!1}function pa(){var e=ia;return null!==e&&(null===bA?bA=e:bA.push.apply(bA,e),ia=null),e}function fa(e){null===ia?ia=[e]:ia.push(e)}var ma=$(null),ga=null,ya=null;function ba(e,t,n){P(ma,t._currentValue),t._currentValue=n}function wa(e){e._currentValue=ma.current,M(ma)}function va(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var o=a.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=a;for(var A=0;A<t.length;A++)if(l.context===t[A]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),va(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),va(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Ba(e,t,n,r){e=null;for(var a=t,s=!1;null!==a;){if(!s)if(524288&a.flags)s=!0;else if(262144&a.flags)break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=a.type;qn(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===W.current){if(null===(o=a.alternate))throw Error(i(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(jc):e=[jc])}a=a.return}null!==e&&xa(t,e,n,r),t.flags|=262144}function ka(e){for(e=e.firstContext;null!==e;){if(!qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ca(e){ga=e,ya=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Na(e){return Ia(ga,e)}function Sa(e,t){return null===ga&&Ca(e),Ia(e,t)}function Ia(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ya){if(null===e)throw Error(i(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return n}var Ea="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Fa=r.unstable_scheduleCallback,Ta=r.unstable_NormalPriority,La={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ua(){return{controller:new Ea,data:new Map,refCount:0}}function _a(e){e.refCount--,0===e.refCount&&Fa(Ta,(function(){e.controller.abort()}))}var Ra=null,Da=0,Qa=0,Oa=null;function $a(){if(0===--Da&&null!==Ra){null!==Oa&&(Oa.status="fulfilled");var e=Ra;Ra=null,Qa=0,Oa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ma=_.S;_.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Ra){var n=Ra=[];Da=0,Qa=Eu(),Oa={status:"pending",value:void 0,then:function(e){n.push(e)}}}Da++,t.then($a,$a)}(0,t),null!==Ma&&Ma(e,t)};var Pa=$(null);function Ha(){var e=Pa.current;return null!==e?e:rA.pooledCache}function za(e,t){P(Pa,null===t?Pa.current:t.pool)}function Va(){var e=Ha();return null===e?null:{parent:La._currentValue,pool:e}}var Wa=Error(i(460)),Ka=Error(i(474)),Ga=Error(i(542)),ja={then:function(){}};function qa(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xa(){}function Ja(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xa,Xa),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"==typeof t.status)t.then(Xa,Xa);else{if(null!==(e=rA)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Ya=t,Wa}}var Ya=null;function Za(){if(null===Ya)throw Error(i(459));var e=Ya;return Ya=null,e}function es(e){if(e===Wa||e===Ga)throw Error(i(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function as(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&nA){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Ur(e),Lr(e,null,n),t}return Er(e,r,t,n),Ur(e)}function is(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Se(e,n)}}function os(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function As(){if(ls&&null!==Oa)throw Oa}function us(e,t,n,r){ls=!1;var a=e.updateQueue;ts=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,A=l.next;l.next=null,null===i?s=A:i.next=A,i=l;var u=e.alternate;null!==u&&(o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=A:o.next=A,u.lastBaseUpdate=l)}if(null!==s){var c=a.baseState;for(i=0,u=A=l=null,o=s;;){var d=-536870913&o.lane,p=d!==o.lane;if(p?(sA&d)===d:(r&d)===d){0!==d&&d===Qa&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,m=o;d=t;var g=n;switch(m.tag){case 1:if("function"==typeof(f=m.payload)){c=f.call(g,c,d);break e}c=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(d="function"==typeof(f=m.payload)?f.call(g,c,d):f))break e;c=h({},c,d);break e;case 2:ts=!0}}null!==(d=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[d]:p.push(d))}else p={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(A=u=p,l=c):u=u.next=p,i|=d;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}null===u&&(l=c),a.baseState=l,a.firstBaseUpdate=A,a.lastBaseUpdate=u,null===s&&(a.shared.lanes=0),dA|=i,e.lanes=i,e.memoizedState=c}}function cs(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)cs(n[e],t)}var ds=$(null),ps=$(0);function fs(e,t){P(ps,e=cA),P(ds,t),cA=e|t.baseLanes}function ms(){P(ps,cA),P(ds,ds.current)}function gs(){cA=ps.current,M(ds),M(ps)}var ys=0,bs=null,ws=null,vs=null,xs=!1,Bs=!1,ks=!1,Cs=0,Ns=0,Ss=null,Is=0;function Es(){throw Error(i(321))}function Fs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qn(e[n],t[n]))return!1;return!0}function Ts(e,t,n,r,a,s){return ys=s,bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=null===e||null===e.memoizedState?Wi:Ki,ks=!1,s=n(r,a),ks=!1,Bs&&(s=Us(t,n,r,a)),Ls(e),s}function Ls(e){_.H=Vi;var t=null!==ws&&null!==ws.next;if(ys=0,vs=ws=bs=null,xs=!1,Ns=0,Ss=null,t)throw Error(i(300));null===e||So||null!==(e=e.dependencies)&&ka(e)&&(So=!0)}function Us(e,t,n,r){bs=e;var a=0;do{if(Bs&&(Ss=null),Ns=0,Bs=!1,25<=a)throw Error(i(301));if(a+=1,vs=ws=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}_.H=Gi,s=t(n,r)}while(Bs);return s}function _s(){var e=_.H,t=e.useState()[0];return t="function"==typeof t.then?Ms(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(bs.flags|=1024),t}function Rs(){var e=0!==Cs;return Cs=0,e}function Ds(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Qs(e){if(xs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xs=!1}ys=0,vs=ws=bs=null,Bs=!1,Ns=Cs=0,Ss=null}function Os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?bs.memoizedState=vs=e:vs=vs.next=e,vs}function $s(){if(null===ws){var e=bs.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===vs?bs.memoizedState:vs.next;if(null!==t)vs=t,ws=e;else{if(null===e){if(null===bs.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===vs?bs.memoizedState=vs=e:vs=vs.next=e}return vs}function Ms(e){var t=Ns;return Ns+=1,null===Ss&&(Ss=[]),e=Ja(Ss,e,t),t=bs,null===(null===vs?t.memoizedState:vs.next)&&(t=t.alternate,_.H=null===t||null===t.memoizedState?Wi:Ki),e}function Ps(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ms(e);if(e.$$typeof===v)return Na(e)}throw Error(i(438,String(e)))}function Hs(e){var t=null,n=bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bs.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=I;return t.index++,n}function zs(e,t){return"function"==typeof t?t(e):t}function Vs(e){return Ws($s(),ws,e)}function Ws(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}t.baseQueue=a=s,r.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{var l=o=null,A=null,u=t=a.next,c=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(sA&h)===h:(ys&h)===h){var d=u.revertLane;if(0===d)null!==A&&(A=A.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Qa&&(c=!0);else{if((ys&d)===d){u=u.next,d===Qa&&(c=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===A?(l=A=h,o=s):A=A.next=h,bs.lanes|=d,dA|=d}h=u.action,ks&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else d={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===A?(l=A=d,o=s):A=A.next=d,bs.lanes|=h,dA|=h;u=u.next}while(null!==u&&u!==t);if(null===A?o=s:A.next=l,!qn(s,e.memoizedState)&&(So=!0,c&&null!==(n=Oa)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=A,r.lastRenderedState=s}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ks(e){var t=$s(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);qn(s,t.memoizedState)||(So=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Gs(e,t,n){var r=bs,a=$s(),s=sa;if(s){if(void 0===n)throw Error(i(407));n=n()}else n=t();var o=!qn((ws||a).memoizedState,n);if(o&&(a.memoizedState=n,So=!0),a=a.queue,mi(2048,8,Xs.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||null!==vs&&1&vs.memoizedState.tag){if(r.flags|=2048,di(9,{destroy:void 0,resource:void 0},qs.bind(null,r,a,n,t),null),null===rA)throw Error(i(349));s||124&ys||js(r,t,n)}return n}function js(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function qs(e,t,n,r){t.value=n,t.getSnapshot=r,Js(t)&&Ys(e)}function Xs(e,t,n){return n((function(){Js(t)&&Ys(e)}))}function Js(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qn(e,n)}catch(e){return!0}}function Ys(e){var t=Tr(e,2);null!==t&&DA(t,0,2)}function Zs(e){var t=Os();if("function"==typeof e){var n=e;if(e=n(),ks){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:e},t}function ei(e,t,n,r){return e.baseState=n,Ws(e,ws,"function"==typeof r?r:zs)}function ti(e,t,n,r,a){if(Pi(e))throw Error(i(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==_.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,ni(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ni(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var s=_.T,i={};_.T=i;try{var o=n(a,r),l=_.S;null!==l&&l(i,o),ri(e,t,o)}catch(n){si(e,t,n)}finally{_.T=s}}else try{ri(e,t,s=n(a,r))}catch(n){si(e,t,n)}}function ri(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then((function(n){ai(e,t,n)}),(function(n){return si(e,t,n)})):ai(e,t,n)}function ai(e,t,n){t.status="fulfilled",t.value=n,ii(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ni(e,n)))}function si(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ii(t),t=t.next}while(t!==r)}e.action=null}function ii(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oi(e,t){return t}function li(e,t){if(sa){var n=rA.formState;if(null!==n){e:{var r=bs;if(sa){if(aa){t:{for(var a=aa,s=oa;8!==a.nodeType;){if(!s){a=null;break t}if(null===(a=gc(a.nextSibling))){a=null;break t}}a="F!"===(s=a.data)||"F"===s?a:null}if(a){aa=gc(a.nextSibling),r="F!"===a.data;break e}}Aa(r)}r=!1}r&&(t=n[0])}}return(n=Os()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:t},n.queue=r,n=Oi.bind(null,bs,r),r.dispatch=n,r=Zs(!1),s=Mi.bind(null,bs,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=Os()).queue=a,n=ti.bind(null,bs,a,s,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ai(e){return ui($s(),ws,e)}function ui(e,t,n){if(t=Ws(e,t,oi)[0],e=Vs(zs)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Ms(t)}catch(e){if(e===Wa)throw Ga;throw e}else r=t;var a=(t=$s()).queue,s=a.dispatch;return n!==t.memoizedState&&(bs.flags|=2048,di(9,{destroy:void 0,resource:void 0},ci.bind(null,a,n),null)),[r,s,e]}function ci(e,t){e.action=t}function hi(e){var t=$s(),n=ws;if(null!==n)return ui(t,n,e);$s(),t=t.memoizedState;var r=(n=$s()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function di(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pi(){return $s().memoizedState}function fi(e,t,n,r){var a=Os();r=void 0===r?null:r,bs.flags|=e,a.memoizedState=di(1|t,{destroy:void 0,resource:void 0},n,r)}function mi(e,t,n,r){var a=$s();r=void 0===r?null:r;var s=a.memoizedState.inst;null!==ws&&null!==r&&Fs(r,ws.memoizedState.deps)?a.memoizedState=di(t,s,n,r):(bs.flags|=e,a.memoizedState=di(1|t,s,n,r))}function gi(e,t){fi(8390656,8,e,t)}function yi(e,t){mi(2048,8,e,t)}function bi(e,t){return mi(4,2,e,t)}function wi(e,t){return mi(4,4,e,t)}function vi(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function xi(e,t,n){n=null!=n?n.concat([e]):null,mi(4,4,vi.bind(null,t,e),n)}function Bi(){}function ki(e,t){var n=$s();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Fs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ci(e,t){var n=$s();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Fs(t,r[1]))return r[0];if(r=e(),ks){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ni(e,t,n){return void 0===n||1073741824&ys?e.memoizedState=t:(e.memoizedState=n,e=RA(),bs.lanes|=e,dA|=e,n)}function Si(e,t,n,r){return qn(n,t)?n:null!==ds.current?(e=Ni(e,n,r),qn(e,t)||(So=!0),e):42&ys?(e=RA(),bs.lanes|=e,dA|=e,t):(So=!0,e.memoizedState=n)}function Ii(e,t,n,r,a){var s=R.p;R.p=0!==s&&8>s?s:8;var i,o,l,A=_.T,u={};_.T=u,Mi(e,!1,t,n);try{var c=a(),h=_.S;null!==h&&h(u,c),null!==c&&"object"==typeof c&&"function"==typeof c.then?$i(e,t,(i=r,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},c.then((function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)}),(function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)})),l),_A()):$i(e,t,r,_A())}catch(n){$i(e,t,{then:function(){},status:"rejected",reason:n},_A())}finally{R.p=s,_.T=A}}function Ei(){}function Fi(e,t,n,r){if(5!==e.tag)throw Error(i(476));var a=Ti(e).queue;Ii(e,a,t,D,null===n?Ei:function(){return Li(e),n(r)})}function Ti(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Li(e){$i(e,Ti(e).next.queue,{},_A())}function Ui(){return Na(jc)}function _i(){return $s().memoizedState}function Ri(){return $s().memoizedState}function Di(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=_A(),r=ss(t,e=as(n),n);return null!==r&&(DA(r,0,n),is(r,t,n)),t={cache:Ua()},void(e.payload=t)}t=t.return}}function Qi(e,t,n){var r=_A();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Pi(e)?Hi(t,n):null!==(n=Fr(e,t,n,r))&&(DA(n,0,r),zi(n,t,r))}function Oi(e,t,n){$i(e,t,n,_A())}function $i(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pi(e))Hi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,qn(o,i))return Er(e,t,a,0),null===rA&&Ir(),!1}catch(e){}if(null!==(n=Fr(e,t,a,r)))return DA(n,0,r),zi(n,t,r),!0}return!1}function Mi(e,t,n,r){if(r={lane:2,revertLane:Eu(),action:r,hasEagerState:!1,eagerState:null,next:null},Pi(e)){if(t)throw Error(i(479))}else null!==(t=Fr(e,n,r,2))&&DA(t,0,2)}function Pi(e){var t=e.alternate;return e===bs||null!==t&&t===bs}function Hi(e,t){Bs=xs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Se(e,n)}}var Vi={readContext:Na,use:Ps,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useLayoutEffect:Es,useInsertionEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useSyncExternalStore:Es,useId:Es,useHostTransitionStatus:Es,useFormState:Es,useActionState:Es,useOptimistic:Es,useMemoCache:Es,useCacheRefresh:Es},Wi={readContext:Na,use:Ps,useCallback:function(e,t){return Os().memoizedState=[e,void 0===t?null:t],e},useContext:Na,useEffect:gi,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,fi(4194308,4,vi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fi(4194308,4,e,t)},useInsertionEffect:function(e,t){fi(4,2,e,t)},useMemo:function(e,t){var n=Os();t=void 0===t?null:t;var r=e();if(ks){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Os();if(void 0!==n){var a=n(t);if(ks){he(!0);try{n(t)}finally{he(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=Qi.bind(null,bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Os().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Oi.bind(null,bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Bi,useDeferredValue:function(e,t){return Ni(Os(),e,t)},useTransition:function(){var e=Zs(!1);return e=Ii.bind(null,bs,e.queue,!0,!1),Os().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bs,a=Os();if(sa){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===rA)throw Error(i(349));124&sA||js(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,gi(Xs.bind(null,r,s,e),[e]),r.flags|=2048,di(9,{destroy:void 0,resource:void 0},qs.bind(null,r,s,n,t),null),n},useId:function(){var e=Os(),t=rA.identifierPrefix;if(sa){var n=Yr;t="«"+t+"R"+(n=(Jr&~(1<<32-de(Jr)-1)).toString(32)+n),0<(n=Cs++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=Is++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Ui,useFormState:li,useActionState:li,useOptimistic:function(e){var t=Os();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Mi.bind(null,bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hs,useCacheRefresh:function(){return Os().memoizedState=Di.bind(null,bs)}},Ki={readContext:Na,use:Ps,useCallback:ki,useContext:Na,useEffect:yi,useImperativeHandle:xi,useInsertionEffect:bi,useLayoutEffect:wi,useMemo:Ci,useReducer:Vs,useRef:pi,useState:function(){return Vs(zs)},useDebugValue:Bi,useDeferredValue:function(e,t){return Si($s(),ws.memoizedState,e,t)},useTransition:function(){var e=Vs(zs)[0],t=$s().memoizedState;return["boolean"==typeof e?e:Ms(e),t]},useSyncExternalStore:Gs,useId:_i,useHostTransitionStatus:Ui,useFormState:Ai,useActionState:Ai,useOptimistic:function(e,t){return ei($s(),0,e,t)},useMemoCache:Hs,useCacheRefresh:Ri},Gi={readContext:Na,use:Ps,useCallback:ki,useContext:Na,useEffect:yi,useImperativeHandle:xi,useInsertionEffect:bi,useLayoutEffect:wi,useMemo:Ci,useReducer:Ks,useRef:pi,useState:function(){return Ks(zs)},useDebugValue:Bi,useDeferredValue:function(e,t){var n=$s();return null===ws?Ni(n,e,t):Si(n,ws.memoizedState,e,t)},useTransition:function(){var e=Ks(zs)[0],t=$s().memoizedState;return["boolean"==typeof e?e:Ms(e),t]},useSyncExternalStore:Gs,useId:_i,useHostTransitionStatus:Ui,useFormState:hi,useActionState:hi,useOptimistic:function(e,t){var n=$s();return null!==ws?ei(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hs,useCacheRefresh:Ri},ji=null,qi=0;function Xi(e){var t=qi;return qi+=1,null===ji&&(ji=[]),Ja(ji,e,t)}function Ji(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Yi(e,t){if(t.$$typeof===d)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zi(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Or(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function A(e,t,n,r){var s=n.type;return s===m?c(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===N&&Zi(s)===t.type)?(Ji(t=a(t,n.props),n),t.return=e,t):(Ji(t=Mr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function c(e,t,n,r,s){return null===t||7!==t.tag?((t=Pr(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return Ji(n=Mr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=zr(t,e.mode,n)).return=e,t;case N:return h(e,t=(0,t._init)(t._payload),n)}if(U(t)||F(t))return(t=Pr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return h(e,Xi(t),n);if(t.$$typeof===v)return h(e,Sa(e,t),n);Yi(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===a?A(e,t,n,r):null;case f:return n.key===a?u(e,t,n,r):null;case N:return d(e,t,n=(a=n._init)(n._payload),r)}if(U(n)||F(n))return null!==a?null:c(e,t,n,r,null);if("function"==typeof n.then)return d(e,t,Xi(n),r);if(n.$$typeof===v)return d(e,t,Sa(e,n),r);Yi(e,n)}return null}function g(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return A(t,e=e.get(null===r.key?n:r.key)||null,r,a);case f:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case N:return g(e,t,n,r=(0,r._init)(r._payload),a)}if(U(r)||F(r))return c(t,e=e.get(n)||null,r,a,null);if("function"==typeof r.then)return g(e,t,n,Xi(r),a);if(r.$$typeof===v)return g(e,t,n,Sa(t,r),a);Yi(t,r)}return null}function y(l,A,u,c){if("object"==typeof u&&null!==u&&u.type===m&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==A;){if(A.key===b){if((b=u.type)===m){if(7===A.tag){n(l,A.sibling),(c=a(A,u.props.children)).return=l,l=c;break e}}else if(A.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===N&&Zi(b)===A.type){n(l,A.sibling),Ji(c=a(A,u.props),u),c.return=l,l=c;break e}n(l,A);break}t(l,A),A=A.sibling}u.type===m?((c=Pr(u.props.children,l.mode,c,u.key)).return=l,l=c):(Ji(c=Mr(u.type,u.key,u.props,null,l.mode,c),u),c.return=l,l=c)}return o(l);case f:e:{for(b=u.key;null!==A;){if(A.key===b){if(4===A.tag&&A.stateNode.containerInfo===u.containerInfo&&A.stateNode.implementation===u.implementation){n(l,A.sibling),(c=a(A,u.children||[])).return=l,l=c;break e}n(l,A);break}t(l,A),A=A.sibling}(c=zr(u,l.mode,c)).return=l,l=c}return o(l);case N:return y(l,A,u=(b=u._init)(u._payload),c)}if(U(u))return function(a,i,o,l){for(var A=null,u=null,c=i,p=i=0,f=null;null!==c&&p<o.length;p++){c.index>p?(f=c,c=null):f=c.sibling;var m=d(a,c,o[p],l);if(null===m){null===c&&(c=f);break}e&&c&&null===m.alternate&&t(a,c),i=s(m,i,p),null===u?A=m:u.sibling=m,u=m,c=f}if(p===o.length)return n(a,c),sa&&Zr(a,p),A;if(null===c){for(;p<o.length;p++)null!==(c=h(a,o[p],l))&&(i=s(c,i,p),null===u?A=c:u.sibling=c,u=c);return sa&&Zr(a,p),A}for(c=r(c);p<o.length;p++)null!==(f=g(c,a,p,o[p],l))&&(e&&null!==f.alternate&&c.delete(null===f.key?p:f.key),i=s(f,i,p),null===u?A=f:u.sibling=f,u=f);return e&&c.forEach((function(e){return t(a,e)})),sa&&Zr(a,p),A}(l,A,u,c);if(F(u)){if("function"!=typeof(b=F(u)))throw Error(i(150));return function(a,o,l,A){if(null==l)throw Error(i(151));for(var u=null,c=null,p=o,f=o=0,m=null,y=l.next();null!==p&&!y.done;f++,y=l.next()){p.index>f?(m=p,p=null):m=p.sibling;var b=d(a,p,y.value,A);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(a,p),o=s(b,o,f),null===c?u=b:c.sibling=b,c=b,p=m}if(y.done)return n(a,p),sa&&Zr(a,f),u;if(null===p){for(;!y.done;f++,y=l.next())null!==(y=h(a,y.value,A))&&(o=s(y,o,f),null===c?u=y:c.sibling=y,c=y);return sa&&Zr(a,f),u}for(p=r(p);!y.done;f++,y=l.next())null!==(y=g(p,a,f,y.value,A))&&(e&&null!==y.alternate&&p.delete(null===y.key?f:y.key),o=s(y,o,f),null===c?u=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(a,e)})),sa&&Zr(a,f),u}(l,A,u=b.call(u),c)}if("function"==typeof u.then)return y(l,A,Xi(u),c);if(u.$$typeof===v)return y(l,A,Sa(l,u),c);Yi(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==A&&6===A.tag?(n(l,A.sibling),(c=a(A,u)).return=l,l=c):(n(l,A),(c=Hr(u,l.mode,c)).return=l,l=c),o(l)):n(l,A)}return function(e,t,n,r){try{qi=0;var a=y(e,t,n,r);return ji=null,a}catch(t){if(t===Wa||t===Ga)throw t;var s=Dr(29,t,null,e.mode);return s.lanes=r,s.return=e,s}}}var to=eo(!0),no=eo(!1),ro=$(null),ao=null;function so(e){var t=e.alternate;P(Ao,1&Ao.current),P(ro,e),null===ao&&(null===t||null!==ds.current||null!==t.memoizedState)&&(ao=e)}function io(e){if(22===e.tag){if(P(Ao,Ao.current),P(ro,e),null===ao){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ao=e)}}else oo()}function oo(){P(Ao,Ao.current),P(ro,ro.current)}function lo(e){M(ro),ao===e&&(ao=null),M(Ao)}var Ao=$(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||mc(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function co(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ho={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_A(),a=as(r);a.payload=t,null!=n&&(a.callback=n),null!==(t=ss(e,a,r))&&(DA(t,0,r),is(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_A(),a=as(r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=ss(e,a,r))&&(DA(t,0,r),is(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_A(),r=as(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ss(e,r,n))&&(DA(t,0,n),is(t,e,n))}};function po(e,t,n,r,a,s,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!(t.prototype&&t.prototype.isPureReactComponent&&Xn(n,r)&&Xn(a,s))}function fo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ho.enqueueReplaceState(t,t.state,null)}function mo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=h({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var go="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){go(e)}function bo(e){console.error(e)}function wo(e){go(e)}function vo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout((function(){throw e}))}}function xo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout((function(){throw e}))}}function Bo(e,t,n){return(n=as(n)).tag=3,n.payload={element:null},n.callback=function(){vo(e,t)},n}function ko(e){return(e=as(e)).tag=3,e}function Co(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var s=r.value;e.payload=function(){return a(s)},e.callback=function(){xo(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){xo(t,n,r),"function"!=typeof a&&(null===kA?kA=new Set([this]):kA.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var No=Error(i(461)),So=!1;function Io(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function Eo(e,t,n,r,a){n=n.render;var s=t.ref;if("ref"in r){var i={};for(var o in r)"ref"!==o&&(i[o]=r[o])}else i=r;return Ca(t),r=Ts(e,t,n,i,s,a),o=Rs(),null===e||So?(sa&&o&&ta(t),t.flags|=1,Io(e,t,r,a),t.child):(Ds(e,t,a),qo(e,t,a))}function Fo(e,t,n,r,a){if(null===e){var s=n.type;return"function"!=typeof s||Qr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Mr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,To(e,t,s,r,a))}if(s=e.child,!Xo(e,a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(i,r)&&e.ref===t.ref)return qo(e,t,a)}return t.flags|=1,(e=Or(s,r)).ref=t.ref,e.return=t,t.child=e}function To(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(Xn(s,r)&&e.ref===t.ref){if(So=!1,t.pendingProps=r=s,!Xo(e,a))return t.lanes=e.lanes,qo(e,t,a);131072&e.flags&&(So=!0)}}return Ro(e,t,n,r,a)}function Lo(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==s?s.baseLanes|n:n,null!==e){for(a=t.child=e.child,s=0;null!==a;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Uo(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Uo(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&za(0,null!==s?s.cachePool:null),null!==s?fs(t,s):ms(),io(t)}else null!==s?(za(0,s.cachePool),fs(t,s),oo(),t.memoizedState=null):(null!==e&&za(0,null),ms(),oo());return Io(e,t,a,n),t.child}function Uo(e,t,n,r){var a=Ha();return a=null===a?null:{parent:La._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&za(0,null),ms(),io(t),null!==e&&Ba(e,t,r,!0),null}function _o(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ro(e,t,n,r,a){return Ca(t),n=Ts(e,t,n,r,void 0,a),r=Rs(),null===e||So?(sa&&r&&ta(t),t.flags|=1,Io(e,t,n,a),t.child):(Ds(e,t,a),qo(e,t,a))}function Do(e,t,n,r,a,s){return Ca(t),t.updateQueue=null,n=Us(t,r,n,a),Ls(e),r=Rs(),null===e||So?(sa&&r&&ta(t),t.flags|=1,Io(e,t,n,s),t.child):(Ds(e,t,s),qo(e,t,s))}function Qo(e,t,n,r,a){if(Ca(t),null===t.stateNode){var s=_r,i=n.contextType;"object"==typeof i&&null!==i&&(s=Na(i)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=ho,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),i=n.contextType,s.context="object"==typeof i&&null!==i?Na(i):_r,s.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(co(t,n,i,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(i=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),i!==s.state&&ho.enqueueReplaceState(s,s.state,null),us(t,r,s,a),As(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=mo(n,o);s.props=l;var A=s.context,u=n.contextType;i=_r,"object"==typeof u&&null!==u&&(i=Na(u));var c=n.getDerivedStateFromProps;u="function"==typeof c||"function"==typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o||A!==i)&&fo(t,s,r,i),ts=!1;var h=t.memoizedState;s.state=h,us(t,r,s,a),As(),A=t.memoizedState,o||h!==A||ts?("function"==typeof c&&(co(t,n,c,r),A=t.memoizedState),(l=ts||po(t,n,l,r,h,A,i))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=A),s.props=r,s.state=A,s.context=i,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=mo(n,i=t.memoizedProps),s.props=u,c=t.pendingProps,h=s.context,A=n.contextType,l=_r,"object"==typeof A&&null!==A&&(l=Na(A)),(A="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(i!==c||h!==l)&&fo(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,us(t,r,s,a),As();var d=t.memoizedState;i!==c||h!==d||ts||null!==e&&null!==e.dependencies&&ka(e.dependencies)?("function"==typeof o&&(co(t,n,o,r),d=t.memoizedState),(u=ts||po(t,n,u,r,h,d,l)||null!==e&&null!==e.dependencies&&ka(e.dependencies))?(A||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=l,r=u):("function"!=typeof s.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,_o(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,a),t.child=to(t,null,n,a)):Io(e,t,n,a),t.memoizedState=s.state,e=t.child):e=qo(e,t,a),e}function Oo(e,t,n,r){return da(),t.flags|=256,Io(e,t,n,r),t.child}var $o={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mo(e){return{baseLanes:e,cachePool:Va()}}function Po(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mA),e}function Ho(e,t,n){var r,a=t.pendingProps,s=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&Ao.current)),r&&(s=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(sa){if(s?so(t):oo(),sa){var l,A=aa;if(l=A){e:{for(l=A,A=oa;8!==l.nodeType;){if(!A){A=null;break e}if(null===(l=gc(l.nextSibling))){A=null;break e}}A=l}null!==A?(t.memoizedState={dehydrated:A,treeContext:null!==Xr?{id:Jr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},(l=Dr(18,null,null,0)).stateNode=A,l.return=t,t.child=l,ra=t,aa=null,l=!0):l=!1}l||Aa(t)}if(null!==(A=t.memoizedState)&&null!==(A=A.dehydrated))return mc(A)?t.lanes=32:t.lanes=536870912,null;lo(t)}return A=a.children,a=a.fallback,s?(oo(),A=Vo({mode:"hidden",children:A},s=t.mode),a=Pr(a,s,n,null),A.return=t,a.return=t,A.sibling=a,t.child=A,(s=t.child).memoizedState=Mo(n),s.childLanes=Po(e,r,n),t.memoizedState=$o,a):(so(t),zo(t,A))}if(null!==(l=e.memoizedState)&&null!==(A=l.dehydrated)){if(o)256&t.flags?(so(t),t.flags&=-257,t=Wo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),s=a.fallback,A=t.mode,a=Vo({mode:"visible",children:a.children},A),(s=Pr(s,A,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,to(t,e.child,null,n),(a=t.child).memoizedState=Mo(n),a.childLanes=Po(e,r,n),t.memoizedState=$o,t=s);else if(so(t),mc(A)){if(r=A.nextSibling&&A.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(i(419))).stack="",a.digest=r,fa({value:a,source:null,stack:null}),t=Wo(e,t,n)}else if(So||Ba(e,t,n,!1),r=0!==(n&e.childLanes),So||r){if(null!==(r=rA)&&0!==(a=0!==((a=42&(a=n&-n)?1:Ie(a))&(r.suspendedLanes|n))?0:a)&&a!==l.retryLane)throw l.retryLane=a,Tr(e,a),DA(r,0,a),No;"$?"===A.data||GA(),t=Wo(e,t,n)}else"$?"===A.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,aa=gc(A.nextSibling),ra=t,sa=!0,ia=null,oa=!1,null!==e&&(jr[qr++]=Jr,jr[qr++]=Yr,jr[qr++]=Xr,Jr=e.id,Yr=e.overflow,Xr=t),(t=zo(t,a.children)).flags|=4096);return t}return s?(oo(),s=a.fallback,A=t.mode,u=(l=e.child).sibling,(a=Or(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Or(u,s):(s=Pr(s,A,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,null===(A=e.child.memoizedState)?A=Mo(n):(null!==(l=A.cachePool)?(u=La._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Va(),A={baseLanes:A.baseLanes|n,cachePool:l}),s.memoizedState=A,s.childLanes=Po(e,r,n),t.memoizedState=$o,a):(so(t),e=(n=e.child).sibling,(n=Or(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function zo(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=Dr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,n){return to(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),va(e.return,t,n)}function Go(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function jo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(Io(e,t,r.children,n),2&(r=Ao.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(P(Ao,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Go(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Go(t,!0,n,null,s);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),dA|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ba(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Or(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Or(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ka(e))}function Jo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)So=!0;else{if(!(Xo(e,n)||128&t.flags))return So=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),ba(0,La,e.memoizedState.cache),da();break;case 27:case 5:j(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:ba(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(so(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ho(e,t,n):(so(t),null!==(e=qo(e,t,n))?e.sibling:null);so(t);break;case 19:var a=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Ba(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return jo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),P(Ao,Ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Lo(e,t,n);case 24:ba(0,La,e.memoizedState.cache)}return qo(e,t,n)}(e,t,n);So=!!(131072&e.flags)}else So=!1,sa&&1048576&t.flags&&ea(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((a=r.$$typeof)===x){t.tag=11,t=Eo(null,t,r,e,n);break e}if(a===C){t.tag=14,t=Fo(null,t,r,e,n);break e}}throw t=L(r)||r,Error(i(306,t,""))}Qr(r)?(e=mo(r,e),t.tag=1,t=Qo(null,t,r,e,n)):(t.tag=0,t=Ro(null,t,r,e,n))}return t;case 0:return Ro(e,t,t.type,t.pendingProps,n);case 1:return Qo(e,t,r=t.type,a=mo(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var s=t.memoizedState;a=s.element,rs(e,t),us(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ba(0,La,r),r!==s.cache&&xa(t,[La],n,!0),As(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Oo(e,t,r,n);break e}if(r!==a){fa(a=kr(Error(i(424)),t)),t=Oo(e,t,r,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,aa=gc(e.firstChild),ra=t,sa=!0,ia=null,oa=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===a){t=qo(e,t,n);break e}Io(e,t,r,n)}t=t.child}return t;case 26:return _o(e,t),null===e?(n=Ic(t.type,null,t.pendingProps,null))?t.memoizedState=n:sa||(n=t.type,e=t.pendingProps,(r=rc(V.current).createElement(n))[Le]=t,r[Ue]=e,ec(r,n,e),We(r),t.stateNode=r):t.memoizedState=Ic(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return j(t),null===e&&sa&&(r=t.stateNode=wc(t.type,t.pendingProps,V.current),ra=t,oa=!0,a=aa,dc(t.type)?(yc=a,aa=gc(r.firstChild)):aa=a),Io(e,t,t.pendingProps.children,n),_o(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sa&&((a=r=aa)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[$e])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===s)return e}if(null===(e=gc(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,oa))?(t.stateNode=r,ra=t,aa=gc(r.firstChild),oa=!1,a=!0):a=!1),a||Aa(t)),j(t),a=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,ic(a,s)?r=null:null!==o&&ic(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=Ts(e,t,_s,null,null,n),jc._currentValue=a),_o(e,t),Io(e,t,r,n),t.child;case 6:return null===e&&sa&&((e=n=aa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=gc(e.nextSibling)))return null}return e}(n,t.pendingProps,oa))?(t.stateNode=n,ra=t,aa=null,e=!0):e=!1),e||Aa(t)),null;case 13:return Ho(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):Io(e,t,r,n),t.child;case 11:return Eo(e,t,t.type,t.pendingProps,n);case 7:return Io(e,t,t.pendingProps,n),t.child;case 8:case 12:return Io(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ba(0,t.type,r.value),Io(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ca(t),r=r(a=Na(a)),t.flags|=1,Io(e,t,r,n),t.child;case 14:return Fo(e,t,t.type,t.pendingProps,n);case 15:return To(e,t,t.type,t.pendingProps,n);case 19:return jo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Vo(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Or(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Lo(e,t,n);case 24:return Ca(t),r=Na(La),null===e?(null===(a=Ha())&&(a=rA,s=Ua(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:r,cache:a},ns(t),ba(0,La,a)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),As()),a=e.memoizedState,s=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ba(0,La,r)):(r=s.cache,ba(0,La,r),r!==a.cache&&xa(t,[La],n,!0))),Io(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Yo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Pc(t)){if(null!==(t=ro.current)&&((4194048&sA)===sA?null!==ao:(62914560&sA)!==sA&&!(536870912&sA)||t!==ao))throw Ya=ja,Ka;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Be():536870912,e.lanes|=t,gA|=t)}function tl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wa(La),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ha(t)?Yo(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,pa())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Yo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Yo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Yo(t),nl(t),t.flags&=-16777217),null;case 27:q(t),n=V.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Yo(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nl(t),null}e=H.current,ha(t)?ua(t):(e=wc(a,r,n),t.stateNode=e,Yo(t))}return nl(t),null;case 5:if(q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Yo(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nl(t),null}if(e=H.current,ha(t))ua(t);else{switch(a=rc(V.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?a.createElement(n,{is:r.is}):a.createElement(n)}}e[Le]=t,e[Ue]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(ec(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Yo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Yo(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=V.current,ha(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ra))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Le]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||Aa(t)}else(e=rc(e).createTextNode(r))[Le]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[Le]=t}else da(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),a=!1}else a=pa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&Mu(t.stateNode.containerInfo),nl(t),null;case 10:return wa(t.type),nl(t),null;case 19:if(M(Ao),null===(a=t.memoizedState))return nl(t),null;if(r=!!(128&t.flags),null===(s=a.rendering))if(r)tl(a,!1);else{if(0!==hA||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=uo(e))){for(t.flags|=128,tl(a,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)$r(n,e),n=n.sibling;return P(Ao,1&Ao.current|2),t.child}e=e.sibling}null!==a.tail&&te()>xA&&(t.flags|=128,r=!0,tl(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!sa)return nl(t),null}else 2*te()-a.renderingStartTime>xA&&536870912!==n&&(t.flags|=128,r=!0,tl(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=Ao.current,P(Ao,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),gs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&M(Pa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wa(La),nl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function al(e,t){switch(na(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wa(La),G(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return q(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return M(Ao),null;case 4:return G(),null;case 10:return wa(t.type),null;case 22:case 23:return lo(t),gs(),null!==e&&M(Pa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wa(La),null;default:return null}}function sl(e,t){switch(na(t),t.tag){case 3:wa(La),G();break;case 26:case 27:case 5:q(t);break;case 4:G();break;case 13:lo(t);break;case 19:M(Ao);break;case 10:wa(t.type);break;case 22:case 23:lo(t),gs(),null!==e&&M(Pa);break;case 24:wa(La)}}function il(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var s=n.create,i=n.inst;r=s(),i.destroy=r}n=n.next}while(n!==a)}}catch(e){uu(t,t.return,e)}}function ol(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var s=a.next;r=s;do{if((r.tag&e)===e){var i=r.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,a=t;var l=n,A=o;try{A()}catch(e){uu(a,l,e)}}}r=r.next}while(r!==s)}}catch(e){uu(t,t.return,e)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(t){uu(e,e.return,t)}}}function Al(e,t,n){n.props=mo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){uu(e,t,n)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){uu(e,t,n)}}function cl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){uu(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){uu(e,t,n)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){uu(e,e.return,t)}}function dl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,o=null,l=null,A=null,u=null,c=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":A=h;default:r.hasOwnProperty(p)||Yu(e,t,p,null,r,h)}}for(var d in r){var p=r[d];if(h=n[d],r.hasOwnProperty(d)&&(null!=p||null!=h))switch(d){case"type":s=p;break;case"name":a=p;break;case"checked":u=p;break;case"defaultChecked":c=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:p!==h&&Yu(e,t,d,p,r,h)}}return void mt(e,o,l,A,u,c,s,a);case"select":for(s in p=o=l=d=null,n)if(A=n[s],n.hasOwnProperty(s)&&null!=A)switch(s){case"value":break;case"multiple":p=A;default:r.hasOwnProperty(s)||Yu(e,t,s,null,r,A)}for(a in r)if(s=r[a],A=n[a],r.hasOwnProperty(a)&&(null!=s||null!=A))switch(a){case"value":d=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==A&&Yu(e,t,a,s,r,A)}return t=l,n=o,r=p,void(null!=d?bt(e,!!n,d,!1):!!r!=!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=d=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Yu(e,t,l,null,r,a)}for(o in r)if(a=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=a||null!=s))switch(o){case"value":d=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(i(91));break;default:a!==s&&Yu(e,t,o,a,r,s)}return void wt(e,d,p);case"option":for(var f in n)d=n[f],n.hasOwnProperty(f)&&null!=d&&!r.hasOwnProperty(f)&&("selected"===f?e.selected=!1:Yu(e,t,f,null,r,d));for(A in r)d=r[A],p=n[A],!r.hasOwnProperty(A)||d===p||null==d&&null==p||("selected"===A?e.selected=d&&"function"!=typeof d&&"symbol"!=typeof d:Yu(e,t,A,d,r,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)d=n[m],n.hasOwnProperty(m)&&null!=d&&!r.hasOwnProperty(m)&&Yu(e,t,m,null,r,d);for(u in r)if(d=r[u],p=n[u],r.hasOwnProperty(u)&&d!==p&&(null!=d||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:Yu(e,t,u,d,r,p)}return;default:if(Nt(t)){for(var g in n)d=n[g],n.hasOwnProperty(g)&&void 0!==d&&!r.hasOwnProperty(g)&&Zu(e,t,g,void 0,r,d);for(c in r)d=r[c],p=n[c],!r.hasOwnProperty(c)||d===p||void 0===d&&void 0===p||Zu(e,t,c,d,r,p);return}}for(var y in n)d=n[y],n.hasOwnProperty(y)&&null!=d&&!r.hasOwnProperty(y)&&Yu(e,t,y,null,r,d);for(h in r)d=r[h],p=n[h],!r.hasOwnProperty(h)||d===p||null==d&&null==p||Yu(e,t,h,d,r,p)}(r,e.type,n,t),r[Ue]=t}catch(t){uu(e,e.return,t)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&dc(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&dc(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ju));else if(4!==r&&(27===r&&dc(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&dc(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ec(t,r,n),t[Le]=e,t[Ue]=n}catch(t){uu(e,e.return,t)}}var bl=!1,wl=!1,vl=!1,xl="function"==typeof WeakSet?WeakSet:Set,Bl=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ql(e,n),4&r&&il(5,n);break;case 1:if(Ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){uu(n,n.return,e)}else{var a=mo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){uu(n,n.return,e)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(e){uu(n,n.return,e)}}break;case 27:null===t&&4&r&&yl(n);case 26:case 5:Ql(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Ql(e,n);break;case 13:Ql(e,n),4&r&&Fl(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,a=bl;var s=wl;bl=r,(wl=t)&&!s?$l(e,n,!!(8772&n.subtreeFlags)):Ql(e,n),bl=a,wl=s}break;case 30:break;default:Ql(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Me(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nl=null,Sl=!1;function Il(e,t,n){for(n=n.child;null!==n;)El(e,t,n),n=n.sibling}function El(e,t,n){if(ce&&"function"==typeof ce.onCommitFiberUnmount)try{ce.onCommitFiberUnmount(ue,n)}catch(e){}switch(n.tag){case 26:wl||cl(n,t),Il(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||cl(n,t);var r=Nl,a=Sl;dc(n.type)&&(Nl=n.stateNode,Sl=!1),Il(e,t,n),vc(n.stateNode),Nl=r,Sl=a;break;case 5:wl||cl(n,t);case 6:if(r=Nl,a=Sl,Nl=null,Il(e,t,n),Sl=a,null!==(Nl=r))if(Sl)try{(9===Nl.nodeType?Nl.body:"HTML"===Nl.nodeName?Nl.ownerDocument.body:Nl).removeChild(n.stateNode)}catch(e){uu(n,t,e)}else try{Nl.removeChild(n.stateNode)}catch(e){uu(n,t,e)}break;case 18:null!==Nl&&(Sl?(pc(9===(e=Nl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Sh(e)):pc(Nl,n.stateNode));break;case 4:r=Nl,a=Sl,Nl=n.stateNode.containerInfo,Sl=!0,Il(e,t,n),Nl=r,Sl=a;break;case 0:case 11:case 14:case 15:wl||ol(2,n,t),wl||ol(4,n,t),Il(e,t,n);break;case 1:wl||(cl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&Al(n,t,r)),Il(e,t,n);break;case 21:Il(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Il(e,t,n),wl=r;break;default:Il(e,t,n)}}function Fl(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Sh(e)}catch(e){uu(t,t.return,e)}}function Tl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new xl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new xl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach((function(t){var r=fu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Ll(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(dc(l.type)){Nl=l.stateNode,Sl=!1;break e}break;case 5:Nl=l.stateNode,Sl=!1;break e;case 3:case 4:Nl=l.stateNode.containerInfo,Sl=!0;break e}l=l.return}if(null===Nl)throw Error(i(160));El(s,o,a),Nl=null,Sl=!1,null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)_l(t,e),t=t.sibling}var Ul=null;function _l(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ll(t,e),Rl(e),4&r&&(ol(3,e,e.return),il(3,e),ol(5,e,e.return));break;case 1:Ll(t,e),Rl(e),512&r&&(wl||null===n||cl(n,n.return)),64&r&&bl&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var a=Ul;if(Ll(t,e),Rl(e),512&r&&(wl||null===n||cl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(s=a.getElementsByTagName("title")[0])||s[$e]||s[Le]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=a.createElement(r),a.head.insertBefore(s,a.querySelector("head > title"))),ec(s,r,n),s[Le]=e,We(s),r=s;break e;case"link":var o=$c("link","href",a).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ec(s=a.createElement(r),r,n),a.head.appendChild(s);break;case"meta":if(o=$c("meta","content",a).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ec(s=a.createElement(r),r,n),a.head.appendChild(s);break;default:throw Error(i(468,r))}s[Le]=e,We(s),r=s}e.stateNode=r}else Mc(a,e.type,e.stateNode);else e.stateNode=_c(a,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Mc(a,e.type,e.stateNode):_c(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&dl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ll(t,e),Rl(e),512&r&&(wl||null===n||cl(n,n.return)),null!==n&&4&r&&dl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ll(t,e),Rl(e),512&r&&(wl||null===n||cl(n,n.return)),32&e.flags){a=e.stateNode;try{xt(a,"")}catch(t){uu(e,e.return,t)}}4&r&&null!=e.stateNode&&dl(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(vl=!0);break;case 6:if(Ll(t,e),Rl(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){uu(e,e.return,t)}}break;case 3:if(Oc=null,a=Ul,Ul=kc(t.containerInfo),Ll(t,e),Ul=a,Rl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Sh(t.containerInfo)}catch(t){uu(e,e.return,t)}vl&&(vl=!1,Dl(e));break;case 4:r=Ul,Ul=kc(e.stateNode.containerInfo),Ll(t,e),Rl(e),Ul=r;break;case 12:default:Ll(t,e),Rl(e);break;case 13:Ll(t,e),Rl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(vA=te()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,Tl(e,r));break;case 22:a=null!==e.memoizedState;var A=null!==n&&null!==n.memoizedState,u=bl,c=wl;if(bl=u||a,wl=c||A,Ll(t,e),wl=c,bl=u,Rl(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||A||bl||wl||Ol(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){A=n=t;try{if(s=A.stateNode,a)"function"==typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=A.stateNode;var h=A.memoizedProps.style,d=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==d||"boolean"==typeof d?"":(""+d).trim()}}catch(e){uu(A,A.return,e)}}}else if(6===t.tag){if(null===n){A=t;try{A.stateNode.nodeValue=a?"":A.memoizedProps}catch(e){uu(A,A.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,Tl(e,n));break;case 19:Ll(t,e),Rl(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,Tl(e,r));case 30:case 21:}}function Rl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;gl(e,fl(e),a);break;case 5:var s=n.stateNode;32&n.flags&&(xt(s,""),n.flags&=-33),gl(e,fl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;ml(e,fl(e),o);break;default:throw Error(i(161))}}catch(t){uu(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Ol(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ol(t);break;case 1:cl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&Al(t,t.return,n),Ol(t);break;case 27:vc(t.stateNode);case 26:case 5:cl(t,t.return),Ol(t);break;case 22:null===t.memoizedState&&Ol(t);break;default:Ol(t)}e=e.sibling}}function $l(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,s=t,i=s.flags;switch(s.tag){case 0:case 11:case 15:$l(a,s,n),il(4,s);break;case 1:if($l(a,s,n),"function"==typeof(a=(r=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){uu(r,r.return,e)}if(null!==(a=(r=s).updateQueue)){var o=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)cs(l[a],o)}catch(e){uu(r,r.return,e)}}n&&64&i&&ll(s),ul(s,s.return);break;case 27:yl(s);case 26:case 5:$l(a,s,n),n&&null===r&&4&i&&hl(s),ul(s,s.return);break;case 12:$l(a,s,n);break;case 13:$l(a,s,n),n&&4&i&&Fl(a,s);break;case 22:null===s.memoizedState&&$l(a,s,n),ul(s,s.return);break;case 30:break;default:$l(a,s,n)}t=t.sibling}}function Ml(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&_a(n))}function Pl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&_a(e))}function Hl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)zl(e,t,n,r),t=t.sibling}function zl(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,n,r),2048&a&&il(9,t);break;case 1:case 13:default:Hl(e,t,n,r);break;case 3:Hl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&_a(e)));break;case 12:if(2048&a){Hl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,i=s.id,o=s.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){uu(t,t.return,e)}}else Hl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,i=t.alternate,null!==t.memoizedState?2&s._visibility?Hl(e,t,n,r):Wl(e,t):2&s._visibility?Hl(e,t,n,r):(s._visibility|=2,Vl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&a&&Ml(i,t);break;case 24:Hl(e,t,n,r),2048&a&&Pl(t.alternate,t)}}function Vl(e,t,n,r,a){for(a=a&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,i=t,o=n,l=r,A=i.flags;switch(i.tag){case 0:case 11:case 15:Vl(s,i,o,l,a),il(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?Vl(s,i,o,l,a):Wl(s,i):(u._visibility|=2,Vl(s,i,o,l,a)),a&&2048&A&&Ml(i.alternate,i);break;case 24:Vl(s,i,o,l,a),a&&2048&A&&Pl(i.alternate,i);break;default:Vl(s,i,o,l,a)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:Wl(n,r),2048&a&&Ml(r.alternate,r);break;case 24:Wl(n,r),2048&a&&Pl(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)jl(e),e=e.sibling}function jl(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Hc)throw Error(i(475));var r=Hc;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var a=Ec(n.href),s=e.querySelector(Fc(a));if(s)return null!==(e=s._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=Vc.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void We(s);s=e.ownerDocument||e,n=Tc(n),(a=xc.get(a))&&Dc(n,a),We(s=s.createElement("link"));var o=s;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),ec(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=Vc.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ul,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Ul;Ul=kc(e.stateNode.containerInfo),Gl(e),Ul=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Bl=r,Zl(r,e)}ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Yl(e)):Xl(e)}}function Yl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Bl=r,Zl(r,e)}ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Yl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Yl(t));break;default:Yl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Bl;){var n=Bl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:_a(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Bl=r;else e:for(n=e;null!==Bl;){var a=(r=Bl).sibling,s=r.return;if(Cl(r),r===n){Bl=null;break e}if(null!==a){a.return=s,Bl=a;break e}Bl=s}}}var eA={getCacheForType:function(e){var t=Na(La),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tA="function"==typeof WeakMap?WeakMap:Map,nA=0,rA=null,aA=null,sA=0,iA=0,oA=null,lA=!1,AA=!1,uA=!1,cA=0,hA=0,dA=0,pA=0,fA=0,mA=0,gA=0,yA=null,bA=null,wA=!1,vA=0,xA=1/0,BA=null,kA=null,CA=0,NA=null,SA=null,IA=0,EA=0,FA=null,TA=null,LA=0,UA=null;function _A(){return 2&nA&&0!==sA?sA&-sA:null!==_.T?0!==Qa?Qa:Eu():Fe()}function RA(){0===mA&&(mA=536870912&sA&&!sa?536870912:xe());var e=ro.current;return null!==e&&(e.flags|=32),mA}function DA(e,t,n){(e!==rA||2!==iA&&9!==iA)&&null===e.cancelPendingCommit||(zA(e,0),MA(e,sA,mA,!1)),Ce(e,n),2&nA&&e===rA||(e===rA&&(!(2&nA)&&(pA|=n),4===hA&&MA(e,sA,mA,!1)),xu(e))}function QA(e,t,n){if(6&nA)throw Error(i(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||we(e,t),a=r?function(e,t){var n=nA;nA|=2;var r=WA(),a=KA();rA!==e||sA!==t?(BA=null,xA=te()+500,zA(e,t)):AA=we(e,t);e:for(;;)try{if(0!==iA&&null!==aA){t=aA;var s=oA;t:switch(iA){case 1:iA=0,oA=null,ZA(e,t,s,1);break;case 2:case 9:if(qa(s)){iA=0,oA=null,YA(t);break}t=function(){2!==iA&&9!==iA||rA!==e||(iA=7),xu(e)},s.then(t,t);break e;case 3:iA=7;break e;case 4:iA=5;break e;case 7:qa(s)?(iA=0,oA=null,YA(t)):(iA=0,oA=null,ZA(e,t,s,7));break;case 5:var o=null;switch(aA.tag){case 26:o=aA.memoizedState;case 5:case 27:var l=aA;if(!o||Pc(o)){iA=0,oA=null;var A=l.sibling;if(null!==A)aA=A;else{var u=l.return;null!==u?(aA=u,eu(u)):aA=null}break t}}iA=0,oA=null,ZA(e,t,s,5);break;case 6:iA=0,oA=null,ZA(e,t,s,6);break;case 8:HA(),hA=6;break e;default:throw Error(i(462))}}XA();break}catch(t){VA(e,t)}return ya=ga=null,_.H=r,_.A=a,nA=n,null!==aA?0:(rA=null,sA=0,Ir(),hA)}(e,t):jA(e,t,!0),s=r;;){if(0===a){AA&&!r&&MA(e,t,0,!1);break}if(n=e.current.alternate,!s||$A(n)){if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!=(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=yA;var A=l.current.memoizedState.isDehydrated;if(A&&(zA(l,o).flags|=256),2!==(o=jA(l,o,!1))){if(uA&&!A){l.errorRecoveryDisabledLanes|=s,pA|=s,a=4;break e}s=bA,bA=a,null!==s&&(null===bA?bA=s:bA.push.apply(bA,s))}a=o}if(s=!1,2!==a)continue}}if(1===a){zA(e,0),MA(e,t,0,!0);break}e:{switch(r=e,s=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:MA(r,t,mA,!lA);break e;case 2:bA=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(a=vA+300-te())){if(MA(r,t,mA,!lA),0!==be(r,0,!0))break e;r.timeoutHandle=lc(OA.bind(null,r,n,bA,BA,wA,t,mA,pA,gA,lA,s,2,-0,0),a)}else OA(r,n,bA,BA,wA,t,mA,pA,gA,lA,s,0,-0,0)}break}a=jA(e,t,!1),s=!1}xu(e)}function OA(e,t,n,r,a,s,o,l,A,u,c,h,d,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&(Hc={stylesheets:null,count:0,unsuspend:zc},jl(t),null!==(h=function(){if(null===Hc)throw Error(i(475));var e=Hc;return e.stylesheets&&0===e.count&&Kc(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Kc(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,s,n,r,a,o,l,A,c,1,d,p)),void MA(e,s,o,!u);nu(e,t,s,n,r,a,o,l,A)}function $A(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!qn(s(),a))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function MA(e,t,n,r){t&=~fA,t&=~pA,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var s=31-de(a),i=1<<s;r[s]=-1,a&=~i}0!==n&&Ne(e,n,t)}function PA(){return!!(6&nA)||(Bu(0,!1),!1)}function HA(){if(null!==aA){if(0===iA)var e=aA.return;else ya=ga=null,Qs(e=aA),ji=null,qi=0,e=aA;for(;null!==e;)sl(e.alternate,e),e=e.return;aA=null}}function zA(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Ac(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),HA(),rA=e,aA=n=Or(e.current,null),sA=t,iA=0,oA=null,lA=!1,AA=we(e,t),uA=!1,gA=mA=fA=pA=dA=hA=0,bA=yA=null,wA=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-de(r),s=1<<a;t|=e[a],r&=~s}return cA=t,Ir(),n}function VA(e,t){bs=null,_.H=Vi,t===Wa||t===Ga?(t=Za(),iA=3):t===Ka?(t=Za(),iA=4):iA=t===No?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,oA=t,null===aA&&(hA=1,vo(e,kr(t,e.current)))}function WA(){var e=_.H;return _.H=Vi,null===e?Vi:e}function KA(){var e=_.A;return _.A=eA,e}function GA(){hA=4,lA||(4194048&sA)!==sA&&null!==ro.current||(AA=!0),!(134217727&dA)&&!(134217727&pA)||null===rA||MA(rA,sA,mA,!1)}function jA(e,t,n){var r=nA;nA|=2;var a=WA(),s=KA();rA===e&&sA===t||(BA=null,zA(e,t)),t=!1;var i=hA;e:for(;;)try{if(0!==iA&&null!==aA){var o=aA,l=oA;switch(iA){case 8:HA(),i=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var A=iA;if(iA=0,oA=null,ZA(e,o,l,A),n&&AA){i=0;break e}break;default:A=iA,iA=0,oA=null,ZA(e,o,l,A)}}qA(),i=hA;break}catch(t){VA(e,t)}return t&&e.shellSuspendCounter++,ya=ga=null,nA=r,_.H=a,_.A=s,null===aA&&(rA=null,sA=0,Ir()),i}function qA(){for(;null!==aA;)JA(aA)}function XA(){for(;null!==aA&&!Z();)JA(aA)}function JA(e){var t=Jo(e.alternate,e,cA);e.memoizedProps=e.pendingProps,null===t?eu(e):aA=t}function YA(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Do(n,t,t.pendingProps,t.type,void 0,sA);break;case 11:t=Do(n,t,t.pendingProps,t.type.render,t.ref,sA);break;case 5:Qs(t);default:sl(n,t),t=Jo(n,t=aA=$r(t,cA),cA)}e.memoizedProps=e.pendingProps,null===t?eu(e):aA=t}function ZA(e,t,n,r){ya=ga=null,Qs(t),ji=null,qi=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Ba(t,n,a,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===ao?GA():null===n.alternate&&0===hA&&(hA=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ja?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),cu(e,r,a)),!1;case 22:return n.flags|=65536,r===ja?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),cu(e,r,a)),!1}throw Error(i(435,n.tag))}return cu(e,r,a),GA(),!1}if(sa)return null!==(t=ro.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==la&&fa(kr(e=Error(i(422),{cause:r}),n))):(r!==la&&fa(kr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=kr(r,n),os(e,a=Bo(e.stateNode,r,a)),4!==hA&&(hA=2)),!1;var s=Error(i(520),{cause:r});if(s=kr(s,n),null===yA?yA=[s]:yA.push(s),4!==hA&&(hA=2),null===t)return!0;r=kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,os(n,e=Bo(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===s||"function"!=typeof s.componentDidCatch||null!==kA&&kA.has(s))))return n.flags|=65536,a&=-a,n.lanes|=a,Co(a=ko(a),e,n,r),os(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,sA))return hA=1,vo(e,kr(n,e.current)),void(aA=null)}catch(t){if(null!==a)throw aA=a,t;return hA=1,vo(e,kr(n,e.current)),void(aA=null)}32768&t.flags?(sa||1===r?e=!0:AA||536870912&sA?e=!1:(lA=e=!0,(2===r||9===r||3===r||6===r)&&null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384)),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(32768&t.flags)return void tu(t,lA);e=t.return;var n=rl(t.alternate,t,cA);if(null!==n)return void(aA=n);if(null!==(t=t.sibling))return void(aA=t);aA=t=e}while(null!==t);0===hA&&(hA=5)}function tu(e,t){do{var n=al(e.alternate,e);if(null!==n)return n.flags&=32767,void(aA=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(aA=e);aA=e=n}while(null!==e);hA=6,aA=null}function nu(e,t,n,r,a,s,o,l,A){e.cancelPendingCommit=null;do{ou()}while(0!==CA);if(6&nA)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,a,s){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,A=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-de(n),c=1<<u;o[u]=0,l[u]=-1;var h=A[u];if(null!==h)for(A[u]=null,u=0;u<h.length;u++){var d=h[u];null!==d&&(d.lane&=-536870913)}n&=~c}0!==r&&Ne(e,r,0),0!==s&&0===a&&0!==e.tag&&(e.suspendedLanes|=s&~(i&~t))}(e,n,s|=Sr,o,l,A),e===rA&&(aA=rA=null,sA=0),SA=t,NA=e,IA=n,EA=s,FA=a,TA=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,J(se,(function(){return lu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=_.T,_.T=null,a=R.p,R.p=2,o=nA,nA|=4;try{!function(e,t){if(e=e.containerInfo,tc=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(e){n=null;break e}var o=0,l=-1,A=-1,u=0,c=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==r&&3!==h.nodeType||(A=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++u===a&&(l=o),d===s&&++c===r&&(A=o),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===l||-1===A?null:{start:l,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(nc={focusedElem:e,selectionRange:n},nh=!1,Bl=t;null!==Bl;)if(e=(t=Bl).child,1024&t.subtreeFlags&&null!==e)e.return=t,Bl=e;else for(;null!==Bl;){switch(s=(t=Bl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==s){e=void 0,n=t,a=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var f=mo(n.type,a,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){uu(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))fc(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fc(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Bl=e;break}Bl=t.return}}(e,t)}finally{nA=o,R.p=a,_.T=r}}CA=1,ru(),au(),su()}}function ru(){if(1===CA){CA=0;var e=NA,t=SA,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=_.T,_.T=null;var r=R.p;R.p=2;var a=nA;nA|=4;try{_l(t,e);var s=nc,i=er(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(i!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var A=l.start,u=l.end;if(void 0===u&&(u=A),"selectionStart"in o)o.selectionStart=A,o.selectionEnd=Math.min(u,o.value.length);else{var c=o.ownerDocument||document,h=c&&c.defaultView||window;if(h.getSelection){var d=h.getSelection(),p=o.textContent.length,f=Math.min(l.start,p),m=void 0===l.end?f:Math.min(l.end,p);!d.extend&&f>m&&(i=m,m=f,f=i);var g=Yn(o,f),y=Yn(o,m);if(g&&y&&(1!==d.rangeCount||d.anchorNode!==g.node||d.anchorOffset!==g.offset||d.focusNode!==y.node||d.focusOffset!==y.offset)){var b=c.createRange();b.setStart(g.node,g.offset),d.removeAllRanges(),f>m?(d.addRange(b),d.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),d.addRange(b))}}}}for(c=[],d=o;d=d.parentNode;)1===d.nodeType&&c.push({element:d,left:d.scrollLeft,top:d.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<c.length;o++){var w=c[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!tc,nc=tc=null}finally{nA=a,R.p=r,_.T=n}}e.current=t,CA=2}}function au(){if(2===CA){CA=0;var e=NA,t=SA,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=_.T,_.T=null;var r=R.p;R.p=2;var a=nA;nA|=4;try{kl(e,t.alternate,t)}finally{nA=a,R.p=r,_.T=n}}CA=3}}function su(){if(4===CA||3===CA){CA=0,ee();var e=NA,t=SA,n=IA,r=TA;10256&t.subtreeFlags||10256&t.flags?CA=5:(CA=0,SA=NA=null,iu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(kA=null),Ee(n),t=t.stateNode,ce&&"function"==typeof ce.onCommitFiberRoot)try{ce.onCommitFiberRoot(ue,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=_.T,a=R.p,R.p=2,_.T=null;try{for(var s=e.onRecoverableError,i=0;i<r.length;i++){var o=r[i];s(o.value,{componentStack:o.stack})}}finally{_.T=t,R.p=a}}3&IA&&ou(),xu(e),a=e.pendingLanes,4194090&n&&42&a?e===UA?LA++:(LA=0,UA=e):LA=0,Bu(0,!1)}}function iu(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,_a(t))}function ou(e){return ru(),au(),su(),lu()}function lu(){if(5!==CA)return!1;var e=NA,t=EA;EA=0;var n=Ee(IA),r=_.T,a=R.p;try{R.p=32>n?32:n,_.T=null,n=FA,FA=null;var s=NA,o=IA;if(CA=0,SA=NA=null,IA=0,6&nA)throw Error(i(331));var l=nA;if(nA|=4,Jl(s.current),zl(s,s.current,o,n),nA=l,Bu(0,!1),ce&&"function"==typeof ce.onPostCommitFiberRoot)try{ce.onPostCommitFiberRoot(ue,s)}catch(e){}return!0}finally{R.p=a,_.T=r,iu(e,t)}}function Au(e,t,n){t=kr(n,t),null!==(e=ss(e,t=Bo(e.stateNode,t,2),2))&&(Ce(e,2),xu(e))}function uu(e,t,n){if(3===e.tag)Au(e,e,n);else for(;null!==t;){if(3===t.tag){Au(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===kA||!kA.has(r))){e=kr(n,e),null!==(r=ss(t,n=ko(2),2))&&(Co(n,r,t,e),Ce(r,2),xu(r));break}}t=t.return}}function cu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tA;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(uA=!0,a.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rA===e&&(sA&n)===n&&(4===hA||3===hA&&(62914560&sA)===sA&&300>te()-vA?!(2&nA)&&zA(e,0):fA|=n,gA===sA&&(gA=0)),xu(e)}function du(e,t){0===t&&(t=Be()),null!==(e=Tr(e,t))&&(Ce(e,t),xu(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),du(e,n)}function fu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),du(e,n)}var mu=null,gu=null,yu=!1,bu=!1,wu=!1,vu=0;function xu(e){e!==gu&&null===e.next&&(null===gu?mu=gu=e:gu=gu.next=e),bu=!0,yu||(yu=!0,cc((function(){6&nA?J(re,ku):Cu()})))}function Bu(e,t){if(!wu&&bu){wu=!0;do{for(var n=!1,r=mu;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var s=0;else{var i=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-de(42|e)+1)-1,s=201326741&(s&=a&~(i&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Iu(r,s))}else s=sA,!(3&(s=be(r,r===rA?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Iu(r,s));r=r.next}}while(n);wu=!1}}function ku(){Cu()}function Cu(){bu=yu=!1;var e,t=0;0!==vu&&(((e=window.event)&&"popstate"===e.type?e!==oc&&(oc=e,!0):(oc=null,!1))&&(t=vu),vu=0);for(var n=te(),r=null,a=mu;null!==a;){var s=a.next,i=Nu(a,n);0===i?(a.next=null,null===r?mu=s:r.next=s,null===s&&(gu=r)):(r=a,(0!==t||3&i)&&(bu=!0)),a=s}Bu(t,!1)}function Nu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var i=31-de(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=ve(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=sA,n=be(e,e===(t=rA)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===iA||9===iA)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Y(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Y(r),Ee(n)){case 2:case 8:n=ae;break;case 32:default:n=se;break;case 268435456:n=oe}return r=Su.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Y(r),e.callbackPriority=2,e.callbackNode=null,2}function Su(e,t){if(0!==CA&&5!==CA)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=sA;return 0===(r=be(e,e===rA?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(QA(e,r,t),Nu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Su.bind(null,e):null)}function Iu(e,t){if(ou())return null;QA(e,t,!0)}function Eu(){return 0===vu&&(vu=xe()),vu}function Fu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Et(""+e)}function Tu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Lu=0;Lu<vr.length;Lu++){var Uu=vr[Lu];xr(Uu.toLowerCase(),"on"+(Uu[0].toUpperCase()+Uu.slice(1)))}xr(dr,"onAnimationEnd"),xr(pr,"onAnimationIteration"),xr(fr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(mr,"onTransitionRun"),xr(gr,"onTransitionStart"),xr(yr,"onTransitionCancel"),xr(br,"onTransitionEnd"),qe("onMouseEnter",["mouseout","mouseover"]),qe("onMouseLeave",["mouseout","mouseover"]),qe("onPointerEnter",["pointerout","pointerover"]),qe("onPointerLeave",["pointerout","pointerover"]),je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),je("onBeforeInput",["compositionend","keypress","textInput","paste"]),je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ru=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function Du(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,A=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=A;try{s(a)}catch(e){go(e)}a.currentTarget=null,s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,A=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;s=o,a.currentTarget=A;try{s(a)}catch(e){go(e)}a.currentTarget=null,s=l}}}}function Qu(e,t){var n=t[Re];void 0===n&&(n=t[Re]=new Set);var r=e+"__bubble";n.has(r)||(Pu(t,e,2,!1),n.add(r))}function Ou(e,t,n){var r=0;t&&(r|=4),Pu(n,e,r,t)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Mu(e){if(!e[$u]){e[$u]=!0,Ke.forEach((function(t){"selectionchange"!==t&&(Ru.has(t)||Ou(t,!1,e),Ou(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$u]||(t[$u]=!0,Ou("selectionchange",!1,t))}}function Pu(e,t,n,r){switch(Ah(t)){case 2:var a=rh;break;case 8:a=ah;break;default:a=sh}n=a.bind(null,t,n,e),a=void 0,!$t||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hu(e,t,n,r,a){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a)break;if(4===i)for(i=r.return;null!==i;){var A=i.tag;if((3===A||4===A)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==o;){if(null===(i=Pe(o)))return;if(5===(A=i.tag)||6===A||26===A||27===A){r=s=i;continue e}o=o.parentNode}}r=r.return}Dt((function(){var r=s,a=Tt(n),i=[];e:{var o=wr.get(e);if(void 0!==o){var A=Zt,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":A=fn;break;case"focusin":u="focus",A=sn;break;case"focusout":u="blur",A=sn;break;case"beforeblur":case"afterblur":A=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=gn;break;case dr:case pr:case fr:A=on;break;case br:A=yn;break;case"scroll":case"scrollend":A=tn;break;case"wheel":A=bn;break;case"copy":case"cut":case"paste":A=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=mn;break;case"toggle":case"beforetoggle":A=wn}var c=!!(4&t),h=!c&&("scroll"===e||"scrollend"===e),d=c?null!==o?o+"Capture":null:o;c=[];for(var p,f=r;null!==f;){var m=f;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===d||null!=(m=Qt(f,d))&&c.push(zu(f,m,p)),h)break;f=f.return}0<c.length&&(o=new A(o,u,null,n,a),i.push({event:o,listeners:c}))}}if(!(7&t)){if(A="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Ft||!(u=n.relatedTarget||n.fromElement)||!Pe(u)&&!u[_e])&&(A||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,A?(A=r,null!==(u=(u=n.relatedTarget||n.toElement)?Pe(u):null)&&(h=l(u),c=u.tag,u!==h||5!==c&&27!==c&&6!==c)&&(u=null)):(A=null,u=r),A!==u)){if(c=rn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=mn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==A?o:ze(A),p=null==u?o:ze(u),(o=new c(m,f+"leave",A,n,a)).target=h,o.relatedTarget=p,m=null,Pe(a)===r&&((c=new c(d,f+"enter",u,n,a)).target=p,c.relatedTarget=h,m=c),h=m,A&&u)e:{for(d=u,f=0,p=c=A;p;p=Wu(p))f++;for(p=0,m=d;m;m=Wu(m))p++;for(;0<f-p;)c=Wu(c),f--;for(;0<p-f;)d=Wu(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Wu(c),d=Wu(d)}c=null}else c=null;null!==A&&Ku(i,o,A,c,!1),null!==u&&null!==h&&Ku(i,h,u,c,!0)}if("select"===(A=(o=r?ze(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===A&&"file"===o.type)var g=On;else if(Ln(o))if($n)g=jn;else{g=Kn;var y=Wn}else!(A=o.nodeName)||"input"!==A.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Nt(r.elementType)&&(g=On):g=Gn;switch(g&&(g=g(e,r))?Un(i,g,n,a):(y&&y(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&yt(o,"number",o.value)),y=r?ze(r):window,e){case"focusin":(Ln(y)||"true"===y.contentEditable)&&(rr=y,ar=r,sr=null);break;case"focusout":sr=ar=rr=null;break;case"mousedown":ir=!0;break;case"contextmenu":case"mouseup":case"dragend":ir=!1,or(i,n,a);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(i,n,a)}var b;if(xn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Fn?In(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Fn&&(b=Vt()):(Ht="value"in(Pt=a)?Pt.value:Pt.textContent,Fn=!0)),0<(y=Vu(r,w)).length&&(w=new An(w,e,null,n,a),i.push({event:w,listeners:y}),(b||null!==(b=En(n)))&&(w.data=b))),(b=kn?function(e,t){switch(e){case"compositionend":return En(t);case"keypress":return 32!==t.which?null:(Sn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Sn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!xn&&In(e,t)?(e=Vt(),zt=Ht=Pt=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(w=Vu(r,"onBeforeInput")).length&&(y=new An("onBeforeInput","beforeinput",null,n,a),i.push({event:y,listeners:w}),y.data=b),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var s=Fu((a[Ue]||null).action),i=r.submitter;i&&null!==(t=(t=i[Ue]||null)?Fu(t.formAction):i.getAttribute("formAction"))&&(s=t,i=null);var o=new Zt("action","action",null,r,a);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==vu){var e=i?Tu(a,i):new FormData(a);Fi(n,{pending:!0,data:e,method:a.method,action:s},null,e)}}else"function"==typeof s&&(o.preventDefault(),e=i?Tu(a,i):new FormData(a),Fi(n,{pending:!0,data:e,method:a.method,action:s},s,e))},currentTarget:a}]})}}(i,e,r,n,a)}Du(i,t)}))}function zu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vu(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===s||(null!=(a=Qt(e,n))&&r.unshift(zu(e,a,s)),null!=(a=Qt(e,t))&&r.push(zu(e,a,s))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,A=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===A||(l=A,a?null!=(A=Qt(n,s))&&i.unshift(zu(n,A,l)):a||null!=(A=Qt(n,s))&&i.push(zu(n,A,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Gu=/\r\n?/g,ju=/\u0000|\uFFFD/g;function qu(e){return("string"==typeof e?e:""+e).replace(Gu,"\n").replace(ju,"")}function Xu(e,t){return t=qu(t),qu(e)===t}function Ju(){}function Yu(e,t,n,r,a,s){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||xt(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&xt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Et(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof s&&("formAction"===n?("input"!==t&&Yu(e,t,"name",a.name,a,null),Yu(e,t,"formEncType",a.formEncType,a,null),Yu(e,t,"formMethod",a.formMethod,a,null),Yu(e,t,"formTarget",a.formTarget,a,null)):(Yu(e,t,"encType",a.encType,a,null),Yu(e,t,"method",a.method,a,null),Yu(e,t,"target",a.target,a,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Et(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Et(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=St.get(n)||n,r)}}function Zu(e,t,n,r,a,s){switch(n){case"style":Ct(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"==typeof r?xt(e,r):("number"==typeof r||"bigint"==typeof r)&&xt(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"==typeof(s=null!=(s=e[Ue]||null)?s[n]:null)&&e.removeEventListener(t,s,a),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!=typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function ec(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,a=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":a=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Yu(e,t,r,o,n,null)}}return s&&Yu(e,t,"srcSet",n.srcSet,n,null),void(a&&Yu(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=r=o=s=null,A=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var c=n[a];if(null!=c)switch(a){case"name":s=c;break;case"type":o=c;break;case"checked":A=c;break;case"defaultChecked":u=c;break;case"value":r=c;break;case"defaultValue":l=c;break;case"children":case"dangerouslySetInnerHTML":if(null!=c)throw Error(i(137,t));break;default:Yu(e,t,a,c,n,null)}}return gt(e,r,l,A,u,o,s,!1),void ct(e);case"select":for(s in Qu("invalid",e),a=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:Yu(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!a,void(null!=t?bt(e,!!a,t,!1):null!=n&&bt(e,!!a,n,!0));case"textarea":for(o in Qu("invalid",e),r=s=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:Yu(e,t,o,l,n,null)}return vt(e,a,s,r),void ct(e);case"option":for(A in n)n.hasOwnProperty(A)&&null!=(a=n[A])&&("selected"===A?e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a:Yu(e,t,A,a,n,null));return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(a=0;a<_u.length;a++)Qu(_u[a],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Yu(e,t,u,a,n,null)}return;default:if(Nt(t)){for(c in n)n.hasOwnProperty(c)&&void 0!==(a=n[c])&&Zu(e,t,c,a,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(a=n[l])&&Yu(e,t,l,a,n,null)}var tc=null,nc=null;function rc(e){return 9===e.nodeType?e:e.ownerDocument}function ac(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sc(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ic(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var oc=null,lc="function"==typeof setTimeout?setTimeout:void 0,Ac="function"==typeof clearTimeout?clearTimeout:void 0,uc="function"==typeof Promise?Promise:void 0,cc="function"==typeof queueMicrotask?queueMicrotask:void 0!==uc?function(e){return uc.resolve(null).then(e).catch(hc)}:lc;function hc(e){setTimeout((function(){throw e}))}function dc(e){return"head"===e}function pc(e,t){var n=t,r=0,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&vc(i.documentElement),2&n&&vc(i.body),4&n)for(vc(n=i.head),i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[$e]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}if(0===a)return e.removeChild(s),void Sh(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Sh(t)}function fc(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fc(n),Me(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function mc(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gc(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yc=null;function bc(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wc(e,t,n){switch(t=rc(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function vc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Me(e)}var xc=new Map,Bc=new Set;function kc(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cc=R.d;R.d={f:function(){var e=Cc.f(),t=PA();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Li(t):Cc.r(e)},D:function(e){Cc.D(e),Sc("dns-prefetch",e,null)},C:function(e,t){Cc.C(e,t),Sc("preconnect",e,t)},L:function(e,t,n){Cc.L(e,t,n);var r=Nc;if(r&&e&&t){var a='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+ft(n.imageSizes)+'"]')):a+='[href="'+ft(e)+'"]';var s=a;switch(t){case"style":s=Ec(e);break;case"script":s=Lc(e)}xc.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),xc.set(s,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Fc(s))||"script"===t&&r.querySelector(Uc(s))||(ec(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Cc.m(e,t);var n=Nc;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',s=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Lc(e)}if(!xc.has(s)&&(e=h({rel:"modulepreload",href:e},t),xc.set(s,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Uc(s)))return}ec(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){Cc.X(e,t);var n=Nc;if(n&&e){var r=Ve(n).hoistableScripts,a=Lc(e),s=r.get(a);s||((s=n.querySelector(Uc(a)))||(e=h({src:e,async:!0},t),(t=xc.get(a))&&Qc(e,t),We(s=n.createElement("script")),ec(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}},S:function(e,t,n){Cc.S(e,t,n);var r=Nc;if(r&&e){var a=Ve(r).hoistableStyles,s=Ec(e);t=t||"default";var i=a.get(s);if(!i){var o={loading:0,preload:null};if(i=r.querySelector(Fc(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=xc.get(s))&&Dc(e,n);var l=i=r.createElement("link");We(l),ec(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Rc(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:o},a.set(s,i)}}},M:function(e,t){Cc.M(e,t);var n=Nc;if(n&&e){var r=Ve(n).hoistableScripts,a=Lc(e),s=r.get(a);s||((s=n.querySelector(Uc(a)))||(e=h({src:e,async:!0,type:"module"},t),(t=xc.get(a))&&Qc(e,t),We(s=n.createElement("script")),ec(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(a,s))}}};var Nc="undefined"==typeof document?null:document;function Sc(e,t,n){var r=Nc;if(r&&"string"==typeof t&&t){var a=ft(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),Bc.has(a)||(Bc.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(ec(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Ic(e,t,n,r){var a,s,o,l,A=(A=V.current)?kc(A):null;if(!A)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Ec(n.href),(r=(n=Ve(A).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Ec(n.href);var u=Ve(A).hoistableStyles,c=u.get(e);if(c||(A=A.ownerDocument||A,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,c),(u=A.querySelector(Fc(e)))&&!u._p&&(c.instance=u,c.state.loading=5),xc.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xc.set(e,n),u||(a=A,s=e,o=n,l=c.state,a.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=a.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),ec(s,"link",o),We(s),a.head.appendChild(s))))),t&&null===r)throw Error(i(528,""));return c}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Lc(n),(r=(n=Ve(A).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Ec(e){return'href="'+ft(e)+'"'}function Fc(e){return'link[rel="stylesheet"]['+e+"]"}function Tc(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Lc(e){return'[src="'+ft(e)+'"]'}function Uc(e){return"script[async]"+e}function _c(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,We(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),ec(r,"style",a),Rc(r,n.precedence,e),t.instance=r;case"stylesheet":a=Ec(n.href);var s=e.querySelector(Fc(a));if(s)return t.state.loading|=4,t.instance=s,We(s),s;r=Tc(n),(a=xc.get(a))&&Dc(r,a),We(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),ec(s,"link",r),t.state.loading|=4,Rc(s,n.precedence,e),t.instance=s;case"script":return s=Lc(n.src),(a=e.querySelector(Uc(s)))?(t.instance=a,We(a),a):(r=n,(a=xc.get(s))&&Qc(r=h({},n),a),We(a=(e=e.ownerDocument||e).createElement("script")),ec(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Rc(r,n.precedence,e));return t.instance}function Rc(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,s=a,i=0;i<r.length;i++){var o=r[i];if(o.dataset.precedence===t)s=o;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Dc(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Qc(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Oc=null;function $c(e,t,n){if(null===Oc){var r=new Map,a=Oc=new Map;a.set(n,r)}else(r=(a=Oc).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var s=n[a];if(!(s[$e]||s[Le]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var i=s.getAttribute(t)||"";i=e+i;var o=r.get(i);o?o.push(s):r.set(i,[s])}}return r}function Mc(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Pc(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Hc=null;function zc(){}function Vc(){if(this.count--,0===this.count)if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wc=null;function Kc(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wc=new Map,t.forEach(Gc,e),Wc=null,Vc.call(e))}function Gc(e,t){if(!(4&t.state.loading)){var n=Wc.get(e);if(n)var r=n.get(null);else{n=new Map,Wc.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var i=a[s];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(s=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=Vc.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),s?s.parentNode.insertBefore(a,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var jc={$$typeof:v,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function qc(e,t,n,r,a,s,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xc(e,t,n,r,a,s,i,o,l,A,u,c){return e=new qc(e,t,n,i,o,l,A,c),t=1,!0===s&&(t|=24),s=Dr(3,null,null,t),e.current=s,s.stateNode=e,(t=Ua()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Jc(e){return e?e=_r:_r}function Yc(e,t,n,r,a,s){a=Jc(a),null===r.context?r.context=a:r.pendingContext=a,(r=as(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(DA(n,0,t),is(n,e,t))}function Zc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zc(e,t),(e=e.alternate)&&Zc(e,t)}function th(e){if(13===e.tag){var t=Tr(e,67108864);null!==t&&DA(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var a=_.T;_.T=null;var s=R.p;try{R.p=2,sh(e,t,n,r)}finally{R.p=s,_.T=a}}function ah(e,t,n,r){var a=_.T;_.T=null;var s=R.p;try{R.p=8,sh(e,t,n,r)}finally{R.p=s,_.T=a}}function sh(e,t,n,r){if(nh){var a=ih(r);if(null===a)Hu(e,t,r,oh,n),yh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return ch=bh(ch,e,t,n,r,a),!0;case"dragenter":return hh=bh(hh,e,t,n,r,a),!0;case"mouseover":return dh=bh(dh,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return ph.set(s,bh(ph.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,fh.set(s,bh(fh.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(yh(e,r),4&t&&-1<gh.indexOf(e)){for(;null!==a;){var s=He(a);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var i=ye(s.pendingLanes);if(0!==i){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-de(i);o.entanglements[1]|=l,i&=~l}xu(s),!(6&nA)&&(xA=te()+500,Bu(0,!1))}}break;case 13:null!==(o=Tr(s,2))&&DA(o,0,2),PA(),eh(s,2)}if(null===(s=ih(r))&&Hu(e,t,r,oh,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Hu(e,t,r,null,n)}}function ih(e){return lh(e=Tt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=Pe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=A(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function Ah(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ae:return 8;case se:case ie:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,ch=null,hh=null,dh=null,ph=new Map,fh=new Map,mh=[],gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":ch=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":dh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function bh(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&null!==(t=He(t))&&th(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function wh(e){var t=Pe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=A(n)))return e.blockedOn=t,void function(e){var t=R.p;try{return R.p=e,function(){if(13===n.tag){var e=_A();e=Ie(e);var t=Tr(n,e);null!==t&&DA(t,0,e),eh(n,e)}}()}finally{R.p=t}}(e.priority)}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ih(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ft=r,n.target.dispatchEvent(r),Ft=null,t.shift()}return!0}function xh(e,t,n){vh(e)&&n.delete(t)}function Bh(){uh=!1,null!==ch&&vh(ch)&&(ch=null),null!==hh&&vh(hh)&&(hh=null),null!==dh&&vh(dh)&&(dh=null),ph.forEach(xh),fh.forEach(xh)}function kh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bh)))}var Ch=null;function Nh(e){Ch!==e&&(Ch=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!=typeof r){if(null===lh(r||n))continue;break}var s=He(n);null!==s&&(e.splice(t,3),t-=3,Fi(s,{pending:!0,data:a,method:n.method,action:r},r,a))}})))}function Sh(e){function t(t){return kh(t,e)}null!==ch&&kh(ch,e),null!==hh&&kh(hh,e),null!==dh&&kh(dh,e),ph.forEach(t),fh.forEach(t);for(var n=0;n<mh.length;n++){var r=mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<mh.length&&null===(n=mh[0]).blockedOn;)wh(n),null===n.blockedOn&&mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],s=n[r+1],i=a[Ue]||null;if("function"==typeof s)i||Nh(n);else if(i){var o=null;if(s&&s.hasAttribute("formAction")){if(a=s,i=s[Ue]||null)o=i.formAction;else if(null!==lh(a))continue}else o=i.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Nh(n)}}}function Ih(e){this._internalRoot=e}function Eh(e){this._internalRoot=e}Eh.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Yc(t.current,_A(),e,t,null,null)},Eh.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Yc(e.current,2,null,e,null,null),PA(),t[_e]=null}},Eh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mh.length&&0!==t&&t<mh[n].priority;n++);mh.splice(n,0,e),0===n&&wh(e)}};var Fh=a.version;if("19.1.0"!==Fh)throw Error(i(527,Fh,"19.1.0"));R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return u(a),e;if(s===r)return u(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,A=a.child;A;){if(A===n){o=!0,n=a,r=s;break}if(A===r){o=!0,r=a,n=s;break}A=A.sibling}if(!o){for(A=s.child;A;){if(A===n){o=!0,n=s,r=a;break}if(A===r){o=!0,r=s,n=a;break}A=A.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),null===(e=null!==e?c(e):null)?null:e.stateNode};var Th={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{ue=Lh.inject(Th),ce=Lh}catch(e){}}t.createRoot=function(e,t){if(!o(e))throw Error(i(299));var n=!1,r="",a=yo,s=bo,l=wo;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xc(e,1,!1,null,0,n,r,a,s,l,0,null),e[_e]=t.current,Mu(e),new Ih(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(i(299));var r=!1,a="",s=yo,l=bo,A=wo,u=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(A=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xc(e,1,!0,t,0,r,a,s,l,A,0,u)).context=Jc(null),n=t.current,(a=as(r=Ie(r=_A()))).callback=null,ss(n,a,r),n=r,t.current.lanes=n,Ce(t,n),xu(t),e[_e]=t.current,Mu(e),new Eh(t)},t.version="19.1.0"},1601:e=>{"use strict";e.exports=function(e){return e[1]}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2478:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),a=n.n(r),s=n(6314),i=n.n(s)()(a());i.push([e.id,".profile-container {\n    max-width: 1000px;\n    margin: 2rem auto;\n    padding: 2rem;\n}\n\n.profile-header {\n    font-size: 2rem;\n    font-weight: 700;\n    color: #1f2937; /* gray-800 */\n    margin-bottom: 2rem;\n    text-align: left;\n}\n\n.profile-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n    gap: 2rem;\n}\n\n.profile-card {\n    background-color: white;\n    border-radius: 12px;\n    padding: 2rem;\n    border: 1px solid #e5e7eb; /* gray-200 */\n    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n}\n\n.profile-card h3 {\n    font-size: 1.25rem;\n    font-weight: 600;\n    margin-bottom: 1.5rem;\n    border-bottom: 1px solid #e5e7eb;\n    padding-bottom: 1rem;\n}\n\n.avatar-section {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-bottom: 1.5rem;\n}\n\n.avatar-preview {\n    width: 120px;\n    height: 120px;\n    border-radius: 50%;\n    object-fit: cover;\n    border: 4px solid #fff;\n    box-shadow: 0 0 10px rgba(0,0,0,0.1);\n    margin-bottom: 1rem;\n}\n\n.btn-change-avatar {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5rem;\n    background-color: #f3f4f6;\n    color: #374151;\n    border: 1px solid #d1d5db;\n    padding: 0.5rem 1rem;\n    border-radius: 8px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\n.btn-change-avatar:hover {\n    background-color: #e5e7eb;\n}\n\n.input-group {\n    margin-bottom: 1.5rem;\n}\n\n.input-group label {\n    display: block;\n    font-weight: 500;\n    color: #374151; /* gray-700 */\n    margin-bottom: 0.5rem;\n}\n\n.input-with-icon {\n    position: relative;\n}\n\n.input-with-icon svg {\n    position: absolute;\n    left: 0.75rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #9ca3af; /* gray-400 */\n}\n\n.input-with-icon input {\n    width: 100%;\n    padding: 0.75rem 0.75rem 0.75rem 2.5rem;\n    border-radius: 8px;\n    border: 1px solid #d1d5db; /* gray-300 */\n    transition: border-color 0.2s, box-shadow 0.2s;\n}\n\n.input-with-icon input:focus {\n    outline: none;\n    border-color: #2563eb; /* blue-600 */\n    box-shadow: 0 0 0 2px #bfdbfe; /* blue-200 */\n}\n\n.input-with-icon input:disabled {\n    background-color: #f3f4f6; /* gray-100 */\n    cursor: not-allowed;\n}\n\n.btn-save {\n    width: 100%;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.5rem;\n    padding: 0.75rem 1rem;\n    border-radius: 8px;\n    border: none;\n    background-color: #16a34a; /* green-600 */\n    color: white;\n    font-weight: 600;\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\n.btn-save:hover {\n    background-color: #15803d; /* green-700 */\n}\n\n.btn-save:disabled {\n    background-color: #a3e635; /* lime-400 */\n    cursor: not-allowed;\n}\n\n.message-banner {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    padding: 1rem;\n    border-radius: 8px;\n    margin-bottom: 2rem;\n    font-weight: 500;\n}\n\n.message-banner.success {\n    background-color: #f0fdf4; /* green-50 */\n    color: #16a34a; /* green-600 */\n    border: 1px solid #bbf7d0; /* green-200 */\n}\n\n.message-banner.error {\n    background-color: #fef2f2; /* red-50 */\n    color: #dc2626; /* red-600 */\n    border: 1px solid #fecaca; /* red-200 */\n}\n/* ... (style lain yang sudah ada di ProfilePage.css) ... */\n\n/* --- STYLE UNTUK BANNER NOTIFIKASI --- */\n\n.message-banner {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem; /* 12px */\n    padding: 1rem; /* 16px */\n    border-radius: 8px;\n    margin-bottom: 2rem; /* 32px */\n    font-weight: 500;\n    border: 1px solid transparent;\n    animation: fadeIn 0.5s ease-in-out;\n}\n\n/* Style untuk pesan sukses (hijau) */\n.message-banner.success {\n    background-color: #f0fdf4; /* Tailwind's green-50 */\n    color: #166534; /* Tailwind's green-800 */\n    border-color: #bbf7d0; /* Tailwind's green-200 */\n}\n\n.message-banner.success svg {\n    color: #22c55e; /* Tailwind's green-500 */\n}\n\n/* Style untuk pesan error (merah) */\n.message-banner.error {\n    background-color: #fef2f2; /* Tailwind's red-50 */\n    color: #991b1b; /* Tailwind's red-800 */\n    border-color: #fecaca; /* Tailwind's red-200 */\n}\n\n.message-banner.error svg {\n    color: #ef4444; /* Tailwind's red-500 */\n}\n\n/* Animasi sederhana untuk banner */\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n        transform: translateY(-10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n",""]);const o=i},3031:function(e,t,n){var r;!function(e,a){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xorwow=o}(0,e=n.nmd(e),n.amdD)},3181:function(e,t,n){var r;!function(e,a){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xor128=o}(0,e=n.nmd(e),n.amdD)},3717:function(e,t,n){var r;!function(e,a){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.tychei=o}(0,e=n.nmd(e),n.amdD)},4477:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],A=o+1,u=e[A];if(0>s(l,n))A<a&&0>s(u,l)?(e[r]=u,e[A]=n,r=A):(e[r]=l,e[o]=n,r=o);else{if(!(A<a&&0>s(u,n)))break e;e[r]=u,e[A]=n,r=A}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var A=[],u=[],c=1,h=null,d=3,p=!1,f=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,w="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(A,t)}t=r(u)}}function x(e){if(m=!1,v(e),!f)if(null!==r(A))f=!0,k||(k=!0,B());else{var t=r(u);null!==t&&L(x,t.startTime-e)}}var B,k=!1,C=-1,N=5,S=-1;function I(){return!(!g&&t.unstable_now()-S<N)}function E(){if(g=!1,k){var e=t.unstable_now();S=e;var n=!0;try{e:{f=!1,m&&(m=!1,b(C),C=-1),p=!0;var s=d;try{t:{for(v(e),h=r(A);null!==h&&!(h.expirationTime>e&&I());){var i=h.callback;if("function"==typeof i){h.callback=null,d=h.priorityLevel;var o=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof o){h.callback=o,v(e),n=!0;break t}h===r(A)&&a(A),v(e)}else a(A);h=r(A)}if(null!==h)n=!0;else{var l=r(u);null!==l&&L(x,l.startTime-e),n=!1}}break e}finally{h=null,d=s,p=!1}n=void 0}}finally{n?B():k=!1}}}if("function"==typeof w)B=function(){w(E)};else if("undefined"!=typeof MessageChannel){var F=new MessageChannel,T=F.port2;F.port1.onmessage=E,B=function(){T.postMessage(null)}}else B=function(){y(E,0)};function L(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?i+s:i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:c++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(A)&&e===r(u)&&(m?(b(C),C=-1):m=!0,L(x,s-i))):(e.sortIndex=o,n(A,e),f||p||(f=!0,k||(k=!0,B()))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},4530:()=>{},4761:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),a=n.n(r),s=n(6314),i=n.n(s)()(a());i.push([e.id,"/* General container for the dashboard content */\n.content-area {\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n  background-color: #f9fafb; /* Light gray background */\n}\n\n/* Header styles */\n.content-area h2 {\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: #111827; /* Dark gray */\n  margin-bottom: 0.5rem;\n}\n\n.content-area p {\n  font-size: 1.125rem;\n  color: #6b7280; /* Medium gray */\n}\n\n/* Grid layout for statistics cards */\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2.5rem;\n}\n\n/* Individual statistic card styling */\n.stat-card {\n  background-color: #ffffff;\n  border-radius: 0.75rem;\n  padding: 1.5rem;\n  display: flex;\n  align-items: center;\n  gap: 1.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);\n  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\n}\n\n.stat-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);\n}\n\n/* Icon container within the stat card */\n.stat-icon {\n  background-image: linear-gradient(to right, #10b981, #06b6d4); /* Green to cyan gradient */\n  border-radius: 50%;\n  width: 64px;\n  height: 64px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n}\n\n/* Content within the stat card */\n.stat-content h3 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #4b5563; /* Gray */\n  margin: 0;\n}\n\n.stat-content .stat-number {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #111827; /* Dark gray */\n  margin-top: 0.25rem;\n}\n\n/* Card for quick actions */\n.card {\n  background-color: #ffffff;\n  border-radius: 0.75rem;\n  padding: 2rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);\n}\n\n/* Flex container for the quick action buttons */\n.quick-actions {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1.5rem;\n}\n\n/* Individual action button styling */\n.action-button {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  background-color: #f3f4f6; /* Light gray background */\n  padding: 0.75rem 1.5rem;\n  border-radius: 0.5rem;\n  text-decoration: none;\n  color: #374151; /* Darker gray text */\n  font-weight: 600;\n  transition: background-color 0.2s, color 0.2s;\n}\n\n.action-button:hover {\n  background-color: #e5e7eb; /* Slightly darker gray on hover */\n}\n\n/* Icon container within the action button */\n.action-button .action-icon {\n  background-image: linear-gradient(to right, #8b5cf6, #ec4899); /* Purple to pink gradient */\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}",""]);const o=i},4801:function(e,t,n){var r;!function(a,s,i){var o,l=256,A=i.pow(l,6),u=i.pow(2,52),c=2*u,h=255;function d(e,t,n){var r=[],h=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(s)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(s)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=A,n=0;e<u;)e=(e+n)*l,t*=l,n=d.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,g(y(d.S),s),(t.pass||n||function(e,t,n,r){return r&&(r.S&&f(r,d),e.state=function(){return f(d,{})}),n?(i.random=e,t):e})(b,h,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,s=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<l;)i[a]=a++;for(a=0;a<l;a++)i[a]=i[s=h&s+e[a%n]+(t=i[a])],i[s]=t;(r.g=function(e){for(var t,n=0,a=r.i,s=r.j,i=r.S;e--;)t=i[a=h&a+1],n=n*l+i[h&(i[a]=i[s=h&s+t])+(i[s]=t)];return r.i=a,r.j=s,n})(l)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[h&a]=h&(n^=19*t[h&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(i.random(),s),e.exports){e.exports=d;try{o=n(1234)}catch(e){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},i=[],o=0;o<e.length;o++){var l=e[o],A=r.base?l[0]+r.base:l[0],u=s[A]||0,c="".concat(A," ").concat(u);s[A]=u+1;var h=n(c),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(d);else{var p=a(d,r);r.byIndex=o,t.splice(o,0,{identifier:c,updater:p,references:1})}i.push(c)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var s=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<s.length;i++){var o=n(s[i]);t[o].references--}for(var l=r(e,a),A=0;A<s.length;A++){var u=n(s[A]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},5338:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(1247)},5817:()=>{},6069:(e,t)=>{"use strict";Object.prototype.toString},6221:(e,t,n)=>{"use strict";var r=n(6540);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal"),l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=A(n,t.crossOrigin),a="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:s}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=A(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=A(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=A(t.as,t.crossOrigin);i.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,s){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(i[l]=!0)}for(var A=0;A<e.length;A++){var u=[].concat(e[A]);r&&i[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},6540:(e,t,n)=>{"use strict";e.exports=n(9869)},6593:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),a=n.n(r),s=n(6314),i=n.n(s)()(a());i.push([e.id,"/* Anda bisa menggunakan kembali style .content-area dan .card dari file CSS dashboard Anda */\n/* Jika belum, Anda bisa menambahkannya di file CSS global atau di sini */\n\n.content-area {\n    padding: 2rem;\n    max-width: 1200px;\n    margin: 0 auto;\n    background-color: #f9fafb;\n}\n\n.card {\n    background-color: #ffffff;\n    border-radius: 0.75rem;\n    padding: 2rem;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);\n    overflow-x: auto; /* Memastikan tabel bisa di-scroll pada layar kecil */\n}\n\n.text-left {\n    text-align: left;\n}\n\n.text-center {\n    text-align: center;\n}\n\n.font-mono {\n    font-family: 'Courier New', Courier, monospace;\n}\n\n.font-medium {\n    font-weight: 500;\n}\n\n/* Container untuk tabel agar responsif */\n.table-container {\n    width: 100%;\n    overflow-x: auto;\n}\n\n/* Styling utama untuk tabel */\n.custom-table {\n    width: 100%;\n    border-collapse: collapse; /* Menghilangkan spasi antar border sel */\n    min-width: 600px; /* Lebar minimum sebelum scroll horizontal muncul */\n}\n\n/* Styling untuk header tabel (thead) */\n.custom-table thead tr {\n    background-color: #f3f4f6; /* Warna latar header abu-abu muda */\n}\n\n.custom-table th {\n    padding: 1rem 1.5rem;\n    text-align: left;\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: #4b5563; /* Warna teks header abu-abu */\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n/* Styling untuk isi tabel (tbody) */\n.custom-table tbody tr {\n    border-bottom: 1px solid #e5e7eb; /* Garis pemisah antar baris */\n}\n\n.custom-table tbody tr:last-child {\n    border-bottom: none; /* Hapus border pada baris terakhir */\n}\n\n.custom-table tbody tr:hover {\n    background-color: #f9fafb; /* Efek hover pada baris */\n}\n\n.custom-table td {\n    padding: 1rem 1.5rem;\n    font-size: 0.95rem;\n    color: #374151; /* Warna teks isi tabel */\n    vertical-align: middle; /* Memastikan konten sel vertikal di tengah */\n}\n\n/* Styling untuk status badge */\n.status-badge {\n    padding: 0.25rem 0.75rem;\n    border-radius: 9999px; /* Membuat bentuk pil */\n    font-size: 0.8rem;\n    font-weight: 600;\n    text-transform: capitalize;\n}\n\n.status-sehat {\n    background-color: #d1fae5; /* Hijau muda */\n    color: #065f46; /* Hijau tua */\n}\n\n.status-diperlukan {\n    background-color: #fee2e2; /* Merah muda */\n    color: #991b1b; /* Merah tua */\n}\n\n/* Styling untuk tombol aksi (icon) */\n.btn-icon {\n    background: none;\n    border: none;\n    padding: 0.5rem;\n    cursor: pointer;\n    border-radius: 50%;\n    color: #6b7280; /* Warna ikon abu-abu */\n    transition: background-color 0.2s, color 0.2s;\n}\n\n.btn-icon:hover {\n    background-color: #e5e7eb; /* Latar abu-abu saat hover */\n    color: #111827; /* Warna ikon lebih gelap saat hover */\n}\n/* Tambahkan ini ke dalam file ../css/HistoryPage.css */\n\n.history-image {\n    width: 80px;\n    height: 80px;\n    object-fit: cover;\n    border-radius: 8px;\n    border: 2px solid #eee;\n}\n\n.action-buttons {\n    display: flex;\n    gap: 8px;\n    justify-content: center;\n    align-items: center;\n}\n\n.btn-delete {\n    color: #ef4444; /* red-500 */\n}\n.btn-delete:hover {\n    background-color: #fee2e2; /* red-100 */\n}\n\n/* Modal Styles */\n.modal-backdrop {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n}\n\n.modal-content {\n    background-color: white;\n    padding: 2rem;\n    border-radius: 12px;\n    box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n    max-width: 400px;\n    width: 90%;\n    text-align: center;\n}\n\n.modal-title {\n    font-size: 1.5rem;\n    font-weight: 600;\n    margin-bottom: 1rem;\n}\n\n.modal-body {\n    color: #4b5563; /* gray-600 */\n    margin-bottom: 1.5rem;\n}\n\n.modal-actions {\n    display: flex;\n    justify-content: center;\n    gap: 1rem;\n}\n\n.btn-secondary {\n    padding: 0.5rem 1rem;\n    border-radius: 8px;\n    border: 1px solid #d1d5db; /* gray-300 */\n    background-color: white;\n    font-weight: 500;\n    cursor: pointer;\n}\n.btn-secondary:hover {\n    background-color: #f3f4f6; /* gray-100 */\n}\n\n.btn-danger {\n    padding: 0.5rem 1rem;\n    border-radius: 8px;\n    border: 1px solid transparent;\n    background-color: #ef4444; /* red-500 */\n    color: white;\n    font-weight: 500;\n    cursor: pointer;\n}\n.btn-danger:hover {\n    background-color: #dc2626; /* red-600 */\n}\n.btn-danger:disabled {\n    background-color: #f87171; /* red-400 */\n    cursor: not-allowed;\n}",""]);const o=i},6833:function(e,t,n){var r;!function(e,a){function s(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,s=t.i;return t.w=r=r+1640531527|0,n=a[s+34&127],e=a[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[s]=n^e,t.i=s,n+(r^r>>>16)|0},function(e,t){var n,r,a,s,i,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,s=-32;s<l;++s)t&&(r^=t.charCodeAt((s+32)%t.length)),0===s&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=i+1640531527|0,a=0==(n=o[127&s]^=r+i)?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,s=512;s>0;--s)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[a]=r^n;e.w=i,e.X=o,e.i=a}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xor4096=o}(0,e=n.nmd(e),n.amdD)},7180:function(e,t,n){var r;!function(e,a){function s(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new s(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.alea=o}(0,e=n.nmd(e),n.amdD)},7391:(e,t,n)=>{var r=n(7180),a=n(3181),s=n(3031),i=n(9067),o=n(6833),l=n(3717),A=n(4801);A.alea=r,A.xor128=a,A.xorwow=s,A.xorshift7=i,A.xor4096=o,A.tychei=l,e.exports=A},7659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},8108:()=>{},8570:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},s={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=l(e,(0|e)<0?-1:0,!0),i&&(s[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=l(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function o(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=d)return x}else{if(e<=-p)return B;if(e+1>=p)return v}return e<0?o(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=o,n.fromBits=l;var A=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var a=o(A(n,8)),s=m,i=0;i<e.length;i+=8){var l=Math.min(8,e.length-i),c=parseInt(e.substring(i,i+l),n);if(l<8){var h=o(A(n,l));s=s.mul(h).add(o(c))}else s=(s=s.mul(a)).add(o(c))}return s.unsigned=t,s}function c(e,t){return"number"==typeof e?o(e,t):"string"==typeof e?u(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=c;var h=4294967296,d=h*h,p=d/2,f=i(1<<24),m=i(0);n.ZERO=m;var g=i(0,!0);n.UZERO=g;var y=i(1);n.ONE=y;var b=i(1,!0);n.UONE=b;var w=i(-1);n.NEG_ONE=w;var v=l(-1,2147483647,!1);n.MAX_VALUE=v;var x=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var B=l(0,-2147483648,!1);n.MIN_VALUE=B;var k=n.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=o(A(e,6),this.unsigned),s=this,i="";;){var l=s.div(a),u=(s.sub(l.mul(a)).toInt()>>>0).toString(e);if((s=l).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return!(1&~this.low)},k.isEven=function(){return!(1&this.low)},k.equals=function(e){return r(e)||(e=c(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(r(e)||(e=c(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(y)},k.neg=k.negate,k.add=function(e){r(e)||(e=c(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,s=65535&this.low,i=e.high>>>16,o=65535&e.high,A=e.low>>>16,u=0,h=0,d=0,p=0;return d+=(p+=s+(65535&e.low))>>>16,h+=(d+=a+A)>>>16,u+=(h+=n+o)>>>16,u+=t+i,l((d&=65535)<<16|(p&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},k.subtract=function(e){return r(e)||(e=c(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=c(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(B))return e.isOdd()?B:m;if(e.eq(B))return this.isOdd()?B:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return o(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,s=this.low>>>16,i=65535&this.low,A=e.high>>>16,u=65535&e.high,h=e.low>>>16,d=65535&e.low,p=0,g=0,y=0,b=0;return y+=(b+=i*d)>>>16,g+=(y+=s*d)>>>16,y&=65535,g+=(y+=i*h)>>>16,p+=(g+=a*d)>>>16,g&=65535,p+=(g+=s*h)>>>16,g&=65535,p+=(g+=i*u)>>>16,p+=n*d+a*h+s*u+i*A,l((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(r(e)||(e=c(e)),e.isZero())throw Error("division by zero");var n,a,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;s=g}else{if(this.eq(B))return e.eq(y)||e.eq(w)?B:e.eq(B)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:w:(a=this.sub(e.mul(n)),s=n.add(a.div(e)));if(e.eq(B))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),u=i<=48?1:A(2,i-48),h=o(n),d=h.mul(e);d.isNegative()||d.gt(a);)d=(h=o(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=y),s=s.add(h),a=a.sub(d)}return s},k.div=k.divide,k.modulo=function(e){return r(e)||(e=c(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return l(~this.low,~this.high,this.unsigned)},k.and=function(e){return r(e)||(e=c(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return r(e)||(e=c(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return r(e)||(e=c(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},8590:()=>{},8972:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1601),a=n.n(r),s=n(6314),i=n.n(s)()(a());i.push([e.id,"*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}/*\n! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */ /* 3 */\n  tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n  -webkit-tap-highlight-color: transparent; /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace; /* 1 */\n  font-feature-settings: normal; /* 2 */\n  font-variation-settings: normal; /* 3 */\n  font-size: 1em; /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-feature-settings: inherit; /* 1 */\n  font-variation-settings: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  letter-spacing: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden]:where(:not([hidden=\"until-found\"])) {\n  display: none;\n}\n.container {\n  width: 100%;\n}\n@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}\n@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}\n@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}\n@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}\n@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}\n.pointer-events-none {\n  pointer-events: none;\n}\n.absolute {\n  position: absolute;\n}\n.relative {\n  position: relative;\n}\n.sticky {\n  position: -webkit-sticky;\n  position: sticky;\n}\n.inset-0 {\n  inset: 0px;\n}\n.-bottom-6 {\n  bottom: -1.5rem;\n}\n.-bottom-8 {\n  bottom: -2rem;\n}\n.-left-6 {\n  left: -1.5rem;\n}\n.-left-8 {\n  left: -2rem;\n}\n.-right-2 {\n  right: -0.5rem;\n}\n.-right-4 {\n  right: -1rem;\n}\n.-right-8 {\n  right: -2rem;\n}\n.-top-2 {\n  top: -0.5rem;\n}\n.-top-4 {\n  top: -1rem;\n}\n.-top-8 {\n  top: -2rem;\n}\n.bottom-4 {\n  bottom: 1rem;\n}\n.left-1\\/2 {\n  left: 50%;\n}\n.left-10 {\n  left: 2.5rem;\n}\n.left-4 {\n  left: 1rem;\n}\n.right-20 {\n  right: 5rem;\n}\n.right-32 {\n  right: 8rem;\n}\n.top-0 {\n  top: 0px;\n}\n.top-20 {\n  top: 5rem;\n}\n.top-32 {\n  top: 8rem;\n}\n.top-4 {\n  top: 1rem;\n}\n.top-40 {\n  top: 10rem;\n}\n.z-10 {\n  z-index: 10;\n}\n.z-50 {\n  z-index: 50;\n}\n.mx-2 {\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n}\n.mx-5 {\n  margin-left: 1.25rem;\n  margin-right: 1.25rem;\n}\n.mx-auto {\n  margin-left: auto;\n  margin-right: auto;\n}\n.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.my-5 {\n  margin-top: 1.25rem;\n  margin-bottom: 1.25rem;\n}\n.my-8 {\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n}\n.mb-1 {\n  margin-bottom: 0.25rem;\n}\n.mb-12 {\n  margin-bottom: 3rem;\n}\n.mb-16 {\n  margin-bottom: 4rem;\n}\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n.mb-3 {\n  margin-bottom: 0.75rem;\n}\n.mb-4 {\n  margin-bottom: 1rem;\n}\n.mb-48 {\n  margin-bottom: 12rem;\n}\n.mb-5 {\n  margin-bottom: 1.25rem;\n}\n.mb-6 {\n  margin-bottom: 1.5rem;\n}\n.mb-8 {\n  margin-bottom: 2rem;\n}\n.ml-2 {\n  margin-left: 0.5rem;\n}\n.mr-2 {\n  margin-right: 0.5rem;\n}\n.mr-3 {\n  margin-right: 0.75rem;\n}\n.mt-0\\.5 {\n  margin-top: 0.125rem;\n}\n.mt-1 {\n  margin-top: 0.25rem;\n}\n.mt-2 {\n  margin-top: 0.5rem;\n}\n.mt-3 {\n  margin-top: 0.75rem;\n}\n.mt-4 {\n  margin-top: 1rem;\n}\n.mt-8 {\n  margin-top: 2rem;\n}\n.block {\n  display: block;\n}\n.inline {\n  display: inline;\n}\n.flex {\n  display: flex;\n}\n.inline-flex {\n  display: inline-flex;\n}\n.table {\n  display: table;\n}\n.grid {\n  display: grid;\n}\n.hidden {\n  display: none;\n}\n.h-1 {\n  height: 0.25rem;\n}\n.h-10 {\n  height: 2.5rem;\n}\n.h-12 {\n  height: 3rem;\n}\n.h-16 {\n  height: 4rem;\n}\n.h-20 {\n  height: 5rem;\n}\n.h-28 {\n  height: 7rem;\n}\n.h-32 {\n  height: 8rem;\n}\n.h-4 {\n  height: 1rem;\n}\n.h-48 {\n  height: 12rem;\n}\n.h-5 {\n  height: 1.25rem;\n}\n.h-6 {\n  height: 1.5rem;\n}\n.h-8 {\n  height: 2rem;\n}\n.h-80 {\n  height: 20rem;\n}\n.h-\\[500px\\] {\n  height: 500px;\n}\n.h-full {\n  height: 100%;\n}\n.max-h-\\[400px\\] {\n  max-height: 400px;\n}\n.min-h-\\[200px\\] {\n  min-height: 200px;\n}\n.min-h-screen {\n  min-height: 100vh;\n}\n.w-10 {\n  width: 2.5rem;\n}\n.w-12 {\n  width: 3rem;\n}\n.w-16 {\n  width: 4rem;\n}\n.w-20 {\n  width: 5rem;\n}\n.w-24 {\n  width: 6rem;\n}\n.w-3\\/4 {\n  width: 75%;\n}\n.w-32 {\n  width: 8rem;\n}\n.w-4 {\n  width: 1rem;\n}\n.w-48 {\n  width: 12rem;\n}\n.w-5 {\n  width: 1.25rem;\n}\n.w-6 {\n  width: 1.5rem;\n}\n.w-64 {\n  width: 16rem;\n}\n.w-8 {\n  width: 2rem;\n}\n.w-full {\n  width: 100%;\n}\n.w-px {\n  width: 1px;\n}\n.max-w-3xl {\n  max-width: 48rem;\n}\n.max-w-4xl {\n  max-width: 56rem;\n}\n.max-w-6xl {\n  max-width: 72rem;\n}\n.max-w-full {\n  max-width: 100%;\n}\n.max-w-lg {\n  max-width: 32rem;\n}\n.flex-1 {\n  flex: 1 1 0%;\n}\n.flex-shrink-0 {\n  flex-shrink: 0;\n}\n.flex-grow {\n  flex-grow: 1;\n}\n.-translate-x-1\\/2 {\n  --tw-translate-x: -50%;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.-rotate-12 {\n  --tw-rotate: -12deg;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.rotate-12 {\n  --tw-rotate: 12deg;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n@keyframes bounce {\n\n  0%, 100% {\n    transform: translateY(-25%);\n    animation-timing-function: cubic-bezier(0.8,0,1,1);\n  }\n\n  50% {\n    transform: none;\n    animation-timing-function: cubic-bezier(0,0,0.2,1);\n  }\n}\n.animate-bounce {\n  animation: bounce 1s infinite;\n}\n@keyframes pulse {\n\n  50% {\n    opacity: .5;\n  }\n}\n.animate-pulse {\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n@keyframes spin {\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n.cursor-not-allowed {\n  cursor: not-allowed;\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.list-inside {\n  list-style-position: inside;\n}\n.list-disc {\n  list-style-type: disc;\n}\n.grid-cols-1 {\n  grid-template-columns: repeat(1, minmax(0, 1fr));\n}\n.grid-cols-2 {\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n}\n.flex-col {\n  flex-direction: column;\n}\n.items-start {\n  align-items: flex-start;\n}\n.items-center {\n  align-items: center;\n}\n.justify-center {\n  justify-content: center;\n}\n.justify-between {\n  justify-content: space-between;\n}\n.gap-1 {\n  gap: 0.25rem;\n}\n.gap-2 {\n  gap: 0.5rem;\n}\n.gap-4 {\n  gap: 1rem;\n}\n.gap-48 {\n  gap: 12rem;\n}\n.gap-6 {\n  gap: 1.5rem;\n}\n.gap-8 {\n  gap: 2rem;\n}\n.space-x-1 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-x-reverse: 0;\n  margin-right: calc(0.25rem * var(--tw-space-x-reverse));\n  margin-left: calc(0.25rem * calc(1 - var(--tw-space-x-reverse)));\n}\n.space-x-2 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-x-reverse: 0;\n  margin-right: calc(0.5rem * var(--tw-space-x-reverse));\n  margin-left: calc(0.5rem * calc(1 - var(--tw-space-x-reverse)));\n}\n.space-x-3 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-x-reverse: 0;\n  margin-right: calc(0.75rem * var(--tw-space-x-reverse));\n  margin-left: calc(0.75rem * calc(1 - var(--tw-space-x-reverse)));\n}\n.space-x-4 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-x-reverse: 0;\n  margin-right: calc(1rem * var(--tw-space-x-reverse));\n  margin-left: calc(1rem * calc(1 - var(--tw-space-x-reverse)));\n}\n.space-y-1 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(0.25rem * var(--tw-space-y-reverse));\n}\n.space-y-2 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(0.5rem * var(--tw-space-y-reverse));\n}\n.space-y-3 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(0.75rem * var(--tw-space-y-reverse));\n}\n.space-y-4 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(1rem * var(--tw-space-y-reverse));\n}\n.space-y-6 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(1.5rem * var(--tw-space-y-reverse));\n}\n.overflow-hidden {\n  overflow: hidden;\n}\n.rounded-2xl {\n  border-radius: 1rem;\n}\n.rounded-3xl {\n  border-radius: 1.5rem;\n}\n.rounded-\\[2\\.5rem\\] {\n  border-radius: 2.5rem;\n}\n.rounded-\\[3rem\\] {\n  border-radius: 3rem;\n}\n.rounded-full {\n  border-radius: 9999px;\n}\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n.rounded-md {\n  border-radius: 0.375rem;\n}\n.rounded-xl {\n  border-radius: 0.75rem;\n}\n.border {\n  border-width: 1px;\n}\n.border-2 {\n  border-width: 2px;\n}\n.border-4 {\n  border-width: 4px;\n}\n.border-b {\n  border-bottom-width: 1px;\n}\n.border-b-2 {\n  border-bottom-width: 2px;\n}\n.border-l-4 {\n  border-left-width: 4px;\n}\n.border-t {\n  border-top-width: 1px;\n}\n.border-dashed {\n  border-style: dashed;\n}\n.border-amber-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(252 211 77 / var(--tw-border-opacity, 1));\n}\n.border-amber-500 {\n  --tw-border-opacity: 1;\n  border-color: rgb(245 158 11 / var(--tw-border-opacity, 1));\n}\n.border-blue-200 {\n  --tw-border-opacity: 1;\n  border-color: rgb(191 219 254 / var(--tw-border-opacity, 1));\n}\n.border-gray-100 {\n  --tw-border-opacity: 1;\n  border-color: rgb(243 244 246 / var(--tw-border-opacity, 1));\n}\n.border-gray-200 {\n  --tw-border-opacity: 1;\n  border-color: rgb(229 231 235 / var(--tw-border-opacity, 1));\n}\n.border-gray-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));\n}\n.border-gray-700 {\n  --tw-border-opacity: 1;\n  border-color: rgb(55 65 81 / var(--tw-border-opacity, 1));\n}\n.border-green-200 {\n  --tw-border-opacity: 1;\n  border-color: rgb(187 247 208 / var(--tw-border-opacity, 1));\n}\n.border-green-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(134 239 172 / var(--tw-border-opacity, 1));\n}\n.border-green-500 {\n  --tw-border-opacity: 1;\n  border-color: rgb(34 197 94 / var(--tw-border-opacity, 1));\n}\n.border-orange-200 {\n  --tw-border-opacity: 1;\n  border-color: rgb(254 215 170 / var(--tw-border-opacity, 1));\n}\n.border-orange-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(253 186 116 / var(--tw-border-opacity, 1));\n}\n.border-red-200 {\n  --tw-border-opacity: 1;\n  border-color: rgb(254 202 202 / var(--tw-border-opacity, 1));\n}\n.border-red-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(252 165 165 / var(--tw-border-opacity, 1));\n}\n.border-transparent {\n  border-color: transparent;\n}\n.bg-amber-100 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(254 243 199 / var(--tw-bg-opacity, 1));\n}\n.bg-amber-100\\/40 {\n  background-color: rgb(254 243 199 / 0.4);\n}\n.bg-black {\n  --tw-bg-opacity: 1;\n  background-color: rgb(0 0 0 / var(--tw-bg-opacity, 1));\n}\n.bg-blue-100 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(219 234 254 / var(--tw-bg-opacity, 1));\n}\n.bg-blue-400 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(96 165 250 / var(--tw-bg-opacity, 1));\n}\n.bg-blue-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1));\n}\n.bg-blue-600 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1));\n}\n.bg-gray-200 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(229 231 235 / var(--tw-bg-opacity, 1));\n}\n.bg-gray-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1));\n}\n.bg-green-100 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(220 252 231 / var(--tw-bg-opacity, 1));\n}\n.bg-green-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(240 253 244 / var(--tw-bg-opacity, 1));\n}\n.bg-green-500 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(34 197 94 / var(--tw-bg-opacity, 1));\n}\n.bg-green-600 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1));\n}\n.bg-indigo-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(238 242 255 / var(--tw-bg-opacity, 1));\n}\n.bg-orange-100 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 237 213 / var(--tw-bg-opacity, 1));\n}\n.bg-purple-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(250 245 255 / var(--tw-bg-opacity, 1));\n}\n.bg-red-100 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(254 226 226 / var(--tw-bg-opacity, 1));\n}\n.bg-red-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(254 242 242 / var(--tw-bg-opacity, 1));\n}\n.bg-red-500 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(239 68 68 / var(--tw-bg-opacity, 1));\n}\n.bg-white {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));\n}\n.bg-yellow-100 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(254 249 195 / var(--tw-bg-opacity, 1));\n}\n.bg-yellow-400 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(250 204 21 / var(--tw-bg-opacity, 1));\n}\n.bg-yellow-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(254 252 232 / var(--tw-bg-opacity, 1));\n}\n.bg-opacity-10 {\n  --tw-bg-opacity: 0.1;\n}\n.bg-opacity-20 {\n  --tw-bg-opacity: 0.2;\n}\n.bg-opacity-30 {\n  --tw-bg-opacity: 0.3;\n}\n.bg-opacity-50 {\n  --tw-bg-opacity: 0.5;\n}\n.bg-gradient-to-br {\n  background-image: linear-gradient(to bottom right, var(--tw-gradient-stops));\n}\n.bg-gradient-to-r {\n  background-image: linear-gradient(to right, var(--tw-gradient-stops));\n}\n.from-blue-100 {\n  --tw-gradient-from: #dbeafe var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(219 234 254 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-blue-50 {\n  --tw-gradient-from: #eff6ff var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(239 246 255 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-emerald-400 {\n  --tw-gradient-from: #34d399 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(52 211 153 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-gray-50 {\n  --tw-gradient-from: #f9fafb var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(249 250 251 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-gray-800 {\n  --tw-gradient-from: #1f2937 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(31 41 55 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-gray-900 {\n  --tw-gradient-from: #111827 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(17 24 39 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-green-100 {\n  --tw-gradient-from: #dcfce7 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(220 252 231 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-green-200 {\n  --tw-gradient-from: #bbf7d0 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(187 247 208 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-green-400 {\n  --tw-gradient-from: #4ade80 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(74 222 128 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-green-50 {\n  --tw-gradient-from: #f0fdf4 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(240 253 244 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-green-500 {\n  --tw-gradient-from: #22c55e var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(34 197 94 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-green-600 {\n  --tw-gradient-from: #16a34a var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(22 163 74 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-orange-50 {\n  --tw-gradient-from: #fff7ed var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(255 247 237 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-purple-100 {\n  --tw-gradient-from: #f3e8ff var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(243 232 255 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-purple-50 {\n  --tw-gradient-from: #faf5ff var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(250 245 255 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-red-400 {\n  --tw-gradient-from: #f87171 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(248 113 113 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-red-50 {\n  --tw-gradient-from: #fef2f2 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(254 242 242 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-red-500 {\n  --tw-gradient-from: #ef4444 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(239 68 68 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-yellow-400 {\n  --tw-gradient-from: #facc15 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(250 204 21 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.from-yellow-50 {\n  --tw-gradient-from: #fefce8 var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(254 252 232 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.to-blue-100 {\n  --tw-gradient-to: #dbeafe var(--tw-gradient-to-position);\n}\n.to-blue-200 {\n  --tw-gradient-to: #bfdbfe var(--tw-gradient-to-position);\n}\n.to-blue-400 {\n  --tw-gradient-to: #60a5fa var(--tw-gradient-to-position);\n}\n.to-blue-50 {\n  --tw-gradient-to: #eff6ff var(--tw-gradient-to-position);\n}\n.to-blue-500 {\n  --tw-gradient-to: #3b82f6 var(--tw-gradient-to-position);\n}\n.to-blue-600 {\n  --tw-gradient-to: #2563eb var(--tw-gradient-to-position);\n}\n.to-emerald-200 {\n  --tw-gradient-to: #a7f3d0 var(--tw-gradient-to-position);\n}\n.to-emerald-50 {\n  --tw-gradient-to: #ecfdf5 var(--tw-gradient-to-position);\n}\n.to-emerald-500 {\n  --tw-gradient-to: #10b981 var(--tw-gradient-to-position);\n}\n.to-emerald-600 {\n  --tw-gradient-to: #059669 var(--tw-gradient-to-position);\n}\n.to-gray-700 {\n  --tw-gradient-to: #374151 var(--tw-gradient-to-position);\n}\n.to-gray-900 {\n  --tw-gradient-to: #111827 var(--tw-gradient-to-position);\n}\n.to-green-200 {\n  --tw-gradient-to: #bbf7d0 var(--tw-gradient-to-position);\n}\n.to-green-600 {\n  --tw-gradient-to: #16a34a var(--tw-gradient-to-position);\n}\n.to-indigo-50 {\n  --tw-gradient-to: #eef2ff var(--tw-gradient-to-position);\n}\n.to-orange-50 {\n  --tw-gradient-to: #fff7ed var(--tw-gradient-to-position);\n}\n.to-orange-500 {\n  --tw-gradient-to: #f97316 var(--tw-gradient-to-position);\n}\n.to-pink-50 {\n  --tw-gradient-to: #fdf2f8 var(--tw-gradient-to-position);\n}\n.to-red-400 {\n  --tw-gradient-to: #f87171 var(--tw-gradient-to-position);\n}\n.to-red-600 {\n  --tw-gradient-to: #dc2626 var(--tw-gradient-to-position);\n}\n.to-slate-50 {\n  --tw-gradient-to: #f8fafc var(--tw-gradient-to-position);\n}\n.to-yellow-50 {\n  --tw-gradient-to: #fefce8 var(--tw-gradient-to-position);\n}\n.bg-clip-text {\n  -webkit-background-clip: text;\n          background-clip: text;\n}\n.object-contain {\n  object-fit: contain;\n}\n.object-cover {\n  object-fit: cover;\n}\n.p-2 {\n  padding: 0.5rem;\n}\n.p-3 {\n  padding: 0.75rem;\n}\n.p-4 {\n  padding: 1rem;\n}\n.p-6 {\n  padding: 1.5rem;\n}\n.p-8 {\n  padding: 2rem;\n}\n.px-3 {\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n}\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.px-5 {\n  padding-left: 1.25rem;\n  padding-right: 1.25rem;\n}\n.px-6 {\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n}\n.px-8 {\n  padding-left: 2rem;\n  padding-right: 2rem;\n}\n.py-1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n.py-10 {\n  padding-top: 2.5rem;\n  padding-bottom: 2.5rem;\n}\n.py-12 {\n  padding-top: 3rem;\n  padding-bottom: 3rem;\n}\n.py-16 {\n  padding-top: 4rem;\n  padding-bottom: 4rem;\n}\n.py-2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.py-24 {\n  padding-top: 6rem;\n  padding-bottom: 6rem;\n}\n.py-3 {\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n}\n.py-4 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n.pb-16 {\n  padding-bottom: 4rem;\n}\n.pb-4 {\n  padding-bottom: 1rem;\n}\n.pt-6 {\n  padding-top: 1.5rem;\n}\n.pt-8 {\n  padding-top: 2rem;\n}\n.text-left {\n  text-align: left;\n}\n.text-center {\n  text-align: center;\n}\n.text-2xl {\n  font-size: 1.5rem;\n  line-height: 2rem;\n}\n.text-3xl {\n  font-size: 1.875rem;\n  line-height: 2.25rem;\n}\n.text-4xl {\n  font-size: 2.25rem;\n  line-height: 2.5rem;\n}\n.text-5xl {\n  font-size: 3rem;\n  line-height: 1;\n}\n.text-6xl {\n  font-size: 3.75rem;\n  line-height: 1;\n}\n.text-base {\n  font-size: 1rem;\n  line-height: 1.5rem;\n}\n.text-lg {\n  font-size: 1.125rem;\n  line-height: 1.75rem;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}\n.text-xs {\n  font-size: 0.75rem;\n  line-height: 1rem;\n}\n.font-bold {\n  font-weight: 700;\n}\n.font-medium {\n  font-weight: 500;\n}\n.font-semibold {\n  font-weight: 600;\n}\n.uppercase {\n  text-transform: uppercase;\n}\n.italic {\n  font-style: italic;\n}\n.leading-relaxed {\n  line-height: 1.625;\n}\n.leading-tight {\n  line-height: 1.25;\n}\n.tracking-wider {\n  letter-spacing: 0.05em;\n}\n.text-\\[\\#039b62\\] {\n  --tw-text-opacity: 1;\n  color: rgb(3 155 98 / var(--tw-text-opacity, 1));\n}\n.text-amber-500 {\n  --tw-text-opacity: 1;\n  color: rgb(245 158 11 / var(--tw-text-opacity, 1));\n}\n.text-amber-600 {\n  --tw-text-opacity: 1;\n  color: rgb(217 119 6 / var(--tw-text-opacity, 1));\n}\n.text-blue-600 {\n  --tw-text-opacity: 1;\n  color: rgb(37 99 235 / var(--tw-text-opacity, 1));\n}\n.text-emerald-300 {\n  --tw-text-opacity: 1;\n  color: rgb(110 231 183 / var(--tw-text-opacity, 1));\n}\n.text-gray-400 {\n  --tw-text-opacity: 1;\n  color: rgb(156 163 175 / var(--tw-text-opacity, 1));\n}\n.text-gray-500 {\n  --tw-text-opacity: 1;\n  color: rgb(107 114 128 / var(--tw-text-opacity, 1));\n}\n.text-gray-600 {\n  --tw-text-opacity: 1;\n  color: rgb(75 85 99 / var(--tw-text-opacity, 1));\n}\n.text-gray-700 {\n  --tw-text-opacity: 1;\n  color: rgb(55 65 81 / var(--tw-text-opacity, 1));\n}\n.text-gray-800 {\n  --tw-text-opacity: 1;\n  color: rgb(31 41 55 / var(--tw-text-opacity, 1));\n}\n.text-gray-900 {\n  --tw-text-opacity: 1;\n  color: rgb(17 24 39 / var(--tw-text-opacity, 1));\n}\n.text-green-100 {\n  --tw-text-opacity: 1;\n  color: rgb(220 252 231 / var(--tw-text-opacity, 1));\n}\n.text-green-200 {\n  --tw-text-opacity: 1;\n  color: rgb(187 247 208 / var(--tw-text-opacity, 1));\n}\n.text-green-300 {\n  --tw-text-opacity: 1;\n  color: rgb(134 239 172 / var(--tw-text-opacity, 1));\n}\n.text-green-500 {\n  --tw-text-opacity: 1;\n  color: rgb(34 197 94 / var(--tw-text-opacity, 1));\n}\n.text-green-600 {\n  --tw-text-opacity: 1;\n  color: rgb(22 163 74 / var(--tw-text-opacity, 1));\n}\n.text-green-700 {\n  --tw-text-opacity: 1;\n  color: rgb(21 128 61 / var(--tw-text-opacity, 1));\n}\n.text-green-800 {\n  --tw-text-opacity: 1;\n  color: rgb(22 101 52 / var(--tw-text-opacity, 1));\n}\n.text-indigo-600 {\n  --tw-text-opacity: 1;\n  color: rgb(79 70 229 / var(--tw-text-opacity, 1));\n}\n.text-orange-600 {\n  --tw-text-opacity: 1;\n  color: rgb(234 88 12 / var(--tw-text-opacity, 1));\n}\n.text-orange-800 {\n  --tw-text-opacity: 1;\n  color: rgb(154 52 18 / var(--tw-text-opacity, 1));\n}\n.text-purple-600 {\n  --tw-text-opacity: 1;\n  color: rgb(147 51 234 / var(--tw-text-opacity, 1));\n}\n.text-red-500 {\n  --tw-text-opacity: 1;\n  color: rgb(239 68 68 / var(--tw-text-opacity, 1));\n}\n.text-red-600 {\n  --tw-text-opacity: 1;\n  color: rgb(220 38 38 / var(--tw-text-opacity, 1));\n}\n.text-red-700 {\n  --tw-text-opacity: 1;\n  color: rgb(185 28 28 / var(--tw-text-opacity, 1));\n}\n.text-red-800 {\n  --tw-text-opacity: 1;\n  color: rgb(153 27 27 / var(--tw-text-opacity, 1));\n}\n.text-transparent {\n  color: transparent;\n}\n.text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity, 1));\n}\n.text-yellow-600 {\n  --tw-text-opacity: 1;\n  color: rgb(202 138 4 / var(--tw-text-opacity, 1));\n}\n.text-yellow-700 {\n  --tw-text-opacity: 1;\n  color: rgb(161 98 7 / var(--tw-text-opacity, 1));\n}\n.opacity-30 {\n  opacity: 0.3;\n}\n.opacity-40 {\n  opacity: 0.4;\n}\n.opacity-50 {\n  opacity: 0.5;\n}\n.opacity-60 {\n  opacity: 0.6;\n}\n.opacity-70 {\n  opacity: 0.7;\n}\n.opacity-80 {\n  opacity: 0.8;\n}\n.opacity-90 {\n  opacity: 0.9;\n}\n.shadow-2xl {\n  --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n  --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow-inner {\n  --tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);\n  --tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow-lg {\n  --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow-md {\n  --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow-sm {\n  --tw-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n  --tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow-xl {\n  --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.blur {\n  --tw-blur: blur(8px);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.blur-sm {\n  --tw-blur: blur(4px);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.backdrop-blur-sm {\n  --tw-backdrop-blur: blur(4px);\n  -webkit-backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\n  backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\n}\n.transition {\n  transition-property: color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-all {\n  transition-property: all;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-colors {\n  transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-shadow {\n  transition-property: box-shadow;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-transform {\n  transition-property: transform;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.delay-100 {\n  transition-delay: 100ms;\n}\n.delay-300 {\n  transition-delay: 300ms;\n}\n.duration-1000 {\n  transition-duration: 1000ms;\n}\n.duration-200 {\n  transition-duration: 200ms;\n}\n.duration-300 {\n  transition-duration: 300ms;\n}\n.duration-500 {\n  transition-duration: 500ms;\n}\n.ease-out {\n  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);\n}\n\nbody {\n  font-family: Arial, sans-serif; /* Anda bisa menggantinya dengan font dari Tailwind jika mau */\n  margin: 0;\n  padding: 0;\n  background-color: #f9fafb; /* Atau gunakan kelas utilitas Tailwind seperti bg-gray-50 */\n}\n/* src/css/HistoryPage.css */\n\n.content-area {\n    padding: 2rem;\n    max-width: 1000px;\n    margin: 0 auto;\n}\n\n.text-left {\n    text-align: left;\n    margin-bottom: 1.5rem;\n    font-size: 2.25rem; /* text-4xl */\n    font-weight: bold;\n    color: #374151; /* gray-800 */\n}\n\n.card {\n    background-color: #ffffff;\n    border-radius: 0.75rem; /* rounded-2xl */\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */\n    border: 1px solid #e5e7eb; /* border-gray-100 */\n    overflow-x: auto; /* Untuk responsif pada tabel */\n}\n\n.table-container {\n    padding: 1.5rem;\n}\n\n.custom-table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-top: 1rem;\n}\n\n.custom-table th,\n.custom-table td {\n    padding: 1rem;\n    text-align: left;\n    border-bottom: 1px solid #e5e7eb; /* gray-200 */\n    vertical-align: middle;\n}\n\n.custom-table th {\n    background-color: #f9fafb; /* gray-50 */\n    font-weight: 600; /* font-semibold */\n    color: #4b5563; /* gray-700 */\n    text-transform: uppercase;\n    font-size: 0.875rem; /* text-sm */\n}\n\n.custom-table tbody tr:hover {\n    background-color: #f3f4f6; /* gray-100 */\n}\n\n.history-image {\n    width: 60px; /* Lebar gambar kecil di tabel */\n    height: 60px; /* Tinggi gambar kecil di tabel */\n    object-fit: cover;\n    border-radius: 0.25rem; /* rounded-sm */\n    border: 1px solid #d1d5db; /* gray-300 */\n}\n\n.font-medium {\n    font-weight: 500;\n}\n\n.text-center {\n    text-align: center;\n}\n\n.action-buttons {\n    display: flex;\n    gap: 0.5rem; /* Jarak antar tombol */\n    justify-content: center;\n}\n\n.btn-icon {\n    background: none;\n    border: none;\n    padding: 0.5rem;\n    border-radius: 0.375rem; /* rounded-md */\n    cursor: pointer;\n    color: #4b5563; /* gray-700 */\n    transition: background-color 0.2s, color 0.2s;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.btn-icon:hover {\n    background-color: #e5e7eb; /* gray-200 */\n    color: #1f2937; /* gray-900 */\n}\n\n.btn-delete {\n    color: #ef4444; /* red-500 */\n}\n\n.btn-delete:hover {\n    background-color: #fee2e2; /* red-100 */\n    color: #b91c1c; /* red-700 */\n}\n\n/* Status Badges */\n.status-badge {\n    display: inline-block;\n    padding: 0.3rem 0.6rem;\n    border-radius: 9999px; /* full rounded */\n    font-size: 0.75rem; /* text-xs */\n    font-weight: 600;\n    white-space: nowrap;\n}\n\n.status-sehat {\n    background-color: #d1fae5; /* green-100 */\n    color: #065f46; /* green-800 */\n}\n\n.status-sedang {\n    background-color: #ffedd5; /* orange-100 */\n    color: #9a3412; /* orange-800 */\n}\n\n.status-diperlukan {\n    background-color: #fee2e2; /* red-100 */\n    color: #991b1b; /* red-800 */\n}\n\n.error-message {\n    background-color: #fef2f2; /* red-50 */\n    color: #ef4444; /* red-500 */\n    border: 1px solid #fca5a5; /* red-300 */\n    padding: 1rem;\n    border-radius: 0.5rem;\n    margin-bottom: 1.5rem;\n    text-align: center;\n}\n\n/* Modal Styling */\n.modal-backdrop {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n}\n\n.modal-content {\n    background-color: #ffffff;\n    padding: 2rem;\n    /* Mengubah border-radius menjadi lebih bulat */\n    border-radius: 1.5rem; /* Contoh: rounded-xl */\n    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);\n    max-width: 500px; /* Default width */\n    width: 90%;\n    position: relative; /* Penting untuk posisi tombol silang */\n}\n\n.modal-content.large {\n    max-width: 800px; /* Larger width for detail modal */\n}\n\n.modal-title {\n    font-size: 1.5rem; /* text-2xl */\n    font-weight: 700; /* font-bold */\n    color: #1f2937; /* gray-900 */\n    margin-bottom: 1rem;\n    text-align: center;\n}\n\n/* Tombol Silang (Close Button) */\n.close-modal-button {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #6b7280; /* gray-500 */\n    padding: 0.5rem;\n    border-radius: 50%; /* Membuat tombol bulat */\n    transition: background-color 0.2s, color 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10; /* Pastikan di atas konten lain */\n}\n\n.close-modal-button:hover {\n    background-color: #e5e7eb; /* gray-200 */\n    color: #1f2937; /* gray-900 */\n}\n\n\n.modal-body {\n    font-size: 1rem; /* text-base */\n    color: #4b5563; /* gray-700 */\n    margin-bottom: 1.5rem;\n    line-height: 1.5;\n}\n\n.modal-actions {\n    display: flex;\n    justify-content: flex-end;\n    gap: 1rem;\n    border-top: 1px solid #e5e7eb; /* gray-200 */\n    padding-top: 1.5rem;\n    margin-top: 1.5rem;\n}\n\n.btn-primary {\n    background-color: #22c55e; /* green-500 */\n    color: white;\n    padding: 0.75rem 1.5rem;\n    border-radius: 0.5rem;\n    font-weight: 600;\n    transition: background-color 0.2s;\n    cursor: pointer;\n    border: none;\n}\n\n.btn-primary:hover {\n    background-color: #16a34a; /* green-600 */\n}\n\n.btn-secondary {\n    background-color: #e5e7eb; /* gray-200 */\n    color: #4b5563; /* gray-700 */\n    padding: 0.75rem 1.5rem;\n    border-radius: 0.5rem;\n    font-weight: 600;\n    transition: background-color 0.2s;\n    cursor: pointer;\n    border: none;\n}\n\n.btn-secondary:hover {\n    background-color: #d1d5db; /* gray-300 */\n}\n\n.btn-danger {\n    background-color: #ef4444; /* red-500 */\n    color: white;\n    padding: 0.75rem 1.5rem;\n    border-radius: 0.5rem;\n    font-weight: 600;\n    transition: background-color 0.2s;\n    cursor: pointer;\n    border: none;\n}\n\n.btn-danger:hover {\n    background-color: #dc2626; /* red-600 */\n}\n\n.btn-primary:disabled,\n.btn-secondary:disabled,\n.btn-danger:disabled,\n.btn-download-detail:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n}\n\n/* Detail Modal Specific Styling */\n.detail-modal-body {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n}\n\n.detail-header {\n    display: flex;\n    align-items: center;\n    gap: 1.5rem;\n    padding-bottom: 1rem;\n    border-bottom: 1px solid #e5e7eb;\n}\n\n.detail-image {\n    width: 120px;\n    height: 120px;\n    object-fit: cover;\n    border-radius: 0.5rem;\n    border: 2px solid #d1d5db;\n}\n\n.detail-info {\n    flex-grow: 1;\n}\n\n.detail-date, .detail-accuracy {\n    font-size: 0.95rem;\n    color: #6b7280;\n    margin-bottom: 0.25rem;\n}\n\n.detail-section-title {\n    font-size: 1.25rem; /* text-xl */\n    font-weight: 600; /* font-semibold */\n    color: #1f2937;\n    margin-top: 1rem;\n    margin-bottom: 0.75rem;\n}\n\n.detail-content ul {\n    margin-top: 0.5rem;\n}\n\n.detail-content ul li {\n    margin-bottom: 0.5rem;\n    padding-left: 0.5rem;\n}\n\n.btn-download-detail {\n    background-color: #3b82f6; /* blue-500 */\n    color: white;\n    padding: 0.75rem 1.5rem;\n    border-radius: 0.5rem;\n    font-weight: 600;\n    transition: background-color 0.2s;\n    cursor: pointer;\n    border: none;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.btn-download-detail:hover {\n    background-color: #2563eb; /* blue-600 */\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n    .content-area {\n        padding: 1rem;\n    }\n\n    .custom-table th,\n    .custom-table td {\n        padding: 0.75rem;\n        font-size: 0.8rem;\n    }\n\n    .history-image {\n        width: 50px;\n        height: 50px;\n    }\n\n    .action-buttons {\n        flex-direction: column;\n        gap: 0.3rem;\n    }\n\n    .btn-icon {\n        padding: 0.3rem;\n    }\n\n    .modal-content {\n        padding: 1.5rem;\n        max-width: 95%;\n    }\n\n    .modal-content.large {\n        max-width: 95%;\n    }\n\n    .modal-title {\n        font-size: 1.25rem;\n    }\n\n    .modal-body {\n        font-size: 0.9rem;\n    }\n\n    .modal-actions {\n        flex-direction: column;\n        gap: 0.75rem;\n    }\n\n    .btn-primary, .btn-secondary, .btn-danger, .btn-download-detail {\n        width: 100%;\n        text-align: center;\n    }\n\n    .detail-header {\n        flex-direction: column;\n        text-align: center;\n        gap: 0.75rem;\n    }\n\n    .detail-image {\n        width: 90px;\n        height: 90px;\n    }\n\n    .detail-info {\n        text-align: center;\n    }\n\n    .detail-section-title {\n        font-size: 1.1rem;\n    }\n}\n.hover\\:-translate-y-1:hover {\n  --tw-translate-y: -0.25rem;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.hover\\:rotate-6:hover {\n  --tw-rotate: 6deg;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.hover\\:scale-105:hover {\n  --tw-scale-x: 1.05;\n  --tw-scale-y: 1.05;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.hover\\:scale-\\[1\\.02\\]:hover {\n  --tw-scale-x: 1.02;\n  --tw-scale-y: 1.02;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.hover\\:border-blue-300:hover {\n  --tw-border-opacity: 1;\n  border-color: rgb(147 197 253 / var(--tw-border-opacity, 1));\n}\n.hover\\:border-green-400:hover {\n  --tw-border-opacity: 1;\n  border-color: rgb(74 222 128 / var(--tw-border-opacity, 1));\n}\n.hover\\:bg-blue-700:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(29 78 216 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-gray-100:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-gray-50:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-green-50:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(240 253 244 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-green-600:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-green-700:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(21 128 61 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-red-50:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(254 242 242 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-red-600:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(220 38 38 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-white:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));\n}\n.hover\\:from-green-600:hover {\n  --tw-gradient-from: #16a34a var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(22 163 74 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.hover\\:to-emerald-700:hover {\n  --tw-gradient-to: #047857 var(--tw-gradient-to-position);\n}\n.hover\\:text-gray-800:hover {\n  --tw-text-opacity: 1;\n  color: rgb(31 41 55 / var(--tw-text-opacity, 1));\n}\n.hover\\:text-green-600:hover {\n  --tw-text-opacity: 1;\n  color: rgb(22 163 74 / var(--tw-text-opacity, 1));\n}\n.hover\\:text-red-600:hover {\n  --tw-text-opacity: 1;\n  color: rgb(220 38 38 / var(--tw-text-opacity, 1));\n}\n.hover\\:underline:hover {\n  -webkit-text-decoration-line: underline;\n          text-decoration-line: underline;\n}\n.hover\\:shadow-2xl:hover {\n  --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n  --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.hover\\:shadow-lg:hover {\n  --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.hover\\:shadow-xl:hover {\n  --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n.disabled\\:bg-gray-300:disabled {\n  --tw-bg-opacity: 1;\n  background-color: rgb(209 213 219 / var(--tw-bg-opacity, 1));\n}\n.disabled\\:bg-gray-400:disabled {\n  --tw-bg-opacity: 1;\n  background-color: rgb(156 163 175 / var(--tw-bg-opacity, 1));\n}\n.group:hover .group-hover\\:translate-x-1 {\n  --tw-translate-x: 0.25rem;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.group:hover .group-hover\\:shadow-xl {\n  --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n@media (min-width: 640px) {\n\n  .sm\\:flex-row {\n    flex-direction: row;\n  }\n}\n@media (min-width: 768px) {\n\n  .md\\:flex {\n    display: flex;\n  }\n\n  .md\\:hidden {\n    display: none;\n  }\n\n  .md\\:grid-cols-2 {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n\n  .md\\:grid-cols-3 {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n\n  .md\\:grid-cols-4 {\n    grid-template-columns: repeat(4, minmax(0, 1fr));\n  }\n\n  .md\\:p-12 {\n    padding: 3rem;\n  }\n}\n@media (min-width: 1024px) {\n\n  .lg\\:mb-0 {\n    margin-bottom: 0px;\n  }\n\n  .lg\\:mt-4 {\n    margin-top: 1rem;\n  }\n\n  .lg\\:h-\\[500px\\] {\n    height: 500px;\n  }\n\n  .lg\\:grid-cols-2 {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n\n  .lg\\:grid-cols-3 {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n\n  .lg\\:py-2 {\n    padding-top: 0.5rem;\n    padding-bottom: 0.5rem;\n  }\n\n  .lg\\:text-7xl {\n    font-size: 4.5rem;\n    line-height: 1;\n  }\n}",""]);const o=i},9067:function(e,t,n){var r;!function(e,a){function s(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&i(r,n),a.state=function(){return i(n,{})}),a}a&&a.exports?a.exports=o:n.amdD&&n.amdO?void 0===(r=function(){return o}.call(t,n,t,a))||(a.exports=r):this.xorshift7=o}(0,e=n.nmd(e),n.amdD)},9869:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=b.prototype=new y;w.constructor=b,f(w,g.prototype),w.isPureReactComponent=!0;var v=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function k(e,t,r,a,s,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function S(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function I(){}function E(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,A,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return E((u=e._init)(e._payload),t,a,s,i)}}if(u)return i=i(e),u=""===s?"."+S(e,0):s,v(i)?(a="",null!=u&&(a=u.replace(N,"$&/")+"/"),E(i,t,a,"",(function(e){return e}))):null!=i&&(C(i)&&(l=i,A=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+u,i=k(l.type,A,void 0,0,0,l.props)),t.push(i)),1;u=0;var c,p=""===s?".":s+":";if(v(e))for(var f=0;f<e.length;f++)u+=E(s=e[f],t,a,o=p+S(s,f),i);else if("function"==typeof(f=null===(c=e)||"object"!=typeof c?null:"function"==typeof(c=d&&c[d]||c["@@iterator"])?c:null))for(e=f.call(e),f=0;!(s=e.next()).done;)u+=E(s=s.value,t,a,o=p+S(s,f++),i);else if("object"===o){if("function"==typeof e.then)return E(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(I,I):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,s,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function F(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function U(){}t.Children={map:F,forEach:function(e,t,n){F(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return F(e,(function(){t++})),t},toArray:function(e){return F(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),a=e.key;if(null!=t)for(s in t.ref,void 0!==t.key&&(a=""+t.key),t)!B.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var i=Array(s),o=0;o<s;o++)i[o]=arguments[o+2];r.children=i}return k(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,a={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)B.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return k(e,s,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:A,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var r=e(),a=x.S;null!==a&&a(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(U,L)}catch(e){L(e)}finally{x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=x.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.1.0"},9982:(e,t,n)=>{"use strict";e.exports=n(4477)}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=a,i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);i.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,i.d(a,s),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="corn-detection:",i.l=(e,t,a,s)=>{if(n[e])n[e].push(t);else{var o,l;if(void 0!==a)for(var A=document.getElementsByTagName("script"),u=0;u<A.length;u++){var c=A[u];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==r+a){o=c;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",r+a),o.src=e),n[e]=[t];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(d);var a=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(r))),t)return t(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/",(()=>{var e={792:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var s=i.p+i.u(t),o=new Error;i.l(s,(n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,r[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,s=n[0],o=n[1],l=n[2],A=0;if(s.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);l&&l(i)}for(t&&t(n);A<s.length;A++)a=s[A],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkcorn_detection=self.webpackChunkcorn_detection||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0,(()=>{"use strict";var e={};i.r(e),i.d(e,{CompositeArrayBuffer:()=>dc,browserFiles:()=>sd,browserHTTPRequest:()=>pd,concatenateArrayBuffers:()=>Lc,copyModel:()=>gh,decodeWeights:()=>Bc,decodeWeightsStream:()=>Ic,encodeWeights:()=>xc,fromMemory:()=>yd,fromMemorySync:()=>bd,getLoadHandlers:()=>zc,getModelArtifactsForJSON:()=>Dc,getModelArtifactsForJSONSync:()=>Rc,getModelArtifactsInfoForJSON:()=>Qc,getSaveHandlers:()=>Hc,getWeightSpecs:()=>Oc,http:()=>dd,isHTTPScheme:()=>cd,listModels:()=>fh,loadWeights:()=>ld,moveModel:()=>yh,registerLoadRouter:()=>Pc,registerSaveRouter:()=>Mc,removeModel:()=>mh,weightsLoaderFactory:()=>Ad,withSaveHandler:()=>wd,withSaveHandlerSync:()=>vd});var t={};i.r(t),i.d(t,{assertParamsValid:()=>Sd,computeFlatOffset:()=>Md,computeOutShape:()=>Ed,getNormalizedAxes:()=>Ud,isSliceContinous:()=>$d,maskToAxes:()=>Id,parseSliceParams:()=>Pd,sliceInfo:()=>Hd,startForAxis:()=>Qd,startIndicesWithElidedDims:()=>_d,stopForAxis:()=>Od,stopIndicesWithElidedDims:()=>Rd,stridesForAxis:()=>Dd,stridesWithElidedDims:()=>Fd});var n={};i.r(n),i.d(n,{conv2d:()=>ny,depthwiseConv2d:()=>sy,matMul:()=>iy});var r={};i.r(r),i.d(r,{collectGatherOpShapeInfo:()=>cw,computeOutShape:()=>uw,segOpComputeOptimalWindowSize:()=>Aw});var a={};i.r(a),i.d(a,{ERF_A1:()=>Sb,ERF_A2:()=>Ib,ERF_A3:()=>Eb,ERF_A4:()=>Fb,ERF_A5:()=>Tb,ERF_P:()=>Nb,PARALLELIZE_THRESHOLD:()=>fb,RowPartitionType:()=>ub,SELU_SCALE:()=>Cb,SELU_SCALEALPHA:()=>kb,applyActivation:()=>ey,assertAndGetBroadcastShape:()=>qh,assertAxesAreInnerMostDims:()=>mf,assertParamsConsistent:()=>lb,assignToTypedArray:()=>Qb,axesAreInnerMostDims:()=>hf,calculateShapes:()=>Fg,checkEinsumDimSizes:()=>Kb,checkPadOnDimRoundingMode:()=>mp,combineLocations:()=>df,combineRaggedTensorToTensorShapes:()=>cb,complexWithEvenIndex:()=>_b,complexWithOddIndex:()=>Rb,computeConv2DInfo:()=>sp,computeConv3DInfo:()=>ip,computeDefaultPad:()=>op,computeDilation2DInfo:()=>np,computeOptimalWindowSize:()=>mb,computeOutAndReduceShapes:()=>pf,computeOutShape:()=>Ab,computePool2DInfo:()=>rp,computePool3DInfo:()=>ap,convertConv2DDataFormat:()=>fp,decodeEinsumEquation:()=>Vb,eitherStridesOrDilationsAreOne:()=>dp,expandShapeToKeepDim:()=>ff,exponent:()=>$b,exponents:()=>Ob,fromStringArrayToUint8:()=>dw,fromUint8ToStringArray:()=>hw,getAxesPermutation:()=>gf,getBroadcastDims:()=>Gh,getComplexWithIndex:()=>Db,getEinsumComputePath:()=>Gb,getEinsumPermutation:()=>Wb,getFusedBiasGradient:()=>Zg,getFusedDyActivation:()=>Yg,getImageCenter:()=>gb,getInnerMostAxes:()=>bf,getPermuted:()=>bb,getRaggedRank:()=>db,getReductionAxes:()=>jh,getReshaped:()=>yb,getReshapedPermuted:()=>wb,getRowPartitionTypesHelper:()=>hb,getSliceBeginCoords:()=>vb,getSliceSize:()=>xb,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Jb,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Yb,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>Zb,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>nw,getSparseReshapeInputOutputMismatchErrorMessage:()=>aw,getSparseReshapeInputOutputMultipleErrorMessage:()=>rw,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>ew,getSparseReshapeNegativeOutputDimErrorMessage:()=>tw,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>lw,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>sw,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>iw,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>ow,getUndoAxesPermutation:()=>yf,isIdentityPermutation:()=>jb,log:()=>PA,mergeRealAndImagArrays:()=>Lb,prepareAndValidate:()=>Bb,prepareSplitSize:()=>Xb,segment_util:()=>r,shouldFuse:()=>ty,slice_util:()=>t,splitRealAndImagArrays:()=>Ub,stridesOrDilationsArePositive:()=>pp,tupleValuesAreOne:()=>hp,upcastType:()=>$u,validateDefaultValueShape:()=>pb,validateInput:()=>Eg,validateUpdateShape:()=>Ig,warn:()=>MA});var s={};i.r(s),i.d(s,{json:()=>JS});var o={};i.r(o),i.d(o,{json:()=>YS});var l={};i.r(l),i.d(l,{json:()=>ZS});var A={};i.r(A),i.d(A,{json:()=>eI});var u={};i.r(u),i.d(u,{json:()=>tI});var c={};i.r(c),i.d(c,{json:()=>nI});var h={};i.r(h),i.d(h,{json:()=>rI});var d={};i.r(d),i.d(d,{json:()=>aI});var p={};i.r(p),i.d(p,{json:()=>sI});var f={};i.r(f),i.d(f,{json:()=>iI});var m={};i.r(m),i.d(m,{json:()=>oI});var g={};i.r(g),i.d(g,{json:()=>lI});var y={};i.r(y),i.d(y,{json:()=>AI});var b={};i.r(b),i.d(b,{json:()=>uI});var w={};i.r(w),i.d(w,{json:()=>cI});var v={};i.r(v),i.d(v,{json:()=>hI});var x={};i.r(x),i.d(x,{json:()=>dI});var B={};i.r(B),i.d(B,{json:()=>pI});var k={};i.r(k),i.d(k,{json:()=>fI});var C={};i.r(C),i.d(C,{OP_SCOPE_SUFFIX:()=>oc,abs:()=>Kh,acos:()=>Vd,acosh:()=>Wd,add:()=>Ch,addN:()=>Kd,all:()=>Gd,any:()=>jd,argMax:()=>qd,argMin:()=>Xd,asin:()=>Jd,asinh:()=>Yd,atan:()=>Zd,atan2:()=>ep,atanh:()=>tp,avgPool:()=>yp,avgPool3d:()=>bp,basicLSTMCell:()=>Cp,batchNorm:()=>Sp,batchNorm2d:()=>Ip,batchNorm3d:()=>Ep,batchNorm4d:()=>Fp,batchToSpaceND:()=>Np,bincount:()=>Tp,bitwiseAnd:()=>Lp,booleanMaskAsync:()=>Pg,broadcastArgs:()=>Up,broadcastTo:()=>_p,buffer:()=>vh,cast:()=>xh,ceil:()=>Rp,clipByValue:()=>Dp,clone:()=>Bh,complex:()=>Ac,concat:()=>wp,concat1d:()=>Qp,concat2d:()=>Op,concat3d:()=>$p,concat4d:()=>Mp,conv1d:()=>Hp,conv2d:()=>Pp,conv2dTranspose:()=>Vp,conv3d:()=>Wp,conv3dTranspose:()=>Gp,cos:()=>jp,cosh:()=>qp,cosineWindow:()=>qg,cumprod:()=>Xp,cumsum:()=>Jp,denseBincount:()=>Yp,depthToSpace:()=>Zp,depthwiseConv2d:()=>ef,diag:()=>tf,dilation2d:()=>nf,div:()=>Sh,divNoNan:()=>sf,dot:()=>of,dropout:()=>Gg,einsum:()=>lf,elu:()=>Af,enclosingPowerOfTwo:()=>jg,ensureShape:()=>uf,equal:()=>rf,erf:()=>cf,euclideanNorm:()=>Cf,exp:()=>Nf,expandDims:()=>Sf,expm1:()=>If,eye:()=>Ff,fft:()=>hg,fill:()=>Ph,floor:()=>Tf,floorDiv:()=>Nh,fused:()=>n,gather:()=>Lf,gatherND:()=>Kg,greater:()=>Uf,greaterEqual:()=>_f,ifft:()=>dg,imag:()=>Rf,image:()=>eb,inTopKAsync:()=>Xg,irfft:()=>pg,isFinite:()=>Df,isInf:()=>Qf,isNaN:()=>Of,leakyRelu:()=>$f,less:()=>Mf,lessEqual:()=>Pf,linalg:()=>tb,linspace:()=>Hf,localResponseNormalization:()=>zf,log:()=>Vf,log1p:()=>Wf,logSigmoid:()=>jf,logSoftmax:()=>qf,logSumExp:()=>Xf,logicalAnd:()=>Jf,logicalNot:()=>Yf,logicalOr:()=>Zf,logicalXor:()=>em,losses:()=>nb,lowerBound:()=>rm,matMul:()=>vp,max:()=>wf,maxPool:()=>am,maxPool3d:()=>sm,maxPoolWithArgmax:()=>im,maximum:()=>Xh,mean:()=>om,meshgrid:()=>um,min:()=>vf,minimum:()=>cm,mirrorPad:()=>hm,mod:()=>dm,moments:()=>pm,movingAverage:()=>zg,mul:()=>Ih,multiRNNCell:()=>fm,multinomial:()=>mm,neg:()=>Kf,norm:()=>kf,notEqual:()=>gm,oneHot:()=>ym,ones:()=>Am,onesLike:()=>bm,op:()=>lc,outerProduct:()=>wm,pad:()=>vm,pad1d:()=>xm,pad2d:()=>Bm,pad3d:()=>km,pad4d:()=>Cm,pool:()=>Sm,pow:()=>zh,prelu:()=>Im,print:()=>kh,prod:()=>Em,raggedGather:()=>Fm,raggedRange:()=>Tm,raggedTensorToTensor:()=>Lm,rand:()=>Um,randomGamma:()=>Om,randomNormal:()=>$m,randomStandardNormal:()=>Mm,randomUniform:()=>Pm,randomUniformInt:()=>Hm,range:()=>zm,real:()=>Vm,reciprocal:()=>Wm,relu:()=>Km,relu6:()=>Gm,reshape:()=>gp,reverse:()=>jm,reverse1d:()=>qm,reverse2d:()=>Xm,reverse3d:()=>Jm,reverse4d:()=>Ym,rfft:()=>mg,round:()=>Zm,rsqrt:()=>eg,scalar:()=>Uh,scatterND:()=>Vg,searchSorted:()=>nm,selu:()=>tg,separableConv2d:()=>ng,setdiff1dAsync:()=>rg,sigmoid:()=>xp,sign:()=>ag,signal:()=>Zy,sin:()=>sg,sinh:()=>ig,slice:()=>Bp,slice1d:()=>og,slice2d:()=>lg,slice3d:()=>Ag,slice4d:()=>ug,softmax:()=>cg,softplus:()=>Gf,spaceToBatchND:()=>Nm,sparse:()=>rb,sparseToDense:()=>Wg,spectral:()=>Yy,split:()=>fg,sqrt:()=>Eh,square:()=>Fh,squaredDifference:()=>gg,squeeze:()=>yg,stack:()=>bg,step:()=>wg,stridedSlice:()=>vg,string:()=>ab,sub:()=>Vh,sum:()=>xf,tan:()=>xg,tanh:()=>kp,tensor:()=>cc,tensor1d:()=>Bg,tensor2d:()=>kg,tensor3d:()=>xd,tensor4d:()=>Cg,tensor5d:()=>Ng,tensor6d:()=>Sg,tensorScatterUpdate:()=>Tg,tile:()=>Ef,topk:()=>Lg,transpose:()=>Hg,truncatedNormal:()=>Ug,unique:()=>_g,unsortedSegmentSum:()=>Rg,unstack:()=>Dg,upperBound:()=>Qg,variable:()=>Og,where:()=>af,whereAsync:()=>Mg,zeros:()=>lm,zerosLike:()=>Th});var N={};i.r(N),i.d(N,{mx:()=>cF,XI:()=>rT,Nk:()=>aT,f6:()=>iT,ct:()=>iF,YG:()=>uT,hH:()=>mT,z3:()=>eL,sG:()=>cL,uM:()=>mL,vS:()=>UL,qB:()=>PL,GG:()=>zL,lg:()=>jL,rq:()=>WL,cu:()=>oU,WR:()=>aU,GE:()=>uU,px:()=>hU,jC:()=>SU,He:()=>FU,hE:()=>MU,BF:()=>KT,Dk:()=>XU,cl:()=>a_,_B:()=>g_,ub:()=>w_,_f:()=>B_,Ku:()=>E_,qy:()=>T_,Zy:()=>z_,bu:()=>K_,zv:()=>JE,dH:()=>wF,HS:()=>ZF,yH:()=>hR,l3:()=>pR,z9:()=>mR,x6:()=>vR,_m:()=>IR,eW:()=>UR,GK:()=>DR,SP:()=>$R,yr:()=>PR,dl:()=>xL,Dw:()=>GR,xT:()=>JR,_X:()=>SF,wz:()=>aD});var S=i(6540),I=i(5338),E=(i(6069),"popstate");function F(e={}){return function(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:s=!1}=r,i=a.history,o="POP",l=null,A=u();function u(){return(i.state||{idx:null}).idx}function c(){o="POP";let e=u(),t=null==e?null:e-A;A=e,l&&l({action:o,location:d.location,delta:t})}function h(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),T(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:R(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}(e)}null==A&&(A=0,i.replaceState({...i.state,idx:A},""));let d={get action(){return o},get location(){return e(a,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(E,c),l=e,()=>{a.removeEventListener(E,c),l=null}},createHref:e=>t(a,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=_(d.location,e,t);n&&n(r,e),A=u()+1;let c=U(r,A),h=d.createHref(r);try{i.pushState(c,"",h)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;a.location.assign(h)}s&&l&&l({action:o,location:d.location,delta:1})},replace:function(e,t){o="REPLACE";let r=_(d.location,e,t);n&&n(r,e),A=u();let a=U(r,A),c=d.createHref(r);i.replaceState(a,"",c),s&&l&&l({action:o,location:d.location,delta:0})},go:e=>i.go(e)};return d}((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return _("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:R(t)}),null,e)}function T(e,t){if(!1===e||null==e)throw new Error(t)}function L(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function U(e,t){return{usr:e.state,key:e.key,idx:t}}function _(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?D(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function R({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function D(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Q(e,t,n="/"){return function(e,t,n,r){let a=J(("string"==typeof t?D(t):t).pathname||"/",n);if(null==a)return null;let s=O(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let i=null;for(let e=0;null==i&&e<s.length;++e){let t=X(a);i=j(s[e],t,r)}return i}(e,t,n,!1)}function O(e,t=[],n=[],r=""){let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(T(i.relativePath.startsWith(r),`Absolute route path "${i.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),i.relativePath=i.relativePath.slice(r.length));let o=te([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(T(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),O(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:G(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of $(e.path))a(e,t,n);else a(e,t)})),t}function $(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=$(r.join("/")),o=[];return o.push(...i.map((e=>""===e?s:[s,e].join("/")))),a&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}new WeakMap;var M=/^:[\w-]+$/,P=3,H=2,z=1,V=10,W=-2,K=e=>"*"===e;function G(e,t){let n=e.split("/"),r=n.length;return n.some(K)&&(r+=W),t&&(r+=H),n.filter((e=>!K(e))).reduce(((e,t)=>e+(M.test(t)?P:""===t?z:V)),r)}function j(e,t,n=!1){let{routesMeta:r}=e,a={},s="/",i=[];for(let e=0;e<r.length;++e){let o=r[e],l=e===r.length-1,A="/"===s?t:t.slice(s.length)||"/",u=q({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},A),c=o.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=q({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},A)),!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:te([s,u.pathname]),pathnameBase:ne(te([s,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(s=te([s,u.pathnameBase]))}return i}function q(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){L("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce(((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const a=o[r];return e[t]=n&&!a?void 0:(a||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:i,pattern:e}}function X(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return L(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function J(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Y(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Z(e){let t=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function ee(e,t,n,r=!1){let a;"string"==typeof e?a=D(e):(a={...e},T(!a.pathname||!a.pathname.includes("?"),Y("?","pathname","search",a)),T(!a.pathname||!a.pathname.includes("#"),Y("#","pathname","hash",a)),T(!a.search||!a.search.includes("#"),Y("#","search","hash",a)));let s,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:a=""}="string"==typeof e?D(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:re(r),hash:ae(a)}}(a,s),A=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!A&&!u||(l.pathname+="/"),l}var te=e=>e.join("/").replace(/\/\/+/g,"/"),ne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),re=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ae=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function se(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}var ie=["POST","PUT","PATCH","DELETE"],oe=(new Set(ie),["GET",...ie]);new Set(oe),Symbol("ResetLoaderData");var le=S.createContext(null);le.displayName="DataRouter";var Ae=S.createContext(null);Ae.displayName="DataRouterState";var ue=S.createContext({isTransitioning:!1});ue.displayName="ViewTransition",S.createContext(new Map).displayName="Fetchers",S.createContext(null).displayName="Await";var ce=S.createContext(null);ce.displayName="Navigation";var he=S.createContext(null);he.displayName="Location";var de=S.createContext({outlet:null,matches:[],isDataRoute:!1});de.displayName="Route";var pe=S.createContext(null);function fe(){return null!=S.useContext(he)}function me(){return T(fe(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(he).location}pe.displayName="RouteError";var ge="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ye(e){S.useContext(ce).static||S.useLayoutEffect(e)}function be(){let{isDataRoute:e}=S.useContext(de);return e?function(){let{router:e}=function(e){let t=S.useContext(le);return T(t,Se(e)),t}("useNavigate"),t=Ie("useNavigate"),n=S.useRef(!1);ye((()=>{n.current=!0}));let r=S.useCallback((async(r,a={})=>{L(n.current,ge),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...a}))}),[e,t]);return r}():function(){T(fe(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(le),{basename:t,navigator:n}=S.useContext(ce),{matches:r}=S.useContext(de),{pathname:a}=me(),s=JSON.stringify(Z(r)),i=S.useRef(!1);ye((()=>{i.current=!0}));let o=S.useCallback(((r,o={})=>{if(L(i.current,ge),!i.current)return;if("number"==typeof r)return void n.go(r);let l=ee(r,JSON.parse(s),a,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:te([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)}),[t,n,s,a,e]);return o}()}var we=S.createContext(null);function ve(e,{relative:t}={}){let{matches:n}=S.useContext(de),{pathname:r}=me(),a=JSON.stringify(Z(n));return S.useMemo((()=>ee(e,JSON.parse(a),r,"path"===t)),[e,a,r,t])}function xe(e,t,n,r){T(fe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=S.useContext(ce),{matches:s}=S.useContext(de),i=s[s.length-1],o=i?i.params:{},l=i?i.pathname:"/",A=i?i.pathnameBase:"/",u=i&&i.route;{let e=u&&u.path||"";Fe(l,!u||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let c,h=me();if(t){let e="string"==typeof t?D(t):t;T("/"===A||e.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${e.pathname}" was given in the \`location\` prop.`),c=e}else c=h;let d=c.pathname||"/",p=d;if("/"!==A){let e=A.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(e.length).join("/")}let f=Q(e,{pathname:p});L(u||null!=f,`No routes matched location "${c.pathname}${c.search}${c.hash}" `),L(null==f||void 0!==f[f.length-1].route.element||void 0!==f[f.length-1].route.Component||void 0!==f[f.length-1].route.lazy,`Matched leaf route at location "${c.pathname}${c.search}${c.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=function(e,t=[],n=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,a=n?.errors;if(null!=a){let e=r.findIndex((e=>e.route.id&&void 0!==a?.[e.route.id]));T(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let s=!1,i=-1;if(n)for(let e=0;e<r.length;e++){let t=r[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(i=e),t.route.id){let{loaderData:e,errors:a}=n,o=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!a||void 0===a[t.route.id]);if(t.route.lazy||o){s=!0,r=i>=0?r.slice(0,i+1):[r[0]];break}}}return r.reduceRight(((e,o,l)=>{let A,u=!1,c=null,h=null;n&&(A=a&&o.route.id?a[o.route.id]:void 0,c=o.route.errorElement||ke,s&&(i<0&&0===l?(Fe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,h=null):i===l&&(u=!0,h=o.route.hydrateFallbackElement||null)));let d=t.concat(r.slice(0,l+1)),p=()=>{let t;return t=A?c:u?h:o.route.Component?S.createElement(o.route.Component,null):o.route.element?o.route.element:e,S.createElement(Ne,{match:o,routeContext:{outlet:e,matches:d,isDataRoute:null!=n},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===l)?S.createElement(Ce,{location:n.location,revalidation:n.revalidation,component:c,error:A,children:p(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):p()}),null)}(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:te([A,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?A:te([A,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,r);return t&&m?S.createElement(he.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...c},navigationType:"POP"}},m):m}function Be(){let e=function(){let e=S.useContext(pe),t=function(e){let t=S.useContext(Ae);return T(t,Se(e)),t}("useRouteError"),n=Ie("useRouteError");return void 0!==e?e:t.errors?.[n]}(),t=se(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=S.createElement(S.Fragment,null,S.createElement("p",null,"💿 Hey developer 👋"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:s},"ErrorBoundary")," or"," ",S.createElement("code",{style:s},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:a},n):null,i)}var ke=S.createElement(Be,null),Ce=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?S.createElement(de.Provider,{value:this.props.routeContext},S.createElement(pe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ne({routeContext:e,match:t,children:n}){let r=S.useContext(le);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(de.Provider,{value:e},n)}function Se(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ie(e){let t=function(e){let t=S.useContext(de);return T(t,Se(e)),t}(e),n=t.matches[t.matches.length-1];return T(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Ee={};function Fe(e,t,n){t||Ee[e]||(Ee[e]=!0,L(!1,n))}function Te({to:e,replace:t,state:n,relative:r}){T(fe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=S.useContext(ce);L(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=S.useContext(de),{pathname:i}=me(),o=be(),l=ee(e,Z(s),i,"path"===r),A=JSON.stringify(l);return S.useEffect((()=>{o(JSON.parse(A),{replace:t,state:n,relative:r})}),[o,A,r,t,n]),null}function Le(e){return function(e){let t=S.useContext(de).outlet;return t?S.createElement(we.Provider,{value:e},t):t}(e.context)}function Ue(e){T(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _e({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:s=!1}){T(!fe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),o=S.useMemo((()=>({basename:i,navigator:a,static:s,future:{}})),[i,a,s]);"string"==typeof n&&(n=D(n));let{pathname:l="/",search:A="",hash:u="",state:c=null,key:h="default"}=n,d=S.useMemo((()=>{let e=J(l,i);return null==e?null:{location:{pathname:e,search:A,hash:u,state:c,key:h},navigationType:r}}),[i,l,A,u,c,h,r]);return L(null!=d,`<Router basename="${i}"> is not able to match the URL "${l}${A}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==d?null:S.createElement(ce.Provider,{value:o},S.createElement(he.Provider,{children:t,value:d}))}function Re({children:e,location:t}){return xe(De(e),t)}function De(e,t=[]){let n=[];return S.Children.forEach(e,((e,r)=>{if(!S.isValidElement(e))return;let a=[...t,r];if(e.type===S.Fragment)return void n.push.apply(n,De(e.props.children,a));T(e.type===Ue,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),T(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=De(e.props.children,a)),n.push(s)})),n}S.memo((function({routes:e,future:t,state:n}){return xe(e,void 0,n,t)})),S.Component;var Qe="get",Oe="application/x-www-form-urlencoded";function $e(e){return null!=e&&"string"==typeof e.tagName}var Me=null,Pe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function He(e){return null==e||Pe.has(e)?e:(L(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oe}"`),null)}function ze(e,t){if(!1===e||null==e)throw new Error(t)}function Ve(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function We(e,t,n,r,a,s){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===s?t.filter(((e,t)=>i(e,t)||o(e,t))):"data"===s?t.filter(((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0})):[]}function Ke(e,t,{includeHydrateFallback:n}={}){return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a})).flat(1),[...new Set(r)];var r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,Symbol("SingleFetchRedirect");function Ge(){let e=S.useContext(le);return ze(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function je(){let e=S.useContext(Ae);return ze(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}S.Component;var qe=S.createContext(void 0);function Xe(){let e=S.useContext(qe);return ze(e,"You must render this element inside a <HydratedRouter> element"),e}function Je(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ye({page:e,...t}){let{router:n}=Ge(),r=S.useMemo((()=>Q(n.routes,e,n.basename)),[n.routes,e,n.basename]);return r?S.createElement(et,{page:e,matches:r,...t}):null}function Ze(e){let{manifest:t,routeModules:n}=Xe(),[r,a]=S.useState([]);return S.useEffect((()=>{let r=!1;return async function(e,t,n){let r=await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}(r,n);return e.links?e.links():[]}return[]})));return function(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,a)=>{if(t&&(null==(s=a)||"string"!=typeof s.page)&&"script"===a.as&&a.href&&r.has(a.href))return e;var s;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(i)||(n.add(i),e.push({key:i,link:a})),e}),[])}(r.flat(1).filter(Ve).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,n).then((e=>{r||a(e)})),()=>{r=!0}}),[e,t,n]),r}function et({page:e,matches:t,...n}){let r=me(),{manifest:a,routeModules:s}=Xe(),{basename:i}=Ge(),{loaderData:o,matches:l}=je(),A=S.useMemo((()=>We(e,t,l,a,r,"data")),[e,t,l,a,r]),u=S.useMemo((()=>We(e,t,l,a,r,"assets")),[e,t,l,a,r]),c=S.useMemo((()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach((e=>{let t=a.routes[e.route.id];t&&t.hasLoader&&(!A.some((t=>t.route.id===e.route.id))&&e.route.id in o&&s[e.route.id]?.shouldRevalidate||t.hasClientLoader?l=!0:n.add(e.route.id))})),0===n.size)return[];let u=function(e,t){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===J(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}(e,i);return l&&n.size>0&&u.searchParams.set("_routes",t.filter((e=>n.has(e.route.id))).map((e=>e.route.id)).join(",")),[u.pathname+u.search]}),[i,o,r,a,A,t,e,s]),h=S.useMemo((()=>Ke(u,a)),[u,a]),d=Ze(u);return S.createElement(S.Fragment,null,c.map((e=>S.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n}))),h.map((e=>S.createElement("link",{key:e,rel:"modulepreload",href:e,...n}))),d.map((({key:e,link:t})=>S.createElement("link",{key:e,...t}))))}qe.displayName="FrameworkContext";function tt(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}var nt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{nt&&(window.__reactRouterVersion="7.6.2")}catch($a){}function rt({basename:e,children:t,window:n}){let r=S.useRef();null==r.current&&(r.current=F({window:n,v5Compat:!0}));let a=r.current,[s,i]=S.useState({action:a.action,location:a.location}),o=S.useCallback((e=>{S.startTransition((()=>i(e)))}),[i]);return S.useLayoutEffect((()=>a.listen(o)),[a,o]),S.createElement(_e,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}var at=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=S.forwardRef((function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:a,replace:s,state:i,target:o,to:l,preventScrollReset:A,viewTransition:u,...c},h){let d,{basename:p}=S.useContext(ce),f="string"==typeof l&&at.test(l),m=!1;if("string"==typeof l&&f&&(d=l,nt))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=J(t.pathname,p);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:m=!0}catch(e){L(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=function(e,{relative:t}={}){T(fe(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(ce),{hash:a,pathname:s,search:i}=ve(e,{relative:t}),o=s;return"/"!==n&&(o="/"===s?n:te([n,s])),r.createHref({pathname:o,search:i,hash:a})}(l,{relative:r}),[y,b,w]=function(e,t){let n=S.useContext(qe),[r,a]=S.useState(!1),[s,i]=S.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:A,onMouseLeave:u,onTouchStart:c}=t,h=S.useRef(null);S.useEffect((()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{i(e.isIntersecting)}))}),{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}}),[e]),S.useEffect((()=>{if(r){let e=setTimeout((()=>{i(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let d=()=>{a(!0)},p=()=>{a(!1),i(!1)};return n?"intent"!==e?[s,h,{}]:[s,h,{onFocus:Je(o,d),onBlur:Je(l,p),onMouseEnter:Je(A,d),onMouseLeave:Je(u,p),onTouchStart:Je(c,d)}]:[!1,h,{}]}(n,c),v=function(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:s,viewTransition:i}={}){let o=be(),l=me(),A=ve(e,{relative:s});return S.useCallback((u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:R(l)===R(A);o(e,{replace:t,state:r,preventScrollReset:a,relative:s,viewTransition:i})}}),[l,o,A,n,r,t,e,a,s,i])}(l,{replace:s,state:i,target:o,preventScrollReset:A,relative:r,viewTransition:u}),x=S.createElement("a",{...c,...w,href:d||g,onClick:m||a?e:function(t){e&&e(t),t.defaultPrevented||v(t)},ref:tt(h,b),target:o,"data-discover":f||"render"!==t?void 0:"true"});return y&&!f?S.createElement(S.Fragment,null,x,S.createElement(Ye,{page:g})):x}));st.displayName="Link";var it=S.forwardRef((function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:a,to:s,viewTransition:i,children:o,...l},A){let u=ve(s,{relative:l.relative}),c=me(),h=S.useContext(Ae),{navigator:d,basename:p}=S.useContext(ce),f=null!=h&&function(e,t={}){let n=S.useContext(ue);T(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=lt("useViewTransitionState"),a=ve(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=J(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=J(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=q(a.pathname,i)||null!=q(a.pathname,s)}(u)&&!0===i,m=d.encodeLocation?d.encodeLocation(u).pathname:u.pathname,g=c.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(g=g.toLowerCase(),y=y?y.toLowerCase():null,m=m.toLowerCase()),y&&p&&(y=J(y,p)||y);const b="/"!==m&&m.endsWith("/")?m.length-1:m.length;let w,v=g===m||!r&&g.startsWith(m)&&"/"===g.charAt(b),x=null!=y&&(y===m||!r&&y.startsWith(m)&&"/"===y.charAt(m.length)),B={isActive:v,isPending:x,isTransitioning:f},k=v?e:void 0;w="function"==typeof n?n(B):[n,v?"active":null,x?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof a?a(B):a;return S.createElement(st,{...l,"aria-current":k,className:w,ref:A,style:C,to:s,viewTransition:i},"function"==typeof o?o(B):o)}));it.displayName="NavLink";var ot=S.forwardRef((({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:s,method:i=Qe,action:o,onSubmit:l,relative:A,preventScrollReset:u,viewTransition:c,...h},d)=>{let p=function(){let{router:e}=lt("useSubmit"),{basename:t}=S.useContext(ce),n=Ie("useRouteId");return S.useCallback((async(r,a={})=>{let{action:s,method:i,encType:o,formData:l,body:A}=function(e,t){let n,r,a,s,i;if($e(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?J(i,t):null,n=e.getAttribute("method")||Qe,a=He(e.getAttribute("enctype"))||Oe,s=new FormData(e)}else if(function(e){return $e(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $e(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?J(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||Qe,a=He(e.getAttribute("formenctype"))||He(i.getAttribute("enctype"))||Oe,s=new FormData(i,e),!function(){if(null===Me)try{new FormData(document.createElement("form"),0),Me=!1}catch(e){Me=!0}return Me}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if($e(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qe,r=null,a=Oe,i=e}var o;return s&&"text/plain"===a&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:s,body:i}}(r,t);if(!1===a.navigate){let t=a.fetcherKey||ut();await e.fetch(t,n,a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:A,formMethod:a.method||i,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:l,body:A,formMethod:a.method||i,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})}),[e,t,n])}(),f=function(e,{relative:t}={}){let{basename:n}=S.useContext(ce),r=S.useContext(de);T(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),s={...ve(e||".",{relative:t})},i=me();if(null==e){s.search=i.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();s.search=n?`?${n}`:""}}return e&&"."!==e||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),"/"!==n&&(s.pathname="/"===s.pathname?n:te([n,s.pathname])),R(s)}(o,{relative:A}),m="get"===i.toLowerCase()?"get":"post",g="string"==typeof o&&at.test(o);return S.createElement("form",{ref:d,method:m,action:f,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=r?.getAttribute("formmethod")||i;p(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:a,state:s,relative:A,preventScrollReset:u,viewTransition:c})},...h,"data-discover":g||"render"!==e?void 0:"true"})}));function lt(e){let t=S.useContext(le);return T(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}ot.displayName="Form";var At=0,ut=()=>`__${String(++At)}__`;var ct=i(5072),ht=i.n(ct),dt=i(7825),pt=i.n(dt),ft=i(7659),mt=i.n(ft),gt=i(5056),yt=i.n(gt),bt=i(540),wt=i.n(bt),vt=i(1113),xt=i.n(vt),Bt=i(8972),kt={};kt.styleTagTransform=xt(),kt.setAttributes=yt(),kt.insert=mt().bind(null,"head"),kt.domAPI=pt(),kt.insertStyleElement=wt(),ht()(Bt.A,kt),Bt.A&&Bt.A.locals&&Bt.A.locals;const Ct=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},St=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim(),It=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var Et={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ft=(0,S.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:i,...o},l)=>(0,S.createElement)("svg",{ref:l,...Et,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:St("lucide",a),...!s&&!It(o)&&{"aria-hidden":"true"},...o},[...i.map((([e,t])=>(0,S.createElement)(e,t))),...Array.isArray(s)?s:[s]]))),Tt=(e,t)=>{const n=(0,S.forwardRef)((({className:n,...r},a)=>(0,S.createElement)(Ft,{ref:a,iconNode:t,className:St(`lucide-${Ct(Nt(e))}`,`lucide-${e}`,n),...r})));return n.displayName=Nt(e),n},Lt=Tt("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),Ut=Tt("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),_t=Tt("scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Rt=Tt("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Dt=Tt("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Qt=Tt("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ot=Tt("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),$t=Tt("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Mt=Tt("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Pt=Tt("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ht=()=>S.createElement("div",{className:"w-full"},S.createElement("div",{className:"pb-16 bg-white"},S.createElement("div",{className:"mx-auto px-4"},S.createElement("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-12"},"Mengapa Memilih CornLeaf AI?"),S.createElement("div",{className:"grid md:grid-cols-3 gap-8"},S.createElement("div",{className:"text-center p-6 rounded-xl hover:shadow-lg transition-shadow duration-300 bg-gray-50 hover:bg-white"},S.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center"},S.createElement(Dt,{className:"w-8 h-8 text-[#039b62]"})),S.createElement("h3",{className:"text-xl font-semibold mb-3"},"Deteksi Cepat"),S.createElement("p",{className:"text-gray-600"},"Hasil diagnosis dalam hitungan detik menggunakan teknologi AI terdepan")),S.createElement("div",{className:"text-center p-6 rounded-xl hover:shadow-lg transition-shadow duration-300 bg-gray-50 hover:bg-white"},S.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center"},S.createElement(Qt,{className:"w-8 h-8 text-[#039b62]"})),S.createElement("h3",{className:"text-xl font-semibold mb-3"},"Akurasi Tinggi"),S.createElement("p",{className:"text-gray-600"},"Tingkat akurasi tinggi berdasarkan ribuan data training penyakit jagung")),S.createElement("div",{className:"text-center p-6 rounded-xl hover:shadow-lg transition-shadow duration-300 bg-gray-50 hover:bg-white"},S.createElement("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center"},S.createElement(Ot,{className:"w-8 h-8 text-[#039b62]"})),S.createElement("h3",{className:"text-xl font-semibold mb-3"},"Mudah Digunakan"),S.createElement("p",{className:"text-gray-600"},"Interface yang user-friendly, cocok untuk petani dan praktisi pertanian"))))),S.createElement("div",{className:"py-16 bg-gray-50"},S.createElement("div",{className:"mx-auto px-4"},S.createElement("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-8 text-white text-center shadow-xl"},S.createElement("div",{className:"max-w-3xl mx-auto"},S.createElement("div",{className:"w-16 h-16 mx-auto mb-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center"},S.createElement($t,{className:"w-8 h-8 text-white"})),S.createElement("h3",{className:"text-3xl font-bold mb-4"},"Solusi Inovasi dengan Teknologi AI"),S.createElement("p",{className:"text-lg text-green-100 mb-8 leading-relaxed"},"Sistem deteksi otomatis menggunakan kecerdasan buatan untuk diagnosis cepat, akurat, dan mudah diakses oleh semua petani"),S.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},S.createElement("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm"},S.createElement("div",{className:"text-3xl mb-3"},"⚡"),S.createElement("div",{className:"font-semibold text-lg mb-1"},"Deteksi Instan"),S.createElement("div",{className:"text-sm text-green-200"},"Hasil dalam hitungan detik")),S.createElement("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm"},S.createElement("div",{className:"text-3xl mb-3"},"🎯"),S.createElement("div",{className:"font-semibold text-lg mb-1"},"Akurasi Tinggi"),S.createElement("div",{className:"text-sm text-green-200"},"Berbasis data ribuan sampel")),S.createElement("div",{className:"bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm"},S.createElement("div",{className:"text-3xl mb-3"},"📱"),S.createElement("div",{className:"font-semibold text-lg mb-1"},"Mudah Digunakan"),S.createElement("div",{className:"text-sm text-green-200"},"Cukup foto dengan smartphone"))))))),S.createElement("div",{className:"py-16 bg-white"},S.createElement("div",{className:"mx-auto px-4"},S.createElement("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-12"},"Cara Kerja Scanner"),S.createElement("div",{className:"grid md:grid-cols-3 gap-8"},S.createElement("div",{className:"flex flex-col items-center text-center group"},S.createElement("div",{className:"relative mb-6"},S.createElement("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300"},S.createElement(Mt,{className:"w-10 h-10 text-white"})),S.createElement("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},S.createElement("span",{className:"text-sm font-bold text-green-600"},"1"))),S.createElement("h3",{className:"text-xl font-semibold mb-3"},"Ambil Foto"),S.createElement("p",{className:"text-gray-600 leading-relaxed"},"Upload foto daun jagung yang ingin diperiksa kesehatannya")),S.createElement("div",{className:"flex flex-col items-center text-center group"},S.createElement("div",{className:"relative mb-6"},S.createElement("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300"},S.createElement(Dt,{className:"w-10 h-10 text-white"})),S.createElement("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},S.createElement("span",{className:"text-sm font-bold text-green-600"},"2"))),S.createElement("h3",{className:"text-xl font-semibold mb-3"},"Analisis AI"),S.createElement("p",{className:"text-gray-600 leading-relaxed"},"AI akan menganalisis foto dan mendeteksi penyakit pada daun")),S.createElement("div",{className:"flex flex-col items-center text-center group"},S.createElement("div",{className:"relative mb-6"},S.createElement("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-300"},S.createElement(Pt,{className:"w-10 h-10 text-white"})),S.createElement("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},S.createElement("span",{className:"text-sm font-bold text-green-600"},"3"))),S.createElement("h3",{className:"text-xl font-semibold mb-3"},"Hasil & Saran"),S.createElement("p",{className:"text-gray-600 leading-relaxed"},"Dapatkan hasil diagnosis dan rekomendasi penanganan"))))),S.createElement("div",{className:"py-16 bg-gradient-to-r from-green-500 to-emerald-600"},S.createElement("div",{className:"max-w-4xl mx-auto px-4 text-center"},S.createElement("h2",{className:"text-4xl font-bold mb-4 text-white"},"Siap Memulai Deteksi?"),S.createElement("p",{className:"text-xl mb-8 text-green-100 leading-relaxed"},"Lindungi tanaman jagung Anda dengan teknologi AI terdepan"),S.createElement(st,{to:"/cornLeafScanner",className:"inline-flex items-center gap-2 bg-white text-green-600 hover:bg-gray-50 px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"},S.createElement(Mt,{className:"w-5 h-5"}),"Mulai Scanner Sekarang")))),zt=()=>S.createElement("div",{className:"relative w-full min-h-screen flex flex-col items-center justify-center overflow-hidden bg-white"},S.createElement("div",{className:"absolute inset-0"},S.createElement("div",{className:"absolute top-20 left-10 animate-bounce delay-100"},S.createElement(Lt,{className:"w-8 h-8 text-green-300 opacity-60"})),S.createElement("div",{className:"absolute top-40 right-20 animate-bounce delay-300"},S.createElement(Lt,{className:"w-6 h-6 text-emerald-300 opacity-40"})),S.createElement("div",{className:"absolute top-32 right-32 w-20 h-20 bg-gradient-to-br from-green-200 to-emerald-200 rounded-full opacity-30 animate-pulse"})),S.createElement("div",{className:"relative min-h-screen z-10 container mx-auto px-4"},S.createElement("div",{className:"lg:mt-4 grid lg:grid-cols-2 gap-48 mx-auto items-center py-24"},S.createElement("div",{className:"text-left"},S.createElement("div",{className:"flex items-center gap-2 mb-6"},S.createElement("div",{className:"flex items-center gap-1 bg-green-100 px-3 py-1 rounded-full"},S.createElement(Ut,{className:"w-4 h-4 text-green-600"}),S.createElement("span",{className:"text-sm font-medium text-green-700"},"AI Technology"))),S.createElement("h1",{className:"text-6xl lg:text-7xl font-bold text-gray-900 mb-6 leading-tight"},"Deteksi",S.createElement("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600 lg:py-2"},"Penyakit Daun"),S.createElement("span",{className:"block"},"Jagung")),S.createElement("p",{className:"text-xl text-gray-600 mb-8 max-w-lg"},"Diagnosis cepat dan akurat menggunakan teknologi AI untuk menjaga kesehatan tanaman jagung Anda"),S.createElement("div",{className:"flex flex-col sm:flex-row gap-4"},S.createElement(st,{to:"/cornLeafScanner",className:"group bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center gap-2"},S.createElement(_t,{className:"w-5 h-5"}),"Mulai Scanner",S.createElement(Rt,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})),S.createElement(st,{to:"/about",className:"border-2 border-green-500 text-green-600 hover:bg-green-50 px-8 py-4 rounded-xl font-semibold transition-all duration-300 text-center"},"Pelajari Lebih Lanjut"))),S.createElement("div",{className:"relative"},S.createElement("div",{className:"relative w-full h-80 mb-48 lg:mb-0 lg:h-[500px]"},S.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},S.createElement("div",{className:"relative"},S.createElement("div",{className:"w-64 h-[500px] bg-gradient-to-br from-gray-900 to-gray-700 rounded-[3rem] p-2 shadow-2xl transform rotate-12 hover:rotate-6 transition-transform duration-500"},S.createElement("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-emerald-500 rounded-[2.5rem] flex flex-col items-center justify-center relative overflow-hidden"},S.createElement("div",{className:"text-center text-white p-6"},S.createElement(Lt,{className:"w-16 h-16 mx-auto mb-4 animate-pulse"}),S.createElement("div",{className:"text-lg font-semibold mb-2"},"CornLeaf AI"),S.createElement("div",{className:"text-sm opacity-90 mb-6"},"Scanning..."),S.createElement("div",{className:"w-32 h-1 bg-white bg-opacity-30 rounded-full overflow-hidden"},S.createElement("div",{className:"w-3/4 h-full bg-white rounded-full animate-pulse"}))),S.createElement("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-yellow-400 rounded-full animate-bounce delay-100"}),S.createElement("div",{className:"absolute -bottom-6 -left-6 w-6 h-6 bg-blue-400 rounded-full animate-bounce delay-300"}))),S.createElement("div",{className:"absolute -top-8 -left-8 transform -rotate-12"},S.createElement("div",{className:"w-24 h-32 bg-gradient-to-br from-green-400 to-green-600 rounded-full opacity-80 blur-sm"})),S.createElement("div",{className:"absolute -bottom-8 -right-8 transform rotate-12"},S.createElement("div",{className:"w-20 h-28 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full opacity-70 blur-sm"})))))))),S.createElement(Ht,null)),Vt=Tt("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Wt=Tt("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Kt=Tt("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Gt=Tt("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),jt=Tt("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),qt=Tt("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Xt=Tt("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Jt=Tt("sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]),Yt=Tt("droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),Zt=Tt("circle-dot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),en=Tt("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),tn=[{label:"Tingkat Akurasi",value:"85%+",icon:Vt},{label:"Waktu Deteksi",value:"< 3 Detik",icon:Kt},{label:"Jenis Penyakit",value:"4 Kategori",icon:Lt},{label:"User Experience",value:"Gratis",icon:Pt}],nn=[{icon:Ot,title:"Mempermudah Petani",description:"Dalam mendeteksi penyakit tanaman dengan teknologi yang mudah diakses",color:"text-green-600",bgColor:"bg-green-50"},{icon:Wt,title:"Platform Inklusif",description:"Menyediakan platform yang mudah diakses dan digunakan oleh semua kalangan",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:Lt,title:"Edukasi Berkelanjutan",description:"Mengedukasi petani tentang gejala penyakit tanaman dan cara penanganannya",color:"text-purple-600",bgColor:"bg-purple-50"}],rn=[{icon:Gt,title:"Machine Learning",description:"Menggunakan algoritma CNN untuk analisis gambar",stat:"Deep Learning"},{icon:jt,title:"Dataset Kaggle",description:"Dilatih dengan ribuan gambar daun jagung",stat:"10K+ Images"},{icon:Dt,title:"Real-time Processing",description:"Pemrosesan gambar secara real-time di browser",stat:"< 3 Seconds"}],an=[{icon:Dt,title:"Deteksi Otomatis & Cepat",description:"Deteksi penyakit secara otomatis dan cepat dalam hitungan detik",color:"text-yellow-600",bgColor:"bg-yellow-50"},{icon:Qt,title:"Akurasi Tinggi",description:"Mengurangi risiko kesalahan diagnosis manual dengan AI",color:"text-blue-600",bgColor:"bg-blue-50"},{icon:Kt,title:"Hemat Waktu & Biaya",description:"Menghemat waktu dan biaya perawatan dengan deteksi dini",color:"text-green-600",bgColor:"bg-green-50"},{icon:qt,title:"Produktivitas Meningkat",description:"Meningkatkan produktivitas dan hasil panen yang optimal",color:"text-purple-600",bgColor:"bg-purple-50"},{icon:Wt,title:"Ketahanan Pangan",description:"Mendukung upaya ketahanan pangan nasional Indonesia",color:"text-indigo-600",bgColor:"bg-indigo-50"},{icon:Xt,title:"Mudah Digunakan",description:"Interface yang user-friendly tanpa perlu training khusus",color:"text-red-600",bgColor:"bg-red-50"}],sn=[{name:"Sehat",color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-300",icon:S.createElement(Jt,{className:"text-green-600 w-8 h-8 mx-auto"}),description:"Daun jagung dalam kondisi sehat dan normal"},{name:"Hawar Daun",color:"text-orange-600",bgColor:"bg-orange-100",icon:S.createElement(Yt,{className:"text-orange-600 w-8 h-8 mx-auto"}),borderColor:"border-orange-300",description:"Penyakit yang menyebabkan bercak coklat pada daun"},{name:"Karat Daun",color:"text-red-600",bgColor:"bg-red-100",icon:S.createElement(Zt,{className:"text-red-600 w-8 h-8 mx-auto"}),borderColor:"border-red-300",description:"Penyakit jamur yang menimbulkan bintik karat"},{name:"Layu Daun",color:"text-amber-600",bgColor:"bg-amber-100",icon:S.createElement(en,{className:"text-amber-600 w-8 h-8 mx-auto"}),borderColor:"border-amber-300",description:"Penyakit yang menyebabkan daun layu dan menguning"}],on=[{question:"Apakah saya perlu instal aplikasi?",answer:"Tidak. Cukup buka website CornScan dan upload foto daun jagung."},{question:"Apakah harus ada koneksi internet?",answer:"Ya, karena sistem berbasis web dan menggunakan model AI di sisi browser."},{question:"Seberapa akurat hasil deteksi?",answer:"Sistem kami mencapai akurasi lebih dari 90% pada data uji, dan terus dikembangkan."},{question:"Apakah sistem ini gratis?",answer:"Ya, platform ini dapat digunakan secara gratis oleh petani dan masyarakat umum."},{question:"Bagaimana jika gambar tidak jelas?",answer:"Pastikan gambar diambil dalam kondisi terang dan fokus agar hasil lebih akurat."}],ln=e=>{let{stats:t}=e;return S.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-16"},t.map(((e,t)=>{const n=e.icon;return S.createElement("div",{key:t,className:"bg-white rounded-xl p-6 text-center shadow-lg hover:shadow-xl transition-shadow"},S.createElement(n,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),S.createElement("div",{className:"text-2xl font-bold text-gray-800 mb-1"},e.value),S.createElement("div",{className:"text-sm text-gray-600"},e.label))})))},An=e=>{let{techFeatures:t}=e;return S.createElement("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12"},S.createElement("div",{className:"flex items-center mb-8"},S.createElement(Gt,{className:"w-8 h-8 text-purple-600 mr-3"}),S.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Teknologi di Balik CornScan")),S.createElement("div",{className:"grid md:grid-cols-3 gap-6 mb-8"},t.map(((e,t)=>{const n=e.icon;return S.createElement("div",{key:t,className:"bg-gradient-to-br from-purple-50 to-blue-50 p-6 rounded-xl text-center"},S.createElement(n,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),S.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},e.title),S.createElement("p",{className:"text-gray-600 text-sm mb-3"},e.description),S.createElement("div",{className:"text-purple-600 font-bold"},e.stat))}))),S.createElement("div",{className:"bg-gradient-to-br from-purple-100 to-blue-100 p-8 rounded-2xl"},S.createElement(Mt,{className:"w-16 h-16 text-purple-600 mb-4"}),S.createElement("h3",{className:"text-xl font-semibold text-gray-800 mb-2"},"Cara Kerja"),S.createElement("p",{className:"text-gray-600"},"Cukup upload foto daun jagung, AI kami akan menganalisis dan memberikan diagnosis serta rekomendasi perawatan dalam hitungan detik.")))},un=e=>{let{benefits:t}=e;return S.createElement("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12"},S.createElement("div",{className:"flex items-center mb-8"},S.createElement("div",{className:"text-2xl mr-3"},"🌱"),S.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Manfaat yang Dirasakan Petani")),S.createElement("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},t.map(((e,t)=>{const n=e.icon;return S.createElement("div",{key:t,className:"".concat(e.bgColor," p-6 rounded-xl hover:shadow-lg transition-shadow")},S.createElement(n,{className:"w-8 h-8 ".concat(e.color," mb-4")}),S.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},e.title),S.createElement("p",{className:"text-gray-600 text-sm"},e.description))}))))},cn=e=>{let{diseases:t}=e;return S.createElement("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12"},S.createElement("div",{className:"flex items-center mb-8"},S.createElement("div",{className:"text-2xl mr-3"},"🦠"),S.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Jenis Penyakit yang Dapat Dideteksi")),S.createElement("p",{className:"text-gray-600 text-lg mb-8"},"CornScan mampu mendeteksi dan membedakan beberapa kategori kondisi daun jagung:"),S.createElement("div",{className:"grid md:grid-cols-4 gap-6"},t.map(((e,t)=>S.createElement("div",{key:t,className:"".concat(e.bgColor," border-2 ").concat(e.borderColor," p-6 rounded-xl text-center hover:scale-105 transition-transform")},S.createElement("div",{className:"text-4xl mb-3"},e.icon),S.createElement("h3",{className:"text-xl font-semibold ".concat(e.color," mb-2")},e.name),S.createElement("p",{className:"text-gray-600 text-sm"},e.description))))))},hn=e=>{let{missions:t}=e;return S.createElement("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12"},S.createElement("h2",{className:"text-3xl font-bold text-gray-800 mb-8 text-center"},"Misi Kami"),S.createElement("div",{className:"grid md:grid-cols-3 gap-6"},t.map(((e,t)=>{const n=e.icon;return S.createElement("div",{key:t,className:"".concat(e.bgColor," p-6 rounded-xl text-center hover:shadow-lg transition-shadow")},S.createElement(n,{className:"w-12 h-12 ".concat(e.color," mx-auto mb-4")}),S.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},e.title),S.createElement("p",{className:"text-gray-600"},e.description))}))))},dn=Tt("circle-help",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),pn=Tt("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),fn=Tt("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),mn=e=>{let{faqs:t}=e;const[n,r]=(0,S.useState)(null);return S.createElement("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12"},S.createElement("div",{className:"flex items-center mb-8"},S.createElement(dn,{className:"w-8 h-8 text-blue-600 mr-3"}),S.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"FAQ (Pertanyaan Umum)")),S.createElement("div",{className:"space-y-4"},t.map(((e,t)=>S.createElement("div",{key:t,className:"border border-gray-200 rounded-lg hover:border-blue-300 transition-colors"},S.createElement("button",{onClick:()=>(e=>{r(n===e?null:e)})(t),className:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-50 transition-colors rounded-lg"},S.createElement("span",{className:"font-semibold text-gray-800"},e.question),n===t?S.createElement(pn,{className:"w-5 h-5 text-gray-500"}):S.createElement(fn,{className:"w-5 h-5 text-gray-500"})),n===t&&S.createElement("div",{className:"px-6 pb-4"},S.createElement("p",{className:"text-gray-600"},e.answer)))))))},gn=()=>S.createElement("div",{className:"min-h-screen py-12 px-6 bg-gradient-to-br from-green-50 to-blue-50"},S.createElement("div",{className:"max-w-6xl mx-auto"},S.createElement("div",{className:"text-center mb-16"},S.createElement("div",{className:"text-6xl mb-4"},"🌽"),S.createElement("h1",{className:"text-5xl py-2 font-bold text-gray-800 mb-6 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent"},"Tentang CornScan"),S.createElement("div",{className:"w-24 h-1 bg-gradient-to-r from-green-500 to-blue-500 mx-auto mb-8"}),S.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"Solusi cerdas berbasis AI untuk deteksi dini penyakit tanaman jagung")),S.createElement(ln,{stats:tn}),S.createElement("div",{className:"mb-16"},S.createElement("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12"},S.createElement("div",{className:"flex items-center mb-6"},S.createElement("div",{className:"text-2xl mr-3"},"📌"),S.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Latar Belakang")),S.createElement("p",{className:"text-gray-600 text-lg leading-relaxed"},"Indonesia adalah negara agraris yang sangat bergantung pada hasil pertanian seperti jagung. Namun, banyak petani mengalami kesulitan dalam mendeteksi penyakit tanaman jagung secara dini karena keterbatasan pengetahuan dan alat. Hal ini menyebabkan penanganan sering terlambat, biaya meningkat, dan hasil panen menurun."))),S.createElement("div",{className:"grid md:grid-cols-2 gap-8 mb-16"},S.createElement("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-2xl p-8"},S.createElement("div",{className:"flex items-center mb-4"},S.createElement(Vt,{className:"w-8 h-8 text-green-600 mr-3"}),S.createElement("h3",{className:"text-2xl font-bold text-gray-800"},"Tujuan Kami")),S.createElement("p",{className:"text-gray-700 leading-relaxed"},"CornScan hadir untuk membantu petani dalam"," ",S.createElement("strong",null,"mendeteksi dini penyakit pada daun jagung")," ","menggunakan teknologi kecerdasan buatan (AI), sehingga mereka bisa mengambil tindakan cepat dan tepat.")),S.createElement("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl p-8"},S.createElement("div",{className:"flex items-center mb-4"},S.createElement(Wt,{className:"w-8 h-8 text-blue-600 mr-3"}),S.createElement("h3",{className:"text-2xl font-bold text-gray-800"},"Visi Kami")),S.createElement("p",{className:"text-gray-700 leading-relaxed"},"Mewujudkan sistem pertanian yang cerdas, inklusif, dan berkelanjutan dengan teknologi AI untuk mendukung kesejahteraan petani Indonesia."))),S.createElement("div",{className:"mb-16"},S.createElement(An,{techFeatures:rn})),S.createElement("div",{className:"mb-16"},S.createElement(un,{benefits:an})),S.createElement("div",{className:"mb-16"},S.createElement(cn,{diseases:sn})),S.createElement("div",{className:"mb-16"},S.createElement("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-2xl p-8 md:p-12 text-white text-center"},S.createElement("div",{className:"text-2xl mb-4"},"📊"),S.createElement("h2",{className:"text-3xl font-bold mb-6"},"Tingkat Akurasi Sistem"),S.createElement("p",{className:"text-xl mb-4"},"Model AI kami telah melalui berbagai tahap validasi dan pelatihan."),S.createElement("div",{className:"text-4xl font-bold mb-2"},"🎯 90%+"),S.createElement("p",{className:"text-lg"},"Akurasi deteksi lebih dari 90% untuk dataset uji, dengan pengujian real-time berbasis browser."))),S.createElement("div",{className:"mb-16"},S.createElement(hn,{missions:nn})),S.createElement("div",{className:"mb-16"},S.createElement(mn,{faqs:on})),S.createElement("div",{className:"text-center"},S.createElement("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-2xl p-8 text-white"},S.createElement("h2",{className:"text-3xl font-bold mb-4"},"Siap Memulai?"),S.createElement("p",{className:"text-xl mb-6"},"Gunakan CornScan sekarang dan rasakan kemudahan deteksi penyakit jagung dengan AI"),S.createElement(st,{to:"/cornLeafScanner",className:"bg-white text-green-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"},"Mulai Deteksi Sekarang"))))),yn=Tt("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),bn=e=>{let{photo:t,name:n,role:r,institution:a}=e;return S.createElement("div",{className:"bg-white rounded-2xl border-2 border-gray py-12 flex flex-col items-center text-center hover:shadow-lg transition"},S.createElement("img",{src:t,alt:n,className:"w-48 h-48 rounded-full object-cover mb-4"}),S.createElement("h3",{className:"text-2xl font-semibold"},n),S.createElement("div",{className:"text-xl text-gray-600 flex items-center gap-1"},S.createElement(yn,{className:"w-5 h-5 text-green-500"}),S.createElement("span",null,r)),S.createElement("p",{className:"text-lg text-gray-500 mt-1"},a))};function wn(){return wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wn.apply(null,arguments)}const vn=()=>S.createElement("section",{className:"container mx-auto py-10 px-4"},S.createElement("h2",{className:"text-3xl font-bold mb-8 text-center"},"Tim Kami"),S.createElement("div",{className:"grid gap-8 grid-cols-1 lg:grid-cols-2"},[{photo:"../assets/download.jpeg",name:"Wahyu Bagas Prastyo",role:"Machine Learning",institution:"Politeknik Negeri Jember"},{photo:"../assets/download.jpeg",name:"Siti Septiyah Agustin",role:"Machine Learning",institution:"Politeknik Negeri Jember"},{photo:"../assets/download.jpeg",name:"Eva Yuliana",role:"Machine Learning",institution:"Politeknik Negeri Jember"},{photo:"../assets/download.jpeg",name:"Mohammad Ilham Islamy",role:"Frontend Developer",institution:"Politeknik Negeri Jember"},{photo:"../assets/download.jpeg",name:"Farid Kurniawan",role:"Backend Developer",institution:"Politeknik Negeri Jember"},{photo:"../assets/download.jpeg",name:"Muhammad Reza Fadlillah",role:"Backend Developer",institution:"Politeknik Negeri Jember"}].map(((e,t)=>S.createElement(bn,wn({key:t},e)))))),xn=Tt("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Bn=Tt("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),kn=Tt("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Cn=Tt("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]);var Nn=i(2284),Sn=Uint8Array,In=Uint16Array,En=Int32Array,Fn=new Sn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tn=new Sn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ln=new Sn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Un=function(e,t){for(var n=new In(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new En(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)a[s]=s-n[r]<<5|r;return{b:n,r:a}},_n=Un(Fn,2),Rn=_n.b,Dn=_n.r;Rn[28]=258,Dn[258]=28;for(var Qn=Un(Tn,0),On=Qn.b,$n=Qn.r,Mn=new In(32768),Pn=0;Pn<32768;++Pn){var Hn=(43690&Pn)>>1|(21845&Pn)<<1;Hn=(61680&(Hn=(52428&Hn)>>2|(13107&Hn)<<2))>>4|(3855&Hn)<<4,Mn[Pn]=((65280&Hn)>>8|(255&Hn)<<8)>>1}var zn=function(e,t,n){for(var r=e.length,a=0,s=new In(t);a<r;++a)e[a]&&++s[e[a]-1];var i,o=new In(t);for(a=1;a<t;++a)o[a]=o[a-1]+s[a-1]<<1;if(n){i=new In(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var A=a<<4|e[a],u=t-e[a],c=o[e[a]-1]++<<u,h=c|(1<<u)-1;c<=h;++c)i[Mn[c]>>l]=A}else for(i=new In(r),a=0;a<r;++a)e[a]&&(i[a]=Mn[o[e[a]-1]++]>>15-e[a]);return i},Vn=new Sn(288);for(Pn=0;Pn<144;++Pn)Vn[Pn]=8;for(Pn=144;Pn<256;++Pn)Vn[Pn]=9;for(Pn=256;Pn<280;++Pn)Vn[Pn]=7;for(Pn=280;Pn<288;++Pn)Vn[Pn]=8;var Wn=new Sn(32);for(Pn=0;Pn<32;++Pn)Wn[Pn]=5;var Kn=zn(Vn,9,0),Gn=zn(Vn,9,1),jn=zn(Wn,5,0),qn=zn(Wn,5,1),Xn=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Jn=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Yn=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Zn=function(e){return(e+7)/8|0},er=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new Sn(e.subarray(t,n))},tr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],nr=function(e,t,n){var r=new Error(t||tr[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,nr),!n)throw r;return r},rr=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},ar=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},sr=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,s=n.slice();if(!a)return{t:hr,l:0};if(1==a){var i=new Sn(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var o=n[0],l=n[1],A=0,u=1,c=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=n[n[A].f<n[c].f?A++:c++],l=n[A!=u&&n[A].f<n[c].f?A++:c++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};var h=s[0].s;for(r=1;r<a;++r)s[r].s>h&&(h=s[r].s);var d=new In(h+1),p=ir(n[u-1],d,0);if(p>t){r=0;var f=0,m=p-t,g=1<<m;for(s.sort((function(e,t){return d[t.s]-d[e.s]||e.f-t.f}));r<a;++r){var y=s[r].s;if(!(d[y]>t))break;f+=g-(1<<p-d[y]),d[y]=t}for(f>>=m;f>0;){var b=s[r].s;d[b]<t?f-=1<<t-d[b]++-1:++r}for(;r>=0&&f;--r){var w=s[r].s;d[w]==t&&(--d[w],++f)}p=t}return{t:new Sn(d),l:p}},ir=function(e,t,n){return-1==e.s?Math.max(ir(e.l,t,n+1),ir(e.r,t,n+1)):t[e.s]=n},or=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new In(++t),r=0,a=e[0],s=1,i=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:n.subarray(0,r),n:t}},lr=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Ar=function(e,t,n){var r=n.length,a=Zn(t+2);e[a]=255&r,e[a+1]=r>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var s=0;s<r;++s)e[a+s+4]=n[s];return 8*(a+4+r)},ur=function(e,t,n,r,a,s,i,o,l,A,u){rr(t,u++,n),++a[256];for(var c=sr(a,15),h=c.t,d=c.l,p=sr(s,15),f=p.t,m=p.l,g=or(h),y=g.c,b=g.n,w=or(f),v=w.c,x=w.n,B=new In(19),k=0;k<y.length;++k)++B[31&y[k]];for(k=0;k<v.length;++k)++B[31&v[k]];for(var C=sr(B,7),N=C.t,S=C.l,I=19;I>4&&!N[Ln[I-1]];--I);var E,F,T,L,U=A+5<<3,_=lr(a,Vn)+lr(s,Wn)+i,R=lr(a,h)+lr(s,f)+i+14+3*I+lr(B,N)+2*B[16]+3*B[17]+7*B[18];if(l>=0&&U<=_&&U<=R)return Ar(t,u,e.subarray(l,l+A));if(rr(t,u,1+(R<_)),u+=2,R<_){E=zn(h,d,0),F=h,T=zn(f,m,0),L=f;var D=zn(N,S,0);for(rr(t,u,b-257),rr(t,u+5,x-1),rr(t,u+10,I-4),u+=14,k=0;k<I;++k)rr(t,u+3*k,N[Ln[k]]);u+=3*I;for(var Q=[y,v],O=0;O<2;++O){var $=Q[O];for(k=0;k<$.length;++k){var M=31&$[k];rr(t,u,D[M]),u+=N[M],M>15&&(rr(t,u,$[k]>>5&127),u+=$[k]>>12)}}}else E=Kn,F=Vn,T=jn,L=Wn;for(k=0;k<o;++k){var P=r[k];if(P>255){ar(t,u,E[257+(M=P>>18&31)]),u+=F[M+257],M>7&&(rr(t,u,P>>23&31),u+=Fn[M]);var H=31&P;ar(t,u,T[H]),u+=L[H],H>3&&(ar(t,u,P>>5&8191),u+=Tn[H])}else ar(t,u,E[P]),u+=F[P]}return ar(t,u,E[256]),u+F[256]},cr=new En([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),hr=new Sn(0),dr=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,s=0|n.length,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=r+=n[i];r=(65535&r)+15*(r>>16),a=(65535&a)+15*(a>>16)}e=r,t=a},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},pr=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Sn(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return function(e,t,n,r,a,s){var i=s.z||e.length,o=new Sn(r+i+5*(1+Math.ceil(i/7e3))+a),l=o.subarray(r,o.length-a),A=s.l,u=7&(s.r||0);if(t){u&&(l[0]=s.r>>3);for(var c=cr[t-1],h=c>>13,d=8191&c,p=(1<<n)-1,f=s.p||new In(32768),m=s.h||new In(p+1),g=Math.ceil(n/3),y=2*g,b=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<y)&p},w=new En(25e3),v=new In(288),x=new In(32),B=0,k=0,C=s.i||0,N=0,S=s.w||0,I=0;C+2<i;++C){var E=b(C),F=32767&C,T=m[E];if(f[F]=T,m[E]=F,S<=C){var L=i-C;if((B>7e3||N>24576)&&(L>423||!A)){u=ur(e,l,0,w,v,x,k,N,I,C-I,u),N=B=k=0,I=C;for(var U=0;U<286;++U)v[U]=0;for(U=0;U<30;++U)x[U]=0}var _=2,R=0,D=d,Q=F-T&32767;if(L>2&&E==b(C-Q))for(var O=Math.min(h,L)-1,$=Math.min(32767,C),M=Math.min(258,L);Q<=$&&--D&&F!=T;){if(e[C+_]==e[C+_-Q]){for(var P=0;P<M&&e[C+P]==e[C+P-Q];++P);if(P>_){if(_=P,R=Q,P>O)break;var H=Math.min(Q,P-2),z=0;for(U=0;U<H;++U){var V=C-Q+U&32767,W=V-f[V]&32767;W>z&&(z=W,T=V)}}}Q+=(F=T)-(T=f[F])&32767}if(R){w[N++]=268435456|Dn[_]<<18|$n[R];var K=31&Dn[_],G=31&$n[R];k+=Fn[K]+Tn[G],++v[257+K],++x[G],S=C+_,++B}else w[N++]=e[C],++v[e[C]]}}for(C=Math.max(C,S);C<i;++C)w[N++]=e[C],++v[e[C]];u=ur(e,l,A,w,v,x,k,N,I,C-I,u),A||(s.r=7&u|l[u/8|0]<<3,u-=7,s.h=m,s.p=f,s.i=C,s.w=S)}else{for(C=s.w||0;C<i+A;C+=65535){var j=C+65535;j>=i&&(l[u/8|0]=A,j=i),u=Ar(l,u+1,e.subarray(C,j))}s.i=i}return er(o,0,r+Zn(u)+a)}(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,a)},fr=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function mr(e,t){t||(t={});var n=dr();n.p(e);var r=pr(e,t,t.dictionary?6:2,4);return function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=dr();a.p(t.dictionary),fr(e,2,a.d())}}(r,t),fr(r,r.length-4,n.d()),r}function gr(e,t){return function(e,t,n,r){var a=e.length,s=r?r.length:0;if(!a||t.f&&!t.l)return n||new Sn(0);var i=!n,o=i||2!=t.i,l=t.i;i&&(n=new Sn(3*a));var A=function(e){var t=n.length;if(e>t){var r=new Sn(Math.max(2*t,e));r.set(n),n=r}},u=t.f||0,c=t.p||0,h=t.b||0,d=t.l,p=t.d,f=t.m,m=t.n,g=8*a;do{if(!d){u=Jn(e,c,1);var y=Jn(e,c+1,3);if(c+=3,!y){var b=e[(F=Zn(c)+4)-4]|e[F-3]<<8,w=F+b;if(w>a){l&&nr(0);break}o&&A(h+b),n.set(e.subarray(F,w),h),t.b=h+=b,t.p=c=8*w,t.f=u;continue}if(1==y)d=Gn,p=qn,f=9,m=5;else if(2==y){var v=Jn(e,c,31)+257,x=Jn(e,c+10,15)+4,B=v+Jn(e,c+5,31)+1;c+=14;for(var k=new Sn(B),C=new Sn(19),N=0;N<x;++N)C[Ln[N]]=Jn(e,c+3*N,7);c+=3*x;var S=Xn(C),I=(1<<S)-1,E=zn(C,S,1);for(N=0;N<B;){var F,T=E[Jn(e,c,I)];if(c+=15&T,(F=T>>4)<16)k[N++]=F;else{var L=0,U=0;for(16==F?(U=3+Jn(e,c,3),c+=2,L=k[N-1]):17==F?(U=3+Jn(e,c,7),c+=3):18==F&&(U=11+Jn(e,c,127),c+=7);U--;)k[N++]=L}}var _=k.subarray(0,v),R=k.subarray(v);f=Xn(_),m=Xn(R),d=zn(_,f,1),p=zn(R,m,1)}else nr(1);if(c>g){l&&nr(0);break}}o&&A(h+131072);for(var D=(1<<f)-1,Q=(1<<m)-1,O=c;;O=c){var $=(L=d[Yn(e,c)&D])>>4;if((c+=15&L)>g){l&&nr(0);break}if(L||nr(2),$<256)n[h++]=$;else{if(256==$){O=c,d=null;break}var M=$-254;if($>264){var P=Fn[N=$-257];M=Jn(e,c,(1<<P)-1)+Rn[N],c+=P}var H=p[Yn(e,c)&Q],z=H>>4;if(H||nr(3),c+=15&H,R=On[z],z>3&&(P=Tn[z],R+=Yn(e,c)&(1<<P)-1,c+=P),c>g){l&&nr(0);break}o&&A(h+131072);var V=h+M;if(h<R){var W=s-R,K=Math.min(R,V);for(W+h<0&&nr(3);h<K;++h)n[h]=r[W+h]}for(;h<V;++h)n[h]=n[h-R]}}t.l=d,t.p=O,t.b=h,t.f=u,d&&(u=1,t.m=f,t.d=p,t.n=m)}while(!u);return h!=n.length&&i?er(n,0,h):n.subarray(0,h)}(e.subarray(function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&nr(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&nr(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)}(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var yr="undefined"!=typeof TextDecoder&&new TextDecoder;try{yr.decode(hr,{stream:!0})}catch($a){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var br=function(){return"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:this}();function wr(){br.console&&"function"==typeof br.console.log&&br.console.log.apply(br.console,arguments)}var vr={log:wr,warn:function(e){br.console&&("function"==typeof br.console.warn?br.console.warn.apply(br.console,arguments):wr.call(null,arguments))},error:function(e){br.console&&("function"==typeof br.console.error?br.console.error.apply(br.console,arguments):wr(e))}};function xr(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Sr(r.response,t,n)},r.onerror=function(){vr.error("could not download file")},r.send()}function Br(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function kr(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Cr,Nr,Sr=br.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,Nn.A)(window))||window!==br?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=br.URL||br.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?Br(a.href)?xr(e,t,n):kr(a,a.target="_blank"):kr(a)):(a.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(a.href)}),4e4),setTimeout((function(){kr(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(Br(e))xr(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){kr(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,Nn.A)(t)&&(vr.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return xr(e,t,n);var a="application/octet-stream"===e.type,s=/constructor/i.test(br.HTMLElement)||br.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&"object"===("undefined"==typeof FileReader?"undefined":(0,Nn.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},o.readAsDataURL(e)}else{var l=br.URL||br.webkitURL,A=l.createObjectURL(e);r?r.location=A:location.href=A,r=null,setTimeout((function(){l.revokeObjectURL(A)}),4e4)}});function Ir(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,s=n[r].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function Er(e,t){var n=e[0],r=e[1],a=e[2],s=e[3];n=Tr(n,r,a,s,t[0],7,-680876936),s=Tr(s,n,r,a,t[1],12,-389564586),a=Tr(a,s,n,r,t[2],17,606105819),r=Tr(r,a,s,n,t[3],22,-1044525330),n=Tr(n,r,a,s,t[4],7,-176418897),s=Tr(s,n,r,a,t[5],12,1200080426),a=Tr(a,s,n,r,t[6],17,-1473231341),r=Tr(r,a,s,n,t[7],22,-45705983),n=Tr(n,r,a,s,t[8],7,1770035416),s=Tr(s,n,r,a,t[9],12,-1958414417),a=Tr(a,s,n,r,t[10],17,-42063),r=Tr(r,a,s,n,t[11],22,-1990404162),n=Tr(n,r,a,s,t[12],7,1804603682),s=Tr(s,n,r,a,t[13],12,-40341101),a=Tr(a,s,n,r,t[14],17,-1502002290),n=Lr(n,r=Tr(r,a,s,n,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Lr(s,n,r,a,t[6],9,-1069501632),a=Lr(a,s,n,r,t[11],14,643717713),r=Lr(r,a,s,n,t[0],20,-373897302),n=Lr(n,r,a,s,t[5],5,-701558691),s=Lr(s,n,r,a,t[10],9,38016083),a=Lr(a,s,n,r,t[15],14,-660478335),r=Lr(r,a,s,n,t[4],20,-405537848),n=Lr(n,r,a,s,t[9],5,568446438),s=Lr(s,n,r,a,t[14],9,-1019803690),a=Lr(a,s,n,r,t[3],14,-187363961),r=Lr(r,a,s,n,t[8],20,1163531501),n=Lr(n,r,a,s,t[13],5,-1444681467),s=Lr(s,n,r,a,t[2],9,-51403784),a=Lr(a,s,n,r,t[7],14,1735328473),n=Ur(n,r=Lr(r,a,s,n,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Ur(s,n,r,a,t[8],11,-2022574463),a=Ur(a,s,n,r,t[11],16,1839030562),r=Ur(r,a,s,n,t[14],23,-35309556),n=Ur(n,r,a,s,t[1],4,-1530992060),s=Ur(s,n,r,a,t[4],11,1272893353),a=Ur(a,s,n,r,t[7],16,-155497632),r=Ur(r,a,s,n,t[10],23,-1094730640),n=Ur(n,r,a,s,t[13],4,681279174),s=Ur(s,n,r,a,t[0],11,-358537222),a=Ur(a,s,n,r,t[3],16,-722521979),r=Ur(r,a,s,n,t[6],23,76029189),n=Ur(n,r,a,s,t[9],4,-640364487),s=Ur(s,n,r,a,t[12],11,-421815835),a=Ur(a,s,n,r,t[15],16,530742520),n=_r(n,r=Ur(r,a,s,n,t[2],23,-995338651),a,s,t[0],6,-198630844),s=_r(s,n,r,a,t[7],10,1126891415),a=_r(a,s,n,r,t[14],15,-1416354905),r=_r(r,a,s,n,t[5],21,-57434055),n=_r(n,r,a,s,t[12],6,1700485571),s=_r(s,n,r,a,t[3],10,-1894986606),a=_r(a,s,n,r,t[10],15,-1051523),r=_r(r,a,s,n,t[1],21,-2054922799),n=_r(n,r,a,s,t[8],6,1873313359),s=_r(s,n,r,a,t[15],10,-30611744),a=_r(a,s,n,r,t[6],15,-1560198380),r=_r(r,a,s,n,t[13],21,1309151649),n=_r(n,r,a,s,t[4],6,-145523070),s=_r(s,n,r,a,t[11],10,-1120210379),a=_r(a,s,n,r,t[2],15,718787259),r=_r(r,a,s,n,t[9],21,-343485551),e[0]=Hr(n,e[0]),e[1]=Hr(r,e[1]),e[2]=Hr(a,e[2]),e[3]=Hr(s,e[3])}function Fr(e,t,n,r,a,s){return t=Hr(Hr(t,e),Hr(r,s)),Hr(t<<a|t>>>32-a,n)}function Tr(e,t,n,r,a,s,i){return Fr(t&n|~t&r,e,t,a,s,i)}function Lr(e,t,n,r,a,s,i){return Fr(t&r|n&~r,e,t,a,s,i)}function Ur(e,t,n,r,a,s,i){return Fr(t^n^r,e,t,a,s,i)}function _r(e,t,n,r,a,s,i){return Fr(n^(t|~r),e,t,a,s,i)}function Rr(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Er(r,Dr(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Er(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,Er(r,a),r}function Dr(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Cr=br.atob.bind(br),Nr=br.btoa.bind(br);var Qr="0123456789abcdef".split("");function Or(e){for(var t="",n=0;n<4;n++)t+=Qr[e>>8*n+4&15]+Qr[e>>8*n&15];return t}function $r(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Mr(e){return Rr(e).map($r).join("")}var Pr="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=Or(e[t]);return e.join("")}(Rr("hello"));function Hr(e,t){if(Pr){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function zr(e,t){var n,r,a,s;if(e!==n){for(var i=(a=e,s=1+(256/e.length|0),new Array(s+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var A=0;for(l=0;l<256;l++){var u=o[l];A=(A+u+i.charCodeAt(l))%256,o[l]=o[A],o[A]=u}n=e,r=o}else o=r;var c=t.length,h=0,d=0,p="";for(l=0;l<c;l++)d=(d+(u=o[h=(h+1)%256]))%256,o[h]=o[d],o[d]=u,i=o[(o[h]+o[d])%256],p+=String.fromCharCode(t.charCodeAt(l)^i);return p}var Vr={print:4,modify:8,copy:16,"annot-forms":32};function Wr(e,t,n,r){this.v=1,this.r=2;var a=192;e.forEach((function(e){if(void 0!==Vr.perm)throw new Error("Invalid permission: "+e);a+=Vr[e]})),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=Mr(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=zr(this.encryptionKey,this.padding)}function Kr(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);t+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):e[r]}return t}function Gr(e){if("object"!==(0,Nn.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[n,!!r],a},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[n]){var i=t[n][s];try{i[0].apply(e,r)}catch(n){br.console&&vr.error("jsPDF PubSub Error",n.message,n)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function jr(e){if(!(this instanceof jr))return new jr(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function qr(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Xr(e,t,n,r,a){if(!(this instanceof Xr))return new Xr(e,t,n,r,a);this.type="axial"===e?2:3,this.coords=t,this.colors=n,qr.call(this,r,a)}function Jr(e,t,n,r,a){if(!(this instanceof Jr))return new Jr(e,t,n,r,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,qr.call(this,r,a)}function Yr(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,l=16,A="S",u=null;"object"===(0,Nn.A)(e=e||{})&&(n=e.orientation,r=e.unit||r,a=e.format||a,s=e.compress||e.compressPdf||s,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),A=e.defaultPathOperation||"S"),i=e.filters||(!0===s?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var c=e.putOnlyUsedFonts||!1,h={},d={internal:{},__private__:{}};d.__private__.PubSub=Gr;var p="1.3",f=d.__private__.getPdfVersion=function(){return p};d.__private__.setPdfVersion=function(e){p=e};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return m};var g=d.__private__.getPageFormat=function(e){return m[e]};a=a||"a4";var y="compat",b="advanced",w=y;function v(){this.saveGraphicsState(),J(new Te(he,0,0,-he,0,An()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),A="n",w=b}function x(){this.restoreGraphicsState(),A="S",w=y}var B=d.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};d.advancedAPI=function(e){var t=w===y;return t&&v.call(this),"function"!=typeof e||(e(this),t&&x.call(this)),this},d.compatAPI=function(e){var t=w===b;return t&&x.call(this),"function"!=typeof e||(e(this),t&&v.call(this)),this},d.isAdvancedAPI=function(){return w===b};var k,C=function(e){if(w!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},N=d.roundToPrecision=d.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};k=d.hpf=d.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return N(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return N(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return N(e,16)};var S=d.f2=d.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return N(e,2)},I=d.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return N(e,3)},E=d.scale=d.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?e*he:w===b?e:void 0},F=function(e){return E(function(e){return w===y?An()-e:w===b?e:void 0}(e))};d.__private__.setPrecision=d.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var T,L="00000000000000000000000000000000",U=d.__private__.getFileId=function(){return L},_=d.__private__.setFileId=function(e){return L=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():L.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(yt=new Wr(u.userPermissions,u.userPassword,u.ownerPassword,L)),L};d.setFileId=function(e){return _(e),this},d.getFileId=function(){return U()};var R=d.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),a=Math.abs(t%60),s=[n,M(r),"'",M(a),"'"].join("");return["D:",e.getFullYear(),M(e.getMonth()+1),M(e.getDate()),M(e.getHours()),M(e.getMinutes()),M(e.getSeconds()),s].join("")},D=d.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,n,r,a,s,i,0)},Q=d.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return T=t},O=d.__private__.getCreationDate=function(e){var t=T;return"jsDate"===e&&(t=D(T)),t};d.setCreationDate=function(e){return Q(e),this},d.getCreationDate=function(e){return O(e)};var $,M=d.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},P=d.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,z=[],V=[],W=0,K=[],G=[],j=!1,q=V;d.__private__.setCustomOutputDestination=function(e){j=!0,q=e};var X=function(e){j||(q=e)};d.__private__.resetCustomOutputDestination=function(){j=!1,q=V};var J=d.__private__.out=function(e){return e=e.toString(),W+=e.length+1,q.push(e),q},Y=d.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Z=d.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(e){return te=w===b?e/he:e,this};var ne,re=d.__private__.getFontSize=d.getFontSize=function(){return w===y?te:te*he},ae=e.R2L||!1;d.__private__.setR2L=d.setR2L=function(e){return ae=e,this},d.__private__.getR2L=d.getR2L=function(){return ae};var se,ie=d.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};d.__private__.getZoomMode=function(){return ne};var oe,le=d.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');se=e};d.__private__.getPageMode=function(){return se};var Ae=d.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};d.__private__.getLayoutMode=function(){return oe},d.__private__.setDisplayMode=d.setDisplayMode=function(e,t,n){return ie(e),Ae(t),le(n),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},d.__private__.getDocumentProperties=function(){return ue},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},d.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var ce,he,de,pe,fe,me={},ge={},ye=[],be={},we={},ve={},xe={},Be=null,ke=0,Ce=[],Ne=new Gr(d),Se=e.hotfixes||[],Ie={},Ee={},Fe=[],Te=function e(t,n,r,a,s,i){if(!(this instanceof e))return new e(t,n,r,a,s,i);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(a)&&(a=1),isNaN(s)&&(s=0),isNaN(i)&&(i=0),this._matrix=[t,n,r,a,s,i]};Object.defineProperty(Te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Te.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Te.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(e)},Te.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,a=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Te(t,n,r,a,s,i)},Te.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,s=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*n+(t/=i)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new Te(i,0,0,l,0,0),translate:new Te(1,0,0,1,a,s),rotate:new Te(e,t,-t,e,0,0),skew:new Te(1,0,o,1,0,0)}},Te.prototype.toString=function(e){return this.join(" ")},Te.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,s=this.ty,i=1/(e*r-t*n),o=r*i,l=-t*i,A=-n*i,u=e*i;return new Te(o,l,A,u,-o*a-A*s,-l*a-u*s)},Te.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new tn(t,n)},Te.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new tn(e.x+e.w,e.y+e.h));return new nn(t.x,t.y,n.x-t.x,n.y-t.y)},Te.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,s=this.ty;return new Te(e,t,n,r,a,s)},d.Matrix=Te;var Le=d.matrixMult=function(e,t){return t.multiply(e)},Ue=new Te(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Ue;var _e=function(e,t){if(!we[e]){var n=(t instanceof Xr?"Sh":"P")+(Object.keys(be).length+1).toString(10);t.id=n,we[e]=n,be[n]=t,Ne.publish("addPattern",t)}};d.ShadingPattern=Xr,d.TilingPattern=Jr,d.addShadingPattern=function(e,t){return C("addShadingPattern()"),_e(e,t),this},d.beginTilingPattern=function(e){C("beginTilingPattern()"),an(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},d.endTilingPattern=function(e,t){C("endTilingPattern()"),t.stream=G[$].join("\n"),_e(e,t),Ne.publish("endTilingPattern",t),Fe.pop().restore()};var Re,De=d.__private__.newObject=function(){var e=Qe();return Oe(e,!0),e},Qe=d.__private__.newObjectDeferred=function(){return H++,z[H]=function(){return W},H},Oe=function(e,t){return t="boolean"==typeof t&&t,z[e]=W,t&&J(e+" 0 obj"),e},$e=d.__private__.newAdditionalObject=function(){var e={objId:Qe(),content:""};return K.push(e),e},Me=Qe(),Pe=Qe(),He=d.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",a=0;a<3;a++)r+=("0"+Math.floor(255*parseFloat(t[a])).toString(16)).slice(-2);return r},ze=d.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,a=e.ch3,s=e.ch4,i="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var o=new Ir(n);if(o.ok)n=o.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,a=255&l}if(void 0===r||void 0===s&&n===r&&r===a)t="string"==typeof n?n+" "+i[0]:2===e.precision?S(n/255)+" "+i[0]:I(n/255)+" "+i[0];else if(void 0===s||"object"===(0,Nn.A)(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",i[1]].join(" ");t="string"==typeof n?[n,r,a,i[1]].join(" "):2===e.precision?[S(n/255),S(r/255),S(a/255),i[1]].join(" "):[I(n/255),I(r/255),I(a/255),i[1]].join(" ")}else t="string"==typeof n?[n,r,a,s,i[2]].join(" "):2===e.precision?[S(n),S(r),S(a),S(s),i[2]].join(" "):[I(n),I(r),I(a),I(s),i[2]].join(" ");return t},Ve=d.__private__.getFilters=function(){return i},We=d.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||Ve(),r=e.alreadyAppliedFilters||[],a=e.addLength1||!1,s=t.length,i=e.objectId,o=function(e){return e};if(null!==u&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=yt.encryptor(i,0));var l={};!0===n&&(n=["FlateEncode"]);var A=e.additionalKeyValues||[],c=(l=void 0!==Yr.API.processDataByFilters?Yr.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(A.push({key:"Length",value:l.data.length}),!0===a&&A.push({key:"Length1",value:s})),0!=c.length)if(c.split("/").length-1==1)A.push({key:"Filter",value:c});else{A.push({key:"Filter",value:"["+c+"]"});for(var h=0;h<A.length;h+=1)if("DecodeParms"===A[h].key){for(var d=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)d.push("null");d.push(A[h].value),A[h].value="["+d.join(" ")+"]"}}J("<<");for(var f=0;f<A.length;f++)J("/"+A[f].key+" "+A[f].value);J(">>"),0!==l.data.length&&(J("stream"),J(o(l.data)),J("endstream"))},Ke=d.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,a=e.contentsObjId;Oe(r,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(k(e.mediaBox.bottomLeftX))+" "+parseFloat(k(e.mediaBox.bottomLeftY))+" "+k(e.mediaBox.topRightX)+" "+k(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+k(e.cropBox.bottomLeftX)+" "+k(e.cropBox.bottomLeftY)+" "+k(e.cropBox.topRightX)+" "+k(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+k(e.bleedBox.bottomLeftX)+" "+k(e.bleedBox.bottomLeftY)+" "+k(e.bleedBox.topRightX)+" "+k(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+k(e.trimBox.bottomLeftX)+" "+k(e.trimBox.bottomLeftY)+" "+k(e.trimBox.topRightX)+" "+k(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+k(e.artBox.bottomLeftX)+" "+k(e.artBox.bottomLeftY)+" "+k(e.artBox.topRightX)+" "+k(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),Ne.publish("putPage",{objId:r,pageContext:Ce[t],pageNumber:t,page:n}),J("/Contents "+a+" 0 R"),J(">>"),J("endobj");var s=n.join("\n");return w===b&&(s+="\nQ"),Oe(a,!0),We({data:s,filters:Ve(),objectId:a}),J("endobj"),r},Ge=d.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=ke;e++)Ce[e].objId=Qe(),Ce[e].contentsObjId=Qe();for(e=1;e<=ke;e++)n.push(Ke({number:e,data:G[e],objId:Ce[e].objId,contentsObjId:Ce[e].contentsObjId,mediaBox:Ce[e].mediaBox,cropBox:Ce[e].cropBox,bleedBox:Ce[e].bleedBox,trimBox:Ce[e].trimBox,artBox:Ce[e].artBox,userUnit:Ce[e].userUnit,rootDictionaryObjId:Me,resourceDictionaryObjId:Pe}));Oe(Me,!0),J("<</Type /Pages");var r="/Kids [";for(t=0;t<ke;t++)r+=n[t]+" 0 R ";J(r+"]"),J("/Count "+ke),J(">>"),J("endobj"),Ne.publish("postPutPages")},je=function(e){Ne.publish("putFont",{font:e,out:J,newObject:De,putStream:We}),!0!==e.isAlreadyPutted&&(e.objectNumber=De(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Kr(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},qe=function(e){e.objectNumber=De();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[k(e.x),k(e.y),k(e.x+e.width),k(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");We({data:n,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},Xe=function(e,t){t||(t=21);var n=De(),r=function(e,t){var n,r=[],a=1/(t-1);for(n=0;n<1;n+=a)r.push(n);if(r.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,A=0;A<r.length;A++){for(n=r[A];n>e[l+1].offset;)l++;var u=e[l].offset,c=(n-u)/(e[l+1].offset-u),h=e[l].color,d=e[l+1].color;o+=P(Math.round((1-c)*h[0]+c*d[0]).toString(16))+P(Math.round((1-c)*h[1]+c*d[1]).toString(16))+P(Math.round((1-c)*h[2]+c*d[2]).toString(16))}return o.trim()}(e.colors,t),a=[];a.push({key:"FunctionType",value:"0"}),a.push({key:"Domain",value:"[0.0 1.0]"}),a.push({key:"Size",value:"["+t+"]"}),a.push({key:"BitsPerSample",value:"8"}),a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),We({data:r,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),J("endobj"),e.objectNumber=De(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var s="/Coords ["+k(parseFloat(e.coords[0]))+" "+k(parseFloat(e.coords[1]))+" ";2===e.type?s+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3])):s+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3]))+" "+k(parseFloat(e.coords[4]))+" "+k(parseFloat(e.coords[5])),J(s+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+n+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Je=function(e,t){var n=Qe(),r=De();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var a=[];a.push({key:"Type",value:"/Pattern"}),a.push({key:"PatternType",value:"1"}),a.push({key:"PaintType",value:"1"}),a.push({key:"TilingType",value:"1"}),a.push({key:"BBox",value:"["+e.boundingBox.map(k).join(" ")+"]"}),a.push({key:"XStep",value:k(e.xStep)}),a.push({key:"YStep",value:k(e.yStep)}),a.push({key:"Resources",value:n+" 0 R"}),e.matrix&&a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),We({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber}),J("endobj")},Ye=function(e){for(var t in e.objectNumber=De(),J("<<"),e)switch(t){case"opacity":J("/ca "+S(e[t]));break;case"stroke-opacity":J("/CA "+S(e[t]))}J(">>"),J("endobj")},Ze=function(e){Oe(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),me)me.hasOwnProperty(e)&&(!1===c||!0===c&&h.hasOwnProperty(e))&&J("/"+e+" "+me[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(be).length>0){for(var e in J("/Shading <<"),be)be.hasOwnProperty(e)&&be[e]instanceof Xr&&be[e].objectNumber>=0&&J("/"+e+" "+be[e].objectNumber+" 0 R");Ne.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(be).length>0){for(var t in J("/Pattern <<"),be)be.hasOwnProperty(t)&&be[t]instanceof d.TilingPattern&&be[t].objectNumber>=0&&be[t].objectNumber<e&&J("/"+t+" "+be[t].objectNumber+" 0 R");Ne.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(ve).length>0){var e;for(e in J("/ExtGState <<"),ve)ve.hasOwnProperty(e)&&ve[e].objectNumber>=0&&J("/"+e+" "+ve[e].objectNumber+" 0 R");Ne.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),Ie)Ie.hasOwnProperty(e)&&Ie[e].objectNumber>=0&&J("/"+e+" "+Ie[e].objectNumber+" 0 R");Ne.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},et=function(e){ge[e.fontName]=ge[e.fontName]||{},ge[e.fontName][e.fontStyle]=e.id},tt=function(e,t,n,r,a){var s={id:"F"+(Object.keys(me).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:a||!1,metadata:{}};return Ne.publish("addFont",{font:s,instance:this}),me[s.id]=s,et(s),s.id},nt=d.__private__.pdfEscape=d.pdfEscape=function(e,t){return function(e,t){var n,r,a,s,i,o,l,A,u;if(a=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&me[ce].metadata&&me[ce].metadata[a]&&me[ce].metadata[a].encoding&&(s=me[ce].metadata[a].encoding,!i&&me[ce].encoding&&(i=me[ce].encoding),!i&&s.codePages&&(i=s.codePages[0]),"string"==typeof i&&(i=s[i]),i)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(A=i[e.charCodeAt(n)])?o.push(String.fromCharCode(A)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(A=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(u),o.push(A-(u<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=d.__private__.beginPage=function(e){G[++ke]=[],Ce[ke]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},it(ke),X(G[$])},at=function(e,t){var r,s,i;switch(n=t||n,"string"==typeof e&&(r=g(e.toLowerCase()),Array.isArray(r)&&(s=r[0],i=r[1])),Array.isArray(e)&&(s=e[0]*he,i=e[1]*he),isNaN(s)&&(s=a[0],i=a[1]),(s>14400||i>14400)&&(vr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),i=Math.min(14400,i)),a=[s,i],n.substr(0,1)){case"l":i>s&&(a=[i,s]);break;case"p":s>i&&(a=[i,s])}rt(a),Ot(Dt),J(Kt),0!==Yt&&J(Yt+" J"),0!==Zt&&J(Zt+" j"),Ne.publish("addPage",{pageNumber:ke})},st=function(e){e>0&&e<=ke&&(G.splice(e,1),Ce.splice(e,1),ke--,$>ke&&($=ke),this.setPage($))},it=function(e){e>0&&e<=ke&&($=e)},ot=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return G.length-1},lt=function(e,t,n){var r,a=void 0;return n=n||{},e=void 0!==e?e:me[ce].fontName,t=void 0!==t?t:me[ce].fontStyle,r=e.toLowerCase(),void 0!==ge[r]&&void 0!==ge[r][t]?a=ge[r][t]:void 0!==ge[e]&&void 0!==ge[e][t]?a=ge[e][t]:!1===n.disableWarning&&vr.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),a||n.noFallback||null==(a=ge.times[t])&&(a=ge.times.normal),a},At=d.__private__.putInfo=function(){var e=De(),t=function(e){return e};for(var n in null!==u&&(t=yt.encryptor(e,0)),J("<<"),J("/Producer ("+nt(t("jsPDF "+Yr.version))+")"),ue)ue.hasOwnProperty(n)&&ue[n]&&J("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+nt(t(ue[n]))+")");J("/CreationDate ("+nt(t(T))+")"),J(">>"),J("endobj")},ut=d.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Me;switch(De(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&J("/OpenAction [3 0 R /XYZ null null "+S(ne)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}se&&J("/PageMode /"+se),Ne.publish("putCatalog"),J(">>"),J("endobj")},ct=d.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(H+1)),J("/Root "+H+" 0 R"),J("/Info "+(H-1)+" 0 R"),null!==u&&J("/Encrypt "+yt.oid+" 0 R"),J("/ID [ <"+L+"> <"+L+"> ]"),J(">>")},ht=d.__private__.putHeader=function(){J("%PDF-"+p),J("%ºß¬à")},dt=d.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(H+1)),J("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof z[t]?J((e+z[t]()).slice(-10)+" 00000 n "):void 0!==z[t]?J((e+z[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},pt=d.__private__.buildDocument=function(){H=0,W=0,V=[],z=[],K=[],Me=Qe(),Pe=Qe(),X(V),Ne.publish("buildDocument"),ht(),Ge(),function(){Ne.publish("putAdditionalObjects");for(var e=0;e<K.length;e++){var t=K[e];Oe(t.objId,!0),J(t.content),J("endobj")}Ne.publish("postPutAdditionalObjects")}(),function(){var e=[];(function(){for(var e in me)me.hasOwnProperty(e)&&(!1===c||!0===c&&h.hasOwnProperty(e))&&je(me[e])})(),function(){var e;for(e in ve)ve.hasOwnProperty(e)&&Ye(ve[e])}(),function(){for(var e in Ie)Ie.hasOwnProperty(e)&&qe(Ie[e])}(),function(e){var t;for(t in be)be.hasOwnProperty(t)&&(be[t]instanceof Xr?Xe(be[t]):be[t]instanceof Jr&&Je(be[t],e))}(e),Ne.publish("putResources"),e.forEach(Ze),Ze({resourcesOid:Pe,objectOid:Number.MAX_SAFE_INTEGER}),Ne.publish("postPutResources")}(),null!==u&&(yt.oid=De(),J("<<"),J("/Filter /Standard"),J("/V "+yt.v),J("/R "+yt.r),J("/U <"+yt.toHexString(yt.U)+">"),J("/O <"+yt.toHexString(yt.O)+">"),J("/P "+yt.P),J(">>"),J("endobj")),At(),ut();var e=W;return dt(),ct(),J("startxref"),J(""+e),J("%%EOF"),X(G[$]),V.join("\n")},ft=d.__private__.getBlob=function(e){return new Blob([Z(e)],{type:"application/pdf"})},mt=d.output=d.__private__.output=(Re=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":d.save(t.filename);break;case"arraybuffer":return Z(pt());case"blob":return ft(pt());case"bloburi":case"bloburl":if(void 0!==br.URL&&"function"==typeof br.URL.createObjectURL)return br.URL&&br.URL.createObjectURL(ft(pt()))||void 0;vr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=pt();try{n=Nr(r)}catch(e){n=Nr(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(br)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,s="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=br.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(br)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',A=br.open();if(null!==A){A.document.write(l);var u=this;A.document.documentElement.querySelector("#pdfViewer").onload=function(){A.document.title=t.filename,A.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return A}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(br))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var c='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=br.open();if(null!==h&&(h.document.write(c),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return br.document.location.href=this.output("datauristring",t);default:return null}},Re.foo=function(){try{return Re.apply(this,arguments)}catch(n){var e=n.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+n.message;if(!br.console)throw new Error(t);br.console.error(t,n),br.alert&&alert(t)}},Re.foo.bar=Re,Re.foo),gt=function(e){return!0===Array.isArray(Se)&&Se.indexOf(e)>-1};switch(r){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==gt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);he=r}var yt=null;Q(),_();var bt=d.__private__.getPageInfo=d.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ce[e].objId,pageNumber:e,pageContext:Ce[e]}},wt=d.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Ce)if(Ce[t].objId===e)break;return bt(t)},vt=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Ce[$].objId,pageNumber:$,pageContext:Ce[$]}};d.addPage=function(){return at.apply(this,arguments),this},d.setPage=function(){return it.apply(this,arguments),X.call(this,G[$]),this},d.insertPage=function(e){return this.addPage(),this.movePage($,e),this},d.movePage=function(e,t){var n,r;if(e>t){n=G[e],r=Ce[e];for(var a=e;a>t;a--)G[a]=G[a-1],Ce[a]=Ce[a-1];G[t]=n,Ce[t]=r,this.setPage(t)}else if(e<t){n=G[e],r=Ce[e];for(var s=e;s<t;s++)G[s]=G[s+1],Ce[s]=Ce[s+1];G[t]=n,Ce[t]=r,this.setPage(t)}return this},d.deletePage=function(){return st.apply(this,arguments),this},d.__private__.text=d.text=function(e,t,n,r,a){var s,i,o,l,A,u,c,d,p,f=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var m=n;n=t,t=e,e=m}if(arguments[3]instanceof Te==0?(o=arguments[4],l=arguments[5],"object"===(0,Nn.A)(c=arguments[3])&&null!==c||("string"==typeof o&&(l=o,o=null),"string"==typeof c&&(l=c,c=null),"number"==typeof c&&(o=c,c=null),r={flags:c,angle:o,align:l})):(C("The transform parameter of text() with a Matrix value"),p=a),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var g,y="",v="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Rt,x=f.internal.scaleFactor;function B(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),nt(e,c)}function N(e){for(var t,n=e.concat(),r=[],a=n.length;a--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function S(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,a,s=e.concat(),i=[],o=s.length;o--;)"string"==typeof(r=s.shift())?i.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(a=t(r[0],r[1],r[2]),i.push([a[0],a[1],a[2]]));n=i}return n}var I=!1,F=!0;if("string"==typeof e)I=!0;else if(Array.isArray(e)){var T=e.concat();i=[];for(var L,U=T.length;U--;)("string"!=typeof(L=T.shift())||Array.isArray(L)&&"string"!=typeof L[0])&&(F=!1);I=F}if(!1===I)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var _=te/f.internal.scaleFactor,R=_*(v-1);switch(r.baseline){case"bottom":n-=R;break;case"top":n+=_-R;break;case"hanging":n+=_-2*R;break;case"middle":n+=_/2-R}if((u=r.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(f.splitTextToSize(t,u))}),[]))),s={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:ce,fonts:me,activeFontSize:te}},Ne.publish("preProcessText",s),e=s.text,o=(r=s.options).angle,p instanceof Te==0&&o&&"number"==typeof o){o*=Math.PI/180,0===r.rotationDirection&&(o=-o),w===b&&(o=-o);var D=Math.cos(o),Q=Math.sin(o);p=new Te(D,Q,-Q,D,0,0)}else o&&o instanceof Te&&(p=o);w!==b||p||(p=Ue),void 0!==(A=r.charSpace||Xt)&&(y+=k(E(A))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(d=r.horizontalScale)&&(y+=k(100*d)+" Tz\n"),r.lang;var O=-1,$=void 0!==r.renderingMode?r.renderingMode:r.stroke,M=f.internal.getCurrentPageInfo().pageContext;switch($){case 0:case!1:case"fill":O=0;break;case 1:case!0:case"stroke":O=1;break;case 2:case"fillThenStroke":O=2;break;case 3:case"invisible":O=3;break;case 4:case"fillAndAddForClipping":O=4;break;case 5:case"strokeAndAddPathForClipping":O=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":O=6;break;case 7:case"addToPathForClipping":O=7}var P=void 0!==M.usedRenderingMode?M.usedRenderingMode:-1;-1!==O?y+=O+" Tr\n":-1!==P&&(y+="0 Tr\n"),-1!==O&&(M.usedRenderingMode=O),l=r.align||"left";var H,z=te*v,V=f.internal.pageSize.getWidth(),W=me[ce];A=r.charSpace||Xt,u=r.maxWidth||0,c=Object.assign({autoencode:!0,noBOM:!0},r.flags);var K=[],G=function(e){return f.getStringUnitWidth(e,{font:W,charSpace:A,fontSize:te,doKerning:!1})*te/x};if("[object Array]"===Object.prototype.toString.call(e)){var j;i=N(e),"left"!==l&&(H=i.map(G));var q,X=0;if("right"===l){t-=H[0],e=[],U=i.length;for(var Y=0;Y<U;Y++)0===Y?(q=Ht(t),j=zt(n)):(q=E(X-H[Y]),j=-z),e.push([i[Y],q,j]),X=H[Y]}else if("center"===l){t-=H[0]/2,e=[],U=i.length;for(var Z=0;Z<U;Z++)0===Z?(q=Ht(t),j=zt(n)):(q=E((X-H[Z])/2),j=-z),e.push([i[Z],q,j]),X=H[Z]}else if("left"===l){e=[],U=i.length;for(var ee=0;ee<U;ee++)e.push(i[ee])}else if("justify"===l&&"Identity-H"===W.encoding){e=[],U=i.length,u=0!==u?u:V;for(var ne=0,re=0;re<U;re++)if(j=0===re?zt(n):-z,q=0===re?Ht(t):ne,re<U-1){var se=E((u-H[re])/(i[re].split(" ").length-1)),ie=i[re].split(" ");e.push([ie[0]+" ",q,j]),ne=0;for(var oe=1;oe<ie.length;oe++){var le=(G(ie[oe-1]+" "+ie[oe])-G(ie[oe]))*x+se;oe==ie.length-1?e.push([ie[oe],le,0]):e.push([ie[oe]+" ",le,0]),ne-=le}}else e.push([i[re],q,j]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],U=i.length,u=0!==u?u:V,re=0;re<U;re++)j=0===re?zt(n):-z,q=0===re?Ht(t):0,re<U-1?K.push(k(E((u-H[re])/(i[re].split(" ").length-1)))):K.push(0),e.push([i[re],q,j])}}!0===("boolean"==typeof r.R2L?r.R2L:ae)&&(e=S(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),s={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:ce,fonts:me,activeFontSize:te}},Ne.publish("postProcessText",s),e=s.text,g=s.mutex.isHex||!1;var Ae=me[ce].encoding;"WinAnsiEncoding"!==Ae&&"StandardEncoding"!==Ae||(e=S(e,(function(e,t,n){return[B(e),t,n]}))),i=N(e),e=[];for(var ue,he,de,pe=Array.isArray(i[0])?1:0,fe="",ge=function(e,t,n){var a="";return n instanceof Te?(n="number"==typeof r.angle?Le(n,new Te(1,0,0,1,e,t)):Le(new Te(1,0,0,1,e,t),n),w===b&&(n=Le(new Te(1,0,0,-1,0,0),n)),a=n.join(" ")+" Tm\n"):a=k(e)+" "+k(t)+" Td\n",a},ye=0;ye<i.length;ye++){switch(fe="",pe){case 1:de=(g?"<":"(")+i[ye][0]+(g?">":")"),ue=parseFloat(i[ye][1]),he=parseFloat(i[ye][2]);break;case 0:de=(g?"<":"(")+i[ye]+(g?">":")"),ue=Ht(t),he=zt(n)}void 0!==K&&void 0!==K[ye]&&(fe=K[ye]+" Tw\n"),0===ye?e.push(fe+ge(ue,he,p)+de):0===pe?e.push(fe+de):1===pe&&e.push(fe+ge(ue,he,p)+de)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var be="BT\n/";return be+=ce+" "+te+" Tf\n",be+=k(te*v)+" TL\n",be+=jt+"\n",be+=y,be+=e,J(be+="ET"),h[ce]=!0,f};var xt=d.__private__.clip=d.clip=function(e){return J("evenodd"===e?"W*":"W"),this};d.clipEvenOdd=function(){return xt("evenodd")},d.__private__.discardPath=d.discardPath=function(){return J("n"),this};var Bt=d.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(e){return Bt(e)&&(A=e),this};var kt=d.__private__.getStyle=d.getStyle=function(e){var t=A;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Ct=d.close=function(){return J("h"),this};d.stroke=function(){return J("S"),this},d.fill=function(e){return Nt("f",e),this},d.fillEvenOdd=function(e){return Nt("f*",e),this},d.fillStroke=function(e){return Nt("B",e),this},d.fillStrokeEvenOdd=function(e){return Nt("B*",e),this};var Nt=function(e,t){"object"===(0,Nn.A)(t)?Et(t,e):J(e)},St=function(e){null===e||w===b&&void 0===e||(e=kt(e),J(e))};function It(e,t,n,r,a){var s=new Jr(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,a||this.matrix);s.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return _e(i,s),s}var Et=function(e,t){var n=we[e.key],r=be[n];if(r instanceof Xr)J("q"),J(Ft(t)),r.gState&&d.setGState(r.gState),J(e.matrix.toString()+" cm"),J("/"+n+" sh"),J("Q");else if(r instanceof Jr){var a=new Te(1,0,0,-1,0,An());e.matrix&&(a=a.multiply(e.matrix||Ue),n=It.call(r,e.key,e.boundingBox,e.xStep,e.yStep,a).id),J("q"),J("/Pattern cs"),J("/"+n+" scn"),r.gState&&d.setGState(r.gState),J(t),J("Q")}},Ft=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Tt=d.moveTo=function(e,t){return J(k(E(e))+" "+k(F(t))+" m"),this},Lt=d.lineTo=function(e,t){return J(k(E(e))+" "+k(F(t))+" l"),this},Ut=d.curveTo=function(e,t,n,r,a,s){return J([k(E(e)),k(F(t)),k(E(n)),k(F(r)),k(E(a)),k(F(s)),"c"].join(" ")),this};d.__private__.line=d.line=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Bt(a))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[n-e,r-t]],e,t,[1,1],a||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},d.__private__.lines=d.lines=function(e,t,n,r,a,s){var i,o,l,A,u,c,h,d,p,f,m,g;if("number"==typeof e&&(g=n,n=t,t=e,e=g),r=r||[1,1],s=s||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Bt(a)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Tt(t,n),i=r[0],o=r[1],A=e.length,f=t,m=n,l=0;l<A;l++)2===(u=e[l]).length?(f=u[0]*i+f,m=u[1]*o+m,Lt(f,m)):(c=u[0]*i+f,h=u[1]*o+m,d=u[2]*i+f,p=u[3]*o+m,f=u[4]*i+f,m=u[5]*o+m,Ut(c,h,d,p,f,m));return s&&Ct(),St(a),this},d.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Tt(r[0],r[1]);break;case"l":Lt(r[0],r[1]);break;case"c":Ut.apply(this,r);break;case"h":Ct()}}return this},d.__private__.rect=d.rect=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Bt(a))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(r=-r),J([k(E(e)),k(F(t)),k(E(n)),k(E(r)),"re"].join(" ")),St(a),this},d.__private__.triangle=d.triangle=function(e,t,n,r,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s)||!Bt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[a-n,s-r],[e-a,t-s]],e,t,[1,1],i,!0),this},d.__private__.roundedRect=d.roundedRect=function(e,t,n,r,a,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s)||!Bt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return a=Math.min(a,.5*n),s=Math.min(s,.5*r),this.lines([[n-2*a,0],[a*o,0,a,s-s*o,a,s],[0,r-2*s],[0,s*o,-a*o,s,-a,s],[2*a-n,0],[-a*o,0,-a,-s*o,-a,-s],[0,2*s-r],[0,-s*o,a*o,-s,a,-s]],e+a,t,[1,1],i,!0),this},d.__private__.ellipse=d.ellipse=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Bt(a))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,i=4/3*(Math.SQRT2-1)*r;return Tt(e+n,t),Ut(e+n,t-i,e+s,t-r,e,t-r),Ut(e-s,t-r,e-n,t-i,e-n,t),Ut(e-n,t+i,e-s,t+r,e,t+r),Ut(e+s,t+r,e+n,t+i,e+n,t),St(a),this},d.__private__.circle=d.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Bt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},d.setFont=function(e,t,n){return n&&(t=B(t,n)),ce=lt(e,t,{disableWarning:!1}),this};var _t=d.__private__.getFont=d.getFont=function(){return me[lt.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var e,t,n={};for(e in ge)if(ge.hasOwnProperty(e))for(t in n[e]=[],ge[e])ge[e].hasOwnProperty(t)&&n[e].push(t);return n},d.addFont=function(e,t,n,r,a){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?a=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=B(n,r)),tt.call(this,e,t,n,a=a||"Identity-H")};var Rt,Dt=e.lineWidth||.200025,Qt=d.__private__.getLineWidth=d.getLineWidth=function(){return Dt},Ot=d.__private__.setLineWidth=d.setLineWidth=function(e){return Dt=e,J(k(E(e))+" w"),this};d.__private__.setLineDash=Yr.API.setLineDash=Yr.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return k(E(e))})).join(" "),t=k(E(t)),J("["+e+"] "+t+" d"),this};var $t=d.__private__.getLineHeight=d.getLineHeight=function(){return te*Rt};d.__private__.getLineHeight=d.getLineHeight=function(){return te*Rt};var Mt=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Rt=e),this},Pt=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return Rt};Mt(e.lineHeight);var Ht=d.__private__.getHorizontalCoordinate=function(e){return E(e)},zt=d.__private__.getVerticalCoordinate=function(e){return w===b?e:Ce[$].mediaBox.topRightY-Ce[$].mediaBox.bottomLeftY-E(e)},Vt=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(e){return k(Ht(e))},Wt=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(e){return k(zt(e))},Kt=e.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return He(Kt)},d.__private__.setStrokeColor=d.setDrawColor=function(e,t,n,r){return Kt=ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),J(Kt),this};var Gt=e.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return He(Gt)},d.__private__.setFillColor=d.setFillColor=function(e,t,n,r){return Gt=ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),J(Gt),this};var jt=e.textColor||"0 g",qt=d.__private__.getTextColor=d.getTextColor=function(){return He(jt)};d.__private__.setTextColor=d.setTextColor=function(e,t,n,r){return jt=ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Xt=e.charSpace,Jt=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(Xt||0)};d.__private__.setCharSpace=d.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xt=e,this};var Yt=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(e){var t=d.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yt=t,J(t+" J"),this};var Zt=0;d.__private__.setLineJoin=d.setLineJoin=function(e){var t=d.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,J(t+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(k(E(e))+" M"),this},d.GState=jr,d.setGState=function(e){(e="string"==typeof e?ve[xe[e]]:en(null,e)).equals(Be)||(J("/"+e.id+" gs"),Be=e)};var en=function(e,t){if(!e||!xe[e]){var n=!1;for(var r in ve)if(ve.hasOwnProperty(r)&&ve[r].equals(t)){n=!0;break}if(n)t=ve[r];else{var a="GS"+(Object.keys(ve).length+1).toString(10);ve[a]=t,t.id=a}return e&&(xe[e]=t.id),Ne.publish("addGState",t),t}};d.addGState=function(e,t){return en(e,t),this},d.saveGraphicsState=function(){return J("q"),ye.push({key:ce,size:te,color:jt}),this},d.restoreGraphicsState=function(){J("Q");var e=ye.pop();return ce=e.key,te=e.size,jt=e.color,Be=null,this},d.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},d.comment=function(e){return J("#"+e),this};var tn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var a="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return a},set:function(e){a=e.toString()}}),this},nn=function(e,t,n,r){tn.call(this,e,t),this.type="rect";var a=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var s=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},rn=function(){this.page=ke,this.currentPage=$,this.pages=G.slice(0),this.pagesContext=Ce.slice(0),this.x=de,this.y=pe,this.matrix=fe,this.width=on($),this.height=An($),this.outputDestination=q,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){ke=this.page,$=this.currentPage,Ce=this.pagesContext,G=this.pages,de=this.x,pe=this.y,fe=this.matrix,ln($,this.width),un($,this.height),q=this.outputDestination};var an=function(e,t,n,r,a){Fe.push(new rn),ke=$=0,G=[],de=e,pe=t,fe=a,rt([n,r])};for(var sn in d.beginFormObject=function(e,t,n,r,a){return an(e,t,n,r,a),this},d.endFormObject=function(e){return function(e){if(Ee[e])Fe.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Ie).length+1).toString(10);t.id=n,Ee[e]=n,Ie[n]=t,Ne.publish("addFormObject",t),Fe.pop().restore()}}(e),this},d.doFormObject=function(e,t){var n=Ie[Ee[e]];return J("q"),J(t.toString()+" cm"),J("/"+n.id+" Do"),J("Q"),this},d.getFormObject=function(e){var t=Ie[Ee[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},d.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(Sr(ft(pt()),e),"function"==typeof Sr.unload&&br.setTimeout&&setTimeout(Sr.unload,911),this):new Promise((function(t,n){try{var r=Sr(ft(pt()),e);"function"==typeof Sr.unload&&br.setTimeout&&setTimeout(Sr.unload,911),t(r)}catch(e){n(e.message)}}))},Yr.API)Yr.API.hasOwnProperty(sn)&&("events"===sn&&Yr.API.events.length?function(e,t){var n,r,a;for(a=t.length-1;-1!==a;a--)n=t[a][0],r=t[a][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Ne,Yr.API.events):d[sn]=Yr.API[sn]);var on=d.getPageWidth=function(e){return(Ce[e=e||$].mediaBox.topRightX-Ce[e].mediaBox.bottomLeftX)/he},ln=d.setPageWidth=function(e,t){Ce[e].mediaBox.topRightX=t*he+Ce[e].mediaBox.bottomLeftX},An=d.getPageHeight=function(e){return(Ce[e=e||$].mediaBox.topRightY-Ce[e].mediaBox.bottomLeftY)/he},un=d.setPageHeight=function(e,t){Ce[e].mediaBox.topRightY=t*he+Ce[e].mediaBox.bottomLeftY};return d.internal={pdfEscape:nt,getStyle:kt,getFont:_t,getFontSize:re,getCharSpace:Jt,getTextColor:qt,getLineHeight:$t,getLineHeightFactor:Pt,getLineWidth:Qt,write:Y,getHorizontalCoordinate:Ht,getVerticalCoordinate:zt,getCoordinateString:Vt,getVerticalCoordinateString:Wt,collections:{},newObject:De,newAdditionalObject:$e,newObjectDeferred:Qe,newObjectDeferredBegin:Oe,getFilters:Ve,putStream:We,events:Ne,scaleFactor:he,pageSize:{getWidth:function(){return on($)},setWidth:function(e){ln($,e)},getHeight:function(){return An($)},setHeight:function(e){un($,e)}},encryptionOptions:u,encryption:yt,getEncryptor:function(e){return null!==u?yt.encryptor(e,0):function(e){return e}},output:mt,getNumberOfPages:ot,pages:G,out:J,f2:S,f3:I,getPageInfo:bt,getPageInfoByObjId:wt,getCurrentPageInfo:vt,getPDFVersion:f,Point:tn,Rectangle:nn,Matrix:Te,hasHotfix:gt},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return on($)},set:function(e){ln($,e)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return An($)},set:function(e){un($,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===c&&(h[r]=!0);var a=e[t][0].split("-");et({id:r,fontName:a[0],fontStyle:a[1]||""})}Ne.publish("addFonts",{fonts:me,dictionary:ge})}.call(d,ee),ce="F1",at(a,n),Ne.publish("initialized"),d}Wr.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Wr.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Wr.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Wr.prototype.processOwnerPassword=function(e,t){return zr(Mr(t).substr(0,5),e)},Wr.prototype.encryptor=function(e,t){var n=Mr(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return zr(n,e)}},jr.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,Nn.A)(e)!==(0,Nn.A)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},Yr.API={events:[]},Yr.version="3.0.1";var Zr=Yr.API,ea=1,ta=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},na=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ra=function(e){return e.toFixed(2)},aa=function(e){return e.toFixed(5)};Zr.__acroform__={};var sa=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ia=function(e){return e*ea},oa=function(e){var t=new Ba,n=Qa.internal.getHeight(e)||0,r=Qa.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ra(r)),Number(ra(n))],t},la=Zr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Aa=Zr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},ua=Zr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ca=Zr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ua(e,t-1)},ha=Zr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return la(e,t-1)},da=Zr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Aa(e,t-1)},pa=Zr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=n(a)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=n(a+i)||0,l.upperRight_Y=r(s)||0,[Number(ra(l.lowerLeft_X)),Number(ra(l.lowerLeft_Y)),Number(ra(l.upperRight_X)),Number(ra(l.upperRight_Y))]},fa=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=ma(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+ra(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=oa(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},ma=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map((function(e){return e.split("\n")})):a.map((function(e){return[e]}));var s=n,i=Qa.internal.getHeight(e)||0;i=i<0?-i:i;var o=Qa.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<a.length){var s=n+" "+a[t+1][0];return ga(s,e,r).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var A,u,c=ga("3",e,s).height,h=e.multiline?i-s:(i-c)/2,d=h+=2,p=0,f=0,m=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+ga(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var g="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(1!==a[b].length&&m!==a[b].length-1){if((c+2)*(y+2)+2>i)continue e;g+=a[b][m],w=!0,f=b,b--}else{g=" "==(g+=a[b][m]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var v=parseInt(b),x=l(v,g,s),B=b>=a.length-1;if(x&&!B){g+=" ",m=0;continue}if(x||B){if(B)f=v;else if(e.multiline&&(c+2)*(y+2)+2>i)continue e}else{if(!e.multiline)continue e;if((c+2)*(y+2)+2>i)continue e;f=v}}for(var k="",C=p;C<=f;C++){var N=a[C];if(e.multiline){if(C===f){k+=N[m]+" ",m=(m+1)%N.length;continue}if(C===p){k+=N[N.length-1]+" ";continue}}k+=N[0]+" "}switch(k=" "==k.substr(k.length-1)?k.substr(0,k.length-1):k,u=ga(k,e,s).width,e.textAlign){case"right":A=o-u-2;break;case"center":A=(o-u)/2;break;default:A=2}t+=ra(A)+" "+ra(d)+" Td\n",t+="("+ta(k)+") Tj\n",t+=-ra(A)+" 0 Td\n",d=-(s+2),u=0,p=w?f:f+1,y++,g=""}break}return r.text=t,r.fontSize=s,r},ga=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},ya={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ba=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},wa=Zr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(0!==s&&(a+=" "),(0,Nn.A)(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":"/"!==e[s].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),a+="("+ta(r(e[s].toString()))+")"):a+=e[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},va=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+ta(r(e))+")"},xa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};xa.prototype.toString=function(){return this.objId+" 0 R"},xa.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},xa.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],a=this[r];a&&(Array.isArray(a)?e.push({key:r,value:wa(a,this.objId,this.scope)}):a instanceof xa?(a.scope=this.scope,e.push({key:r,value:a.objId+" 0 R"})):"function"!=typeof a&&e.push({key:r,value:a}))}return e};var Ba=function(){xa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};sa(Ba,xa);var ka=function(){xa.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ta(t(e))+")"}},set:function(t){e=t}})};sa(ka,xa);var Ca=function e(){xa.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(t,3))},set:function(e){!0===Boolean(e)?this.F=ha(t,3):this.F=da(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ua)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ta(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===A?50/ea:A},set:function(e){A=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!c||this instanceof Ua||this instanceof Ra))return va(c,this.objId,this.scope)},set:function(e){e=e.toString(),c=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Fa==0?va(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof Fa==0?"("===e.substr(0,1)?na(e.substr(1,e.length-2)):na(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fa==1?na(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof Fa==1?"/"+e:e}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Fa==0?va(d,this.objId,this.scope):d},set:function(e){e=e.toString(),d=this instanceof Fa==0?"("===e.substr(0,1)?na(e.substr(1,e.length-2)):na(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fa==1?na(d.substr(1,d.length-1)):d},set:function(e){e=e.toString(),d=this instanceof Fa==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,1):this.Ff=da(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,2):this.Ff=da(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,3):this.Ff=da(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');m=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(m){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};sa(Ca,xa);var Na=function(){Ca.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return wa(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,a=[];r=t.exec(e);)a.push(r[n]);return a}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,18):this.Ff=da(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=ha(this.Ff,19):this.Ff=da(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=ha(this.Ff,20),t.sort()):this.Ff=da(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,22):this.Ff=da(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,23):this.Ff=da(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,27):this.Ff=da(this.Ff,27)}}),this.hasAppearanceStream=!1};sa(Na,Ca);var Sa=function(){Na.call(this),this.fontName="helvetica",this.combo=!1};sa(Sa,Na);var Ia=function(){Sa.call(this),this.combo=!0};sa(Ia,Sa);var Ea=function(){Ia.call(this),this.edit=!0};sa(Ea,Ia);var Fa=function(){Ca.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,15):this.Ff=da(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,16):this.Ff=da(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,17):this.Ff=da(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,26):this.Ff=da(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+ta(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,Nn.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};sa(Fa,Ca);var Ta=function(){Fa.call(this),this.pushButton=!0};sa(Ta,Fa);var La=function(){Fa.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};sa(La,Fa);var Ua=function(){var e,t;Ca.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+ta(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,Nn.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qa.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sa(Ua,Ca),La.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},La.prototype.createOption=function(e){var t=new Ua;return t.Parent=this,t.optionName=e,this.Kids.push(t),Ma.call(this.scope,t),t};var _a=function(){Fa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qa.CheckBox.createAppearanceStream()};sa(_a,Fa);var Ra=function(){Ca.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,13):this.Ff=da(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,21):this.Ff=da(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,23):this.Ff=da(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,24):this.Ff=da(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,25):this.Ff=da(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,26):this.Ff=da(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sa(Ra,Ca);var Da=function(){Ra.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ca(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=ha(this.Ff,14):this.Ff=da(this.Ff,14)}}),this.password=!0};sa(Da,Ra);var Qa={CheckBox:{createAppearanceStream:function(){return{N:{On:Qa.CheckBox.YesNormal},D:{On:Qa.CheckBox.YesPushDown,Off:Qa.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=oa(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=ma(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+ra(Qa.internal.getWidth(e))+" "+ra(Qa.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ra(s.fontSize)+" Tf "+a),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=oa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=[],s=Qa.internal.getHeight(e),i=Qa.internal.getWidth(e),o=ma(e,e.caption);return a.push("1 g"),a.push("0 0 "+ra(i)+" "+ra(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+ra(i-1)+" "+ra(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+ra(o.fontSize)+" Tf "+r),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=oa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ra(Qa.internal.getWidth(e))+" "+ra(Qa.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Qa.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Qa.RadioButton.Circle.YesNormal,t.D[e]=Qa.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=oa(e);t.scope=e.scope;var n=[],r=Qa.internal.getWidth(e)<=Qa.internal.getHeight(e)?Qa.internal.getWidth(e)/4:Qa.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Qa.internal.Bezier_C,s=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+aa(Qa.internal.getWidth(e)/2)+" "+aa(Qa.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=oa(e);t.scope=e.scope;var n=[],r=Qa.internal.getWidth(e)<=Qa.internal.getHeight(e)?Qa.internal.getWidth(e)/4:Qa.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*Qa.internal.Bezier_C).toFixed(5)),i=Number((r*Qa.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+aa(Qa.internal.getWidth(e)/2)+" "+aa(Qa.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+aa(Qa.internal.getWidth(e)/2)+" "+aa(Qa.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=oa(e);t.scope=e.scope;var n=[],r=Qa.internal.getWidth(e)<=Qa.internal.getHeight(e)?Qa.internal.getWidth(e)/4:Qa.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),s=Number((a*Qa.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+aa(Qa.internal.getWidth(e)/2)+" "+aa(Qa.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Qa.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Qa.RadioButton.Cross.YesNormal,t.D[e]=Qa.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=oa(e);t.scope=e.scope;var n=[],r=Qa.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+ra(Qa.internal.getWidth(e)-2)+" "+ra(Qa.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ra(r.x1.x)+" "+ra(r.x1.y)+" m"),n.push(ra(r.x2.x)+" "+ra(r.x2.y)+" l"),n.push(ra(r.x4.x)+" "+ra(r.x4.y)+" m"),n.push(ra(r.x3.x)+" "+ra(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=oa(e);t.scope=e.scope;var n=Qa.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+ra(Qa.internal.getWidth(e))+" "+ra(Qa.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ra(Qa.internal.getWidth(e)-2)+" "+ra(Qa.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ra(n.x1.x)+" "+ra(n.x1.y)+" m"),r.push(ra(n.x2.x)+" "+ra(n.x2.y)+" l"),r.push(ra(n.x4.x)+" "+ra(n.x4.y)+" m"),r.push(ra(n.x3.x)+" "+ra(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=oa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ra(Qa.internal.getWidth(e))+" "+ra(Qa.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Qa.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Qa.internal.getWidth(e),n=Qa.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Qa.internal.getWidth=function(e){var t=0;return"object"===(0,Nn.A)(e)&&(t=ia(e.Rect[2])),t},Qa.internal.getHeight=function(e){var t=0;return"object"===(0,Nn.A)(e)&&(t=ia(e.Rect[3])),t};var Oa,$a,Ma=Zr.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(Ca.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(ya)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ea=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ka,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&ba(r,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var a=e[r],s=[],i=a.Rect;if(a.Rect&&(a.Rect=pa(a.Rect,t)),t.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Qa.createDefaultAppearanceStream(a),"object"===(0,Nn.A)(a)&&"function"==typeof a.getKeyValueListForStream&&(s=a.getKeyValueListForStream()),a.Rect=i,a.hasAppearanceStream&&!a.appearanceStreamContent){var o=fa(a);s.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(a.appearanceStreamContent){var l="";for(var A in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(A)){var u=a.appearanceStreamContent[A];if(l+="/"+A+" ",l+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var c=u[r];"function"==typeof c&&(c=c.call(t,a)),l+="/"+r+" "+c+" ",t.internal.acroformPlugin.xForms.indexOf(c)>=0||t.internal.acroformPlugin.xForms.push(c)}}else"function"==typeof(c=u)&&(c=c.call(t,a)),l+="/"+r+" "+c,t.internal.acroformPlugin.xForms.indexOf(c)>=0||t.internal.acroformPlugin.xForms.push(c);l+=">>"}s.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:s,objectId:a.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,Nn.A)(a)&&"function"==typeof a.putStream&&a.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof Ca))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};function Pa(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}Zr.AcroFormChoiceField=Na,Zr.AcroFormListBox=Sa,Zr.AcroFormComboBox=Ia,Zr.AcroFormEditBox=Ea,Zr.AcroFormButton=Fa,Zr.AcroFormPushButton=Ta,Zr.AcroFormRadioButton=La,Zr.AcroFormCheckBox=_a,Zr.AcroFormTextField=Ra,Zr.AcroFormPasswordField=Da,Zr.AcroFormAppearance=Qa,Zr.AcroForm={ChoiceField:Na,ListBox:Sa,ComboBox:Ia,EditBox:Ea,Button:Fa,PushButton:Ta,RadioButton:La,CheckBox:_a,TextField:Ra,PasswordField:Da,Appearance:Qa},Yr.AcroForm={ChoiceField:Na,ListBox:Sa,ComboBox:Ia,EditBox:Ea,Button:Fa,PushButton:Ta,RadioButton:La,CheckBox:_a,TextField:Ra,PasswordField:Da,Appearance:Qa},Yr.AcroForm,function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,r){var a,s,i,o,l,A=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(x(e))for(l in n)for(i=n[l],a=0;a<i.length;a+=1){for(o=!0,s=0;s<i[a].length;s+=1)if(void 0!==i[a][s]&&i[a][s]!==e[s]){o=!1;break}if(!0===o){A=l;break}}else for(l in n)for(i=n[l],a=0;a<i.length;a+=1){for(o=!0,s=0;s<i[a].length;s+=1)if(void 0!==i[a][s]&&i[a][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){A=l;break}}return A===t&&r!==t&&(A=r),A},a=function e(t){for(var n=this.internal.write,r=this.internal.putStream,a=(0,this.internal.getFilters)();-1!==a.indexOf("FlateEncode");)a.splice(a.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===m.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===m.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var A=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:A,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,c={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(c.filter=t.filter),e.call(this,c)}if(t.colorSpace===m.INDEXED){var h=this.internal.newObject();r({data:k(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},s=function(){var e=this.internal.collections.addImage_images;for(var t in e)a.call(this,e[t])},i=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var e=this.internal.collections.addImage_images;return o.call(this),e},A=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},c=function(e){return"object"===(0,Nn.A)(e)&&1===e.nodeType},h=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return Cr(unescape(r).split("base64,").pop());var a=e.loadFile(r,!0);if(void 0!==a)return a}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return Cr(t.toDataURL(s,1).split("base64,").pop())}},d=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},p=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},f=function(e,t,n,r,a,s){var i=p.call(this,n,r,a),o=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,u=l.call(this);if(n=i[0],r=i[1],u[a.index]=a,s){s*=Math.PI/180;var c=Math.cos(s),h=Math.sin(s),d=function(e){return e.toFixed(4)},f=[d(c),d(h),d(-1*h),d(c),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),A(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),A(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+a.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(x(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null},v=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return v()&&e instanceof ArrayBuffer};var x=e.__addimage__.isArrayBufferView=function(e){return v()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},B=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},k=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=x(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,r,a,s,i,l,A,u;if("number"==typeof arguments[1]?(n=t,r=arguments[1],a=arguments[2],s=arguments[3],i=arguments[4],l=arguments[5],A=arguments[6],u=arguments[7]):(n=arguments[1],r=arguments[2],a=arguments[3],s=arguments[4],i=arguments[5],l=arguments[6],A=arguments[7],u=arguments[8]),"object"===(0,Nn.A)(e=arguments[0])&&!c(e)&&"imageData"in e){var h=e;e=h.imageData,n=h.format||n||t,r=h.x||r||0,a=h.y||a||0,s=h.w||h.width||s,i=h.h||h.height||i,l=h.alias||l,A=h.compression||A,u=h.rotation||h.angle||u}var d=this.internal.getFilters();if(void 0===A&&-1!==d.indexOf("FlateEncode")&&(A="SLOW"),isNaN(r)||isNaN(a))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var p=C.call(this,e,n,l,A);return f.call(this,r,a,s,i,p,u),this};var C=function(n,a,s,i){var o,l,p;if("string"==typeof n&&r(n)===t){n=unescape(n);var f=N(n,!1);(""!==f||void 0!==(f=e.loadFile(n,!0)))&&(n=f)}if(c(n)&&(n=h(n,a)),a=r(n,a),!u(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if((null==(p=s)||0===p.length)&&(s=function(e){return"string"==typeof e||x(e)?y(e):x(e.data)?y(e.data):null}(n)),(o=d.call(this,s))||(v()&&(n instanceof Uint8Array||"RGBA"===a||(l=n,n=B(n))),o=this["process"+a.toUpperCase()](n,A.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:g.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},N=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var a;n=null!==(a=w(e))&&void 0!==a?a:e;try{r=Cr(n)}catch(e){if(t)throw b(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(n){var a,s,i="";if(c(n)&&(n=h(n)),"string"==typeof n&&r(n)===t&&(""===(i=N(n,!1))&&(i=e.loadFile(n)||""),n=i),s=r(n),!u(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!v()||n instanceof Uint8Array||(n=B(n)),!(a=this["process"+s.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return a.fileType=s,a}}(Yr.API),Oa=Yr.API,$a=function(e){if(void 0!==e&&""!=e)return!0},Yr.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),Oa.events.push(["putPage",function(e){for(var t,n,r,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getPageInfoByObjId(e.objId),o=e.pageContext.annotations,l=!1,A=0;A<o.length&&!l;A++)switch((t=o[A]).type){case"link":($a(t.options.url)||$a(t.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(0!=l){this.internal.write("/Annots [");for(var u=0;u<o.length;u++){t=o[u];var c=this.internal.pdfEscape,h=this.internal.getEncryptor(e.objId);switch(t.type){case"reference":this.internal.write(" "+t.object.objId+" 0 R ");break;case"text":var d=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),f=this.internal.getEncryptor(d.objId),m=t.title||"Note";r="<</Type /Annot /Subtype /Text "+(n="/Rect ["+a(t.bounds.x)+" "+s(t.bounds.y+t.bounds.h)+" "+a(t.bounds.x+t.bounds.w)+" "+s(t.bounds.y)+"] ")+"/Contents ("+c(f(t.contents))+")",r+=" /Popup "+p.objId+" 0 R",r+=" /P "+i.objId+" 0 R",r+=" /T ("+c(f(m))+") >>",d.content=r;var g=d.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+a(t.bounds.x+30)+" "+s(t.bounds.y+t.bounds.h)+" "+a(t.bounds.x+t.bounds.w+30)+" "+s(t.bounds.y)+"] ")+" /Parent "+g,t.open&&(r+=" /Open true"),r+=" >>",p.content=r,this.internal.write(d.objId,"0 R",p.objId,"0 R");break;case"freetext":n="/Rect ["+a(t.bounds.x)+" "+s(t.bounds.y)+" "+a(t.bounds.x+t.bounds.w)+" "+s(t.bounds.y+t.bounds.h)+"] ";var y=t.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+c(h(t.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+y+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(t.options.name){var b=this.annotations._nameMap[t.options.name];t.options.pageNumber=b.page,t.options.top=b.y}else t.options.top||(t.options.top=0);if(n="/Rect ["+t.finalBounds.x+" "+t.finalBounds.y+" "+t.finalBounds.w+" "+t.finalBounds.h+"] ",r="",t.options.url)r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+c(h(t.options.url))+") >>";else if(t.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(t.options.pageNumber).objId+" 0 R",t.options.magFactor=t.options.magFactor||"XYZ",t.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+t.options.top+"]";break;case"FitV":t.options.left=t.options.left||0,r+=" /FitV "+t.options.left+"]";break;default:var w=s(t.options.top);t.options.left=t.options.left||0,void 0===t.options.zoom&&(t.options.zoom=0),r+=" /XYZ "+t.options.left+" "+w+" "+t.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),Oa.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},Oa.link=function(e,t,n,r,a){var s=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+n),h:o(t+r)},options:a,type:"link"})},Oa.textWithLink=function(e,t,n,r){var a,s,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){s=r.maxWidth;var l=this.splitTextToSize(e,s).length;a=Math.ceil(o*l)}else s=i,a=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=i/2),"right"===r.align&&(t-=i),this.link(t,n-o,s,a,r),i},Oa.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor},function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&a.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var A=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&s(e)&&4==t[e.charCodeAt(0)].length},c=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,a="",s=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(s++,"number"==typeof(r=r[e.charCodeAt(t)])&&(a+=String.fromCharCode(r),r=n,s=0),t===e.length-1&&(r=n,a+=e.charAt(t-(s-1)),t-=s-1,s=0)):(r=n,a+=e.charAt(t-s),t-=s,s=0);return a};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return i(e)?!1===s(e)?-1:!A(e)||!i(t)&&!i(n)||!i(n)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:u(e)&&i(t)&&!o(t)&&i(n)&&A(n)?3:o(e)||!i(n)?1:2:-1},d=function(e){var n=0,r=0,a=0,s="",o="",l="",A=(e=e||"").split("\\s+"),u=[];for(n=0;n<A.length;n+=1){for(u.push(""),r=0;r<A[n].length;r+=1)s=A[n][r],o=A[n][r-1],l=A[n][r+1],i(s)?(a=h(s,o,l),u[n]+=-1!==a?String.fromCharCode(t[s.charCodeAt(0)][a]):s):u[n]+=s;u[n]=c(u[n])}return u.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([d(t[r][0]),t[r][1],t[r][2]]):n.push([d(t[r])]);e=n}else e=d(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(Yr.API),Yr.API.autoPrint=function(e){var t;return"javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Yr.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),a=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,A=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(A.splitTextToSize(t,u))}),[])):e=Array.isArray(e)?e:[e];for(var c=0;c<e.length;c++)i<(l=this.getStringUnitWidth(e[c],{font:a})*n)&&(i=l);return 0!==i&&(o=e.length),{w:i/=s,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var e;e=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var a=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return void 0!==a.lineNumber&&(a.lineNumber===e.lineNumber?(e.x=(a.x||0)+(a.width||0),e.y=a.y||0):a.y+a.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,A&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=a.y+a.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-i,e.y+i,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+i,{align:"center",baseline:"top",maxWidth:e.width-i-i}):this.text(e.text,e.x+i,e.y+i,{align:"left",baseline:"top",maxWidth:e.width-i-i})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,A,u){if(r.call(this),!l)throw new Error("No data for PDF table.");var c,h,d,p,f=[],m=[],g=[],y={},b={},w=[],v=[],x=(u=u||{}).autoSize||!1,B=!1!==u.printHeaders,k=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,C=u.margins||Object.assign({width:this.getPageWidth()},t),N="number"==typeof u.padding?u.padding:3,S=u.headerBackgroundColor||"#c8c8c8",I=u.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=S,this.internal.__cell__.headerTextColor=I,this.setFontSize(k),null==A)m=f=Object.keys(l[0]),g=f.map((function(){return"left"}));else if(Array.isArray(A)&&"object"===(0,Nn.A)(A[0]))for(f=A.map((function(e){return e.name})),m=A.map((function(e){return e.prompt||e.name||""})),g=A.map((function(e){return e.align||"left"})),c=0;c<A.length;c+=1)b[A[c].name]=A[c].width*(19.049976/25.4);else Array.isArray(A)&&"string"==typeof A[0]&&(m=f=A,g=f.map((function(){return"left"})));if(x||Array.isArray(A)&&"string"==typeof A[0])for(c=0;c<f.length;c+=1){for(y[p=f[c]]=l.map((function(e){return e[p]})),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(m[c],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=y[p],this.setFont(void 0,"normal"),d=0;d<h.length;d+=1)w.push(this.getTextDimensions(h[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[p]=Math.max.apply(null,w)+N+N,w=[]}if(B){var E={};for(c=0;c<f.length;c+=1)E[f[c]]={},E[f[c]].text=m[c],E[f[c]].align=g[c];var F=o.call(this,E,b);v=f.map((function(t){return new s(e,n,b[t],F,E[t].text,void 0,E[t].align)})),this.setTableHeaderRow(v),this.printHeaderRow(1,!1)}var T=A.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(c=0;c<l.length;c+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:c,data:l[c]},this);var L=o.call(this,l[c],b);for(d=0;d<f.length;d+=1){var U=l[c][f[d]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:c,col:d,data:U},this),i.call(this,new s(e,n,b[f[d]],L,U,c+2,T[f[d]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var o=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,a=this.internal.scaleFactor;return Object.keys(e).map((function(r){var a=e[r];return this.splitTextToSize(a.hasOwnProperty("text")?a.text:a,t[r]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*r/a+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var a;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){a=this.internal.__cell__.tableHeaderRow[A].clone(),t&&(a.y=this.internal.__cell__.margins.top||0,l.push(a)),a.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,a),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Yr.API);var Ha={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},za=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Va=Pa(za),Wa=[100,200,300,400,500,600,700,800,900],Ka=Pa(Wa);function Ga(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Ha[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),a=function(e){return"number"==typeof Va[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,r].join(" ")}}}function ja(e,t,n,r){var a;for(a=n;a>=0&&a<t.length;a+=r)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=r)if(e[t[a]])return e[t[a]]}var qa={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Xa={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ja(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Ya(e){return e.trimLeft()}function Za(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function es(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var ts,ns,rs,as=["times"];!function(e){var t,n,r,a,s,i,o,l,A,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new i,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new i,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new c(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,A=new u}]);var c=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var a=0;Object.defineProperty(this,"posX",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),A.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(e){e instanceof u&&(A=e)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(e){A.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var d=null;function p(e,t){if(null===d){var n=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))}))})),t}(e.getFontList());d=function(e){for(var t={},n=0;n<e.length;++n){var r=Ga(e[n]),a=r.family,s=r.stretch,i=r.style,o=r.weight;t[a]=t[a]||{},t[a][s]=t[a][s]||{},t[a][s][i]=t[a][s][i]||{},t[a][s][i][o]=r}return t}(n.concat(t))}return d}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){d=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],a=t[4];t[5];var s=t[6],i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(a)[2];a="px"===i?Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(a)*this.pdf.getFontSize()):Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(a);var o=function(e){var t,n,r=[],a=e.trim();if(""===a)return as;if(a in Xa)return[Xa[a]];for(;""!==a;){switch(n=null,t=(a=Ya(a)).charAt(0)){case'"':case"'":n=Za(a.substring(1),t);break;default:n=es(a)}if(null===n)return as;if(r.push(n[0]),""!==(a=Ya(n[1]))&&","!==a.charAt(0))return as;a=a.replace(/^,/,"")}return r}(s);if(this.fontFaces){var l=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},qa,n.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=Ga(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[r]))throw new Error("Could not find a font-family for the rule '"+Ja(s)+"' and default family '"+r+"'.");if(i=function(e,t){if(t[e])return t[e];var n=Va[e],r=n<=Va.normal?-1:1,a=ja(t,za,n,r);if(!a)throw new Error("Could not find a matching font-stretch value for "+e);return a}(s.stretch,i),i=function(e,t){if(t[e])return t[e];for(var n=Ha[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(s.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=Ka[e],r=ja(t,Wa,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Ja(s)+"'.");return i}(p(this.pdf,this.fontFaces),o.map((function(e){return{family:e,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var A="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(A="bold"),"italic"===n&&(A+="italic"),0===A.length&&(A="normal");for(var u="",c={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<o.length;h++){if(void 0!==this.pdf.internal.getFont(o[h],A,{noFallback:!0,disableWarning:!0})){u=o[h];break}if("bolditalic"===A&&void 0!==this.pdf.internal.getFont(o[h],"bold",{noFallback:!0,disableWarning:!0}))u=o[h],A="bold";else if(void 0!==this.pdf.internal.getFont(o[h],"normal",{noFallback:!0,disableWarning:!0})){u=o[h],A="normal";break}}if(""===u)for(var d=0;d<o.length;d++)if(c[o[d]]){u=c[o[d]];break}u=""===u?"Times":u,this.pdf.setFont(u,A)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};c.prototype.setLineDash=function(e){this.lineDash=e},c.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},c.prototype.fill=function(){w.call(this,"fill",!1)},c.prototype.stroke=function(){w.call(this,"stroke",!1)},c.prototype.beginPath=function(){this.path=[{type:"begin"}]},c.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw vr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new i(e,t)},c.prototype.closePath=function(){var e=new i(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,Nn.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new i(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(e.x,e.y)},c.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw vr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new i(n.x,n.y)},c.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},c.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw vr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var a=this.ctx.transform.applyToPoint(new i(n,r)),s=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:a.x,y:a.y}),this.ctx.lastPoint=new i(a.x,a.y)},c.prototype.bezierCurveTo=function(e,t,n,r,a,s){if(isNaN(a)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new i(a,s)),l=this.ctx.transform.applyToPoint(new i(e,t)),A=this.ctx.transform.applyToPoint(new i(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:A.x,y2:A.y,x:o.x,y:o.y}),this.ctx.lastPoint=new i(o.x,o.y)},c.prototype.arc=function(e,t,n,r,a,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a))throw vr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new i(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new i(0,n)),A=this.ctx.transform.applyToPoint(new i(0,0));n=Math.sqrt(Math.pow(l.x-A.x,2)+Math.pow(l.y-A.y,2))}Math.abs(a-r)>=2*Math.PI&&(r=0,a=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:a,counterclockwise:s})},c.prototype.arcTo=function(e,t,n,r,a){throw new Error("arcTo not implemented.")},c.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},c.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var a={};"butt"!==this.lineCap&&(a.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(a.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),a.hasOwnProperty("lineCap")&&(this.lineCap=a.lineCap),a.hasOwnProperty("lineJoin")&&(this.lineJoin=a.lineJoin)}},c.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},c.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},c.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},c.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},c.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,r,a;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,a=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),a=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),a=parseFloat(s[4]);else{if(a=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new Ir(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a,style:e}},d=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};c.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw vr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!d.call(this)){var a=_(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;I.call(this,{text:e,x:t,y:n,scale:s,angle:a,align:this.textAlign,maxWidth:r})}},c.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw vr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var a=_(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;I.call(this,{text:e,x:t,y:n,scale:s,renderingMode:"stroke",angle:a,align:this.textAlign,maxWidth:r})}},c.prototype.measureText=function(e){if("string"!=typeof e)throw vr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),a=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:a*=Math.round(96*n/72*1e4)/1e4})},c.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw vr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},c.prototype.rotate=function(e){if(isNaN(e))throw vr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},c.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw vr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},c.prototype.transform=function(e,t,n,r,a,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s))throw vr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new l(e,t,n,r,a,s);this.ctx.transform=this.ctx.transform.multiply(i)},c.prototype.setTransform=function(e,t,n,r,a,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,a=isNaN(a)?0:a,s=isNaN(s)?0:s,this.ctx.transform=new l(e,t,n,r,a,s)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};c.prototype.drawImage=function(e,t,n,r,a,s,i,A,u){var c=this.pdf.getImageProperties(e),h=1,d=1,p=1,g=1;void 0!==r&&void 0!==A&&(p=A/r,g=u/a,h=c.width/r*A/r,d=c.height/a*u/a),void 0===s&&(s=t,i=n,t=0,n=0),void 0!==r&&void 0===A&&(A=r,u=a),void 0===r&&void 0===A&&(A=c.width,u=c.height);for(var w,x=this.ctx.transform.decompose(),B=_(x.rotate.shx),k=new l,C=(k=(k=(k=k.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new o(s-t*p,i-n*g,r*h,a*d)),N=m.call(this,C),S=[],I=0;I<N.length;I+=1)-1===S.indexOf(N[I])&&S.push(N[I]);if(b(S),this.autoPaging)for(var E=S[0],F=S[S.length-1],T=E;T<F+1;T++){this.pdf.setPage(T);var L=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],U=1===T?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Q=1===T?0:R+(T-2)*D;if(0!==this.ctx.clip_path.length){var O=this.path;w=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(w,this.posX+this.margin[3],-Q+U+this.ctx.prevPageLastElemOffset),v.call(this,"fill",!0),this.path=O}var $=JSON.parse(JSON.stringify(C));$=y([$],this.posX+this.margin[3],-Q+U+this.ctx.prevPageLastElemOffset)[0];var M=(T>E||T<F)&&f.call(this);M&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,D,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",$.x,$.y,$.w,$.h,null,null,B),M&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,B)};var m=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+a)/n)+1);break;case"arc":r.push(Math.floor((e.y+a-e.radius)/n)+1),r.push(Math.floor((e.y+a+e.radius)/n)+1);break;case"qct":var s=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((s.y+a)/n)+1),r.push(Math.floor((s.y+s.h+a)/n)+1);break;case"bct":var i=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((i.y+a)/n)+1),r.push(Math.floor((i.y+i.h+a)/n)+1);break;case"rect":r.push(Math.floor((e.y+a)/n)+1),r.push(Math.floor((e.y+e.h+a)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)g.call(this);return r},g=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,a=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=a,this.lineJoin=s},y=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},b=function(e){return e.sort((function(e,t){return e-t}))},w=function(e,t){for(var n,r,a=this.fillStyle,s=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),A=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),c=JSON.parse(JSON.stringify(this.path)),h=[],d=0;d<c.length;d++)if(void 0!==c[d].x)for(var p=m.call(this,c[d]),w=0;w<p.length;w+=1)-1===h.indexOf(p[w])&&h.push(p[w]);for(var x=0;x<h.length;x++)for(;this.pdf.internal.getNumberOfPages()<h[x];)g.call(this);if(b(h),this.autoPaging)for(var B=h[0],k=h[h.length-1],C=B;C<k+1;C++){this.pdf.setPage(C),this.fillStyle=a,this.strokeStyle=s,this.lineCap=i,this.lineWidth=l,this.lineJoin=A;var N=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],S=1===C?this.posY+this.margin[0]:this.margin[0],I=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===C?0:I+(C-2)*E;if(0!==this.ctx.clip_path.length){var T=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(n,this.posX+this.margin[3],-F+S+this.ctx.prevPageLastElemOffset),v.call(this,e,!0),this.path=T}if(r=JSON.parse(JSON.stringify(u)),this.path=y(r,this.posX+this.margin[3],-F+S+this.ctx.prevPageLastElemOffset),!1===t||0===C){var L=(C>B||C<k)&&f.call(this);L&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],N,E,null).clip().discardPath()),v.call(this,e,t),L&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,v.call(this,e,t),this.lineWidth=o;this.path=u},v=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!d.call(this))){for(var n,r,a=[],s=this.path,i=0;i<s.length;i++){var o=s[i];switch(o.type){case"begin":a.push({begin:!0});break;case"close":a.push({close:!0});break;case"mt":a.push({start:o,deltas:[],abs:[]});break;case"lt":var l=a.length;if(s[i-1]&&!isNaN(s[i-1].x)&&(n=[o.x-s[i-1].x,o.y-s[i-1].y],l>0))for(;l>=0;l--)if(!0!==a[l-1].close&&!0!==a[l-1].begin){a[l-1].deltas.push(n),a[l-1].abs.push(o);break}break;case"bct":n=[o.x1-s[i-1].x,o.y1-s[i-1].y,o.x2-s[i-1].x,o.y2-s[i-1].y,o.x-s[i-1].x,o.y-s[i-1].y],a[a.length-1].deltas.push(n);break;case"qct":var A=s[i-1].x+2/3*(o.x1-s[i-1].x),u=s[i-1].y+2/3*(o.y1-s[i-1].y),c=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),f=o.x,m=o.y;n=[A-s[i-1].x,u-s[i-1].y,c-s[i-1].x,h-s[i-1].y,f-s[i-1].x,m-s[i-1].y],a[a.length-1].deltas.push(n);break;case"arc":a.push({deltas:[],abs:[],arc:!0}),Array.isArray(a[a.length-1].abs)&&a[a.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,y=0;y<a.length;y++)if(a[y].arc)for(var b=a[y].abs,w=0;w<b.length;w++){var v=b[w];"arc"===v.type?k.call(this,v.x,v.y,v.radius,v.startAngle,v.endAngle,v.counterclockwise,void 0,t,!g):E.call(this,v.x,v.y),g=!0}else if(!0===a[y].close)this.pdf.internal.out("h"),g=!1;else if(!0!==a[y].begin){var x=a[y].start.x,B=a[y].start.y;F.call(this,a[y].deltas,x,B),g=!0}r&&C.call(this,r),t&&N.call(this)}},x=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},B=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};c.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},c.prototype.createPattern=function(){return this.createLinearGradient()},c.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(e,t,n,r,a,s,i,o,l){for(var A=L.call(this,n,r,a,s),u=0;u<A.length;u++){var c=A[u];0===u&&(l?S.call(this,c.x1+e,c.y1+t):E.call(this,c.x1+e,c.y1+t)),T.call(this,e,t,c.x2,c.y2,c.x3,c.y3,c.x4,c.y4)}o?N.call(this):C.call(this,i)},C=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},N=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},I=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=x.call(this,e.y),a=B.call(this,r)-n.h,s=this.ctx.transform.applyToPoint(new i(e.x,r)),A=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(A.translate)).multiply(A.skew)).multiply(A.scale);for(var c,h,d,p=this.ctx.transform.applyToRectangle(new o(e.x,r,n.w,n.h)),g=u.applyToRectangle(new o(e.x,a,n.w,n.h)),w=m.call(this,g),k=[],C=0;C<w.length;C+=1)-1===k.indexOf(w[C])&&k.push(w[C]);if(b(k),this.autoPaging)for(var N=k[0],S=k[k.length-1],I=N;I<S+1;I++){this.pdf.setPage(I);var E=1===I?this.posY+this.margin[0]:this.margin[0],F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[2],L=T-this.margin[0],U=this.pdf.internal.pageSize.width-this.margin[1],_=U-this.margin[3],R=1===I?0:F+(I-2)*L;if(0!==this.ctx.clip_path.length){var D=this.path;c=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(c,this.posX+this.margin[3],-1*R+E),v.call(this,"fill",!0),this.path=D}var Q=y([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-R+E+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),d=this.lineWidth,this.lineWidth=d*e.scale);var O="text"!==this.autoPaging;if(O||Q.y+Q.h<=T){if(O||Q.y>=E&&Q.x<=U){var $=O?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||U-Q.x)[0],M=y([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-R+E+this.ctx.prevPageLastElemOffset)[0],P=O&&(I>N||I<S)&&f.call(this);P&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_,L,null).clip().discardPath()),this.pdf.text($,M.x,M.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),P&&this.pdf.restoreGraphicsState()}}else Q.y<T&&(this.ctx.prevPageLastElemOffset+=T-Q.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=d)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),d=this.lineWidth,this.lineWidth=d*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=d)},E=function(e,t,a,s){a=a||0,s=s||0,this.pdf.internal.out(n(e+a)+" "+r(t+s)+" l")},F=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},T=function(e,n,r,i,o,l,A,u){this.pdf.internal.out([t(a(r+e)),t(s(i+n)),t(a(o+e)),t(s(l+n)),t(a(A+e)),t(s(u+n)),"c"].join(" "))},L=function(e,t,n,r){for(var a=2*Math.PI,s=Math.PI/2;t>n;)t-=a;var i=Math.abs(n-t);i<a&&r&&(i=a-i);for(var o=[],l=r?-1:1,A=t;i>1e-5;){var u=A+l*Math.min(i,s);o.push(U.call(this,e,A,u)),i-=Math.abs(u-A),A=u}return o},U=function(e,t,n){var r=(n-t)/2,a=e*Math.cos(r),s=e*Math.sin(r),i=a,o=-s,l=i*i+o*o,A=l+i*a+o*s,u=4/3*(Math.sqrt(2*l*A)-A)/(i*s-o*a),c=i-u*o,h=o+u*i,d=c,p=-h,f=r+t,m=Math.cos(f),g=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:c*m-h*g,y2:c*g+h*m,x3:d*m-p*g,y3:d*g+p*m,x4:e*Math.cos(n),y4:e*Math.sin(n)}},_=function(e){return 180*e/Math.PI},R=function(e,t,n,r,a,s){var i=e+.5*(n-e),l=t+.5*(r-t),A=a+.5*(n-a),u=s+.5*(r-s),c=Math.min(e,a,i,A),h=Math.max(e,a,i,A),d=Math.min(t,s,l,u),p=Math.max(t,s,l,u);return new o(c,d,h-c,p-d)},D=function(e,t,n,r,a,s,i,l){var A,u,c,h,d,p,f,m,g,y,b,w,v,x,B=n-e,k=r-t,C=a-n,N=s-r,S=i-a,I=l-s;for(u=0;u<41;u++)g=(f=(c=e+(A=u/40)*B)+A*((d=n+A*C)-c))+A*(d+A*(a+A*S-d)-f),y=(m=(h=t+A*k)+A*((p=r+A*N)-h))+A*(p+A*(s+A*I-p)-m),0==u?(b=g,w=y,v=g,x=y):(b=Math.min(b,g),w=Math.min(w,y),v=Math.max(v,g),x=Math.max(x,y));return new o(Math.round(b),Math.round(w),Math.round(v-b),Math.round(x-w))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Yr.API),function(e){var t=function(e){var t,n,r,a,s,i,o,l,A,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,a=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;a>r;r+=4)0!==(s=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(i=(s=((s=((s=((s=(s-(u=s%85))/85)-(A=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,n.push(i+33,o+33,l+33,A+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,a,s,i=String,o="length",l=255,A="charCodeAt",u="slice",c="replace";for(e[u](-2),e=e[u](0,-2)[c](/\s/g,"")[c]("z","!!!!!"),r=[],a=0,s=(e+=t="uuuuu"[u](e[o]%5||5))[o];s>a;a+=5)n=52200625*(e[A](a)-33)+614125*(e[A](a+1)-33)+7225*(e[A](a+2)-33)+85*(e[A](a+3)-33)+(e[A](a+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),i.fromCharCode.apply(i,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},a=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=mr(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,s){var i=0,o=e||"",l=[];for("string"==typeof(s=s||[])&&(s=[s]),i=0;i<s.length;i+=1)switch(s[i]){case"ASCII85Decode":case"/ASCII85Decode":o=n(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=r(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=a(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[i]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(Yr.API),function(e){e.loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,a=0,s=function(e){var t=e.length,n=[],r=String.fromCharCode;for(a=0;a<t;a+=1)n.push(r(255&e.charCodeAt(a)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(s(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return s(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},e.loadImageFile=e.loadFile}(Yr.API),function(e){function t(){return(br.html2canvas?Promise.resolve(br.html2canvas):Promise.resolve().then(i.t.bind(i,354,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function n(){return(br.DOMPurify?Promise.resolve(br.DOMPurify):i.e(418).then(i.bind(i,9418))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var r=function(e){var t=(0,Nn.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},s=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(e,t){return e.__proto__=t||s.prototype,e},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(r(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(n).then((function(t){return this.set({src:a("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},s.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==n&&1===a.nodeType&&"SCRIPT"===a.nodeName||r.appendChild(e(a,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},s.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},s.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,a=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var i=n[s],o=i.src.find((function(e){return"truetype"===e.format}));o&&t.addFont(o.url,i.ref.name,i.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=0==a.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,t.context2d.save(!0),e(this.prop.container,a)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},s.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},s.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},s.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},s.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},s.prototype.set=function(e){if("object"!==r(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in s.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},s.prototype.get=function(e,t){return this.then((function(){var n=e in s.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},s.prototype.setMargin=function(e){return this.then((function(){switch(r(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},s.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||Yr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},s.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},s.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},s.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),a=n.call(r,e,t);return s.convert(a,this.__proto__)},s.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},s.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},s.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return s.convert(t,this)},s.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},s.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Yr.getPageSize=function(e,t,n){if("object"===(0,Nn.A)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var a,s=(""+n).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}var o,l=0,A=0;if(i.hasOwnProperty(s))l=i[s][1]/a,A=i[s][0]/a;else try{l=n[1],A=n[0]}catch(e){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",A>l&&(o=A,A=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>A&&(o=A,A=l,l=o)}return{width:A,height:l,unit:t,k:a,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Ga):null;var n=new s(t);return t.worker?n:n.from(e).doCallback()}}(Yr.API),Yr.API.addJS=function(e){return rs=e,this.internal.events.subscribe("postPutResources",(function(){ts=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ts+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ns=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rs+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==ts&&void 0!==ns&&this.internal.out("/Names <</JavaScript "+ts+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),a=0;a<r.length;a++){var s=r[a],i=n.exec(s);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,A=[];for(a=0;a<l;a++){var u=e.internal.newObject();A.push(u);var c=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+c.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<A.length;a++)e.internal.write("(page_"+(a+1)+")"+A[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var a=t.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var s=this.count=this.count_r({count:0},a);if(s>0&&this.line("/Count "+s),a.options&&a.options.pageNumber){var i=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Yr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,a,s,i){var o,l=this.decode.DCT_DECODE,A=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),a=e.length,s={width:0,height:0,numcomponents:1},i=4;i<a;i+=2){if(i+=r,-1!==t.indexOf(e.charCodeAt(i+1))){n=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),s={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:n,numcomponents:e.charCodeAt(i+9)};break}r=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}A={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:n,alias:r}}return A}}(Yr.API);var ss,is,os,ls,As,us=function(){var e,t,n;function r(e){var t,n,r,a,s,i,o,l,A,u,c,h,d,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),A=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),a=this.readUInt16()||100,i.delay=1e3*s/a,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===A&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(d=0;0<=u?d<u:d>u;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(c=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,c.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,c.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,a=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function s(s,i,o,l){var A,u,c,h,d,p,f,m,g,y,b,w,v,x,B,k,C,N,S,I,E,F=Math.ceil((a.width-s)/o),T=Math.ceil((a.height-i)/l),L=a.width==F&&a.height==T;for(x=t*F,w=L?n:new Uint8Array(x*T),p=e.length,v=0,u=0;v<T&&r<p;){switch(e[r++]){case 0:for(h=C=0;C<x;h=C+=1)w[u++]=e[r++];break;case 1:for(h=N=0;N<x;h=N+=1)A=e[r++],d=h<t?0:w[u-t],w[u++]=(A+d)%256;break;case 2:for(h=S=0;S<x;h=S+=1)A=e[r++],c=(h-h%t)/t,B=v&&w[(v-1)*x+c*t+h%t],w[u++]=(B+A)%256;break;case 3:for(h=I=0;I<x;h=I+=1)A=e[r++],c=(h-h%t)/t,d=h<t?0:w[u-t],B=v&&w[(v-1)*x+c*t+h%t],w[u++]=(A+Math.floor((d+B)/2))%256;break;case 4:for(h=E=0;E<x;h=E+=1)A=e[r++],c=(h-h%t)/t,d=h<t?0:w[u-t],0===v?B=k=0:(B=w[(v-1)*x+c*t+h%t],k=c&&w[(v-1)*x+(c-1)*t+h%t]),f=d+B-k,m=Math.abs(f-d),y=Math.abs(f-B),b=Math.abs(f-k),g=m<=y&&m<=b?d:y<=b?B:k,w[u++]=(A+g)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!L){var U=((i+v*l)*a.width+s)*t,_=v*x;for(h=0;h<F;h+=1){for(var R=0;R<t;R+=1)n[U++]=w[_++];U+=(o-1)*t}}v++}}return e=gr(e),1==a.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,a,s,i,o,l;for(n=this.palette,s=this.transparency.indexed||[],a=new Uint8Array((s.length||0)+n.length),r=0,e=0,t=i=0,o=n.length;i<o;t=i+=3)a[r++]=n[t],a[r++]=n[t+1],a[r++]=n[t+2],a[r++]=null!=(l=s[e++])?l:255;return a},r.prototype.copyToImageData=function(e,t){var n,r,a,s,i,o,l,A,u,c,h;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),r=4,n=!0),A=(a=e.data||e).length,i=u||t,s=o=0,1===r)for(;s<A;)l=u?4*t[s/4]:o,c=i[l++],a[s++]=c,a[s++]=c,a[s++]=c,a[s++]=n?i[l++]:255,o=l;else for(;s<A;)l=u?4*t[s/4]:o,a[s++]=i[l++],a[s++]=i[l++],a[s++]=i[l++],a[s++]=n?i[l++]:255,o=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var a=function(){if("[object Window]"===Object.prototype.toString.call(br)){try{t=br.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return a(),e=function(e){var r;if(!0===a())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,a,s,i,o,l,A;if(this.animation){for(A=[],r=i=0,o=(l=this.animation.frames).length;i<o;r=++i)n=l[r],a=t.createImageData(n.width,n.height),s=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(a,s),n.imageData=a,A.push(n.image=e(a));return A}},r.prototype.renderFrame=function(e,t){var n,r,a;return n=(r=this.animation.frames)[t],a=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?e.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&e.putImageData(a.imageData,a.xOffset,a.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,a,s,i,o=this;return n=0,i=this.animation,a=i.numFrames,r=i.frames,s=i.numPlays,(t=function(){var i,l;if(i=n++%a,l=r[i],o.renderFrame(e,i),a>1&&n/a<s)return o.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function cs(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<1+(7&a);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var A=!0,u=[],c=0,h=null,d=0,p=null;for(this.width=n,this.height=r;A&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];c=e[t++]|e[t++]<<8,h=e[t++],!(1&f)&&(h=null),d=f>>2&7,t++;break;case 254:for(;;){if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var m=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++],v=w>>6&1,x=1<<1+(7&w),B=o,k=l,C=!1;w>>7&&(C=!0,B=t,k=x,t+=3*x);var N=t;for(t++;;){var S;if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}u.push({x:m,y:g,width:y,height:b,has_local_palette:C,palette_offset:B,palette_size:k,data_offset:N,data_length:t-N,transparent_index:h,interlaced:!!v,delay:c,disposal:d});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);hs(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var A=a.width,u=n-A,c=A,h=4*(a.y*n+a.x),d=4*((a.y+a.height)*n+a.x),p=h,f=4*u;!0===a.interlaced&&(f+=4*n*7);for(var m=8,g=0,y=i.length;g<y;++g){var b=i[g];if(0===c&&(c=A,(p+=f)>=d&&(f=4*u+4*n*(m-1),p=h+(A+u)*(m<<1),m>>=1)),b===l)p+=4;else{var w=e[o+3*b],v=e[o+3*b+1],x=e[o+3*b+2];r[p++]=x,r[p++]=v,r[p++]=w,r[p++]=255}--c}},this.decodeAndBlitFrameRGBA=function(t,r){var a=this.frameInfo(t),s=a.width*a.height,i=new Uint8Array(s);hs(e,a.data_offset,i,s);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var A=a.width,u=n-A,c=A,h=4*(a.y*n+a.x),d=4*((a.y+a.height)*n+a.x),p=h,f=4*u;!0===a.interlaced&&(f+=4*n*7);for(var m=8,g=0,y=i.length;g<y;++g){var b=i[g];if(0===c&&(c=A,(p+=f)>=d&&(f=4*u+4*n*(m-1),p=h+(A+u)*(m<<1),m>>=1)),b===l)p+=4;else{var w=e[o+3*b],v=e[o+3*b+1],x=e[o+3*b+2];r[p++]=w,r[p++]=v,r[p++]=x,r[p++]=255}--c}}}function hs(e,t,n,r){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,l=a+1,A=(1<<l)-1,u=0,c=0,h=0,d=e[t++],p=new Int32Array(4096),f=null;;){for(;u<16&&0!==d;)c|=e[t++]<<u,u+=8,1===d?d=e[t++]:--d;if(u<l)break;var m=c&A;if(c>>=l,u-=l,m!==s){if(m===i)break;for(var g=m<o?m:f,y=0,b=g;b>s;)b=p[b]>>8,++y;var w=b;if(h+y+(g!==m?1:0)>r)return void vr.log("Warning, gif stream longer than expected.");n[h++]=w;var v=h+=y;for(g!==m&&(n[h++]=w),b=g;y--;)b=p[b],n[--v]=255&b,b>>=8;null!==f&&o<4096&&(p[o++]=f<<8|w,o>=A+1&&l<12&&(++l,A=A<<1|1)),f=m}else o=i+1,A=(1<<(l=a+1))-1,f=null}return h!==r&&vr.log("Warning, gif stream shorter than expected."),n}function ds(e){var t,n,r,a,s,i=Math.floor,o=new Array(64),l=new Array(64),A=new Array(64),u=new Array(64),c=new Array(65535),h=new Array(65535),d=new Array(64),p=new Array(64),f=[],m=0,g=7,y=new Array(64),b=new Array(64),w=new Array(64),v=new Array(256),x=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],T=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(e,t){for(var n=0,r=0,a=new Array,s=1;s<=16;s++){for(var i=1;i<=e[s];i++)a[t[r]]=[],a[t[r]][0]=n,a[t[r]][1]=s,r++,n++;n*=2}return a}function U(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(m|=1<<g),n--,--g<0&&(255==m?(_(255),_(0)):_(m),g=7,m=0)}function _(e){f.push(e)}function R(e){_(e>>8&255),_(255&e)}function D(e,t,n,r,a){for(var s,i=a[0],o=a[240],l=function(e,t){var n,r,a,s,i,o,l,A,u,c,h=0;for(u=0;u<8;++u){n=e[h],r=e[h+1],a=e[h+2],s=e[h+3],i=e[h+4],o=e[h+5],l=e[h+6];var p=n+(A=e[h+7]),f=n-A,m=r+l,g=r-l,y=a+o,b=a-o,w=s+i,v=s-i,x=p+w,B=p-w,k=m+y,C=m-y;e[h]=x+k,e[h+4]=x-k;var N=.707106781*(C+B);e[h+2]=B+N,e[h+6]=B-N;var S=.382683433*((x=v+b)-(C=g+f)),I=.5411961*x+S,E=1.306562965*C+S,F=.707106781*(k=b+g),T=f+F,L=f-F;e[h+5]=L+I,e[h+3]=L-I,e[h+1]=T+E,e[h+7]=T-E,h+=8}for(h=0,u=0;u<8;++u){n=e[h],r=e[h+8],a=e[h+16],s=e[h+24],i=e[h+32],o=e[h+40],l=e[h+48];var U=n+(A=e[h+56]),_=n-A,R=r+l,D=r-l,Q=a+o,O=a-o,$=s+i,M=s-i,P=U+$,H=U-$,z=R+Q,V=R-Q;e[h]=P+z,e[h+32]=P-z;var W=.707106781*(V+H);e[h+16]=H+W,e[h+48]=H-W;var K=.382683433*((P=M+O)-(V=D+_)),G=.5411961*P+K,j=1.306562965*V+K,q=.707106781*(z=O+D),X=_+q,J=_-q;e[h+40]=J+G,e[h+24]=J-G,e[h+8]=X+j,e[h+56]=X-j,h++}for(u=0;u<64;++u)c=e[u]*t[u],d[u]=c>0?c+.5|0:c-.5|0;return d}(e,t),A=0;A<64;++A)p[B[A]]=l[A];var u=p[0]-n;n=p[0],0==u?U(r[0]):(U(r[h[s=32767+u]]),U(c[s]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return U(i),n;for(var m,g=1;g<=f;){for(var y=g;0==p[g]&&g<=f;)++g;var b=g-y;if(b>=16){m=b>>4;for(var w=1;w<=m;++w)U(o);b&=15}s=32767+p[g],U(a[(b<<4)+h[s]]),U(c[s]),g++}return 63!=f&&U(i),n}function Q(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=i((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[B[n]]=r}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var c=i((a[s]*e+50)/100);c=Math.min(Math.max(c,1),255),l[B[s]]=c}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var f=0;f<8;f++)A[d]=1/(o[B[d]]*h[p]*h[f]*8),u[d]=1/(l[B[d]]*h[p]*h[f]*8),d++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&Q(s),f=new Array,m=0,g=7,R(65496),R(65504),R(16),_(74),_(70),_(73),_(70),_(0),_(1),_(1),_(0),R(1),R(1),_(0),_(0),function(){R(65499),R(132),_(0);for(var e=0;e<64;e++)_(o[e]);_(1);for(var t=0;t<64;t++)_(l[t])}(),function(e,t){R(65472),R(17),_(8),R(t),R(e),_(3),_(1),_(17),_(0),_(2),_(17),_(1),_(3),_(17),_(1)}(e.width,e.height),function(){R(65476),R(418),_(0);for(var e=0;e<16;e++)_(k[e+1]);for(var t=0;t<=11;t++)_(C[t]);_(16);for(var n=0;n<16;n++)_(N[n+1]);for(var r=0;r<=161;r++)_(S[r]);_(1);for(var a=0;a<16;a++)_(I[a+1]);for(var s=0;s<=11;s++)_(E[s]);_(17);for(var i=0;i<16;i++)_(F[i+1]);for(var o=0;o<=161;o++)_(T[o])}(),R(65498),R(12),_(3),_(1),_(0),_(2),_(17),_(3),_(17),_(0),_(63),_(0);var i=0,c=0,h=0;m=0,g=7,this.encode.displayName="_encode_";for(var d,p,v,B,L,O,$,M,P,H=e.data,z=e.width,V=e.height,W=4*z,K=0;K<V;){for(d=0;d<W;){for(L=W*K+d,$=-1,M=0,P=0;P<64;P++)O=L+(M=P>>3)*W+($=4*(7&P)),K+M>=V&&(O-=W*(K+1+M-V)),d+$>=W&&(O-=d+$-W+4),p=H[O++],v=H[O++],B=H[O++],y[P]=(x[p]+x[v+256|0]+x[B+512|0]>>16)-128,b[P]=(x[p+768|0]+x[v+1024|0]+x[B+1280|0]>>16)-128,w[P]=(x[p+1280|0]+x[v+1536|0]+x[B+1792|0]>>16)-128;i=D(y,A,i,t,r),c=D(b,u,c,n,a),h=D(w,u,h,n,a),d+=32}K+=8}if(g>=0){var G=[];G[1]=g+1,G[0]=(1<<g+1)-1,U(G)}return R(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)v[t]=e(t)}(),t=L(k,C),n=L(I,E),r=L(N,S),a=L(F,T),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)h[32767+r]=n,c[32767+r]=[],c[32767+r][1]=n,c[32767+r][0]=r;for(var a=-(t-1);a<=-e;a++)h[32767+a]=n,c[32767+a]=[],c[32767+a][1]=n,c[32767+a][0]=t-1+a;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256|0]=38470*e,x[e+512|0]=7471*e+32768,x[e+768|0]=-11059*e,x[e+1024|0]=-21709*e,x[e+1280|0]=32768*e+8421375,x[e+1536|0]=-27439*e,x[e+1792|0]=-5329*e}(),Q(e)}function ps(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function fs(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,a){for(var s=0;s<a;s++)e[t+s]=n[r+s]}function a(e,t,n,r){for(var a=0;a<r;a++)e[t+a]=n}function s(e){return new Int32Array(e)}function i(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,a){for(var s=a[r],i=0;i<s&&(n.push(a.length>r+1?[]:new t),!(a.length<r+1));i++)e(n[i],r+1,a)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function A(e,n,r,a,s){t(!(a%r));do{e[n+(a-=r)]=s}while(0<a)}function u(e,n,r,a,i){if(t(2328>=i),512>=i)var o=s(512);else if(null==(o=s(i)))return 0;return function(e,n,r,a,i,o){var u,h,d=n,p=1<<r,f=s(16),m=s(16);for(t(0!=i),t(null!=a),t(null!=e),t(0<r),h=0;h<i;++h){if(15<a[h])return 0;++f[a[h]]}if(f[0]==i)return 0;for(m[1]=0,u=1;15>u;++u){if(f[u]>1<<u)return 0;m[u+1]=m[u]+f[u]}for(h=0;h<i;++h)u=a[h],0<a[h]&&(o[m[u]++]=h);if(1==m[15])return(a=new c).g=0,a.value=o[0],A(e,d,1,p,a),p;var g,y=-1,b=p-1,w=0,v=1,x=1,B=1<<r;for(h=0,u=1,i=2;u<=r;++u,i<<=1){if(v+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u])(a=new c).g=u,a.value=o[h++],A(e,d+w,i,B,a),w=l(w,u)}for(u=r+1,i=2;15>=u;++u,i<<=1){if(v+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u]){if(a=new c,(w&b)!=y){for(d+=B,g=1<<(y=u)-r;15>y&&!(0>=(g-=f[y]));)++y,g<<=1;p+=B=1<<(g=y-r),e[n+(y=w&b)].g=g+r,e[n+y].value=d-n-y}a.g=u-r,a.value=o[h++],A(e,d+(w>>r),i,B,a),w=l(w,u)}}return v!=2*m[15]-1?0:p}(e,n,r,a,i,o)}function c(){this.value=this.g=0}function h(){this.value=this.g=0}function d(){this.G=i(5,c),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i($n,h)}function p(e,n,r,a){t(null!=e),t(null!=n),t(2147483648>a),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+a,e.Zc=4<=a?r+a-4+1:r,N(e)}function f(e,t){for(var n=0;0<t--;)n|=I(e,128)<<t;return n}function m(e,t){var n=f(e,t);return S(e)?-n:n}function g(e,n,r,a){var s,i=0;for(t(null!=e),t(null!=n),t(4294967288>a),e.Sb=a,e.Ra=0,e.u=0,e.h=0,4<a&&(a=4),s=0;s<a;++s)i+=n[r+s]<<8*s;e.Ra=i,e.bb=a,e.oa=n,e.pa=r}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Hn-8>>>0,++e.bb,e.u-=8;B(e)&&(e.h=1,e.u=0)}function b(e,n){if(t(0<=n),!e.h&&n<=Pn){var r=x(e)&Mn[n];return e.u+=n,y(e),r}return e.h=1,e.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function v(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(e){return e.Ra>>>(e.u&Hn-1)>>>0}function B(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Hn}function k(e,t){e.u=t,e.h=B(e)}function C(e){e.u>=zn&&(t(e.u>=zn),y(e))}function N(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function S(e){return f(e,1)}function I(e,t){var n=e.Ca;0>e.b&&N(e);var r=e.b,a=n*t>>>8,s=(e.I>>>r>a)+0;for(s?(n-=a,e.I-=a+1<<r>>>0):n=a+1,r=n,a=0;256<=r;)a+=8,r>>=8;return r=7^a+Vn[r],e.b-=r,e.Ca=(n<<r)-1,s}function E(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function F(e,t){return e[t+0]|e[t+1]<<8}function T(e,t){return F(e,t)|e[t+2]<<16}function L(e,t){return F(e,t)|F(e,t+2)<<16}function U(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=s(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function _(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function D(e,n,r,a){t(null!=r),t(null!=a);var s=r[0],i=a[0];return 0==s&&(s=(e*i+n/2)/n),0==i&&(i=(n*s+e/2)/e),0>=s||0>=i?0:(r[0]=s,a[0]=i,1)}function Q(e,t){return e+(1<<t)-1>>>t}function O(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function $(t,n){e[n]=function(n,r,a,s,i,o,l){var A;for(A=0;A<i;++A){var u=e[t](o[l+A-1],a,s+A);o[l+A]=O(n[r+A],u)}}}function M(){this.ud=this.hd=this.jd=0}function P(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function z(e,t){return H(e+(e-t+.5>>1))}function V(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function W(e,t,n,r,a,s,i){for(r=s[i-1],n=0;n<a;++n)s[i+n]=r=O(e[t+n],r)}function K(e,t,n,r,a){var s;for(s=0;s<n;++s){var i=e[t+s],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));r[a+s]=(4278255360&i)+l>>>0}}function G(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function j(e,t,n,r,a,s){var i;for(i=0;i<r;++i){var o=t[n+i],l=o>>>8,A=o,u=255&(u=(u=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));A=255&(A=(A+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),a[s+i]=(4278255360&o)+(u<<16)+A}}function q(t,n,r,a,s){e[n]=function(e,t,n,r,i,o,l,A,u){for(r=l;r<A;++r)for(l=0;l<u;++l)i[o++]=s(n[a(e[t++])])},e[t]=function(t,n,i,o,l,A,u){var c=8>>t.b,h=t.Ea,d=t.K[0],p=t.w;if(8>c)for(t=(1<<t.b)-1,p=(1<<c)-1;n<i;++n){var f,m=0;for(f=0;f<h;++f)f&t||(m=a(o[l++])),A[u++]=s(d[m&p]),m>>=c}else e["VP8LMapColor"+r](o,l,d,p,A,u,n,i,h)}}function X(e,t,n,r,a){for(n=t+n;t<n;){var s=e[t++];r[a++]=s>>16&255,r[a++]=s>>8&255,r[a++]=255&s}}function J(e,t,n,r,a){for(n=t+n;t<n;){var s=e[t++];r[a++]=s>>16&255,r[a++]=s>>8&255,r[a++]=255&s,r[a++]=s>>24&255}}function Y(e,t,n,r,a){for(n=t+n;t<n;){var s=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;r[a++]=s,r[a++]=i}}function Z(e,t,n,r,a){for(n=t+n;t<n;){var s=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;r[a++]=s,r[a++]=i}}function ee(e,t,n,r,a){for(n=t+n;t<n;){var s=e[t++];r[a++]=255&s,r[a++]=s>>8&255,r[a++]=s>>16&255}}function te(e,t,n,a,s,i){if(0==i)for(n=t+n;t<n;)E(a,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),s+=32;else r(a,s,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==zr||e==Vr||e==Wr||e==Kr}function ae(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ae,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ae(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,a=t.ba.f.RGBA,s=a.eb,i=a.fb+e.ka*a.A,o=ga[t.ba.S],l=e.y,A=e.O,u=e.f,c=e.N,h=e.ea,d=e.W,p=t.cc,f=t.dc,m=t.Mc,g=t.Nc,y=e.ka,b=e.ka+e.T,w=e.U,v=w+1>>1;for(0==y?o(l,A,null,null,u,c,h,d,u,c,h,d,s,i,null,null,w):(o(t.ec,t.fc,l,A,p,f,m,g,u,c,h,d,s,i-a.A,s,i,w),++n);y+2<b;y+=2)p=u,f=c,m=h,g=d,c+=e.Rc,d+=e.Rc,i+=2*a.A,o(l,(A+=2*e.fa)-e.fa,l,A,p,f,m,g,u,c,h,d,s,i-a.A,s,i,w);return A+=e.fa,e.j+b<e.o?(r(t.ec,t.fc,l,A,w),r(t.cc,t.dc,u,c,v),r(t.Mc,t.Nc,h,d,v),n--):1&b||o(l,A,null,null,u,c,h,d,u,c,h,d,s,i+a.A,null,null,w),n}function ce(e,n,r){var a=e.F,s=[e.J];if(null!=a){var i=e.U,o=n.ba.S,l=o==Mr||o==Wr;n=n.ba.f.RGBA;var A=[0],u=e.ka;A[0]=e.T,e.Kb&&(0==u?--A[0]:(--u,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(A[0]=e.o-e.j-u));var c=n.eb;u=n.fb+u*n.A,e=Cr(a,s[0],e.width,i,A,c,u+(l?0:3),n.A),t(r==A),e&&re(o)&&Br(c,u,l,i,A,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,r=11>n,a=n==Qr||n==$r||n==Mr||n==Pr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Dn(t.Oa,e,a?11:12))return 0;if(a&&re(n)&&bn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=Ae,e.Kb){if(n=e.U+1>>1,t.memory=s(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,bn()}}else alert("todo:EmitYUV");a&&(t.Jb=ce,r&&gn())}if(r&&!Ta){for(e=0;256>e;++e)La[e]=89858*(e-128)+Na>>Ca,Ra[e]=-22014*(e-128)+Na,_a[e]=-45773*(e-128),Ua[e]=113618*(e-128)+Na>>Ca;for(e=Sa;e<Ia;++e)t=76283*(e-16)+Na>>Ca,Da[e-Sa]=We(t,255),Qa[e-Sa]=We(t+8>>4,15);Ta=1}return 1}function de(e){var n=e.ma,r=e.U,a=e.T;return t(!(1&e.ka)),0>=r||0>=a?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function fe(e,t,n,r){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,n[0]=b(e,14)+1,r[0]=b(e,1),0!=b(e,3)?0:!e.h)}function me(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+b(t,n)+1}function ge(e,t){return 120<t?t-120:1<=(n=((n=Yr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ye(e,t,n){var r=x(n),a=e[t+=255&r].g-8;return 0<a&&(k(n,n.u+8),r=x(n),t+=e[t].value,t+=r&(1<<a)-1),k(n,n.u+e[t].g),e[t].value}function be(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function we(e,n,r){var a=e.xc;return t((n=0==a?0:e.vc[e.md*(r>>a)+(n>>a)])<e.Wb),e.Ya[n]}function ve(e,n,a,s){var i=e.ab,o=e.c*n,l=e.C;n=l+n;var A=a,u=s;for(s=e.Ta,a=e.Ua;0<i--;){var c=e.gc[i],h=l,d=n,p=A,f=u,m=(u=s,A=a,c.Ea);switch(t(h<d),t(d<=c.nc),c.hc){case 2:Gn(p,f,(d-h)*m,u,A);break;case 0:var g=h,y=d,b=u,w=A,v=(N=c).Ea;0==g&&(Wn(p,f,null,null,1,b,w),W(p,f+1,0,0,v-1,b,w+1),f+=v,w+=v,++g);for(var x=1<<N.b,B=x-1,k=Q(v,N.b),C=N.K,N=N.w+(g>>N.b)*k;g<y;){var S=C,I=N,E=1;for(Kn(p,f,b,w-v,1,b,w);E<v;){var F=(E&~B)+x;F>v&&(F=v),(0,Yn[S[I++]>>8&15])(p,f+ +E,b,w+E-v,F-E,b,w+E),E=F}f+=v,w+=v,++g&B||(N+=k)}d!=c.nc&&r(u,A-m,u,A+(d-h-1)*m,m);break;case 1:for(m=p,y=f,v=(p=c.Ea)-(w=p&~(b=(f=1<<c.b)-1)),g=Q(p,c.b),x=c.K,c=c.w+(h>>c.b)*g;h<d;){for(B=x,k=c,C=new M,N=y+w,S=y+p;y<N;)G(B[k++],C),Zn(C,m,y,f,u,A),y+=f,A+=f;y<S&&(G(B[k++],C),Zn(C,m,y,v,u,A),y+=v,A+=v),++h&b||(c+=g)}break;case 3:if(p==u&&f==A&&0<c.b){for(y=u,p=m=A+(d-h)*m-(w=(d-h)*Q(c.Ea,c.b)),f=u,b=A,g=[],w=(v=w)-1;0<=w;--w)g[w]=f[b+w];for(w=v-1;0<=w;--w)y[p+w]=g[w];jn(c,h,d,u,m,u,A)}else jn(c,h,d,p,f,u,A)}A=s,u=a}u!=a&&r(s,a,A,u,o)}function xe(e,n){var r=e.V,a=e.Ba+e.c*e.C,s=n-e.C;if(t(n<=e.l.o),t(16>=s),0<s){var i=e.l,o=e.Ta,l=e.Ua,A=i.width;if(ve(e,s,r,a),s=l=[l],t((r=e.C)<(a=n)),t(i.v<i.va),a>i.o&&(a=i.o),r<i.j){var u=i.j-r;r=i.j,s[0]+=u*A}if(r>=a?r=0:(s[0]+=4*i.v,i.ka=r-i.j,i.U=i.va-i.v,i.T=a-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var c=r.f.RGBA,h=(a=r.S,s=i.U,i=i.T,u=c.eb,c.A),d=i;for(c=c.fb+e.Ma*c.A;0<d--;){var p=o,f=l,m=s,g=u,y=c;switch(a){case Dr:er(p,f,m,g,y);break;case Qr:tr(p,f,m,g,y);break;case zr:tr(p,f,m,g,y),Br(g,y,0,m,1,0);break;case Or:ar(p,f,m,g,y);break;case $r:te(p,f,m,g,y,1);break;case Vr:te(p,f,m,g,y,1),Br(g,y,0,m,1,0);break;case Mr:te(p,f,m,g,y,0);break;case Wr:te(p,f,m,g,y,0),Br(g,y,1,m,1,0);break;case Pr:nr(p,f,m,g,y);break;case Kr:nr(p,f,m,g,y),kr(g,y,m,1,0);break;case Hr:rr(p,f,m,g,y);break;default:t(0)}l+=A,c+=h}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Be(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function ke(e,n,r,a,s,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ma[e.Z]);n<r;++n)ma[e.Z](o,l,a,s,a,s,i),o=a,l=s,s+=i;e.qd=o,e.rd=l}}function Ce(e,n){var r=e.l.ma,a=0==r.Z||1==r.Z?e.l.j:e.C;if(a=e.C<a?a:e.C,t(n<=e.l.o),n>a){var s=e.l.width,i=r.ca,o=r.tb+s*a,l=e.V,A=e.Ba+e.c*a,u=e.gc;t(1==e.ab),t(3==u[0].hc),Xn(u[0],a,n,l,A,i,o),ke(r,a,n,i,o,s)}e.C=e.Ma=n}function Ne(e,n,r,a,s,i,o){var l=e.$/a,A=e.$%a,u=e.m,c=e.s,h=r+e.$,d=h;s=r+a*s;var p=r+a*i,f=280+c.ua,m=e.Pb?l:16777216,g=0<c.ua?c.Wa:null,y=c.wc,b=h<p?we(c,A,l):null;t(e.C<i),t(p<=s);var w=!1;e:for(;;){for(;w||h<p;){var v=0;if(l>=m){var N=h-r;t((m=e).Pb),m.wd=m.m,m.xd=N,0<m.s.ua&&_(m.s.Wa,m.s.vb),m=l+ea}if(A&y||(b=we(c,A,l)),t(null!=b),b.Qb&&(n[h]=b.qb,w=!0),!w)if(C(u),b.jc){v=u,N=n;var S=h,I=b.pd[x(v)&$n-1];t(b.jc),256>I.g?(k(v,v.u+I.g),N[S]=I.value,v=0):(k(v,v.u+I.g-256),t(256<=I.value),v=I.value),0==v&&(w=!0)}else v=ye(b.G[0],b.H[0],u);if(u.h)break;if(w||256>v){if(!w)if(b.nd)n[h]=(b.qb|v<<8)>>>0;else{if(C(u),w=ye(b.G[1],b.H[1],u),C(u),N=ye(b.G[2],b.H[2],u),S=ye(b.G[3],b.H[3],u),u.h)break;n[h]=(S<<24|w<<16|v<<8|N)>>>0}if(w=!1,++h,++A>=a&&(A=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=g))for(;d<h;)v=n[d++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else if(280>v){if(v=me(v-256,u),N=ye(b.G[4],b.H[4],u),C(u),N=ge(a,N=me(N,u)),u.h)break;if(h-r<N||s-h<v)break e;for(S=0;S<v;++S)n[h+S]=n[h+S-N];for(h+=v,A+=v;A>=a;)A-=a,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(h<=s),A&y&&(b=we(c,A,l)),null!=g)for(;d<h;)v=n[d++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else{if(!(v<f))break e;for(w=v-280,t(null!=g);d<h;)v=n[d++],g.X[(506832829*v&4294967295)>>>g.Mb]=v;v=h,t(!(w>>>(N=g).Xa)),n[v]=N.X[w],w=!0}w||t(u.h==B(u))}if(e.Pb&&u.h&&h<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&_(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=h-r}return 1}return e.a=3,0}function Se(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Ie(){var t=new on;return null==t?null:(t.a=0,t.xb=fa,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Gn=K,Zn=j,er=X,tr=J,nr=Y,rr=Z,ar=ee,e.VP8LMapColor32b=qn,e.VP8LMapColor8b=Jn,t)}function Ee(e,n,r,o,l){var A=1,h=[e],p=[n],f=o.m,m=o.s,g=null,y=0;e:for(;;){if(r)for(;A&&b(f,1);){var w=h,v=p,B=o,N=1,S=B.m,I=B.gc[B.ab],E=b(S,2);if(B.Oc&1<<E)A=0;else{switch(B.Oc|=1<<E,I.hc=E,I.Ea=w[0],I.nc=v[0],I.K=[null],++B.ab,t(4>=B.ab),E){case 0:case 1:I.b=b(S,3)+2,N=Ee(Q(I.Ea,I.b),Q(I.nc,I.b),0,B,I.K),I.K=I.K[0];break;case 3:var F,T=b(S,8)+1,L=16<T?0:4<T?1:2<T?2:3;if(w[0]=Q(I.Ea,L),I.b=L,F=N=Ee(T,1,0,B,I.K)){var _,R=T,D=I,$=1<<(8>>D.b),M=s($);if(null==M)F=0;else{var P=D.K[0],H=D.w;for(M[0]=D.K[0][0],_=1;_<1*R;++_)M[_]=O(P[H+_],M[_-1]);for(;_<4*$;++_)M[_]=0;D.K[0]=null,D.K[0]=M,F=1}}N=F;break;case 2:break;default:t(0)}A=N}}if(h=h[0],p=p[0],A&&b(f,1)&&!(A=1<=(y=b(f,4))&&11>=y)){o.a=3;break e}var z;if(z=A)t:{var V,W,K,G=o,j=h,q=p,X=y,J=r,Y=G.m,Z=G.s,ee=[null],te=1,ne=0,re=Zr[X];n:for(;;){if(J&&b(Y,1)){var ae=b(Y,3)+2,se=Q(j,ae),ie=Q(q,ae),oe=se*ie;if(!Ee(se,ie,0,G,ee))break n;for(ee=ee[0],Z.xc=ae,V=0;V<oe;++V){var le=ee[V]>>8&65535;ee[V]=le,le>=te&&(te=le+1)}}if(Y.h)break n;for(W=0;5>W;++W){var Ae=qr[W];!W&&0<X&&(Ae+=1<<X),ne<Ae&&(ne=Ae)}var ue=i(te*re,c),ce=te,he=i(ce,d);if(null==he)var de=null;else t(65536>=ce),de=he;var pe=s(ne);if(null==de||null==pe||null==ue){G.a=1;break n}var fe=ue;for(V=K=0;V<te;++V){var me=de[V],ge=me.G,ye=me.H,we=0,ve=1,xe=0;for(W=0;5>W;++W){Ae=qr[W],ge[W]=fe,ye[W]=K,!W&&0<X&&(Ae+=1<<X);r:{var Be,ke=Ae,Ce=G,Ie=pe,Fe=fe,Te=K,Le=0,Ue=Ce.m,_e=b(Ue,1);if(a(Ie,0,0,ke),_e){var Re=b(Ue,1)+1,De=b(Ue,1),Qe=b(Ue,0==De?1:8);Ie[Qe]=1,2==Re&&(Ie[Qe=b(Ue,8)]=1);var Oe=1}else{var $e=s(19),Me=b(Ue,4)+4;if(19<Me){Ce.a=3;var Pe=0;break r}for(Be=0;Be<Me;++Be)$e[Jr[Be]]=b(Ue,3);var He=void 0,ze=void 0,Ve=Ce,We=$e,Ke=ke,Ge=Ie,je=0,qe=Ve.m,Xe=8,Je=i(128,c);a:for(;u(Je,0,7,We,19);){if(b(qe,1)){var Ye=2+2*b(qe,3);if((He=2+b(qe,Ye))>Ke)break a}else He=Ke;for(ze=0;ze<Ke&&He--;){C(qe);var Ze=Je[0+(127&x(qe))];k(qe,qe.u+Ze.g);var et=Ze.value;if(16>et)Ge[ze++]=et,0!=et&&(Xe=et);else{var tt=16==et,nt=et-16,rt=jr[nt],at=b(qe,Gr[nt])+rt;if(ze+at>Ke)break a;for(var st=tt?Xe:0;0<at--;)Ge[ze++]=st}}je=1;break a}je||(Ve.a=3),Oe=je}(Oe=Oe&&!Ue.h)&&(Le=u(Fe,Te,8,Ie,ke)),Oe&&0!=Le?Pe=Le:(Ce.a=3,Pe=0)}if(0==Pe)break n;if(ve&&1==Xr[W]&&(ve=0==fe[K].g),we+=fe[K].g,K+=Pe,3>=W){var it,ot=pe[0];for(it=1;it<Ae;++it)pe[it]>ot&&(ot=pe[it]);xe+=ot}}if(me.nd=ve,me.Qb=0,ve&&(me.qb=(ge[3][ye[3]+0].value<<24|ge[1][ye[1]+0].value<<16|ge[2][ye[2]+0].value)>>>0,0==we&&256>ge[0][ye[0]+0].value&&(me.Qb=1,me.qb+=ge[0][ye[0]+0].value<<8)),me.jc=!me.Qb&&6>xe,me.jc){var lt,At=me;for(lt=0;lt<$n;++lt){var ut=lt,ct=At.pd[ut],ht=At.G[0][At.H[0]+ut];256<=ht.value?(ct.g=ht.g+256,ct.value=ht.value):(ct.g=0,ct.value=0,ut>>=be(ht,8,ct),ut>>=be(At.G[1][At.H[1]+ut],16,ct),ut>>=be(At.G[2][At.H[2]+ut],0,ct),be(At.G[3][At.H[3]+ut],24,ct))}}}Z.vc=ee,Z.Wb=te,Z.Ya=de,Z.yc=ue,z=1;break t}z=0}if(!(A=z)){o.a=3;break e}if(0<y){if(m.ua=1<<y,!U(m.Wa,y)){o.a=1,A=0;break e}}else m.ua=0;var dt=o,pt=h,ft=p,mt=dt.s,gt=mt.xc;if(dt.c=pt,dt.i=ft,mt.md=Q(pt,gt),mt.wc=0==gt?-1:(1<<gt)-1,r){o.xb=pa;break e}if(null==(g=s(h*p))){o.a=1,A=0;break e}A=(A=Ne(o,g,0,h,p,p,null))&&!f.h;break e}return A?(null!=l?l[0]=g:(t(null==g),t(r)),o.$=0,r||Se(m)):Se(m),A}function Fe(e,n){var r=e.c*e.i,a=r+n+16*n;return t(e.c<=n),e.V=s(a),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Te(e,n){var r=e.C,a=n-r,s=e.V,i=e.Ba+e.c*r;for(t(n<=e.l.o);0<a;){var o=16<a?16:a,l=e.l.ma,A=e.l.width,u=A*o,c=l.ca,h=l.tb+A*r,d=e.Ta,p=e.Ua;ve(e,o,s,i),Nr(d,p,c,h,u),ke(l,r,r+o,c,h,A),a-=o,s+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Le(){this.ub=this.yd=this.td=this.Rb=0}function Ue(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _e(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Re(){this.Yb=function(){var e=[];return function e(t,n,r){for(var a=r[n],s=0;s<a&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));s++)e(t[s],n+1,r)}(e,0,[3,11]),e}()}function De(){this.jb=s(3),this.Wc=o([4,8],Re),this.Xc=o([4,17],Re)}function Qe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Oe(){this.ld=this.La=this.dd=this.tc=0}function $e(){this.Na=this.la=0}function Me(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pe(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oe),this.Y=0,this.ya=Array(new Pe),this.aa=0,this.l=new Ke}function ze(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ve(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Le,this.Kc=new Ue,this.ed=new Qe,this.Qa=new _e,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,w),this.ia=0,this.pb=i(4,Me),this.Pa=new De,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ze),this.Hd=0,this.rb=Array(new $e),this.sb=0,this.wa=Array(new Oe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pe),this.L=this.aa=0,this.gd=o([4,2],Oe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function We(e,t){return 0>e?0:e>t?t:e}function Ke(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ge(){var e=new Ve;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ra||(ra=Je)),e}function je(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function qe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Xe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return je(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,s=n.w,i=n.ha;if(4>i)return je(e,7,"Truncated header.");var o=r[s+0]|r[s+1]<<8|r[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return je(e,3,"Incorrect keyframe parameters.");if(!l.yd)return je(e,4,"Frame not displayable.");s+=3,i-=3;var A=e.Kc;if(l.Rb){if(7>i)return je(e,7,"cannot parse picture header");if(!qe(r,s,i))return je(e,3,"Bad code word");A.c=16383&(r[s+4]<<8|r[s+3]),A.Td=r[s+4]>>6,A.i=16383&(r[s+6]<<8|r[s+5]),A.Ud=r[s+6]>>6,s+=7,i-=7,e.za=A.c+15>>4,e.Ub=A.i+15>>4,n.width=A.c,n.height=A.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,a((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,a(o.Zb,0,0,o.Zb.length),a(o.Lb,0,0,o.Lb)}if(l.ub>i)return je(e,7,"bad partition length");p(o=e.m,r,s,l.ub),s+=l.ub,i-=l.ub,l.Rb&&(A.Ld=S(o),A.Kd=S(o)),A=e.Qa;var u,c=e.Pa;if(t(null!=o),t(null!=A),A.Cb=S(o),A.Cb){if(A.Bb=S(o),S(o)){for(A.Fb=S(o),u=0;4>u;++u)A.Zb[u]=S(o)?m(o,7):0;for(u=0;4>u;++u)A.Lb[u]=S(o)?m(o,6):0}if(A.Bb)for(u=0;3>u;++u)c.jb[u]=S(o)?f(o,8):255}else A.Bb=0;if(o.Ka)return je(e,3,"cannot parse segment header");if((A=e.ed).zd=S(o),A.Tb=f(o,6),A.wb=f(o,3),A.Pc=S(o),A.Pc&&S(o)){for(c=0;4>c;++c)S(o)&&(A.vd[c]=m(o,6));for(c=0;4>c;++c)S(o)&&(A.od[c]=m(o,6))}if(e.L=0==A.Tb?0:A.zd?1:2,o.Ka)return je(e,3,"cannot parse filter header");var h=i;if(i=u=s,s=u+h,A=h,e.Xb=(1<<f(e.m,2))-1,h<3*(c=e.Xb))r=7;else{for(u+=3*c,A-=3*c,h=0;h<c;++h){var d=r[i+0]|r[i+1]<<8|r[i+2]<<16;d>A&&(d=A),p(e.Jc[+h],r,u,d),u+=d,A-=d,i+=3}p(e.Jc[+c],r,u,A),r=u<s?0:5}if(0!=r)return je(e,r,"cannot parse partitions");for(r=f(u=e.m,7),i=S(u)?m(u,4):0,s=S(u)?m(u,4):0,A=S(u)?m(u,4):0,c=S(u)?m(u,4):0,u=S(u)?m(u,4):0,h=e.Qa,d=0;4>d;++d){if(h.Cb){var g=h.Zb[d];h.Fb||(g+=r)}else{if(0<d){e.pb[d]=e.pb[0];continue}g=r}var y=e.pb[d];y.Sc[0]=ta[We(g+i,127)],y.Sc[1]=na[We(g+0,127)],y.Eb[0]=2*ta[We(g+s,127)],y.Eb[1]=101581*na[We(g+A,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ta[We(g+c,117)],y.Qc[1]=na[We(g+u,127)],y.lc=g+u}if(!l.Rb)return je(e,4,"Not a key frame.");for(S(o),l=e.Pa,r=0;4>r;++r){for(i=0;8>i;++i)for(s=0;3>s;++s)for(A=0;11>A;++A)c=I(o,Aa[r][i][s][A])?f(o,8):oa[r][i][s][A],l.Wc[r][i].Yb[s][A]=c;for(i=0;17>i;++i)l.Xc[r][i]=l.Wc[r][ua[i]]}return e.kc=S(o),e.kc&&(e.Bd=f(o,8)),e.cb=1}function Je(e,t,n,r,a,s,i){var o=t[a].Yb[n];for(n=0;16>a;++a){if(!I(e,o[n+0]))return a;for(;!I(e,o[n+1]);)if(o=t[++a].Yb[0],n=0,16==a)return 16;var l=t[a+1].Yb;if(I(e,o[n+2])){var A=e,u=0;if(I(A,(h=o)[(c=n)+3]))if(I(A,h[c+6])){for(o=0,c=2*(u=I(A,h[c+8]))+(h=I(A,h[c+9+u])),u=0,h=aa[c];h[o];++o)u+=u+I(A,h[o]);u+=3+(8<<c)}else I(A,h[c+7])?(u=7+2*I(A,165),u+=I(A,145)):u=5+I(A,159);else u=I(A,h[c+4])?3+I(A,h[c+5]):2;o=l[2]}else u=1,o=l[1];l=i+sa[a],0>(A=e).b&&N(A);var c,h=A.b,d=(c=A.Ca>>1)-(A.I>>h)>>31;--A.b,A.Ca+=d,A.Ca|=1,A.I-=(c+1&d)<<h,s[l]=((u^d)-d)*r[(0<a)+0]}return 16}function Ye(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,a(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,n){if(null==e)return 0;if(null==n)return je(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Xe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=$a[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var A;if(e.Qa.Cb){var u=e.Qa.Lb[o];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(A=0;1>=A;++A){var c=e.gd[o][A],h=u;if(l.Pc&&(h+=l.vd[0],A&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var d=h;0<l.wb&&(d=4<l.wb?d>>2:d>>1)>9-l.wb&&(d=9-l.wb),1>d&&(d=1),c.dd=d,c.tc=2*h+d,c.ld=40<=h?2:15<=h?1:0}else c.tc=0;c.La=A}}}o=0}else je(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=Pa);e:{o=e.Ic,l=4*(d=e.za);var p=32*d,f=d+1,m=0<e.L?d*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*d;if((c=l+832+(A=3*(16*o+$a[e.L])/2*p)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=c)o=0;else{if(c>e.Vb){if(e.Vb=0,e.Ec=s(c),e.Fc=0,null==e.Ec){o=je(e,1,"no memory during frame initialization.");break e}e.Vb=c}c=e.Ec,h=e.Fc,e.Ac=c,e.Bc=h,h+=l,e.Gd=i(p,ze),e.Hd=0,e.rb=i(f+1,$e),e.sb=1,e.wa=m?i(m,Oe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=d),t(!0),e.oc=c,e.pc=h,h+=832,e.ya=i(g,Pe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=d),e.R=16*d,e.B=8*d,d=(p=$a[e.L])*e.R,p=p/2*e.B,e.sa=c,e.ta=h+d,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,h+=A,e.mb=u?c:null,e.nb=u?h:null,t(h+u<=e.Fc+e.Vb),Ye(e),a(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Tr){for(o=-255;255>=o;++o)Sr[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Ir[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Er[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Fr[255+o]=0>o?0:255<o?255:o;Tr=1}sr=At,ir=st,lr=it,Ar=ot,ur=lt,or=at,cr=jt,hr=qt,dr=Yt,pr=Zt,fr=Xt,mr=Jt,gr=en,yr=tn,br=Ht,wr=zt,vr=Vt,xr=Wt,ha[0]=kt,ha[1]=ct,ha[2]=xt,ha[3]=Bt,ha[4]=Ct,ha[5]=St,ha[6]=Nt,ha[7]=It,ha[8]=Ft,ha[9]=Et,ca[0]=gt,ca[1]=dt,ca[2]=pt,ca[3]=ft,ca[4]=yt,ca[5]=bt,ca[6]=wt,da[0]=_t,da[1]=ht,da[2]=Tt,da[3]=Lt,da[4]=Dt,da[5]=Rt,da[6]=Qt,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,A=e;for(i=0;i<A.za;++i){var u=l,c=A,h=c.Ac,d=c.Bc+4*i,p=c.zc,f=c.ya[c.aa+i];if(c.Qa.Bb?f.$b=I(u,c.Pa.jb[0])?2+I(u,c.Pa.jb[2]):I(u,c.Pa.jb[1]):f.$b=0,c.kc&&(f.Ad=I(u,c.Bd)),f.Za=!I(u,145)+0,f.Za){var m=f.Ob,g=0;for(c=0;4>c;++c){var y,b=p[0+c];for(y=0;4>y;++y){b=la[h[d+y]][b];for(var w=ia[I(u,b[0])];0<w;)w=ia[2*w+I(u,b[w])];b=-w,h[d+y]=b}r(m,g,h,d,4),g+=4,p[0+c]=b}}else b=I(u,156)?I(u,128)?1:3:I(u,163)?2:0,f.Ob[0]=b,a(h,d,b,4),a(p,0,b,4);f.Dd=I(u,142)?I(u,114)?I(u,183)?1:3:2:0}if(A.m.Ka)return je(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(A=o,u=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],d=l.kc?i.Ad:0)u.la=h.la=0,i.Za||(u.Na=h.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var v,x;if(u=h,h=A,d=l.Pa.Xc,p=l.ya[l.aa+l.ja],f=l.pb[p.$b],c=p.ad,m=0,g=l.rb[l.sb-1],b=y=0,a(c,m,0,384),p.Za)var B=0,k=d[3];else{w=s(16);var C=u.Na+g.Na;if(C=ra(h,d[1],C,f.Eb,0,w,0),u.Na=g.Na=(0<C)+0,1<C)sr(w,0,c,m);else{var N=w[0]+3>>3;for(w=0;256>w;w+=16)c[m+w]=N}B=1,k=d[0]}var S=15&u.la,E=15&g.la;for(w=0;4>w;++w){var F=1&E;for(N=x=0;4>N;++N)S=S>>1|(F=(C=ra(h,k,C=F+(1&S),f.Sc,B,c,m))>B)<<7,x=x<<2|(3<C?3:1<C?2:0!=c[m+0]),m+=16;S>>=4,E=E>>1|F<<7,y=(y<<8|x)>>>0}for(k=S,B=E>>4,v=0;4>v;v+=2){for(x=0,S=u.la>>4+v,E=g.la>>4+v,w=0;2>w;++w){for(F=1&E,N=0;2>N;++N)C=F+(1&S),S=S>>1|(F=0<(C=ra(h,d[2],C,f.Qc,0,c,m)))<<3,x=x<<2|(3<C?3:1<C?2:0!=c[m+0]),m+=16;S>>=2,E=E>>1|F<<5}b|=x<<4*v,k|=S<<4<<v,B|=(240&E)<<v}u.la=k,g.la=B,p.Hc=y,p.Gc=b,p.ia=43690&b?0:f.ia,d=!(y|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!d),A.Ka)return je(e,7,"Premature end-of-file encountered.")}if(Ye(e),l=n,A=1,i=(o=e).D,u=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(i.M=o.M,i.uc=u,_n(o,i),A=1,i=(x=o.D).Nb,u=(b=$a[o.L])*o.R,h=b/2*o.B,w=16*i*o.R,N=8*i*o.B,d=o.sa,p=o.ta-u+w,f=o.qa,c=o.ra-h+N,m=o.Ha,g=o.Ia-h+N,E=0==(S=x.M),y=S>=o.Va-1,2==o.Aa&&_n(o,x),x.uc)for(F=(C=o).D.M,t(C.D.uc),x=C.yb;x<C.Hb;++x){B=x,k=F;var T=(L=(P=C).D).Nb;v=P.R;var L=L.wa[L.Y+B],U=P.sa,_=P.ta+16*T*v+16*B,R=L.dd,D=L.tc;if(0!=D)if(t(3<=D),1==P.L)0<B&&wr(U,_,v,D+4),L.La&&xr(U,_,v,D),0<k&&br(U,_,v,D+4),L.La&&vr(U,_,v,D);else{var Q=P.B,O=P.qa,$=P.ra+8*T*Q+8*B,M=P.Ha,P=P.Ia+8*T*Q+8*B;T=L.ld,0<B&&(hr(U,_,v,D+4,R,T),pr(O,$,M,P,Q,D+4,R,T)),L.La&&(mr(U,_,v,D,R,T),yr(O,$,M,P,Q,D,R,T)),0<k&&(cr(U,_,v,D+4,R,T),dr(O,$,M,P,Q,D+4,R,T)),L.La&&(fr(U,_,v,D,R,T),gr(O,$,M,P,Q,D,R,T))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(x=16*S,S=16*(S+1),E?(l.y=o.sa,l.O=o.ta+w,l.f=o.qa,l.N=o.ra+N,l.ea=o.Ha,l.W=o.Ia+N):(x-=b,l.y=d,l.O=p,l.f=f,l.N=c,l.ea=m,l.W=g),y||(S-=b),S>l.o&&(S=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&x<S&&(l.J=hn(o,l,x,S-x),l.F=o.mb,null==l.F&&0==l.F.length)){A=je(o,3,"Could not decode alpha data.");break e}x<l.j&&(b=l.j-x,x=l.j,t(!(1&b)),l.O+=o.R*b,l.N+=o.B*(b>>1),l.W+=o.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),x<S&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=x-l.j,l.U=l.va-l.v,l.T=S-x,A=l.put(l))}i+1!=o.Ic||y||(r(o.sa,o.ta-u,d,p+16*o.R,u),r(o.qa,o.ra-h,f,c+8*o.B,h),r(o.Ha,o.Ia-h,m,g+8*o.B,h))}if(!A)return je(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0}function et(e,t,n,r,a){a=e[t+n+32*r]+(a>>3),e[t+n+32*r]=-256&a?0>a?0:255:a}function tt(e,t,n,r,a,s){et(e,t,0,n,r+a),et(e,t,1,n,r+s),et(e,t,2,n,r-s),et(e,t,3,n,r-a)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var a,i=0,o=s(16);for(a=0;4>a;++a){var l=e[t+0]+e[t+8],A=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-nt(e[t+12]),c=nt(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+c,o[i+1]=A+u,o[i+2]=A-u,o[i+3]=l-c,i+=4,t++}for(a=i=0;4>a;++a)l=(e=o[i+0]+4)+o[i+8],A=e-o[i+8],u=(35468*o[i+4]>>16)-nt(o[i+12]),et(n,r,0,0,l+(c=nt(o[i+4])+(35468*o[i+12]>>16))),et(n,r,1,0,A+u),et(n,r,2,0,A-u),et(n,r,3,0,l-c),i++,r+=32}function at(e,t,n,r){var a=e[t+0]+4,s=35468*e[t+4]>>16,i=nt(e[t+4]),o=35468*e[t+1]>>16;tt(n,r,0,a+i,e=nt(e[t+1]),o),tt(n,r,1,a+s,e,o),tt(n,r,2,a-s,e,o),tt(n,r,3,a-i,e,o)}function st(e,t,n,r,a){rt(e,t,n,r),a&&rt(e,t+16,n,r+4)}function it(e,t,n,r){ir(e,t+0,n,r,1),ir(e,t+32,n,r+128,1)}function ot(e,t,n,r){var a;for(e=e[t+0]+4,a=0;4>a;++a)for(t=0;4>t;++t)et(n,r,t,a,e)}function lt(e,t,n,r){e[t+0]&&Ar(e,t+0,n,r),e[t+16]&&Ar(e,t+16,n,r+4),e[t+32]&&Ar(e,t+32,n,r+128),e[t+48]&&Ar(e,t+48,n,r+128+4)}function At(e,t,n,r){var a,i=s(16);for(a=0;4>a;++a){var o=e[t+0+a]+e[t+12+a],l=e[t+4+a]+e[t+8+a],A=e[t+4+a]-e[t+8+a],u=e[t+0+a]-e[t+12+a];i[0+a]=o+l,i[8+a]=o-l,i[4+a]=u+A,i[12+a]=u-A}for(a=0;4>a;++a)o=(e=i[0+4*a]+3)+i[3+4*a],l=i[1+4*a]+i[2+4*a],A=i[1+4*a]-i[2+4*a],u=e-i[3+4*a],n[r+0]=o+l>>3,n[r+16]=u+A>>3,n[r+32]=o-l>>3,n[r+48]=u-A>>3,r+=64}function ut(e,t,n){var r,a=t-32,s=_r,i=255-e[a-1];for(r=0;r<n;++r){var o,l=s,A=i+e[t-1];for(o=0;o<n;++o)e[t+o]=l[A+e[a+o]];t+=32}}function ct(e,t){ut(e,t,4)}function ht(e,t){ut(e,t,8)}function dt(e,t){ut(e,t,16)}function pt(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function ft(e,t){var n;for(n=16;0<n;--n)a(e,t,e[t-1],16),t+=32}function mt(e,t,n){var r;for(r=0;16>r;++r)a(t,n+32*r,e,16)}function gt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];mt(r>>5,e,t)}function yt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];mt(r>>4,e,t)}function bt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];mt(r>>4,e,t)}function wt(e,t){mt(128,e,t)}function vt(e,t,n){return e+2*t+n+2>>2}function xt(e,t){var n,a=t-32;for(a=new Uint8Array([vt(e[a-1],e[a+0],e[a+1]),vt(e[a+0],e[a+1],e[a+2]),vt(e[a+1],e[a+2],e[a+3]),vt(e[a+2],e[a+3],e[a+4])]),n=0;4>n;++n)r(e,t+32*n,a,0,a.length)}function Bt(e,t){var n=e[t-1],r=e[t-1+32],a=e[t-1+64],s=e[t-1+96];E(e,t+0,16843009*vt(e[t-1-32],n,r)),E(e,t+32,16843009*vt(n,r,a)),E(e,t+64,16843009*vt(r,a,s)),E(e,t+96,16843009*vt(a,s,s))}function kt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)a(e,t+32*n,r,4)}function Ct(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],A=e[t+3-32];e[t+0+96]=vt(r,a,e[t-1+96]),e[t+1+96]=e[t+0+64]=vt(n,r,a),e[t+2+96]=e[t+1+64]=e[t+0+32]=vt(s,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=vt(i,s,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=vt(o,i,s),e[t+3+32]=e[t+2+0]=vt(l,o,i),e[t+3+0]=vt(A,l,o)}function Nt(e,t){var n=e[t+1-32],r=e[t+2-32],a=e[t+3-32],s=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=vt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=vt(n,r,a),e[t+2+0]=e[t+1+32]=e[t+0+64]=vt(r,a,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=vt(a,s,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=vt(s,i,o),e[t+3+64]=e[t+2+96]=vt(i,o,l),e[t+3+96]=vt(o,l,l)}function St(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],A=e[t+3-32];e[t+0+0]=e[t+1+64]=s+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+A+1>>1,e[t+0+96]=vt(a,r,n),e[t+0+64]=vt(r,n,s),e[t+0+32]=e[t+1+96]=vt(n,s,i),e[t+1+32]=e[t+2+96]=vt(s,i,o),e[t+2+32]=e[t+3+96]=vt(i,o,l),e[t+3+32]=vt(o,l,A)}function It(e,t){var n=e[t+0-32],r=e[t+1-32],a=e[t+2-32],s=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],A=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+a+1>>1,e[t+2+0]=e[t+1+64]=a+s+1>>1,e[t+3+0]=e[t+2+64]=s+i+1>>1,e[t+0+32]=vt(n,r,a),e[t+1+32]=e[t+0+96]=vt(r,a,s),e[t+2+32]=e[t+1+96]=vt(a,s,i),e[t+3+32]=e[t+2+96]=vt(s,i,o),e[t+3+64]=vt(i,o,l),e[t+3+96]=vt(o,l,A)}function Et(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+a+1>>1,e[t+2+32]=e[t+0+64]=a+s+1>>1,e[t+1+0]=vt(n,r,a),e[t+3+0]=e[t+1+32]=vt(r,a,s),e[t+3+32]=e[t+1+64]=vt(a,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function Ft(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],s=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],A=e[t+2-32];e[t+0+0]=e[t+2+32]=n+i+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=a+r+1>>1,e[t+0+96]=s+a+1>>1,e[t+3+0]=vt(o,l,A),e[t+2+0]=vt(i,o,l),e[t+1+0]=e[t+3+32]=vt(n,i,o),e[t+1+32]=e[t+3+64]=vt(r,n,i),e[t+1+64]=e[t+3+96]=vt(a,r,n),e[t+1+96]=vt(s,a,r)}function Tt(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Lt(e,t){var n;for(n=0;8>n;++n)a(e,t,e[t-1],8),t+=32}function Ut(e,t,n){var r;for(r=0;8>r;++r)a(t,n+32*r,e,8)}function _t(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Ut(r>>4,e,t)}function Rt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Ut(r>>3,e,t)}function Dt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Ut(r>>3,e,t)}function Qt(e,t){Ut(128,e,t)}function Ot(e,t,n){var r=e[t-n],a=e[t+0],s=3*(a-r)+Lr[1020+e[t-2*n]-e[t+n]],i=Ur[112+(s+4>>3)];e[t-n]=_r[255+r+Ur[112+(s+3>>3)]],e[t+0]=_r[255+a-i]}function $t(e,t,n,r){var a=e[t+0],s=e[t+n];return Rr[255+e[t-2*n]-e[t-n]]>r||Rr[255+s-a]>r}function Mt(e,t,n,r){return 4*Rr[255+e[t-n]-e[t+0]]+Rr[255+e[t-2*n]-e[t+n]]<=r}function Pt(e,t,n,r,a){var s=e[t-3*n],i=e[t-2*n],o=e[t-n],l=e[t+0],A=e[t+n],u=e[t+2*n],c=e[t+3*n];return 4*Rr[255+o-l]+Rr[255+i-A]>r?0:Rr[255+e[t-4*n]-s]<=a&&Rr[255+s-i]<=a&&Rr[255+i-o]<=a&&Rr[255+c-u]<=a&&Rr[255+u-A]<=a&&Rr[255+A-l]<=a}function Ht(e,t,n,r){var a=2*r+1;for(r=0;16>r;++r)Mt(e,t+r,n,a)&&Ot(e,t+r,n)}function zt(e,t,n,r){var a=2*r+1;for(r=0;16>r;++r)Mt(e,t+r*n,1,a)&&Ot(e,t+r*n,1)}function Vt(e,t,n,r){var a;for(a=3;0<a;--a)Ht(e,t+=4*n,n,r)}function Wt(e,t,n,r){var a;for(a=3;0<a;--a)zt(e,t+=4,n,r)}function Kt(e,t,n,r,a,s,i,o){for(s=2*s+1;0<a--;){if(Pt(e,t,n,s,i))if($t(e,t,n,o))Ot(e,t,n);else{var l=e,A=t,u=n,c=l[A-2*u],h=l[A-u],d=l[A+0],p=l[A+u],f=l[A+2*u],m=27*(y=Lr[1020+3*(d-h)+Lr[1020+c-p]])+63>>7,g=18*y+63>>7,y=9*y+63>>7;l[A-3*u]=_r[255+l[A-3*u]+y],l[A-2*u]=_r[255+c+g],l[A-u]=_r[255+h+m],l[A+0]=_r[255+d-m],l[A+u]=_r[255+p-g],l[A+2*u]=_r[255+f-y]}t+=r}}function Gt(e,t,n,r,a,s,i,o){for(s=2*s+1;0<a--;){if(Pt(e,t,n,s,i))if($t(e,t,n,o))Ot(e,t,n);else{var l=e,A=t,u=n,c=l[A-u],h=l[A+0],d=l[A+u],p=Ur[112+(4+(f=3*(h-c))>>3)],f=Ur[112+(f+3>>3)],m=p+1>>1;l[A-2*u]=_r[255+l[A-2*u]+m],l[A-u]=_r[255+c+f],l[A+0]=_r[255+h-p],l[A+u]=_r[255+d-m]}t+=r}}function jt(e,t,n,r,a,s){Kt(e,t,n,1,16,r,a,s)}function qt(e,t,n,r,a,s){Kt(e,t,1,n,16,r,a,s)}function Xt(e,t,n,r,a,s){var i;for(i=3;0<i;--i)Gt(e,t+=4*n,n,1,16,r,a,s)}function Jt(e,t,n,r,a,s){var i;for(i=3;0<i;--i)Gt(e,t+=4,1,n,16,r,a,s)}function Yt(e,t,n,r,a,s,i,o){Kt(e,t,a,1,8,s,i,o),Kt(n,r,a,1,8,s,i,o)}function Zt(e,t,n,r,a,s,i,o){Kt(e,t,1,a,8,s,i,o),Kt(n,r,1,a,8,s,i,o)}function en(e,t,n,r,a,s,i,o){Gt(e,t+4*a,a,1,8,s,i,o),Gt(n,r+4*a,a,1,8,s,i,o)}function tn(e,t,n,r,a,s,i,o){Gt(e,t+4,1,a,8,s,i,o),Gt(n,r+4,1,a,8,s,i,o)}function nn(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function an(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new d,this.yc=new c}function on(){this.xb=this.a=0,this.l=new Ke,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new v,this.Pb=0,this.wd=new v,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=i(4,an),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ke,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function An(e,t,n,r,a,s,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)a[s+t]=e+n[r+t]&255,e=a[s+t]}function un(e,t,n,r,a,s,i){var o;if(null==e)An(null,null,n,r,a,s,i);else for(o=0;o<i;++o)a[s+o]=e[t+o]+n[r+o]&255}function cn(e,t,n,r,a,s,i){if(null==e)An(null,null,n,r,a,s,i);else{var o,l=e[t+0],A=l,u=l;for(o=0;o<i;++o)A=u+(l=e[t+o])-A,u=n[r+o]+(-256&A?0>A?0:255:A)&255,A=l,a[s+o]=u}}function hn(e,n,a,i){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>a||0>=i||a+i>l)return null;if(!e.Cc){if(null==e.ga){var A;if(e.ga=new ln,(A=null==e.ga)||(A=n.width*n.o,t(0==e.Gb.length),e.Gb=s(A),e.Uc=0,null==e.Gb?A=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,A=1),A=!A),!A){A=e.ga;var u=e.Fa,c=e.P,h=e.qc,d=e.mb,p=e.nb,f=c+1,m=h-1,y=A.l;if(t(null!=u&&null!=d&&null!=n),ma[0]=null,ma[1]=An,ma[2]=un,ma[3]=cn,A.ca=d,A.tb=p,A.c=n.width,A.i=n.height,t(0<A.c&&0<A.i),1>=h)n=0;else if(A.$a=3&u[c+0],A.Z=u[c+0]>>2&3,A.Lc=u[c+0]>>4&3,c=u[c+0]>>6&3,0>A.$a||1<A.$a||4<=A.Z||1<A.Lc||c)n=0;else if(y.put=de,y.ac=he,y.bc=pe,y.ma=A,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,A.$a)e:{t(1==A.$a),n=Ie();t:for(;;){if(null==n){n=0;break e}if(t(null!=A),A.mc=n,n.c=A.c,n.i=A.i,n.l=A.l,n.l.ma=A,n.l.width=A.c,n.l.height=A.i,n.a=0,g(n.m,u,f,m),!Ee(A.c,A.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Be(n.s)?(A.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(A.ic=0,n=Fe(n,A.c)),!n)break t;n=1;break e}A.mc=null,n=0}else n=m>=A.c*A.i;A=!n}if(A)return null;1!=e.ga.Lc?e.Ga=0:i=l-a}t(null!=e.ga),t(a+i<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(f=e.rc,m=e.Vc,y=e.Fa,c=e.P+1+a*n,h=e.mb,d=e.nb+a*n,t(c<=e.P+e.qc),0!=u.Z)for(t(null!=ma[u.Z]),A=0;A<i;++A)ma[u.Z](f,m,y,c,h,d,n),f=h,m=d,d+=n,c+=n;else for(A=0;A<i;++A)r(h,d,y,c,n),f=h,m=d,d+=n,c+=n;e.rc=f,e.Vc=m}else{if(t(null!=u.mc),n=a+i,t(null!=(A=u.mc)),t(n<=A.i),A.C>=n)n=1;else if(u.ic||gn(),u.ic){u=A.V,f=A.Ba,m=A.c;var b=A.i,w=(y=1,c=A.$/m,h=A.$%m,d=A.m,p=A.s,A.$),v=m*b,x=m*n,k=p.wc,N=w<x?we(p,h,c):null;t(w<=v),t(n<=b),t(Be(p));t:for(;;){for(;!d.h&&w<x;){if(h&k||(N=we(p,h,c)),t(null!=N),C(d),256>(b=ye(N.G[0],N.H[0],d)))u[f+w]=b,++w,++h>=m&&(h=0,++c<=n&&!(c%16)&&Ce(A,c));else{if(!(280>b)){y=0;break t}b=me(b-256,d);var S,I=ye(N.G[4],N.H[4],d);if(C(d),!(w>=(I=ge(m,I=me(I,d)))&&v-w>=b)){y=0;break t}for(S=0;S<b;++S)u[f+w+S]=u[f+w+S-I];for(w+=b,h+=b;h>=m;)h-=m,++c<=n&&!(c%16)&&Ce(A,c);w<x&&h&k&&(N=we(p,h,c))}t(d.h==B(d))}Ce(A,c>n?n:c);break t}!y||d.h&&w<v?(y=0,A.a=d.h?5:3):A.$=w,n=y}else n=Ne(A,A.V,A.Ba,A.c,A.i,n,Te);if(!n){i=0;break e}}a+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*o}function dn(e,t,n,r,a,s){for(;0<a--;){var i,o=e,l=t+(n?1:0),A=e,u=t+(n?0:3);for(i=0;i<r;++i){var c=A[u+4*i];255!=c&&(c*=32897,o[l+4*i+0]=o[l+4*i+0]*c>>23,o[l+4*i+1]=o[l+4*i+1]*c>>23,o[l+4*i+2]=o[l+4*i+2]*c>>23)}t+=s}}function pn(e,t,n,r,a){for(;0<r--;){var s;for(s=0;s<n;++s){var i=e[t+2*s+0],o=15&(A=e[t+2*s+1]),l=4369*o,A=(240&A|A>>4)*l>>16;e[t+2*s+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*s+1]=240&A|o}t+=a}}function fn(e,t,n,r,a,s,i,o){var l,A,u=255;for(A=0;A<a;++A){for(l=0;l<r;++l){var c=e[t+l];s[i+4*l]=c,u&=c}t+=n,i+=o}return 255!=u}function mn(e,t,n,r,a){var s;for(s=0;s<a;++s)n[r+s]=e[t+s]>>8}function gn(){Br=dn,kr=pn,Cr=fn,Nr=mn}function yn(n,r,a){e[n]=function(e,n,s,i,o,l,A,u,c,h,d,p,f,m,g,y,b){var w,v=b-1>>1,x=o[l+0]|A[u+0]<<16,B=c[h+0]|d[p+0]<<16;t(null!=e);var k=3*x+B+131074>>2;for(r(e[n+0],255&k,k>>16,f,m),null!=s&&(k=3*B+x+131074>>2,r(s[i+0],255&k,k>>16,g,y)),w=1;w<=v;++w){var C=o[l+w]|A[u+w]<<16,N=c[h+w]|d[p+w]<<16,S=x+C+B+N+524296,I=S+2*(C+B)>>3;k=I+x>>1,x=(S=S+2*(x+N)>>3)+C>>1,r(e[n+2*w-1],255&k,k>>16,f,m+(2*w-1)*a),r(e[n+2*w-0],255&x,x>>16,f,m+(2*w-0)*a),null!=s&&(k=S+B>>1,x=I+N>>1,r(s[i+2*w-1],255&k,k>>16,g,y+(2*w-1)*a),r(s[i+2*w+0],255&x,x>>16,g,y+(2*w+0)*a)),x=C,B=N}1&b||(k=3*x+B+131074>>2,r(e[n+b-1],255&k,k>>16,f,m+(b-1)*a),null!=s&&(k=3*B+x+131074>>2,r(s[i+b-1],255&k,k>>16,g,y+(b-1)*a)))}}function bn(){ga[Dr]=ya,ga[Qr]=wa,ga[Or]=ba,ga[$r]=va,ga[Mr]=xa,ga[Pr]=Ba,ga[Hr]=ka,ga[zr]=wa,ga[Vr]=va,ga[Wr]=xa,ga[Kr]=Ba}function wn(e){return e&~Fa?0>e?0:255:e>>Ea}function vn(e,t){return wn((19077*e>>8)+(26149*t>>8)-14234)}function xn(e,t,n){return wn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function Bn(e,t){return wn((19077*e>>8)+(33050*t>>8)-17685)}function kn(e,t,n,r,a){r[a+0]=vn(e,n),r[a+1]=xn(e,t,n),r[a+2]=Bn(e,t)}function Cn(e,t,n,r,a){r[a+0]=Bn(e,t),r[a+1]=xn(e,t,n),r[a+2]=vn(e,n)}function Nn(e,t,n,r,a){var s=xn(e,t,n);t=s<<3&224|Bn(e,t)>>3,r[a+0]=248&vn(e,n)|s>>5,r[a+1]=t}function Sn(e,t,n,r,a){var s=240&Bn(e,t)|15;r[a+0]=240&vn(e,n)|xn(e,t,n)>>4,r[a+1]=s}function In(e,t,n,r,a){r[a+0]=255,kn(e,t,n,r,a+1)}function En(e,t,n,r,a){Cn(e,t,n,r,a),r[a+3]=255}function Fn(e,t,n,r,a){kn(e,t,n,r,a),r[a+3]=255}function We(e,t){return 0>e?0:e>t?t:e}function Tn(t,n,r){e[t]=function(e,t,a,s,i,o,l,A,u){for(var c=A+(-2&u)*r;A!=c;)n(e[t+0],a[s+0],i[o+0],l,A),n(e[t+1],a[s+0],i[o+0],l,A+r),t+=2,++s,++o,A+=2*r;1&u&&n(e[t+0],a[s+0],i[o+0],l,A)}}function Ln(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Un(e,t,n,r,a){switch(e>>>30){case 3:ir(t,n,r,a,0);break;case 2:or(t,n,r,a);break;case 1:Ar(t,n,r,a)}}function _n(e,t){var n,s,i=t.M,o=t.Nb,l=e.oc,A=e.pc+40,u=e.oc,c=e.pc+584,h=e.oc,d=e.pc+600;for(n=0;16>n;++n)l[A+32*n-1]=129;for(n=0;8>n;++n)u[c+32*n-1]=129,h[d+32*n-1]=129;for(0<i?l[A-1-32]=u[c-1-32]=h[d-1-32]=129:(a(l,A-32-1,127,21),a(u,c-32-1,127,9),a(h,d-32-1,127,9)),s=0;s<e.za;++s){var p=t.ya[t.aa+s];if(0<s){for(n=-1;16>n;++n)r(l,A+32*n-4,l,A+32*n+12,4);for(n=-1;8>n;++n)r(u,c+32*n-4,u,c+32*n+4,4),r(h,d+32*n-4,h,d+32*n+4,4)}var f=e.Gd,m=e.Hd+s,g=p.ad,y=p.Hc;if(0<i&&(r(l,A-32,f[m].y,0,16),r(u,c-32,f[m].f,0,8),r(h,d-32,f[m].ea,0,8)),p.Za){var b=l,w=A-32+16;for(0<i&&(s>=e.za-1?a(b,w,f[m].y[15],4):r(b,w,f[m+1].y,0,4)),n=0;4>n;n++)b[w+128+n]=b[w+256+n]=b[w+384+n]=b[w+0+n];for(n=0;16>n;++n,y<<=2)b=l,w=A+Oa[n],ha[p.Ob[n]](b,w),Un(y,g,16*+n,b,w)}else if(b=Ln(s,i,p.Ob[0]),ca[b](l,A),0!=y)for(n=0;16>n;++n,y<<=2)Un(y,g,16*+n,l,A+Oa[n]);for(n=p.Gc,b=Ln(s,i,p.Dd),da[b](u,c),da[b](h,d),y=g,b=u,w=c,255&(p=0|n)&&(170&p?lr(y,256,b,w):ur(y,256,b,w)),p=h,y=d,255&(n>>=8)&&(170&n?lr(g,320,p,y):ur(g,320,p,y)),i<e.Ub-1&&(r(f[m].y,0,l,A+480,16),r(f[m].f,0,u,c+224,8),r(f[m].ea,0,h,d+224,8)),n=8*o*e.B,f=e.sa,m=e.ta+16*s+16*o*e.R,g=e.qa,p=e.ra+8*s+n,y=e.Ha,b=e.Ia+8*s+n,n=0;16>n;++n)r(f,m+n*e.R,l,A+32*n,16);for(n=0;8>n;++n)r(g,p+n*e.B,u,c+32*n,8),r(y,b+n*e.B,h,d+32*n,8)}}function Rn(e,r,a,s,i,o,l,A,u){var c=[0],h=[0],d=0,p=null!=u?u.kd:0,f=null!=u?u:new rn;if(null==e||12>a)return 7;f.data=e,f.w=r,f.ha=a,r=[r],a=[a],f.gb=[f.gb];e:{var m=r,y=a,b=f.gb;if(t(null!=e),t(null!=y),t(null!=b),b[0]=0,12<=y[0]&&!n(e,m[0],"RIFF")){if(n(e,m[0]+8,"WEBP")){b=3;break e}var w=L(e,m[0]+4);if(12>w||4294967286<w){b=3;break e}if(p&&w>y[0]-8){b=7;break e}b[0]=w,m[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(w=0<f.gb[0],a=a[0];;){e:{var x=e;y=r,b=a;var B=c,k=h,C=m=[0];if((I=d=[d])[0]=0,8>b[0])b=7;else{if(!n(x,y[0],"VP8X")){if(10!=L(x,y[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var N=L(x,y[0]+8),S=1+T(x,y[0]+12);if(2147483648<=S*(x=1+T(x,y[0]+15))){b=3;break e}null!=C&&(C[0]=N),null!=B&&(B[0]=S),null!=k&&(k[0]=x),y[0]+=18,b[0]-=18,I[0]=1}b=0}}if(d=d[0],m=m[0],0!=b)return b;if(y=!!(2&m),!w&&d)return 3;if(null!=o&&(o[0]=!!(16&m)),null!=l&&(l[0]=y),null!=A&&(A[0]=0),l=c[0],m=h[0],d&&y&&null==u){b=0;break}if(4>a){b=7;break}if(w&&d||!w&&!d&&!n(e,r[0],"ALPH")){a=[a],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{N=e,b=r,w=a;var I=f.gb;B=f.na,k=f.P,C=f.Sa,S=22,t(null!=N),t(null!=w),x=b[0];var E=w[0];for(t(null!=B),t(null!=C),B[0]=null,k[0]=null,C[0]=0;;){if(b[0]=x,w[0]=E,8>E){b=7;break e}var F=L(N,x+4);if(4294967286<F){b=3;break e}var U=8+F+1&-2;if(S+=U,0<I&&S>I){b=3;break e}if(!n(N,x,"VP8 ")||!n(N,x,"VP8L")){b=0;break e}if(E[0]<U){b=7;break e}n(N,x,"ALPH")||(B[0]=N,k[0]=x+8,C[0]=F),x+=U,E-=U}}if(a=a[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=b)break}a=[a],f.Ja=[f.Ja],f.xa=[f.xa];e:if(I=e,b=r,w=a,B=f.gb[0],k=f.Ja,C=f.xa,N=b[0],x=!n(I,N,"VP8 "),S=!n(I,N,"VP8L"),t(null!=I),t(null!=w),t(null!=k),t(null!=C),8>w[0])b=7;else{if(x||S){if(I=L(I,N+4),12<=B&&I>B-12){b=3;break e}if(p&&I>w[0]-8){b=7;break e}k[0]=I,b[0]+=8,w[0]-=8,C[0]=S}else C[0]=5<=w[0]&&47==I[N+0]&&!(I[N+4]>>5),k[0]=w[0];b=0}if(a=a[0],f.Ja=f.Ja[0],f.xa=f.xa[0],r=r[0],0!=b)break;if(4294967286<f.Ja)return 3;if(null==A||y||(A[0]=f.xa?2:1),l=[l],m=[m],f.xa){if(5>a){b=7;break}A=l,p=m,y=o,null==e||5>a?e=0:5<=a&&47==e[r+0]&&!(e[r+4]>>5)?(w=[0],I=[0],B=[0],g(k=new v,e,r,a),fe(k,w,I,B)?(null!=A&&(A[0]=w[0]),null!=p&&(p[0]=I[0]),null!=y&&(y[0]=B[0]),e=1):e=0):e=0}else{if(10>a){b=7;break}A=m,null==e||10>a||!qe(e,r+3,a-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,y=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!y||!e?e=0:(l&&(l[0]=y),A&&(A[0]=e),e=1))}if(!e)return 3;if(l=l[0],m=m[0],d&&(c[0]!=l||h[0]!=m))return 3;null!=u&&(u[0]=f,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-a));break}return 0==b||7==b&&d&&null==u?(null!=o&&(o[0]|=null!=f.na&&0<f.na.length),null!=s&&(s[0]=l),null!=i&&(i[0]=m),0):b}function Dn(e,t,n){var r=t.width,a=t.height,s=0,i=0,o=r,l=a;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,i=e.j,11>n||(s&=-2,i&=-2),0>s||0>i||0>=o||0>=l||s+o>r||i+l>a))return 0;if(t.v=s,t.j=i,t.va=s+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!D(o,l,n=[e.ib],s=[e.hb]))return 0;t.ib=n[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*a/4,t.Kb=0),1}function Qn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function On(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var a=n.cd,i=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=a||0>=i||o+a>e||l+i>t)return 2;e=a,t=i}if(n.da){if(!D(e,t,a=[n.ib],i=[n.hb]))return 2;e=a[0],t=i[0]}}r.width=e,r.height=t;e:{var A=r.width,u=r.height;if(e=r.S,0>=A||0>=u||!(e>=Dr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=i=a=t=0;var c=(l=A*Ha[e])*u;if(11>e||(i=(u+1)/2*(t=(A+1)/2),12==e&&(o=(a=A)*u)),null==(u=s(c+2*i+o))){e=1;break e}r.sd=u,11>e?((A=r.f.RGBA).eb=u,A.fb=0,A.A=l,A.size=c):((A=r.f.kb).y=u,A.O=0,A.fa=l,A.Fd=c,A.f=u,A.N=0+c,A.Ab=t,A.Cd=i,A.ea=u,A.W=0+c+i,A.Db=t,A.Ed=i,12==e&&(A.F=u,A.J=0+c+2*i),A.Tc=o,A.lb=a)}if(t=1,a=r.S,i=r.width,o=r.height,a>=Dr&&13>a)if(11>a)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*Ha[a],t&=null!=e.eb;else{e=r.f.kb,l=(i+1)/2,c=(o+1)/2,A=Math.abs(e.fa),u=Math.abs(e.Ab);var h=Math.abs(e.Db),d=Math.abs(e.lb),p=d*(o-1)+i;t&=A*(o-1)+i<=e.Fd,t&=u*(c-1)+l<=e.Cd,t=(t&=h*(c-1)+l<=e.Ed)&A>=i&u>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==a&&(t&=d>=i,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Qn(r)),e}var $n=64,Mn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pn=24,Hn=32,zn=8,Vn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return P(P(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return P(e,t[n-1])},e.Predictor7=function(e,t,n){return P(e,t[n+0])},e.Predictor8=function(e,t,n){return P(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return P(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return P(P(e,t[n-1]),P(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=V(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+V(r>>16&255,e>>16&255,t>>16&255)+V(r>>8&255,e>>8&255,t>>8&255)+V(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(H((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|H((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|H((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(z((e=P(e,t[n+0]))>>24&255,r>>24&255)<<24|z(e>>16&255,r>>16&255)<<16|z(e>>8&255,r>>8&255)<<8|z(255&e,255&r))>>>0};var Wn=e.PredictorAdd0;e.PredictorAdd1=W,$("Predictor2","PredictorAdd2"),$("Predictor3","PredictorAdd3"),$("Predictor4","PredictorAdd4"),$("Predictor5","PredictorAdd5"),$("Predictor6","PredictorAdd6"),$("Predictor7","PredictorAdd7"),$("Predictor8","PredictorAdd8"),$("Predictor9","PredictorAdd9"),$("Predictor10","PredictorAdd10"),$("Predictor11","PredictorAdd11"),$("Predictor12","PredictorAdd12"),$("Predictor13","PredictorAdd13");var Kn=e.PredictorAdd2;q("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),q("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Gn,jn=e.ColorIndexInverseTransform,qn=e.MapARGB,Xn=e.VP8LColorIndexInverseTransformAlpha,Jn=e.MapAlpha,Yn=e.VP8LPredictorsAdd=[];Yn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,er,tr,nr,rr,ar,sr,ir,or,lr,Ar,ur,cr,hr,dr,pr,fr,mr,gr,yr,br,wr,vr,xr,Br,kr,Cr,Nr,Sr=s(511),Ir=s(2041),Er=s(225),Fr=s(767),Tr=0,Lr=Ir,Ur=Er,_r=Fr,Rr=Sr,Dr=0,Qr=1,Or=2,$r=3,Mr=4,Pr=5,Hr=6,zr=7,Vr=8,Wr=9,Kr=10,Gr=[2,3,7],jr=[3,3,11],qr=[280,256,256,256,40],Xr=[0,1,1,1,0],Jr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ea=8,ta=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],na=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ra=null,aa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ia=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oa=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],la=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Aa=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ua=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ca=[],ha=[],da=[],pa=1,fa=2,ma=[],ga=[];yn("UpsampleRgbLinePair",kn,3),yn("UpsampleBgrLinePair",Cn,3),yn("UpsampleRgbaLinePair",Fn,4),yn("UpsampleBgraLinePair",En,4),yn("UpsampleArgbLinePair",In,4),yn("UpsampleRgba4444LinePair",Sn,2),yn("UpsampleRgb565LinePair",Nn,2);var ya=e.UpsampleRgbLinePair,ba=e.UpsampleBgrLinePair,wa=e.UpsampleRgbaLinePair,va=e.UpsampleBgraLinePair,xa=e.UpsampleArgbLinePair,Ba=e.UpsampleRgba4444LinePair,ka=e.UpsampleRgb565LinePair,Ca=16,Na=1<<Ca-1,Sa=-227,Ia=482,Ea=6,Fa=(256<<Ea)-1,Ta=0,La=s(256),Ua=s(256),_a=s(256),Ra=s(256),Da=s(Ia-Sa),Qa=s(Ia-Sa);Tn("YuvToRgbRow",kn,3),Tn("YuvToBgrRow",Cn,3),Tn("YuvToRgbaRow",Fn,4),Tn("YuvToBgraRow",En,4),Tn("YuvToArgbRow",In,4),Tn("YuvToRgba4444Row",Sn,2),Tn("YuvToRgb565Row",Nn,2);var Oa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$a=[0,2,8],Ma=[8,7,6,4,4,2,2,2,1,1,1,1],Pa=1;this.WebPDecodeRGBA=function(e,n,r,a,s){var i=Qr,o=new nn,l=new ie;o.ba=l,l.S=i,l.width=[l.width],l.height=[l.height];var A=l.width,u=l.height,c=new oe;if(null==c||null==e)var h=2;else t(null!=c),h=Rn(e,n,r,c.width,c.height,c.Pd,c.Qd,c.format,null);if(0!=h?A=0:(null!=A&&(A[0]=c.width[0]),null!=u&&(u[0]=c.height[0]),A=1),A){l.width=l.width[0],l.height=l.height[0],null!=a&&(a[0]=l.width),null!=s&&(s[0]=l.height);e:{if(a=new Ke,(s=new rn).data=e,s.w=n,s.ha=r,s.kd=1,n=[0],t(null!=s),(0==(e=Rn(s.data,s.w,s.ha,null,null,null,n,null,s))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=o),a.data=s.data,a.w=s.w+s.offset,a.ha=s.ha-s.offset,a.put=de,a.ac=he,a.bc=pe,a.ma=o,s.xa){if(null==(e=Ie())){o=1;break e}if(function(e,n){var r=[0],a=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,g(e.m,n.data,n.w,n.ha),!fe(e.m,r,a,s)){e.a=3;break t}if(e.xb=fa,n.width=r[0],n.height=a[0],!Ee(r[0],a[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,a)){if(a=0==(n=On(a.width,a.height,o.Oa,o.ba))){t:{a=e;n:for(;;){if(null==a){a=0;break t}if(t(null!=a.s.yc),t(null!=a.s.Ya),t(0<a.s.Wb),t(null!=(r=a.l)),t(null!=(s=r.ma)),0!=a.xb){if(a.ca=s.ba,a.tb=s.tb,t(null!=a.ca),!Dn(s.Oa,r,$r)){a.a=2;break n}if(!Fe(a,r.width))break n;if(r.da)break n;if((r.da||re(a.ca.S))&&gn(),11>a.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=a.ca.f.kb.F&&gn()),a.Pb&&0<a.s.ua&&null==a.s.vb.X&&!U(a.s.vb,a.s.Wa.Xa)){a.a=1;break n}a.xb=0}if(!Ne(a,a.V,a.Ba,a.c,a.i,r.o,xe))break n;s.Dc=a.Ma,a=1;break t}t(0!=a.a),a=0}a=!a}a&&(n=e.a)}else n=e.a}else{if(null==(e=new Ge)){o=1;break e}if(e.Fa=s.na,e.P=s.P,e.qc=s.Sa,Xe(e,a)){if(0==(n=On(a.width,a.height,o.Oa,o.ba))){if(e.Aa=0,r=o.Oa,t(null!=(s=e)),null!=r){if(0<(A=0>(A=r.Md)?0:100<A?255:255*A/100)){for(u=c=0;4>u;++u)12>(h=s.pb[u]).lc&&(h.ia=A*Ma[0>h.lc?0:h.lc]>>3),c|=h.ia;c&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=r.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}Ze(e,a)||(n=e.a)}}else n=e.a}0==n&&null!=o.Oa&&o.Oa.fd&&(n=Qn(o.ba))}o=n}i=0!=o?null:11>i?l.f.RGBA.eb:l.f.kb.y}else i=null;return i};var Ha=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function c(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],d=[0],p=[],f=new l,m=e,g=function(e,t){var n={},r=0,a=!1,s=0,i=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(c(e,t+=4),t+=8;t<e.length;){var o=A(e,t),l=c(e,t+=4);t+=4;var h=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(f=n.frames[r]).src_off=a?i:t-8,f.src_size=s+l+8,r++,a&&(a=!1,s=0,i=0);break;case"VP8X":(f=n.header={}).feature_flags=e[t];var d=t+4;f.canvas_width=1+u(e,d),d+=3,f.canvas_height=1+u(e,d),d+=3;break;case"ALPH":a=!0,s=h+8,i=t-8;break;case"ANIM":(f=n.header).bgcolor=c(e,t),d=t+4,f.loop_count=(m=e)[(g=d)+0]|m[g+1]<<8,d+=2;break;case"ANMF":var p,f;(f=n.frames[r]={}).offset_x=2*u(e,t),t+=3,f.offset_y=2*u(e,t),t+=3,f.width=1+u(e,t),t+=3,f.height=1+u(e,t),t+=3,f.duration=u(e,t),t+=3,p=e[t++],f.dispose=1&p,f.blend=p>>1&1}"ANMF"!=o&&(t+=h)}var m,g;return n}}(m,0);g.response=m,g.rgbaoutput=!0,g.dataurl=!1;var y=g.header?g.header:null,b=g.frames?g.frames:null;if(y){y.loop_counter=y.loop_count,h=[y.canvas_height],d=[y.canvas_width];for(var w=0;w<b.length&&0!=b[w].blend;w++);}var v=b[0],x=f.WebPDecodeRGBA(m,v.src_off,v.src_size,d,h);v.rgba=x,v.imgwidth=d[0],v.imgheight=h[0];for(var B=0;B<d[0]*h[0]*4;B++)p[B]=x[B];return this.width=d,this.height=h,this.data=p,this}!function(e){var t=function(t,r,l,A){var u=4,c=s;switch(A){case e.image_compression.FAST:u=1,c=a;break;case e.image_compression.MEDIUM:u=6,c=i;break;case e.image_compression.SLOW:u=9,c=o}var h=mr(t=n(t,r,l,c),{level:u});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,r){for(var a,s,i,o=e.length/t,l=new Uint8Array(e.length+o),c=A(),h=0;h<o;h+=1){if(i=h*t,a=e.subarray(i,i+t),r)l.set(r(a,n,s),i+h);else{for(var d,p=c.length,f=[];d<p;d+=1)f[d]=c[d](a,n,s);var m=u(f.concat());l.set(f[m],i+h)}s=a}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},a=function(e,t){var n,r=[],a=e.length;r[0]=1;for(var s=0;s<a;s+=1)n=e[s-t]||0,r[s+1]=e[s]-n+256&255;return r},s=function(e,t,n){var r,a=[],s=e.length;a[0]=2;for(var i=0;i<s;i+=1)r=n&&n[i]||0,a[i+1]=e[i]-r+256&255;return a},i=function(e,t,n){var r,a,s=[],i=e.length;s[0]=3;for(var o=0;o<i;o+=1)r=e[o-t]||0,a=n&&n[o]||0,s[o+1]=e[o]+256-(r+a>>>1)&255;return s},o=function(e,t,n){var r,a,s,i,o=[],A=e.length;o[0]=4;for(var u=0;u<A;u+=1)r=e[u-t]||0,a=n&&n[u]||0,s=n&&n[u-t]||0,i=l(r,a,s),o[u+1]=e[u]-i+256&255;return o},l=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),a=Math.abs(e-n),s=Math.abs(e+t-n-n);return r<=a&&r<=s?e:a<=s?t:n},A=function(){return[r,a,s,i,o]},u=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,a,s){var i,o,l,A,u,c,h,d,p,f,m,g,y,b,w,v=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new us(n)).imgData,o=l.bits,i=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(d=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,m=new Uint8Array(p*l.colors),f=new Uint8Array(p);var B,k=l.pixelBitlength-l.bits;for(b=0,w=0;b<p;b++){for(y=d[b],B=0;B<k;)m[w++]=y>>>B&255,B+=l.bits;f[b]=y>>>B&255}}if(16===l.bits){p=(d=new Uint32Array(l.decodePixels().buffer)).length,m=new Uint8Array(p*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(p*(32/l.pixelBitlength)),g=l.colors>1,b=0,w=0;for(var C=0;b<p;)y=d[b++],m[w++]=y>>>0&255,g&&(m[w++]=y>>>16&255,y=d[b++],m[w++]=y>>>0&255),f[C++]=y>>>16&255;o=8}s!==e.image_compression.NONE?(n=t(m,l.width*l.colors,l.colors,s),h=t(f,l.width,1,s)):(n=m,h=f,v=void 0)}if(3===l.colorType&&(i=this.color_spaces.INDEXED,c=l.palette,l.transparency.indexed)){var N=l.transparency.indexed,S=0;for(b=0,p=N.length;b<p;++b)S+=N[b];if((S/=255)==p-1&&-1!==N.indexOf(0))A=[N.indexOf(0)];else if(S!==p){for(d=l.decodePixels(),f=new Uint8Array(d.length),b=0,p=d.length;b<p;b++)f[b]=N[d[b]];h=t(f,l.width,1)}}var I=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(s);return v===this.decode.FLATE_DECODE&&(x="/Predictor "+I+" "),x+="/Colors "+u+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:a,data:n,index:r,filter:v,decodeParameters:x,transparency:A,palette:c,sMask:h,predictor:I,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:i}}}}(Yr.API),function(e){e.processGIF89A=function(t,n,r,a){var s=new cs(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var A={data:l,width:i,height:o},u=new ds(100).encode(A,100);return e.processJPEG.call(this,u,n,r,a)},e.processGIF87A=e.processGIF89A}(Yr.API),ps.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ps.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){vr.log("bit decode error:"+e)}},ps.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==n&&(this.pos+=4-n)}},ps.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*a*4,o=s>>4,l=15&s,A=this.palette[o];if(this.data[i]=A.blue,this.data[i+1]=A.green,this.data[i+2]=A.red,this.data[i+3]=255,2*a+1>=this.width)break;A=this.palette[l],this.data[i+4]=A.blue,this.data[i+4+1]=A.green,this.data[i+4+2]=A.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},ps.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},ps.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,A=s>>15?255:0,u=r*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=i,this.data[u+3]=A}this.pos+=e}},ps.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&n)/n*255|0,A=(i>>11)/t*255|0,u=a*this.width*4+4*s;this.data[u]=A,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},ps.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},ps.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=i}},ps.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,a){var s=new ps(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},A=new ds(100).encode(l,100);return e.processJPEG.call(this,A,n,r,a)}}(Yr.API),fs.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,a){var s=new fs(t),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},A=new ds(100).encode(l,100);return e.processJPEG.call(this,A,n,r,a)}}(Yr.API),Yr.API.processRGBA=function(e,t,n){for(var r=e.data,a=r.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,l=0,A=0;A<a;A+=4){var u=r[A],c=r[A+1],h=r[A+2],d=r[A+3];s[o++]=u,s[o++]=c,s[o++]=h,i[l++]=d}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Yr.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},ss=Yr.API,is=ss.getCharWidthsArray=function(e,t){var n,r,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,A=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=A.fof?A.fof:1,c=!1!==t.doKerning,h=0,d=e.length,p=0,f=o[0]||l,m=[];for(n=0;n<d;n++)r=e.charCodeAt(n),"function"==typeof a.metadata.widthOfString?m.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(h=c&&"object"===(0,Nn.A)(A[r])&&!isNaN(parseInt(A[r][p],10))?A[r][p]/u:0,m.push((o[r]||f)/l+h)),p=r;return m},os=ss.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return ss.processArabic&&(e=ss.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,a)/n:is.apply(this,arguments).reduce((function(e,t){return e+t}),0)},ls=function(e,t,n,r){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<n;)o+=t[s],s++;a.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>r&&(a.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&a.push(e.slice(l,s)),a},As=function(e,t,n){n||(n={});var r,a,s,i,o,l,A,u=[],c=[u],h=n.textIndent||0,d=0,p=0,f=e.split(" "),m=is.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),y=[];f.map((function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):y.push(e[0])})),f=y,l=os.apply(this,[g,n])}for(s=0,i=f.length;s<i;s++){var b=0;if(r=f[s],l&&"\n"==r[0]&&(r=r.substr(1),b=1),h+d+(p=(a=is.apply(this,[r,n])).reduce((function(e,t){return e+t}),0))>t||b){if(p>t){for(o=ls.apply(this,[r,a,t-(h+d),t]),u.push(o.shift()),u=[o.pop()];o.length;)c.push([o.shift()]);p=a.slice(r.length-(u[0]?u[0].length:0)).reduce((function(e,t){return e+t}),0)}else u=[r];c.push(u),h=p+l,d=m}else u.push(r),h+=d+p,d=m}return A=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},c.map(A)},ss.splitTextToSize=function(e,t,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=n.lineIndent;var o,l,A=[];for(o=0,l=r.length;o<l;o++)A=A.concat(As.apply(this,[r[o],i,s]));return A},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},a=0;a<16;a++)n[t[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=t[a];var s=function(e){return"0x"+parseInt(e,10).toString(16)},i=e.__fontmetrics__.compress=function(e){var t,n,a,o,l=["{"];for(var A in e){if(t=e[A],isNaN(parseInt(A,10))?n="'"+A+"'":(A=parseInt(A,10),n=(n=s(A).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(a=s(t).slice(3),o="-"):(a=s(t).slice(2),o=""),a=o+a.slice(0,-1)+r[a.slice(-1)];else{if("object"!==(0,Nn.A)(t))throw new Error("Don't know what to do with value type "+(0,Nn.A)(t)+".");a=i(t)}l.push(n+a)}return l.push("}"),l.join("")},o=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,a,s,i={},o=1,l=i,A=[],u="",c="",h=e.length-1,d=1;d<h;d+=1)"'"==(s=e[d])?t?(a=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(A.push([l,a]),l={},a=void 0):"}"==s?((r=A.pop())[0][r[1]]=l,a=void 0,l=r[0]):"-"==s?o=-1:void 0===a?n.hasOwnProperty(s)?(u+=n[s],a=parseInt(u,16)*o,o=1,u=""):u+=s:n.hasOwnProperty(s)?(c+=n[s],l[a]=parseInt(c,16)*o,o=1,a=void 0,c=""):c+=s;return i},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=A.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(Yr.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,a=n.font,s=n.instance;if(!a.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(a.postScriptName)?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(Cr(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(a,r)}}])}(Yr),function(){function e(){return(br.canvg?Promise.resolve(br.canvg):i.e(661).then(i.bind(i,661))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}Yr.API.addSvgAsImage=function(t,n,r,a,s,i,o,l){if(isNaN(n)||isNaN(r))throw vr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(s))throw vr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=a,A.height=s;var u=A.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,A.width,A.height);var c={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then((function(e){return e.fromString(u,t,c)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(c)})).then((function(){h.addImage(A.toDataURL("image/jpeg",1),n,r,a,s,o,l)}))}}(),Yr.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(t,n);return this},Yr.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],A=0,u=0,c=0;function h(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var d=o.length;for(c=0;c<d;c+=1)n[o[c]].value=n[o[c]].defaultValue,n[o[c]].explicitSet=!1}if("object"===(0,Nn.A)(e))for(a in e)if(s=e[a],h(o,a)&&void 0!==s){if("boolean"===n[a].type&&"boolean"==typeof s)n[a].value=s;else if("name"===n[a].type&&h(n[a].valueSet,s))n[a].value=s;else if("integer"===n[a].type&&Number.isInteger(s))n[a].value=s;else if("array"===n[a].type){for(A=0;A<s.length;A+=1)if(r=!0,1===s[A].length&&"number"==typeof s[A][0])l.push(String(s[A]-1));else if(s[A].length>1){for(u=0;u<s[A].length;u+=1)"number"!=typeof s[A][u]&&(r=!1);!0===r&&l.push([s[A][0]-1,s[A][1]-1].join(" "))}n[a].value="["+l.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),i=n.length+r.length+a.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+a+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Yr.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,a=["","0","00","000","0000"],s=[""],i=0,o=e.length;i<o;++i){if(n=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(i),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(a[4-n.length],n)}return s.join("")},r=function(e){var t,n,r,a,s,i,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],i=0,o=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;i<o;i++)t=n[i],r.length>=100&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(a=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+a+">"));return r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,a=t.out,s=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),A="",u=0;u<l.length;u++)A+=String.fromCharCode(l[u]);var c=s();i({data:A,addLength1:!0,objectId:c}),a("endobj");var h=s();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),a("endobj");var d=s();a("<<"),a("/Type /FontDescriptor"),a("/FontName /"+Kr(n.fontName)),a("/FontFile2 "+c+" 0 R"),a("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),a("/Flags "+n.metadata.flags),a("/StemV "+n.metadata.stemV),a("/ItalicAngle "+n.metadata.italicAngle),a("/Ascent "+n.metadata.ascender),a("/Descent "+n.metadata.decender),a("/CapHeight "+n.metadata.capHeight),a(">>"),a("endobj");var p=s();a("<<"),a("/Type /Font"),a("/BaseFont /"+Kr(n.fontName)),a("/FontDescriptor "+d+" 0 R"),a("/W "+e.API.PDFObject.convert(o)),a("/CIDToGIDMap /Identity"),a("/DW 1000"),a("/Subtype /CIDFontType2"),a("/CIDSystemInfo"),a("<<"),a("/Supplement 0"),a("/Registry (Adobe)"),a("/Ordering ("+n.encoding+")"),a(">>"),a(">>"),a("endobj"),n.objectNumber=s(),a("<<"),a("/Type /Font"),a("/Subtype /Type0"),a("/ToUnicode "+h+" 0 R"),a("/BaseFont /"+Kr(n.fontName)),a("/Encoding /"+n.encoding),a("/DescendantFonts ["+p+" 0 R]"),a(">>"),a("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,a=t.out,s=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",A=0;A<o.length;A++)l+=String.fromCharCode(o[A]);var u=s();i({data:l,addLength1:!0,objectId:u}),a("endobj");var c=s();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:c}),a("endobj");var h=s();a("<<"),a("/Descent "+n.metadata.decender),a("/CapHeight "+n.metadata.capHeight),a("/StemV "+n.metadata.stemV),a("/Type /FontDescriptor"),a("/FontFile2 "+u+" 0 R"),a("/Flags 96"),a("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),a("/FontName /"+Kr(n.fontName)),a("/ItalicAngle "+n.metadata.italicAngle),a("/Ascent "+n.metadata.ascender),a(">>"),a("endobj"),n.objectNumber=s();for(var d=0;d<n.metadata.hmtx.widths.length;d++)n.metadata.hmtx.widths[d]=parseInt(n.metadata.hmtx.widths[d]*(1e3/n.metadata.head.unitsPerEm));a("<</Subtype/TrueType/Type/Font/ToUnicode "+c+" 0 R/BaseFont/"+Kr(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),a("endobj"),n.isAlreadyPutted=!0}}(t)}]);var a=function(e){var t,r=e.text||"",a=e.x,s=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,A=o.activeFontKey,u=o.fonts,c=A,h="",d=0,p="",f=u[c].encoding;if("Identity-H"!==u[c].encoding)return{text:r,x:a,y:s,options:i,mutex:o};for(p=r,c=A,Array.isArray(r)&&(p=r[0]),d=0;d<p.length;d+=1)u[c].metadata.hasOwnProperty("cmap")&&(t=u[c].metadata.cmap.unicode.codeMap[p[d].charCodeAt(0)]),t||p[d].charCodeAt(0)<256&&u[c].metadata.hasOwnProperty("Unicode")?h+=p[d]:h+="";var m="";return parseInt(c.slice(1))<14||"WinAnsiEncoding"===f?m=l(h,c).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===f&&(m=n(h,u[c])),o.isHex=!0,{text:m,x:a,y:s,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?n.push([a(Object.assign({},r,{text:t[s][0]})).text,t[s][1],t[s][2]]):n.push(a(Object.assign({},r,{text:t[s]})).text);e.text=n}else e.text=a(Object.assign({},r,{text:t})).text}])}(Yr),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Yr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,a,s,i,o,l,A=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},d={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,g=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),n=t>>8,r=d[n];return void 0!==r?A[256*r+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},b=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=y(e.charAt(n))))return!1;if("R"===t)return!0}return!1},w=function(e,t,i,o){var l,A,u,c,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(h="AN");break;case"AL":m=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(A=t[o+1])&&"AN"!==A?h="N":m&&(A="AN"),h=A===l?A:"N";break;case"ES":h="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){h="EN";break}if(m){h="N";break}for(u=o+1,c=t.length;u<c&&"ET"===t[u];)u++;h=u<c&&"EN"===t[u]?"EN":"N";break;case"NSM":if(a&&!s){for(c=t.length,u=o+1;u<c&&"NSM"===t[u];)u++;if(u<c){var d=e[o],p=d>=1425&&d<=2303||64286===d;if(l=t[u],p&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":m=!1,n=!0,h=g;break;case"S":r=!0,h="N"}return h},v=function(e,t,n){var r=e.split("");return n&&x(r,n,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},x=function(e,t,a){var s,i,o,l,A,d=-1,p=e.length,f=0,b=[],v=g?c:u,x=[];for(m=!1,n=!1,r=!1,i=0;i<p;i++)x[i]=y(e[i]);for(o=0;o<p;o++){if(A=f,b[o]=w(e,x,b,o),s=240&(f=v[A][h[b[o]]]),f&=15,t[o]=l=v[f][5],s>0)if(16===s){for(i=d;i<o;i++)t[i]=1;d=-1}else d=-1;if(v[f][6])-1===d&&(d=o);else if(d>-1){for(i=d;i<o;i++)t[i]=l;d=-1}"B"===x[o]&&(t[o]=0),a.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=g;for(var a=r-1;a>=0&&"WS"===e[a];a--)t[a]=g}}(x,t,p)},B=function(e,t,r,a,s){if(!(s.hiLevel<e)){if(1===e&&1===g&&!n)return t.reverse(),void(r&&r.reverse());for(var i,o,l,A,u=t.length,c=0;c<u;){if(a[c]>=e){for(l=c+1;l<u&&a[l]>=e;)l++;for(A=c,o=l-1;A<o;A++,o--)i=t[A],t[A]=t[o],t[o]=i,r&&(i=r[A],r[A]=r[o],r[o]=i);c=l}c++}}},k=function(e,t,n){var r=e.split(""),a={hiLevel:g};return n||(n=[]),x(r,n,a),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,a=0;a<e.length;a++)1===t[a]&&(r=p.indexOf(e[a]))>=0&&(e[a]=p[r+1])}(r,n,a),B(2,r,t,n,a),B(1,r,t,n,a),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===s&&(s=b(e)),void 0===o&&(o=b(e))}(e,t),a||!i||o)if(a&&i&&s^o)g=s?1:0,e=v(e,t,n);else if(!a&&i&&o)g=s?1:0,e=k(e,t,n),e=v(e,t);else if(!a||s||i||o){if(a&&!i&&s^o)e=v(e,t),s?(g=0,e=k(e,t,n)):(g=1,e=k(e,t,n),e=v(e,t));else if(a&&s&&!i&&o)g=1,e=k(e,t,n),e=v(e,t);else if(!a&&!i&&s^o){var r=l;s?(g=1,e=k(e,t,n),g=0,l=!1,e=k(e,t,n),l=r):(g=0,e=k(e,t,n),e=v(e,t),g=1,l=!1,e=k(e,t,n),l=r,e=v(e,t))}}else g=0,e=k(e,t,n);else g=s?1:0,e=k(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(a=e.isInputVisual,i=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var a=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(a=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?a.push([n.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):a.push([n.doBidiReorder(t[s])]);e.text=a}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Yr),Yr.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new gs(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Ds(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ys(this.contents),this.head=new vs(this),this.name=new Is(this),this.cmap=new Bs(this),this.toUnicode={},this.hhea=new ks(this),this.maxp=new Es(this),this.hmtx=new Fs(this),this.post=new Ns(this),this.os2=new Cs(this),this.loca=new Rs(this),this.glyf=new Ls(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,a;for(a=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],a.push(Math.round(e*this.scaleFactor));return a}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),!!(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(a=this.familyClass)||2===a||3===a||4===a||5===a||7===a,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,a,s,i;for(s=0,a=0,i=(e=""+e).length;0<=i?a<i:a>i;a=0<=i?++a:--a)r=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var ms,gs=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,a,s,i,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^a)+65536*(255^s)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*a+65536*s+256*i+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,a;for(a=[],n=0,r=e.length;n<r;n++)t=e[n],a.push(this.writeByte(t));return a},e}(),ys=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,a,s,i,o,l,A,u,c,h,d,p;for(p in h=Object.keys(t).length,o=Math.log(2),u=16*Math.floor(Math.log(h)/o),s=Math.floor(u/o),A=16*h-u,(r=new gs).writeInt(this.scalarType),r.writeShort(h),r.writeShort(u),r.writeShort(s),r.writeShort(A),a=16*h,l=r.pos+a,i=null,d=[],t)for(c=t[p],r.writeString(p),r.writeInt(e(c)),r.writeInt(l),r.writeInt(c.length),d=d.concat(c),"head"===p&&(i=l),l+=c.length;l%4;)d.push(0),l++;return r.write(d),n=2981146554-e(r.data),r.pos=i+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,a;for(e=Ts.call(e);e.length%4;)e.push(0);for(r=new gs(e),n=0,t=0,a=e.length;t<a;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),bs={}.hasOwnProperty,ws=function(e,t){for(var n in t)bs.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};ms=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var vs=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new gs).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),xs=function(){function e(e,t){var n,r,a,s,i,o,l,A,u,c,h,d,p,f,m,g,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),c=h/2,e.pos+=6,a=function(){var t,n;for(n=[],o=t=0;0<=c?t<c:t>c;o=0<=c?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],o=t=0;0<=c?t<c:t>c;o=0<=c?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=c?t<c:t>c;o=0<=c?++t:--t)n.push(e.readUInt16());return n}(),A=function(){var t,n;for(n=[],o=t=0;0<=c?t<c:t>c;o=0<=c?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,i=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=m=0,y=a.length;m<y;o=++m)for(f=a[o],n=g=d=p[o];d<=f?g<=f:g>=f;n=d<=f?++g:--g)0===A[o]?s=n+l[o]:0!==(s=i[A[o]/2+(n-d)-(c-o)]||0)&&(s+=l[o]),this.codeMap[n]=65535&s}e.pos=u}return e.encode=function(e,t){var n,r,a,s,i,o,l,A,u,c,h,d,p,f,m,g,y,b,w,v,x,B,k,C,N,S,I,E,F,T,L,U,_,R,D,Q,O,$,M,P,H,z,V,W,K,G;switch(E=new gs,s=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(p=0,f=function(){var e=[];for(d=0;d<256;++d)e.push(0);return e}(),g={0:0},a={},F=0,_=s.length;F<_;F++)null==g[V=e[r=s[F]]]&&(g[V]=++p),a[r]={old:e[r],new:g[e[r]]},f[r]=g[e[r]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(f),{charMap:a,subtable:E.data,maxGlyphID:p+1};case"unicode":for(S=[],u=[],y=0,g={},n={},m=l=null,T=0,R=s.length;T<R;T++)null==g[w=e[r=s[T]]]&&(g[w]=++y),n[r]={old:w,new:g[w]},i=g[w]-r,null!=m&&i===l||(m&&u.push(m),S.push(r),l=i),m=r;for(m&&u.push(m),u.push(65535),S.push(65535),C=2*(k=S.length),B=2*Math.pow(Math.log(k)/Math.LN2,2),c=Math.log(B/2)/Math.LN2,x=2*k-B,o=[],v=[],h=[],d=L=0,D=S.length;L<D;d=++L){if(N=S[d],A=u[d],65535===N){o.push(0),v.push(0);break}if(N-(I=n[N].new)>=32768)for(o.push(0),v.push(2*(h.length+k-d)),r=U=N;N<=A?U<=A:U>=A;r=N<=A?++U:--U)h.push(n[r].new);else o.push(I-N),v.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*k+2*h.length),E.writeUInt16(0),E.writeUInt16(C),E.writeUInt16(B),E.writeUInt16(c),E.writeUInt16(x),H=0,Q=u.length;H<Q;H++)r=u[H],E.writeUInt16(r);for(E.writeUInt16(0),z=0,O=S.length;z<O;z++)r=S[z],E.writeUInt16(r);for(W=0,$=o.length;W<$;W++)i=o[W],E.writeUInt16(i);for(K=0,M=v.length;K<M;K++)b=v[K],E.writeUInt16(b);for(G=0,P=h.length;G<P;G++)p=h[G],E.writeUInt16(p);return{charMap:n,subtable:E.data,maxGlyphID:y+1}}},e}(),Bs=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new xs(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=xs.encode(e,t),(r=new gs).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),ks=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),Cs=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),Ns=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],a=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;a=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),Ss=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Is=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,a,s,i,o,l,A,u,c;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},a=A=0,u=n.length;A<u;a=++A)r=n[a],e.pos=r.offset,l=e.readString(r.length),s=new Ss(l,r),null==o[c=r.nameID]&&(o[c]=[]),o[r.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),Es=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),Fs=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,a,s,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,a;for(a=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)a.push(e.readInt16());return a}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)a=n[e],r.push(a.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=s=0;0<=r?s<r:s>r;t=0<=r?++s:--s)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Ts=[].slice,Ls=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,a,s,i,o,l,A,u;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),0===(r=a.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,s=(i=new gs(t.read(r))).readShort(),l=i.readShort(),u=i.readShort(),o=i.readShort(),A=i.readShort(),this.cache[e]=-1===s?new _s(i,l,u,o,A):new Us(i,s,l,u,o,A),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,a,s,i,o;for(s=[],a=[],i=0,o=t.length;i<o;i++)r=e[t[i]],a.push(s.length),r&&(s=s.concat(r.encode(n)));return a.push(s.length),{table:s,offsets:a}},e}(),Us=function(){function e(e,t,n,r,a,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),_s=function(){function e(e,t,n,r,a){var s,i;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;i=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&i;)s.pos+=1&i?4:2,128&i?s.pos+=8:64&i?s.pos+=4:8&i&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new gs(Ts.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Rs=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return ws(e,ms),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,a=0,s=0;s<n.length;++s)if(n[s]=r,a<t.length&&t[a]==s){++a,n[s]=r;var i=this.offsets[s],o=this.offsets[s+1]-i;o>0&&(r+=o)}for(var l=new Array(4*n.length),A=0;A<n.length;++A)l[4*A+3]=255&n[A],l[4*A+2]=(65280&n[A])>>8,l[4*A+1]=(16711680&n[A])>>16,l[4*A]=(4278190080&n[A])>>24;return l},e}(),Ds=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,a;for(t in r=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,a,s,i,o;for(r={},s=0,i=e.length;s<i;s++)r[a=e[s]]=this.font.glyf.glyphFor(a);for(a in t=[],r)(null!=(n=r[a])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in o=this.glyphsFor(t))n=o[a],r[a]=n;return r},e.prototype.encode=function(e,t){var n,r,a,s,i,o,l,A,u,c,h,d,p,f,m;for(r in n=Bs.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},m=n.charMap)h[(o=m[r]).old]=o.new;for(d in c=n.maxGlyphID,s)d in h||(h[d]=c++);return A=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),u=Object.keys(A).sort((function(e,t){return e-t})),p=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)i=u[e],n.push(A[i]);return n}(),a=this.font.glyf.encode(s,p,h),l=this.font.loca.encode(a.offsets,p),f={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();Yr.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,a,s,i;if(Array.isArray(n))return"["+function(){var e,a,s;for(s=[],e=0,a=n.length;e<a;e++)r=n[e],s.push(t.convert(r));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(a in s=["<<"],n)i=n[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join("\n")}return""+n},t}(),i(354);class Qs{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Os{refCount(e){return $s("refCount")}incRef(e){return $s("incRef")}timerAvailable(){return!0}time(e){return $s("time")}read(e){return $s("read")}readSync(e){return $s("readSync")}readToGPU(e,t){return $s("readToGPU")}numDataIds(){return $s("numDataIds")}disposeData(e,t){return $s("disposeData")}write(e,t,n){return $s("write")}move(e,t,n,r,a){return $s("move")}createTensorFromGPUData(e,t,n){return $s("createTensorFromGPUData")}memory(){return $s("memory")}floatPrecision(){return $s("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return $s("dispose")}}function $s(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Ms(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,zs(e,t,n)}function Ps(e,t,n){return Math.max(e,Math.min(t,n))}function Hs(e){return e%2==0?e:e+1}function zs(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Vs(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Ws(e,t,n=""){Vs(js(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function Ks(e){Vs(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function Gs(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function js(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function qs(e){return e%1==0}function Xs(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Js(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Ys(e,t=e=>0,n,r){return new Promise(((a,s)=>{let i=0;const o=()=>{if(e())return void a();i++;const l=t(i);null!=n&&i>=n?s():null!=r?r(o,l):setTimeout(o,l)};o()}))}function Zs(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const a=e.slice();return a[r]=t/n,a}function ei(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),Vs(e.every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),Vs(e.every((e=>qs(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function ti(e,t){const n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,s=null==t||a?null:ei(t,e).sort();let i=0;for(let t=0;t<e.length;++t){if(null!=s){if(s[i]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==s[i]||s[i]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),s[i]<=t&&i++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function ni(e,t){return ri(e,t)}function ri(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function ai(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function si(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function ii(e){return"string"==typeof e||e instanceof String}function oi(e){return"number"==typeof e}function li(e){return Array.isArray(e)?li(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":oi(e)?"float32":ii(e)?"string":"boolean"==typeof e?"bool":"float32"}function Ai(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ui(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function ci(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function hi(e,t,n,r=!1){const a=new Array;if(1===t.length){const s=t[0]*(r?2:1);for(let t=0;t<s;t++)a[t]=n[e+t]}else{const s=t[0],i=t.slice(1),o=i.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<s;t++)a[t]=hi(e+t*o,i,n,r)}return a}function di(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return hi(0,e,t,n)}function pi(e,t){const n=fi(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function fi(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function mi(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return di(e,new Float32Array(n));if("int32"===t)return di(e,new Int32Array(n));if("bool"===t)return di(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function gi(e){e.forEach((t=>{Vs(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function yi(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function bi(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function wi(e){return e&&e.then&&"function"==typeof e.then}const vi="tfjsflags";class xi{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Bi,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(ki().getBool("IS_TEST")||ki().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];ki().getBool("IS_TEST")||ki().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(wi(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);vi in e&&e[vi].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)}))}}function Bi(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function ki(){return Ni}let Ci,Ni=null;function Si(){if(null==Ci){let e;if("undefined"!=typeof window)e=window;else if(void 0!==i.g)e=i.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ci=e}return Ci}function Ii(e,t){const n=function(){const e=Si();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Ei="Abs",Fi="Acos",Ti="Acosh",Li="Add",Ui="AddN",_i="All",Ri="Any",Di="ArgMax",Qi="ArgMin",Oi="Asin",$i="Asinh",Mi="Atan",Pi="Atanh",Hi="Atan2",zi="AvgPool",Vi="AvgPoolGrad",Wi="AvgPool3D",Ki="AvgPool3DGrad",Gi="BatchMatMul",ji="BatchToSpaceND",qi="Bincount",Xi="BitwiseAnd",Ji="BroadcastArgs",Yi="Cast",Zi="Ceil",eo="ClipByValue",to="Complex",no="ComplexAbs",ro="Concat",ao="Conv2D",so="Conv2DBackpropFilter",io="Conv2DBackpropInput",oo="Conv3D",lo="Conv3DBackpropFilterV2",Ao="Conv3DBackpropInputV2",uo="Cos",co="Cosh",ho="Cumprod",po="Cumsum",fo="CropAndResize",mo="DenseBincount",go="DepthToSpace",yo="DepthwiseConv2dNative",bo="DepthwiseConv2dNativeBackpropFilter",wo="DepthwiseConv2dNativeBackpropInput",vo="Diag",xo="Dilation2D",Bo="Dilation2DBackpropInput",ko="Dilation2DBackpropFilter",Co="RealDiv",No="Einsum",So="Elu",Io="EluGrad",Eo="Erf",Fo="Equal",To="Exp",Lo="ExpandDims",Uo="Expm1",_o="FFT",Ro="Fill",Do="FlipLeftRight",Qo="Floor",Oo="FloorDiv",$o="FusedBatchNorm",Mo="GatherV2",Po="GatherNd",Ho="Greater",zo="GreaterEqual",Vo="Identity",Wo="IFFT",Ko="Imag",Go="IsFinite",jo="IsInf",qo="IsNan",Xo="LeakyRelu",Jo="Less",Yo="LessEqual",Zo="LinSpace",el="Log",tl="Log1p",nl="LogicalAnd",rl="LogicalNot",al="LogicalOr",sl="LRN",il="LRNGrad",ol="Max",ll="Maximum",Al="MaxPool",ul="MaxPoolGrad",cl="MaxPool3D",hl="MaxPool3DGrad",dl="MaxPoolWithArgmax",pl="Mean",fl="Min",ml="Minimum",gl="MirrorPad",yl="Mod",bl="Multinomial",wl="Multiply",vl="Neg",xl="NotEqual",Bl="NonMaxSuppressionV3",kl="NonMaxSuppressionV4",Cl="NonMaxSuppressionV5",Nl="OnesLike",Sl="OneHot",Il="Pack",El="PadV2",Fl="Pow",Tl="Prelu",Ll="Prod",Ul="RaggedGather",_l="RaggedRange",Rl="RaggedTensorToTensor",Dl="Range",Ql="Real",Ol="Reciprocal",$l="Relu",Ml="Reshape",Pl="ResizeNearestNeighbor",Hl="ResizeNearestNeighborGrad",zl="ResizeBilinear",Vl="ResizeBilinearGrad",Wl="Relu6",Kl="Reverse",Gl="Round",jl="Rsqrt",ql="ScatterNd",Xl="TensorScatterUpdate",Jl="SearchSorted",Yl="Select",Zl="Selu",eA="Slice",tA="Sin",nA="Sinh",rA="Sign",aA="Sigmoid",sA="Softplus",iA="Sqrt",oA="Sum",lA="SpaceToBatchND",AA="SplitV",uA="Softmax",cA="SparseFillEmptyRows",hA="SparseReshape",dA="SparseSegmentMean",pA="SparseSegmentSum",fA="SparseToDense",mA="SquaredDifference",gA="Square",yA="StaticRegexReplace",bA="StridedSlice",wA="StringNGrams",vA="StringSplit",xA="StringToHashBucketFast",BA="Sub",kA="Tan",CA="Tanh",NA="Tile",SA="TopK",IA="Transform",EA="Transpose",FA="Unique",TA="Unpack",LA="UnsortedSegmentSum",UA="ZerosLike",_A="Step",RA="FromPixels",DA="RotateWithOffset",QA="_FusedMatMul",OA="FusedConv2D",$A="FusedDepthwiseConv2D";function MA(...e){ki().getBool("IS_TEST")||ki().getBool("PROD")||console.warn(...e)}function PA(...e){ki().getBool("IS_TEST")||ki().getBool("PROD")||console.log(...e)}const HA=Ii("kernelRegistry",(()=>new Map)),zA=Ii("gradRegistry",(()=>new Map));function VA(e,t){const n=qA(e,t);return HA.get(n)}function WA(e){return zA.get(e)}function KA(e){const t=HA.entries(),n=[];for(;;){const{done:r,value:a}=t.next();if(r)break;const[s,i]=a,[o]=s.split("_");o===e&&n.push(i)}return n}function GA(e){const{kernelName:t,backendName:n}=e,r=qA(t,n);HA.has(r)&&MA(`The kernel '${t}' for backend '${n}' is already registered`),HA.set(r,e)}function jA(e){const{kernelName:t}=e;zA.has(t)&&ki().getBool("DEBUG")&&MA(`Overriding the gradient for '${t}'`),zA.set(t,e)}function qA(e,t){return`${t}_${e}`}function XA(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var JA=i(8570);const YA=i.n(JA)()||JA;function ZA(e){return YA.fromString(e,!0,16)}const eu=ZA("c3a5c85c97cb3127"),tu=ZA("b492b66fbe98f273"),nu=ZA("9ae16a3b2f90404f");function ru(e){return e.xor(e.shru(47))}function au(e,t,n){const r=e.slice(t,t+n);return YA.fromBytes(Array.from(r),!0,!0)}function su(e,t){return au(e,t,8)}function iu(e,t){return au(e,t,4)}function ou(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function lu(e,t,n=ZA("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function Au(e,t,n,r){return function(e,t,n,r,a,s){a=a.add(e),s=ou(s.add(a).add(r),21);const i=a;return a=(a=a.add(t)).add(n),s=s.add(ou(a,44)),[a.add(r),s.add(i)]}(su(e,t),su(e,t+8),su(e,t+16),su(e,t+24),n,r)}function uu(e,t=e.length){const n=YA.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=nu.add(2*t),r=su(e,0).add(nu),a=su(e,t-8);return lu(ou(a,37).mul(n).add(r),ou(r,25).add(a).mul(n),n)}if(t>=4){const n=nu.add(2*t);return lu(iu(e,0).shl(3).add(t),iu(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return ru(nu.mul(n).xor(eu.mul(r))).mul(nu)}return nu}(e,t):function(e,t=e.length){const n=nu.add(2*t),r=su(e,0).mul(tu),a=su(e,8),s=su(e,t-8).mul(n),i=su(e,t-16).mul(nu);return lu(ou(r.add(a),43).add(ou(s,30)).add(i),r.add(ou(a.add(nu),18)).add(s),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=nu.add(2*t),r=su(e,0).mul(nu),a=su(e,8),s=su(e,t-8).mul(n),i=su(e,t-16).mul(nu),o=ou(r.add(a),43).add(ou(s,30)).add(i),l=lu(o,r.add(ou(a.add(nu),18)).add(s),n),A=su(e,16).mul(n),u=su(e,24),c=o.add(su(e,t-32)).mul(n),h=l.add(su(e,t-24)).mul(n);return lu(ou(A.add(u),43).add(ou(c,30)).add(h),A.add(ou(u.add(r),18)).add(c),n)}(e,t);let r=n,a=n.mul(tu).add(113),s=ru(a.mul(nu).add(113)).mul(nu),i=[YA.UZERO,YA.UZERO],o=[YA.UZERO,YA.UZERO];r=r.mul(nu).add(su(e,0));let l=0;const A=64*(t-1>>6),u=A+(t-1&63)-63;do{r=ou(r.add(a).add(i[0]).add(su(e,l+8)),37).mul(tu),a=ou(a.add(i[1]).add(su(e,l+48)),42).mul(tu),r=r.xor(o[1]),a=a.add(i[0]).add(su(e,l+40)),s=ou(s.add(o[0]),33).mul(tu),i=Au(e,l,i[1].mul(tu),r.add(o[0])),o=Au(e,l+32,s.add(o[1]),a.add(su(e,l+16))),[s,r]=[r,s],l+=64}while(l!==A);const c=tu.add(s.and(255).shl(1));return l=u,o[0]=o[0].add(t-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=ou(r.add(a).add(i[0]).add(su(e,l+8)),37).mul(c),a=ou(a.add(i[1]).add(su(e,l+48)),42).mul(c),r=r.xor(o[1].mul(9)),a=a.add(i[0].mul(9).add(su(e,l+40))),s=ou(s.add(o[0]),33).mul(c),i=Au(e,l,i[1].mul(c),r.add(o[0])),o=Au(e,l+32,s.add(o[1]),a.add(su(e,l+16))),[s,r]=[r,s],lu(lu(i[0],o[0],c).add(ru(a).mul(eu)).add(s),lu(i[1],o[1],c).add(r),c)}function cu(e,t){return"string"===t?pu(e):hu([e],t)}function hu(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=gu(e)),ki().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function du(){return ki().platform.now()}function pu(e,t="utf-8"){return t=t||"utf-8",ki().platform.encode(e,t)}function fu(e,t="utf-8"){return t=t||"utf-8",ki().platform.decode(e,t)}function mu(e){return null!=ki().platform.isTypedArray?ki().platform.isTypedArray(e):XA(e)}function gu(e,t=[],n=!1){if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||wi(e)||null==e||mu(e)&&n)t.push(e);else if(Array.isArray(e)||mu(e))for(let r=0;r<e.length;++r)gu(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let a=0;a<=r;a++)gu(e[a],t,n)}return t}class yu{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new wu)}profileKernel(e,t,n){let r;const a=()=>{r=n()};let s;const i=du();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(a);else{a();for(const e of r)e.dataSync();s=Promise.resolve({kernelMs:du()-i})}if(ki().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){const n=r[t];n.data().then((t=>{bu(t,n.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:s.then((e=>e.kernelMs)),extraInfo:s.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:s}=e;n.forEach((e=>{Promise.all([e.data(),r,s]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])}))}))}}function bu(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class wu{logKernelProfile(e,t,n,r,a,s){const i="number"==typeof r?Js(`${r}ms`,9):r.error,o=Js(e,25),l=t.rank,A=t.size,u=Js(t.shape.toString(),14);let c="";for(const e in a){const n=a[e];if(null!=n){const r=n.shape||t.shape,a=r.length;c+=`${e}: ${a}D ${a>0?r:""} `}}console.log(`%c${o}\t%c${i}\t%c${l}D ${u}\t%c${A}\t%c${c}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function vu(e,t,n,r){const a=ci(t),s=function(e,t,n,r){const a=Gs(t),s=r[r.length-1],i=new Array(s).fill(0),o=t.length,l="complex64"===n?Cu(e):e;if(o>1)for(let e=0;e<a/s;e++){const t=e*s;for(let e=0;e<s;e++)i[e]=Math.max(i[e],xu(l[t+e],0,n).length)}return i}(e,t,n,a),i=t.length,o=ku(e,t,n,a,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map((e=>"    "+e)).join("\n")),l.join("\n")}function xu(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:ii(e)?`'${e}'`:"bool"===n?Bu(e):parseFloat(e.toFixed(7)).toString(),Js(r,t)}function Bu(e){return 0===e?"false":"true"}function ku(e,t,n,r,a,s=!0){const i="complex64"===n?2:1,o=t[0],l=t.length;if(0===l)return"complex64"===n?[xu(Cu(e)[0],0,n)]:"bool"===n?[Bu(e[0])]:[e[0].toString()];if(1===l){if(o>20){const t=3*i;let r=Array.from(e.slice(0,t)),s=Array.from(e.slice((o-3)*i,o*i));return"complex64"===n&&(r=Cu(r),s=Cu(s)),["["+r.map(((e,t)=>xu(e,a[t],n))).join(", ")+", ..., "+s.map(((e,t)=>xu(e,a[o-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?Cu(e):Array.from(e)).map(((e,t)=>xu(e,a[t],n))).join(", ")+"]"]}const A=t.slice(1),u=r.slice(1),c=r[0]*i,h=[];if(o>20){for(let t=0;t<3;t++){const r=t*c,s=r+c;h.push(...ku(e.slice(r,s),A,n,u,a,!1))}h.push("...");for(let t=o-3;t<o;t++){const r=t*c,s=r+c;h.push(...ku(e.slice(r,s),A,n,u,a,t===o-1))}}else for(let t=0;t<o;t++){const r=t*c,s=r+c;h.push(...ku(e.slice(r,s),A,n,u,a,t===o-1))}const d=2===l?",":"";h[0]="["+(o>0?h[0]+d:"");for(let e=1;e<h.length-1;e++)h[e]=" "+h[e]+d;let p=",\n";for(let e=2;e<l;e++)p+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(s?"":p),h}function Cu(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class Nu{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Gs(e),null!=n){const e=n.length;Vs(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||ri(t,this.size),this.strides=ci(e)}set(e,...t){0===t.length&&(t=[0]),Vs(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Su().makeTensor(this.values,this.shape,this.dtype)}}let Su=null,Iu=null,Eu=null;class Fu{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Gs(e),this.strides=ci(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Iu.buffer(this.shape,this.dtype,e)}bufferSync(){return Iu.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return di(this.shape,e,"complex64"===this.dtype)}arraySync(){return di(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=Su().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>fu(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Su().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Su().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>fu(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Su().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Su().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Iu.print(this,e)}clone(){return this.throwIfDisposed(),Iu.clone(this)}toString(e=!1){return vu(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Iu.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),Su().makeVariable(this,e,t,n)}}function Tu(){return Ii("Tensor",(()=>Fu))}Object.defineProperty(Fu,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Tu();class Lu extends Fu{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!js(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Su().disposeTensor(this),this.dataId=e.dataId,Su().incRef(this,null)}dispose(){Su().disposeVariable(this),this.isDisposedInternal=!0}}var Uu,_u,Ru,Du,Qu;Object.defineProperty(Lu,Symbol.hasInstance,{value:e=>e instanceof Fu&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Uu||(Uu={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(_u||(_u={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Ru||(Ru={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Du||(Du={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Qu||(Qu={}));const Ou={float32:Du,int32:_u,bool:Ru,complex64:Qu};function $u(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Ou[e][t]}function Mu(e){return $u(e,"int32")}function Pu(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function Hu(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function zu(e,t){if(e.dtype===t.dtype)return[e,t];const n=$u(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Vu(e,t){return t.some((t=>t.id===e.id))}function Wu(e){const t=[];return Ku(e,t,new Set),t}function Ku(e,t,n){if(null==e)return;if(e instanceof Fu)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!=typeof r)return;var r;const a=e;for(const e in a){const r=a[e];n.has(r)||(n.add(r),Ku(r,t,n))}}function Gu(e){return null!=e.kernelName}class ju{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class qu{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ju}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(MA(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new yu(this.backendInstance),!0}setupRegisteredKernels(){KA(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){KA(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof Os||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId||(this.registry[e]=n,this.pendingBackendInit=null,0)))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,MA(`Initialization of backend ${e} failed`),MA(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return MA(`Initialization of backend ${e} failed`),MA(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),s=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return qu.nextTensorId++}nextVariableId(){return qu.nextVariableId++}clone(e){const t=Ju.runKernel(Vo,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e};return Ju.runKernel(Yi,t,{dtype:"float32"})}})),[],{}),t}runKernel(e,t,n){if(null==this.backendName&&this.backend,null==VA(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let a=0;n.forEach((e=>{a+="complex64"===e.dtype?3:1}));const s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-s;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;let i,o;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=Gu(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Gu(e)){const{kernelName:t,inputs:a,attrs:s}=e;null==this.backendName&&this.backend;const l=VA(t,this.backendName);Vs(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),i=()=>{const e=this.backend.numDataIds();o=l.kernelFunc({inputs:a,attrs:s,backend:this.backend});const i=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,i);const A=i.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,a,A);n=this.saveTensorsForBackwardMode(e)}return A}}else{const{forwardFunc:t}=e,a=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};i=()=>{const e=this.backend.numDataIds();o=this.tidy((()=>t(this.backend,a)));const n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:A,attrs:u}=e,c=Gu(e)?null:e.backwardsFunc;let h;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(h=this.profiler.profileKernel(l,A,(()=>i())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),t=h.outputs):t=i()})),r&&this.addTapeNode(l,A,t,c,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(A).map((e=>null!=A[e]?A[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=WA(e);if(null!=r){const e=r.inputsToSave||[],a=r.outputsToSave||[];let s;r.saveAllInputs?(Vs(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),s=Object.keys(t).map((e=>t[e]))):s=e.map((e=>t[e]));const i=n.filter(((e,t)=>a[t]));return s.concat(i)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&ii(e[0])&&(a=e.map((e=>pu(e))));const s=r.write(a,t,n),i=new Fu(t,n,s,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){const e=this.state.tensorInfo.get(s),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,n,r){const a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:a}=e,s=new Fu(r,a,n,this.nextTensorId());return this.trackTensor(s,t),s}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const a=new Lu(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*si(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Lu||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*si(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,s){const i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=WA(e);null!=o&&(r=o.gradFunc),null!=r&&(i.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=fi(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],a,s))),this.state.activeTape.push(i)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Wu(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(Vs(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const a=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));Vs(a instanceof Fu,(()=>"The result y returned by f() must be a tensor."));const s=function(e,t,n){const r={},a={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){const s=e[n],i=s.inputs;for(const e in i){const n=i[e];let o=!1;for(let e=0;e<t.length;e++)if(r[n.id]){s.outputs.forEach((e=>r[e.id]=!0)),o=!0,a[s.id]=!0;break}if(o)break}}const s={};s[n.id]=!0;const i={};for(let t=e.length-1;t>=0;t--){const n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(s[n.outputs[e].id]){for(const e in r)s[r[e].id]=!0,i[n.id]=!0;break}}const o=[];for(let t=0;t<e.length;t++){const n=e[t];if(a[n.id]&&i[n.id]){const e={};for(const t in n.inputs){const a=n.inputs[t];r[a.id]&&(e[t]=a)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,o.push(t)}}return o}(this.state.activeTape,t,a);if(!r&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[a.id]=null==n?function(e){const t=pi(Gs(e),"float32");return Ju.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){const s=t[a],i=[];if(s.outputs.forEach((t=>{const n=e[t.id];null!=n?i.push(n):i.push(null)})),null==s.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const o=s.gradient(i);for(const t in s.inputs){if(!(t in o))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(o)}.`);const a=n((()=>o[t]()));if("float32"!==a.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);const i=s.inputs[t];if(!js(a.shape,i.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${i.shape}'`);if(null==e[i.id])e[i.id]=a;else{const t=e[i.id];e[i.id]=r(t,a),t.dispose()}}}}(e,s,(e=>this.tidy(e)),Yu);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:a,grads:r}}))}customGrad(e){return Vs(Ai(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;Vs(t.every((e=>e instanceof Fu)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};return t.forEach(((e,t)=>{r[t]=e})),this.runKernelFunc({forwardFunc:(r,a)=>(n=e(...t,a),Vs(n.value instanceof Fu,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),Vs(Ai(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,r)=>{const a=n.gradFunc(e,r),s=Array.isArray(a)?a:[a];Vs(s.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),Vs(s.every((e=>e instanceof Fu)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const i={};return s.forEach(((e,t)=>{i[t]=()=>e})),i},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=du(),n=await this.backend.time(e);return n.wallMs=du()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ju;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Xu(){const e=Si();if(null==e._tfengine){const t=new xi(e);e._tfengine=new qu(t)}var t;return t=e._tfengine.ENV,Ni=t,Su=()=>e._tfengine,e._tfengine}qu.nextTensorId=0,qu.nextVariableId=0;const Ju=Xu();function Yu(e,t){const n={a:e,b:t};return Ju.runKernel(Li,n)}function Zu(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function ec(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const tc=ki();function nc(e,t){let n=e;if(mu(e))return"string"===t?[]:[e.length];if(Pu(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(Hu(e))return[e.buffer.size/(null==t?4:si(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||mu(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&ki().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&rc(e,r,[]),r}function rc(e,t,n){if(n=n||[],!Array.isArray(e)&&!mu(e))return void Vs(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));Vs(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),Vs(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let t=0;t<e.length;++t)rc(e[t],r,n.concat(t))}function ac(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function sc(e,t,n,r="numeric"){if(e instanceof Tu())return ac(r,e.dtype,t,n),e;let a=li(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),ac(r,a,t,n),null==e||!mu(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const s=nc(e,a);mu(e)||Array.isArray(e)||(e=[e]);const i="string"!==a?hu(e,a):gu(e,[],!0);return Ju.makeTensor(i,s,a)}function ic(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,a)=>sc(e,`${t}[${a}]`,n,r)))}tc.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),tc.registerFlag("IS_BROWSER",(()=>ec())),tc.registerFlag("IS_NODE",(()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)),tc.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),tc.registerFlag("IS_SAFARI",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),tc.registerFlag("PROD",(()=>!1)),tc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>tc.getBool("DEBUG"))),tc.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),tc.registerFlag("IS_TEST",(()=>!1)),tc.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>tc.getBool("DEBUG"))),tc.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),tc.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),tc.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const oc="__op";function lc(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=oc;const a=(...e)=>{Ju.startScope(n);try{const t=r(...e);return wi(t)&&console.error("Cannot return a Promise inside of tidy."),Ju.endScope(t),t}catch(e){throw Ju.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}const Ac=lc({complex_:function(e,t){const n=sc(e,"real","complex"),r=sc(t,"imag","complex");Ws(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const a={real:n,imag:r};return Ju.runKernel(to,a)}});function uc(e,t,n,r){if(null==r)r=li(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Hu(e)||Pu(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Ju.backend.createTensorFromGPUData(e,t||n,r)}if(!mu(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){gi(t);const e=Gs(t),r=Gs(n);Vs(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let e=0;e<n.length;++e){const r=n[e],a=e!==n.length-1||r!==Gs(t.slice(e));Vs(n[e]===t[e]||!a,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return mu(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?hu(e,r):gu(e,[],!0),Ju.makeTensor(e,t,r)}function cc(e,t,n){return uc(e,t,nc(e,n),n)}const hc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class dc{static join(e){return new dc(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>mu(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error(`Could not find start shard for byte ${e}`);const r=new ArrayBuffer(t-e),a=new Uint8Array(r);let s=0;for(let r=n;r<this.shards.length;r++){const n=this.shards[r],i=e+s-n.start,o=s,l=Math.min(t,n.end)-n.start,A=new Uint8Array(n.buffer,i,l-i);if(a.set(A,o),s+=A.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const a=Math.floor((r-n)/2)+n,s=t(e[a]);if(0===s)return a;s<0?r=a:n=a+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function pc(){return Ju}function fc(){return Ju.memory()}function mc(e,t){return Ju.tidy(e,t)}function gc(e){Wu(e).forEach((e=>e.dispose()))}function yc(e){return Ju.keep(e)}function bc(e,t,n=1){return Ju.registerBackend(e,t,n)}function wc(){return Ju.backend}Eu=function(e){ki().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};const vc=4;async function xc(e,t){const n=[],r=[],a=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let s=0;s<a.length;++s){const i=a[s],o=Array.isArray(e)?e[s].tensor:e[i];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error(`Unsupported dtype in weight '${i}': ${o.dtype}`);const l={name:i,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){const e=new Promise((async e=>{const t=await o.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+vc*t.length,r=new Uint8Array(n);let a=0;for(let e=0;e<t.length;e++){const n=t[e],s=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(s,a),a+=vc,r.set(n,a),a+=n.length}e(r)}));r.push(e)}else r.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:Ec(await Promise.all(r)),specs:n}}function Bc(e,t){const n=new dc(e),r={};let a=0;for(const e of t){const t=kc(e,((e,t)=>n.slice(a+e,a+t)));r[e.name]=Nc(e,n.slice(a,a+t)),a+=t}return r}function kc(e,t){const n=Gs(e.shape);let r;if("quantization"in e){const t=e.quantization;r=hc[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=vc+new Uint32Array(t(e,e+vc))[0];return e}r=hc[e.dtype]}return n*r}async function Cc(e,t){const n=Gs(e.shape);let r;if("quantization"in e){const t=e.quantization;r=hc[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=vc+new Uint32Array(await t(e,e+vc))[0];return e}r=hc[e.dtype]}return n*r}function Nc(e,t){const n=e.name,r=e.dtype,a=e.shape,s=Gs(a);let i,o=0;if("quantization"in e){const a=e.quantization;if("uint8"===a.dtype||"uint16"===a.dtype){if(!("min"in a)||!("scale"in a))throw new Error(`Weight ${e.name} with quantization ${a.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==a.dtype)throw new Error(`Weight ${e.name} has unknown quantization dtype ${a.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==r)throw new Error(`Weight ${e.name} is quantized with ${a.dtype} which only supports weights of type float32 not ${r}.`)}const l=hc[a.dtype],A="uint8"===a.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===a.dtype||"uint16"===a.dtype){i=new Float32Array(A.length);for(let e=0;e<A.length;e++){const t=A[e];i[e]=t*a.scale+a.min}}else{if("float16"!==a.dtype)throw new Error(`Unsupported quantization type ${a.dtype} for weight type float32.`);{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;!(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const a=new ArrayBuffer(4*r.length),s=new Uint32Array(a);for(let a=0;a<r.length;a++){const i=r[a],o=e[n[i>>10]+(1023&i)]+t[i>>10];s[a]=o}return new Float32Array(a)}}();i=e(A)}}else{if("int32"!==r)throw new Error(`Unsupported dtype in weight '${n}': ${r}`);if("uint8"!==a.dtype&&"uint16"!==a.dtype)throw new Error(`Unsupported quantization type ${a.dtype} for weight type int32.`);i=new Int32Array(A.length);for(let e=0;e<A.length;e++){const t=A[e];i[e]=Math.round(t*a.scale+a.min)}}o+=s*l}else if("string"===r){const n=Gs(e.shape);i=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(o,o+vc))[0];o+=vc;const n=new Uint8Array(t.slice(o,o+e));i.push(n),o+=e}}else{const e=hc[r];if("float32"===r)i=new Float32Array(t);else if("int32"===r)i=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){i=new Float32Array(t);const e=new Float32Array(i.length/2),n=new Float32Array(i.length/2);for(let t=0;t<e.length;t++)e[t]=i[2*t],n[t]=i[2*t+1];const r=cc(e,a,"float32"),s=cc(n,a,"float32"),o=Ac(r,s);return r.dispose(),s.dispose(),o}throw new Error(`Unsupported dtype in weight '${n}': ${r}`)}i=new Uint8Array(t)}o+=s*e}return cc(i,a,r)}async function Sc(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:a}=await e.read();if(t&&null==a){const e=n-r.byteLength;throw new Error(`Reader is done but ${e} bytes are still expected`)}const s=new Uint8Array(r.length+a.byteLength);s.set(r,0),s.set(new Uint8Array(a),r.length),r=s}return r.buffer}async function Ic(e,t){const n={},r=e.getReader();let a=new ArrayBuffer(0);for(const e of t){const t=await Cc(e,(async(e,t)=>(a=await Sc(r,a,t),a.slice(e,t))));a=await Sc(r,a,t);const s=a.slice(0,t);a=a.slice(t);const i=Nc(e,s);if(n[e.name]=i,"webgpu"===Ju.backendName){const e=wc();"uploadToGPU"in e&&Gs(i.shape)>=ki().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(i.dataId)}}return n}function Ec(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let a=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}const Fc="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Tc(e){return Fc?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Lc(e){return dc.join(e)}function Uc(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function _c(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Rc(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function Dc(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),Rc(e,n,r)}function Qc(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Tc(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Tc(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new dc(e.weightData).byteLength}}function Oc(e){const t=[];for(const n of e)t.push(...n.weights);return t}class $c{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==$c.instance&&($c.instance=new $c),$c.instance}static registerSaveRouter(e){$c.getInstance().saveRouters.push(e)}static registerLoadRouter(e){$c.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return $c.getHandlers(e,"save")}static getLoadHandlers(e,t){return $c.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?$c.getInstance().loadRouters:$c.getInstance().saveRouters).forEach((t=>{const a=t(e,n);null!==a&&r.push(a)})),r}}const Mc=e=>$c.registerSaveRouter(e),Pc=e=>$c.registerLoadRouter(e),Hc=e=>$c.getSaveHandlers(e),zc=(e,t)=>$c.getLoadHandlers(e,t),Vc="tensorflowjs",Wc="models_store",Kc="model_info_store";function Gc(){if(!ki().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function jc(e){const t=e.result;t.createObjectStore(Wc,{keyPath:"modelPath"}),t.createObjectStore(Kc,{keyPath:"modelPath"})}class qc{constructor(e){if(this.indexedDB=Gc(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(Vc,1);r.onupgradeneeded=()=>jc(r),r.onsuccess=()=>{const a=r.result;if(null==t){const t=a.transaction(Wc,"readonly"),r=t.objectStore(Wc).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{t.weightData=dc.join(t.weightData);const r=Qc(t),s=a.transaction(Kc,"readwrite");let i,o,l=s.objectStore(Kc);try{i=l.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(e){return n(e)}i.onsuccess=()=>{o=a.transaction(Wc,"readwrite");const i=o.objectStore(Wc);let A;try{A=i.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(e){return n(e)}A.onsuccess=()=>e({modelArtifactsInfo:r}),A.onerror=e=>{l=s.objectStore(Kc);const t=l.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(A.error)),t.onerror=e=>(a.close(),n(A.error))}},i.onerror=e=>(a.close(),n(i.error)),s.oncomplete=()=>{null==o?a.close():o.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)}))}}qc.URL_SCHEME="indexeddb://";const Xc=e=>{return ki().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(qc.URL_SCHEME)?(t=e.slice(qc.URL_SCHEME.length),new qc(t)):null;var t};$c.registerSaveRouter(Xc),$c.registerLoadRouter(Xc);class Jc{constructor(){this.indexedDB=Gc()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(Vc,1);n.onupgradeneeded=()=>jc(n),n.onsuccess=()=>{const r=n.result,a=r.transaction(Kc,"readonly"),s=a.objectStore(Kc).getAll();s.onsuccess=()=>{const t={};for(const e of s.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},s.onerror=e=>(r.close(),t(s.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(qc.URL_SCHEME)?t.slice(qc.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(Vc,1);r.onupgradeneeded=()=>jc(r),r.onsuccess=()=>{const a=r.result,s=a.transaction(Kc,"readwrite"),i=s.objectStore(Kc),o=i.get(e);let l;o.onsuccess=()=>{if(null==o.result)return a.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=i.delete(e),s=()=>{l=a.transaction(Wc,"readwrite");const r=l.objectStore(Wc).delete(e);r.onsuccess=()=>t(o.result.modelArtifactsInfo),r.onerror=e=>n(o.error)};r.onsuccess=s,r.onerror=e=>(s(),a.close(),n(o.error))}},o.onerror=e=>(a.close(),n(o.error)),s.oncomplete=()=>{null==l?a.close():l.oncomplete=()=>a.close()}},r.onerror=e=>n(r.error)}))}}const Yc="/",Zc="tensorflowjs_models",eh="info",th="model_topology",nh="weight_specs",rh="weight_data",ah="model_metadata";function sh(e){return{info:[Zc,e,eh].join(Yc),topology:[Zc,e,th].join(Yc),weightSpecs:[Zc,e,nh].join(Yc),weightData:[Zc,e,rh].join(Yc),modelMetadata:[Zc,e,ah].join(Yc)}}function ih(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function oh(e){const t=e.split(Yc);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Yc)}class lh{constructor(e){if(!ki().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=sh(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Qc(e),a=dc.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Fc)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(a));const s={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(s)),{modelArtifactsInfo:r}}catch(e){throw ih(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){const e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Fc){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(s),t}}lh.URL_SCHEME="localstorage://";const Ah=e=>{return ki().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(lh.URL_SCHEME)?(t=e.slice(lh.URL_SCHEME.length),new lh(t)):null;var t};$c.registerSaveRouter(Ah),$c.registerLoadRouter(Ah);class uh{constructor(){Vs(ki().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Vs("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=Zc+Yc,n=Yc+eh;for(let r=0;r<this.LS.length;++r){const a=this.LS.key(r);a.startsWith(t)&&a.endsWith(n)&&(e[oh(a)]=JSON.parse(this.LS.getItem(a)))}return e}async removeModel(e){var t;const n=sh(e=(t=e).startsWith(lh.URL_SCHEME)?t.slice(lh.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return ih(n),r}}const ch="://";class hh{constructor(){this.managers={}}static getInstance(){return null==hh.instance&&(hh.instance=new hh),hh.instance}static registerManager(e,t){Vs(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(ch)&&(e=e.slice(0,e.indexOf(ch))),Vs(e.length>0,(()=>"scheme must not be an empty string."));const n=hh.getInstance();Vs(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=hh.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(hh.getInstance().managers)}}function dh(e){if(-1===e.indexOf(ch))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${hh.getSchemes().join(",")}`);return{scheme:e.split(ch)[0],path:e.split(ch)[1]}}async function ph(e,t,n=!1){Vs(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=$c.getLoadHandlers(e);Vs(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),Vs(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const a=r[0],s=$c.getSaveHandlers(t);Vs(s.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),Vs(s.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const i=s[0],o=dh(e).scheme,l=dh(e).path,A=o===dh(e).scheme,u=await a.load();n&&A&&await hh.getManager(o).removeModel(l);const c=await i.save(u);return n&&!A&&await hh.getManager(o).removeModel(l),c.modelArtifactsInfo}async function fh(){const e=hh.getSchemes(),t={};for(const n of e){const e=await hh.getManager(n).listModels();for(const r in e)t[n+ch+r]=e[r]}return t}async function mh(e){const t=dh(e);return hh.getManager(t.scheme).removeModel(t.path)}async function gh(e,t){return ph(e,t,!1)}async function yh(e,t){return ph(e,t,!0)}class bh{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!=typeof window&&ki().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{e.source===window&&e.data.name===this.messageName&&(e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))}),!0))):setTimeout(e,t)}isTypedArray(e){return XA(e)}}if(ki().get("IS_BROWSER")){ki().setPlatform("browser",new bh);try{hh.registerManager(lh.URL_SCHEME,new uh)}catch(nr){}try{hh.registerManager(qc.URL_SCHEME,new Jc)}catch(nr){}}let wh;function vh(e,t="float32",n){return t=t||"float32",gi(e),new Nu(e,t,n)}ki().get("IS_NODE")&&!ki().get("IS_BROWSER")&&ki().setPlatform("node",new class{constructor(){this.util=i(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=ki().global.fetch?ki().global.fetch(e,t):(null==wh&&(wh=i(5817)),wh(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}});const xh=lc({cast_:function(e,t){const n=sc(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},a={dtype:t};return Ju.runKernel(Yi,r,a)}}),Bh=lc({clone_:function(e){const t={x:sc(e,"x","clone","string_or_numeric")};return Ju.runKernel(Vo,t)}});function kh(e,t=!1){console.log(e.toString(t))}Xu(),Iu={buffer:vh,cast:xh,clone:Bh,print:kh};const Ch=lc({add_:function(e,t){let n=sc(e,"a","add"),r=sc(t,"b","add");[n,r]=zu(n,r);const a={a:n,b:r};return Ju.runKernel(Li,a)}}),Nh=lc({floorDiv_:function(e,t){let n=sc(e,"a","floorDiv"),r=sc(t,"b","floorDiv");[n,r]=zu(n,r);const a={a:n,b:r};return Ju.runKernel(Oo,a)}}),Sh=lc({div_:function(e,t){let n=sc(e,"a","div"),r=sc(t,"b","div");if([n,r]=zu(n,r),"int32"===n.dtype&&"int32"===r.dtype)return Nh(n,r);const a={a:n,b:r};return Ju.runKernel(Co,a,{})}}),Ih=lc({mul_:function(e,t){let n=sc(e,"a","mul"),r=sc(t,"b","mul");[n,r]=zu(n,r);const a={a:n,b:r};return Ju.runKernel(wl,a)}}),Eh=lc({sqrt_:function(e){const t={x:sc(e,"x","sqrt","float32")};return Ju.runKernel(iA,t)}}),Fh=lc({square_:function(e){const t=sc(e,"x","square");return Ju.runKernel("Square",{x:t},{})}}),Th=lc({zerosLike_:function(e){const t={x:sc(e,"x","zerosLike")};return Ju.runKernel(UA,t)}});function Lh(e){return Ju.customGrad(e)}function Uh(e,t){if((mu(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&mu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return uc(e,[],[],t)}const _h=new Map,Rh=new Map;class Dh{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Qh{constructor(){this.classNameMap={}}static getMap(){return null==Qh.instance&&(Qh.instance=new Qh),Qh.instance}static register(e){Qh.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Oh(e,t,n){Vs(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),Vs("string"==typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),Vs(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),void 0===t&&(t="Custom"),void 0===n&&(n=e.className);const r=t+">"+n;return Qh.register(e),_h.set(r,e),Rh.set(e,r),e}class $h extends Dh{minimize(e,t=!1,n){const{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:a[e.name]})));this.applyGradients(e)}else this.applyGradients(a);return gc(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){Vs(Ai(e),(()=>"The f passed in variableGrads(f) must be a function")),Vs(null==t||Array.isArray(t)&&t.every((e=>e instanceof Lu)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in Ju.registeredVariables)t.push(Ju.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,a=t.length;t=t.filter((e=>e.trainable)),Vs(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`));const{value:s,grads:i}=Ju.gradients(e,t,null,!0);Vs(i.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),Vs(0===s.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`));const o={};return t.forEach(((e,t)=>{null!=i[t]&&(o[e.name]=i[t])})),null!=r&&r.forEach((e=>o[e.name]=null)),{value:s,grads:o}}(e,t)}dispose(){null!=this.iterations_&&gc(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Uh(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty($h,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class Mh extends $h{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Ju.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ju.registeredVariables[t],a=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:mc((()=>Th(r).variable(a)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:mc((()=>Th(r).variable(a)))});const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const i=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;mc((()=>{const e=Ch(Ih(i,this.rho),Ih(Fh(s),1-this.rho)),t=Ih(Sh(Eh(Ch(o,this.epsilon)),Eh(Ch(i,this.epsilon))),s),n=Ch(Ih(o,this.rho),Ih(Fh(t),1-this.rho));i.assign(e),o.assign(n);const a=Ch(Ih(t,-this.learningRate),r);r.assign(a)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(gc(this.accumulatedGrads.map((e=>e.variable))),gc(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function Ph(e,t,n){gi(e);const r={shape:e,value:t,dtype:n=n||li(t)};return Ju.runKernel(Ro,{},r)}class Hh extends $h{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ju.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:mc((()=>Ph(r.shape,this.initialAccumulatorValue).variable(e)))}}const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const s=this.accumulatedGrads[n].variable;mc((()=>{const e=Ch(s,Fh(a));s.assign(e);const t=Ch(Ih(Sh(a,Eh(Ch(e,Ju.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&gc(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const zh=lc({pow_:function(e,t){let n=sc(e,"base","pow"),r=sc(t,"exp","pow");[n,r]=zu(n,r);const a={a:n,b:r};return Ju.runKernel(Fl,a)}}),Vh=lc({sub_:function(e,t){let n=sc(e,"a","sub"),r=sc(t,"b","sub");[n,r]=zu(n,r);const a={a:n,b:r};return Ju.runKernel(BA,a)}});class Wh extends $h{static get className(){return"Adam"}constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],mc((()=>{this.accBeta1=Uh(t).variable(),this.accBeta2=Uh(n).variable()})),null==r&&(this.epsilon=Ju.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);mc((()=>{const n=Vh(1,this.accBeta1),r=Vh(1,this.accBeta2);t.forEach(((t,a)=>{const s=Ju.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:mc((()=>Th(s).variable(i)))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:`${t}/v`,variable:mc((()=>Th(s).variable(i)))});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[a].variable,A=this.accumulatedSecondMoment[a].variable,u=Ch(Ih(l,this.beta1),Ih(o,1-this.beta1)),c=Ch(Ih(A,this.beta2),Ih(Fh(o),1-this.beta2)),h=Sh(u,n),d=Sh(c,r);l.assign(u),A.assign(c);const p=Ch(Ih(Sh(h,Ch(Eh(d),this.epsilon)),-this.learningRate),s);s.assign(p)})),this.accBeta1.assign(Ih(this.accBeta1,this.beta1)),this.accBeta2.assign(Ih(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&gc(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&gc(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),mc((()=>{this.accBeta1.assign(zh(this.beta1,this.iterations_+1)),this.accBeta2.assign(zh(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const Kh=lc({abs_:function(e){const t=sc(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return Ju.runKernel(no,e)}{const e={x:t};return Ju.runKernel(Ei,e)}}});function Gh(e,t){const n=e.length,r=[];for(let a=0;a<n;a++){const s=n-1-a,i=e[s]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(s)}return r}function jh(e,t){const n=[];for(let r=0;r<t.length;r++){const a=e[e.length-r-1],s=t.length-r-1,i=t[s];(null==a||1===a&&i>1)&&n.unshift(s)}return n}function qh(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let s=e[e.length-a-1];null==s&&(s=1);let i=t[t.length-a-1];if(null==i&&(i=1),1===s)r[n-a-1]=i;else if(1===i)r[n-a-1]=s;else{if(s!==i)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);r[n-a-1]=s}}return r}const Xh=lc({maximum_:function(e,t){let n=sc(e,"a","maximum"),r=sc(t,"b","maximum");[n,r]=zu(n,r),"bool"===n.dtype&&(n=xh(n,"int32"),r=xh(r,"int32")),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(ll,a)}});class Jh extends $h{static get className(){return"Adamax"}constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],mc((()=>{this.iteration=Uh(0).variable(),this.accBeta1=Uh(t).variable()})),null==r&&(this.epsilon=Ju.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);mc((()=>{const n=Vh(1,this.accBeta1),r=Sh(-this.learningRate,Ch(Ih(this.iteration,this.decay),1));t.forEach(((t,a)=>{const s=Ju.registeredVariables[t],i=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:Th(s).variable(i)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:`${t}/v`,variable:Th(s).variable(i)});const o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;const l=this.accumulatedFirstMoment[a].variable,A=this.accumulatedWeightedInfNorm[a].variable,u=Ch(Ih(l,this.beta1),Ih(o,1-this.beta1)),c=Ih(A,this.beta2),h=Kh(o),d=Xh(c,h);l.assign(u),A.assign(d);const p=Ch(Ih(Sh(r,n),Sh(u,Ch(d,this.epsilon))),s);s.assign(p)})),this.iteration.assign(Ch(this.iteration,1)),this.accBeta1.assign(Ih(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&gc(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&gc(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class Yh extends $h{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const a=Ju.registeredVariables[t];mc((()=>{const e=Ch(Ih(this.c,r),a);a.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=yc(Uh(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class Zh extends Yh{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Uh(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ju.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:mc((()=>Th(r).variable(e)))}}const a=this.accumulations[n].variable,s=Array.isArray(e)?e[n].tensor:e[t];null!=s&&mc((()=>{let e;const t=Ch(Ih(this.m,a),s);e=this.useNesterov?Ch(Ih(this.c,Ch(s,Ih(t,this.m))),r):Ch(Ih(this.c,t),r),a.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&gc(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class ed extends $h{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=Ju.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=Ju.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:mc((()=>Th(r).variable(a)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:mc((()=>Th(r).variable(a)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:mc((()=>Th(r).variable(a)))});const s=Array.isArray(e)?e[n].tensor:e[t];if(null==s)return;const i=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;mc((()=>{const e=Ch(Ih(i,this.decay),Ih(Fh(s),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,a=Ch(Ih(t,this.decay),Ih(s,1-this.decay)),l=Sh(Ih(s,this.learningRate),Eh(Vh(e,Ch(Fh(a),this.epsilon)))),A=Ch(Ih(o,this.momentum),l);i.assign(e),t.assign(a),o.assign(A);const u=Vh(r,A);r.assign(u)}else{const e=Ch(Ih(i,this.decay),Ih(Fh(s),1-this.decay)),t=Ch(Ih(o,this.momentum),Sh(Ih(s,this.learningRate),Eh(Ch(e,this.epsilon))));i.assign(e),o.assign(t);const n=Vh(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&gc(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&gc(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&gc(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const td=[Mh,Hh,Wh,Jh,Zh,ed,Yh];function nd(e){return new Promise((e=>setTimeout(e))).then(e)}class rd{constructor(e){if(!ki().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(rd.URL_SCHEME)&&(e=e.slice(rd.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=dc.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=_c(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=r,await nd((()=>a.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await nd((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Qc(e)}}}}rd.URL_SCHEME="downloads://";class ad{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),a=r.modelTopology;if(null==a)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:a});const s=Dc(r,(e=>this.loadWeights(e)));e(s)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const r of e)t.push(...r.weights),n.push(...r.paths);const r=this.checkManifestAndWeightFiles(e),a=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(a).then((e=>[t,e]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const a=new FileReader;a.onload=e=>{const t=e.target.result;n(t)},a.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>Uc(e.name))),r={};for(const a of e)a.paths.forEach((e=>{const a=Uc(e);if(-1!==t.indexOf(a))throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(t.push(a),-1===n.indexOf(a))throw new Error(`Weight file with basename '${a}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(a)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function sd(e){return new ad(e)}function id(e,t,n,r){!function(e){Vs(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Vs(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),Vs(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),Vs(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let a=0;return Promise.all(e.map((s=>(s.then((s=>{const i=n+ ++a/e.length*(r-n);return t(i),s})),s))))}async function od(e,t){null==t&&(t={});const n=null==t.fetchFunc?ki().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),a=(null==t.onProgress?await Promise.all(r):await id(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(a):await id(a,t.onProgress,.5,1)}async function ld(e,t="",n,r){return Ad((e=>od(e,{requestInit:r})))(e,t,n)}function Ad(e){return async(t,n="",r)=>{const a=t.map((()=>!1)),s={},i=null!=r?r.map((()=>!1)):[],o=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,A=hc[l]*Gs(e.shape),u=()=>{a[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:A})};null!=r?r.forEach(((t,n)=>{t===e.name&&(u(),i[n]=!0)})):u(),o.push(e.name),n+=A}))})),!i.every((e=>e))){const e=r.filter(((e,t)=>!i[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${o.join(", ")}.`)}const l=a.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),A=[];l.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;A.push(t)}))}));const u=await e(A),c={};let h=0;return l.forEach((e=>{const n=t[e].paths.length,r=new dc(u.slice(h,h+n));s[e].forEach((e=>{const t=Bc(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const e in t)c[e]=t[e]})),h+=n})),c}}$c.registerSaveRouter((e=>ki().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(rd.URL_SCHEME)?function(e="model"){return new rd(e)}(e.slice(rd.URL_SCHEME.length)):null));class ud{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Vs("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=ki().platform.fetch,Vs(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Vs(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=_c(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=dc.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:Qc(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){return this.loadOptions.streamWeights?this.loadStream():Dc(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=Oc(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?ki().platform.fetch:t.fetchFunc;let a,s=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var i;s<e.length;){if(!a){const n=(await r(e[s],t.requestInit,{isBinary:!0})).body;a=n.getReader()}const{done:o,value:l}=await a.read();if(!o)return void n.enqueue(l);s++,a=void 0,null===(i=t.onProgress)||void 0===i||i.call(t,s/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),a=this.weightPathPrefix||n,s=[],i=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):s.push(a+e+r);return this.weightUrlConverter&&s.push(...await Promise.all(i)),s}async loadWeights(e){const t=await this.getWeightUrls(e);return[Oc(e),await od(t,this.loadOptions)]}}function cd(e){return null!=e.match(ud.URL_SCHEME_REGEX)}ud.URL_SCHEME_REGEX=/^https?:\/\//;const hd=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>cd(e))):cd(e),n)return dd(e,t)}return null};function dd(e,t){return new ud(e,t)}function pd(e,t){return dd(e,t)}$c.registerSaveRouter(hd),$c.registerLoadRouter(hd);class fd{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class md{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class gd{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function yd(e,t,n,r){return new gd(bd(...arguments))}function bd(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new fd(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new fd({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new fd({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function wd(e){return new md(e)}function vd(e){return new md(e)}function xd(e,t,n){if(Ks(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=nc(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return uc(e,t,r,n)}let Bd;const kd=lc({fromPixels_:function(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)s=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);o=!0}if(null!=VA(RA,Ju.backendName)){const n={pixels:e},r={numChannels:t};return Ju.runKernel(RA,n,r)}const[l,A]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];let u,c;if(i)u=e.getContext("2d").getImageData(0,0,l,A).data;else if(r||n)u=e.data;else if(s||a||o){if(null==Bd)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Bd=new OffscreenCanvas(1,1).getContext("2d")}else Bd=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Bd.canvas.width=l,Bd.canvas.height=A,Bd.drawImage(e,0,0,l,A),u=Bd.getImageData(0,0,l,A).data}if(4===t)c=new Int32Array(u);else{const e=l*A;c=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)c[n*t+e]=u[4*n+e]}return xd(c,[A,l,t],"int32")}}),Cd=-2,Nd=-1;function Sd(e,t,n){const r=e.shape.length;Vs(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),Vs(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let a=0;a<r;++a)Vs(t[a]+n[a]<=e.shape[a],(()=>`Error in slice${r}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${e.shape[a]})`))}function Id(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Ed(e,t,n){const r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Fd(e,t,n,r){const a=[...e];for(let e=a.length;e<r.length;e++)a.push(1);for(let e=0;e<n;e++)0===e?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Td(e,t,n){return n<=e?n:n-(t-1)}function Ld(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function Ud(e,t,n,r,a,s,i,o,l){const A=e.length;let u=new Array(A),c=new Array(A),h=new Array(A);if(t.length&&n>0){const l=t[0],A=n+1;u=_d(i,l,A,r,e),c=Rd(o,l,A,a,e),h=Fd(s,l,A,e)}else for(let t=0;t<A;t++)u[t]=Qd(i,r,s,e,t,l),c[t]=Od(o,a,s,e,t,l),h[t]=Dd(s,t,l);return{begin:u,end:c,strides:h}}function _d(e,t,n,r,a){const s=[...a],i=Ld(n,t);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=0;else{const i=Td(t,n,a);let o=r[i];e&1<<i&&(o=0),s[a]=o}return s}function Rd(e,t,n,r,a){const s=[...a],i=Ld(n,t);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const i=Td(t,n,a);let o=r[i];e&1<<i&&(o=Number.MAX_SAFE_INTEGER),s[a]=o}for(let e=0;e<s.length;e++){const t=a[e];s[e]<0&&(s[e]+=t),s[e]=Ps(0,s[e],a[e])}return s}function Dd(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Qd(e,t,n,r,a,s){let i=t[a];const o=n[a]||1;(e&1<<a||s&1<<a||null==i)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[a];return i<0&&(i+=l),i=Ps(0,i,l-1),i}function Od(e,t,n,r,a,s){let i=t[a];const o=n[a]||1;(e&1<<a||s&1<<a||null==i)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[a];return i<0&&(i+=l),i=o>0?Ps(0,i,l):Ps(-1,i,l-1),i}function $d(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Md(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Pd(e,t,n){let r;const a=e.shape.length;let s;return r="number"==typeof t?[t,...new Array(a-1).fill(0)]:t.length<a?t.concat(new Array(a-t.length).fill(0)):t.slice(),r.forEach((e=>{Vs(-1!==e,(()=>"slice() does not support negative begin indexing."))})),s=null==n?new Array(a).fill(-1):"number"==typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,s=s.map(((t,n)=>t>=0?t:(Vs(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,s]}function Hd(e,t,n,r,a,s,i,o,l){let A;if(null==r?(A=new Array(t.length),A.fill(1)):A=r,null!=i&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const c={dims:A.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:A.slice(),beginMask:a,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};for(let e=0;e<c.dims;e++)u&&1<<e&o&&c.numAddAxisAfterEllipsis++,1<<e&i&&(u=!0);u||(c.ellipsisMask|=1<<c.dims,c.dims++);const h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(Cd),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(Nd),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(c,h);let d=!0,p=!0,f=!0;const m=[],g=[];for(let t=0;t<e.length;++t){if(0===h.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(h.shrinkAxisMask&1<<t),r=e[t];if(-1===r){m.push(n?1:-1);continue}const a=[h.beginMask&1<<t,h.endMask&1<<t],s=[h.strides[t]>0?0:-1,h.strides[t]>0?r:r-1];if(n&&h.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");f=f&&1===h.strides[t];const i=!!(h.beginMask&1<<t&&h.endMask&1<<t);if(h.beginValid&&h.endValid){if(n){const e=h.begin[t]<0?r+h.begin[t]:h.begin[t];if(h.begin[t]=e,h.end[t]=h.begin[t]+1,e<0||e>=r)throw Error(`slice index ${h.begin[t]} of dimension ${t} out of bounds.`)}else h.begin[t]=zd(h.begin[t],0,h.strides[t],r,a,s),h.end[t]=zd(h.end[t],1,h.strides[t],r,a,s);const e=1===h.strides[t]&&0===h.begin[t]&&h.end[t]===r;d=d&&e,p=p&&(0===t&&1===h.strides[t]||e)}else d=d&&1===h.strides[t]&&i,p=p&&(0===t&&1===h.strides[t]||i);let o,l=!1;if(h.beginValid&&h.endValid?(o=h.end[t]-h.begin[t],l=!0):n?(o=1,l=!0):i&&r>=0&&(o=h.strides[t]<0?-r:r,l=!0),l){let e;e=0===o||o<0!=h.strides[t]<0?0:Math.trunc(o/h.strides[t])+(o%h.strides[t]!==0?1:0),m.push(e)}else m.push(-1)}for(let e=0;e<h.finalShapeGatherIndices.length;++e){const t=h.finalShapeGatherIndices[e];t>=0?g.push(m[t]):t===Cd&&g.push(1)}const y=g.filter(((e,t)=>h.finalShapeGatherIndices[t]!==Cd));return{finalShapeSparse:y,finalShape:g,isIdentity:d,sliceDim0:p,isSimpleSlice:f,begin:h.begin,end:h.end,strides:h.strides}}function zd(e,t,n,r,a,s){if(a[t])return n>0?s[t]:s[t+1&1];{const t=e<0?r+e:e;return t<s[0]?s[0]:t>s[1]?s[1]:t}}const Vd=lc({acos_:function(e){const t={x:sc(e,"x","acos")};return Ju.runKernel(Fi,t)}}),Wd=lc({acosh_:function(e){const t={x:sc(e,"x","acosh")};return Ju.runKernel(Ti,t)}}),Kd=lc({addN_:function(e){Vs(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),Vs(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>sc(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!js(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return Ju.runKernel(Ui,r)}}),Gd=lc({all_:function(e,t=null,n=!1){const r={x:sc(e,"x","all","bool")},a={axis:t,keepDims:n};return Ju.runKernel(_i,r,a)}}),jd=lc({any_:function(e,t=null,n=!1){const r={x:sc(e,"x","any","bool")},a={axis:t,keepDims:n};return Ju.runKernel(Ri,r,a)}}),qd=lc({argMax_:function(e,t=0){const n={x:sc(e,"x","argMax")},r={axis:t};return Ju.runKernel(Di,n,r)}}),Xd=lc({argMin_:function(e,t=0){const n={x:sc(e,"x","argMin")},r={axis:t};return Ju.runKernel(Qi,n,r)}}),Jd=lc({asin_:function(e){const t={x:sc(e,"x","asin")};return Ju.runKernel(Oi,t)}}),Yd=lc({asinh_:function(e){const t={x:sc(e,"x","asinh")};return Ju.runKernel($i,t)}}),Zd=lc({atan_:function(e){const t={x:sc(e,"x","atan")};return Ju.runKernel(Mi,t)}}),ep=lc({atan2_:function(e,t){let n=sc(e,"a","atan2"),r=sc(t,"b","atan2");[n,r]=zu(n,r);const a={a:n,b:r};return Ju.runKernel(Hi,a)}}),tp=lc({atanh_:function(e){const t={x:sc(e,"x","atanh")};return Ju.runKernel(Pi,t)}});function np(e,t,n,r,a="NHWC",s){return sp(e,[...t,e[3]],n,s,r,null,null,fp(a))}function rp(e,t,n,r,a,s,i="channelsLast"){const[o,l]=lp(t);let A;if("channelsLast"===i)A=[o,l,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);A=[o,l,e[1],e[1]]}return sp(e,A,n,r,a,s,!1,i)}function ap(e,t,n,r,a,s,i="NDHWC"){const[o,l,A]=Ap(t);let u,c;if("NDHWC"===i)c="channelsLast",u=[o,l,A,e[4],e[4]];else{if("NCDHW"!==i)throw new Error(`Unknown dataFormat ${i}`);c="channelsFirst",u=[o,l,A,e[1],e[1]]}return ip(e,u,n,r,a,!1,c,s)}function sp(e,t,n,r,a,s,i=!1,o="channelsLast"){let[l,A,u,c]=[-1,-1,-1,-1];if("channelsLast"===o)[l,A,u,c]=e;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[l,c,A,u]=e}const[h,d,,p]=t,[f,m]=lp(n),[g,y]=lp(r),b=up(h,g),w=up(d,y),{padInfo:v,outHeight:x,outWidth:B}=function(e,t,n,r,a,s,i,o,l){let A,u,c;if("number"==typeof e){A={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const a=function(e,t,n,r,a){null==r&&(r=op(e,t,n));const s=e[1];return[cp((e[0]-t+2*r)/n+1,a),cp((s-t+2*r)/n+1,a)]}([t,n],s,r,e,o);u=a[0],c=a[1]}else if("same"===e){u=Math.ceil(t/r),c=Math.ceil(n/a);const e=Math.max(0,(u-1)*r+s-t),o=Math.max(0,(c-1)*a+i-n),l=Math.floor(e/2),h=e-l,d=Math.floor(o/2);A={top:l,bottom:h,left:d,right:o-d,type:"SAME"}}else if("valid"===e)A={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-s+1)/r),c=Math.ceil((n-i+1)/a);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const h="channelsLast"===l?e[1][0]:e[2][0],d="channelsLast"===l?e[1][1]:e[2][1],p="channelsLast"===l?e[2][0]:e[3][0],f="channelsLast"===l?e[2][1]:e[3][1];A={top:h,bottom:d,left:p,right:f,type:0===h&&0===d&&0===p&&0===f?"VALID":"EXPLICIT"},u=cp((t-s+h+d)/r+1,o),c=cp((n-i+p+f)/a+1,o)}}return{padInfo:A,outHeight:u,outWidth:c}}(a,A,u,f,m,b,w,s,o),k=i?p*c:p;let C;return"channelsFirst"===o?C=[l,k,x,B]:"channelsLast"===o&&(C=[l,x,B,k]),{batchSize:l,dataFormat:o,inHeight:A,inWidth:u,inChannels:c,outHeight:x,outWidth:B,outChannels:k,padInfo:v,strideHeight:f,strideWidth:m,filterHeight:h,filterWidth:d,effectiveFilterHeight:b,effectiveFilterWidth:w,dilationHeight:g,dilationWidth:y,inShape:e,outShape:C,filterShape:t}}function ip(e,t,n,r,a,s=!1,i="channelsLast",o){let[l,A,u,c,h]=[-1,-1,-1,-1,-1];if("channelsLast"===i)[l,A,u,c,h]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[l,h,A,u,c]=e}const[d,p,f,,m]=t,[g,y,b]=Ap(n),[w,v,x]=Ap(r),B=up(d,w),k=up(p,v),C=up(f,x),{padInfo:N,outDepth:S,outHeight:I,outWidth:E}=function(e,t,n,r,a,s,i,o,l,A,u){let c,h,d,p;if("valid"===e&&(e=0),"number"==typeof e){c={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const f=function(e,t,n,r,a,s){null==a&&(a=op(e,t[0],r[0]));const i=[0,0,0,1];for(let n=0;n<3;n++)e[n]+2*a>=t[n]&&(i[n]=cp((e[n]-t[n]+2*a)/r[n]+1,s));return i}([t,n,r,1],[o,l,A],0,[a,s,i],e,u);h=f[0],d=f[1],p=f[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{h=Math.ceil(t/a),d=Math.ceil(n/s),p=Math.ceil(r/i);const e=(h-1)*a+o-t,u=(d-1)*s+l-n,f=(p-1)*i+A-r,m=Math.floor(e/2),g=e-m,y=Math.floor(u/2),b=u-y,w=Math.floor(f/2);c={top:y,bottom:b,left:w,right:f-w,front:m,back:g,type:"SAME"}}}return{padInfo:c,outDepth:h,outHeight:d,outWidth:p}}(a,A,u,c,g,y,b,B,k,C,o),F=s?m*h:m;let T;return"channelsFirst"===i?T=[l,F,S,I,E]:"channelsLast"===i&&(T=[l,S,I,E,F]),{batchSize:l,dataFormat:i,inDepth:A,inHeight:u,inWidth:c,inChannels:h,outDepth:S,outHeight:I,outWidth:E,outChannels:F,padInfo:N,strideDepth:g,strideHeight:y,strideWidth:b,filterDepth:d,filterHeight:p,filterWidth:f,effectiveFilterDepth:B,effectiveFilterHeight:k,effectiveFilterWidth:C,dilationDepth:w,dilationHeight:v,dilationWidth:x,inShape:e,outShape:T,filterShape:t}}function op(e,t,n,r=1){const a=up(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function lp(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ap(e){return"number"==typeof e?[e,e,e]:e}function up(e,t){return t<=1?e:e+(e-1)*(t-1)}function cp(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function hp(e){const[t,n,r]=lp(e);return 1===t&&1===n&&1===r}function dp(e,t){return hp(e)||hp(t)}function pp(e){return lp(e).every((e=>e>0))}function fp(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function mp(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)Vs(qs(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{Vs(qs(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const gp=lc({reshape_:function(e,t){const n={x:sc(e,"x","reshape","string_or_numeric")},r={shape:t};return Ju.runKernel(Ml,n,r)}}),yp=lc({avgPool_:function(e,t,n,r,a){const s=sc(e,"x","avgPool","float32");Vs(dp(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let i=s,o=!1;3===s.rank&&(o=!0,i=gp(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Vs(4===i.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`)),mp("avgPool",r,a);const l={x:i},A={filterSize:t,strides:n,pad:r,dimRoundingMode:a};let u=Ju.runKernel(zi,l,A);return u=xh(u,s.dtype),o?gp(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),bp=lc({avgPool3d_:function(e,t,n,r,a,s="NDHWC"){const i=sc(e,"x","avgPool3d","float32");let o=i,l=!1;4===i.rank&&(l=!0,o=gp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Vs(5===o.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`)),Vs("NDHWC"===s,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`)),Vs("number"==typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`)),mp("avgPool3d",r,a);const A={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s};let c=Ju.runKernel(Wi,A,u);return c=xh(c,o.dtype),l?gp(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),wp=lc({concat_:function(e,t=0){Vs(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=ic(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return Bh(n[0]);const r=n,a={axis:t};return Ju.runKernel(ro,r,a)}}),vp=lc({matMul_:function(e,t,n=!1,r=!1){let a=sc(e,"a","matMul"),s=sc(t,"b","matMul");[a,s]=zu(a,s);const i={a,b:s},o={transposeA:n,transposeB:r};return Ju.runKernel(Gi,i,o)}}),xp=lc({sigmoid_:function(e){const t={x:sc(e,"x","sigmoid","float32")};return Ju.runKernel(aA,t)}}),Bp=lc({slice_:function(e,t,n){const r=sc(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const a={x:r},s={begin:t,size:n};return Ju.runKernel(eA,a,s)}}),kp=lc({tanh_:function(e){const t={x:sc(e,"x","tanh","float32")};return Ju.runKernel(CA,t)}}),Cp=lc({basicLSTMCell_:function(e,t,n,r,a,s){const i=sc(e,"forgetBias","basicLSTMCell"),o=sc(t,"lstmKernel","basicLSTMCell"),l=sc(n,"lstmBias","basicLSTMCell"),A=sc(r,"data","basicLSTMCell"),u=sc(a,"c","basicLSTMCell"),c=sc(s,"h","basicLSTMCell"),h=wp([A,c],1),d=vp(h,o),p=Ch(d,l),f=p.shape[0],m=p.shape[1]/4,g=[f,m],y=Bp(p,[0,0],g),b=Bp(p,[0,m],g),w=Bp(p,[0,2*m],g),v=Bp(p,[0,3*m],g),x=Ch(Ih(xp(y),kp(b)),Ih(u,xp(Ch(i,w))));return[x,Ih(kp(x),xp(v))]}}),Np=lc({batchToSpaceND_:function(e,t,n){const r=sc(e,"x","batchToSpaceND"),a=t.reduce(((e,t)=>e*t));Vs(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),Vs(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),Vs(r.shape[0]%a===0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`));const s={x:r},i={blockShape:t,crops:n};return Ju.runKernel(ji,s,i)}}),Sp=lc({batchNorm_:function(e,t,n,r,a,s){null==s&&(s=.001);const i=sc(e,"x","batchNorm"),o=sc(t,"mean","batchNorm"),l=sc(n,"variance","batchNorm");let A,u;null!=a&&(A=sc(a,"scale","batchNorm")),null!=r&&(u=sc(r,"offset","batchNorm")),Vs(o.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Vs(null==u||o.rank===u.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Vs(null==A||o.rank===A.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const c=function(e){let t;return t=0===e.rank||1===e.rank?gp(e,[1,1,1,e.size]):2===e.rank?gp(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?gp(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(i),h={x:c,scale:A,offset:u,mean:o,variance:l},d={varianceEpsilon:s},p=Ju.runKernel($o,h,d);return gp(p,i.shape)}}),Ip=lc({batchNorm2d_:function(e,t,n,r,a,s){const i=sc(e,"x","batchNorm"),o=sc(t,"mean","batchNorm"),l=sc(n,"variance","batchNorm");let A,u;return null!=a&&(A=sc(a,"scale","batchNorm")),null!=r&&(u=sc(r,"offset","batchNorm")),Vs(2===i.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`)),Vs(2===o.rank||1===o.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`)),Vs(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=A&&Vs(2===A.rank||1===A.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${A.rank}.`)),null!=u&&Vs(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`)),Sp(i,o,l,u,A,s)}}),Ep=lc({batchNorm3d_:function(e,t,n,r,a,s){const i=sc(e,"x","batchNorm"),o=sc(t,"mean","batchNorm"),l=sc(n,"variance","batchNorm");let A,u;return null!=a&&(A=sc(a,"scale","batchNorm")),null!=r&&(u=sc(r,"offset","batchNorm")),Vs(3===i.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`)),Vs(3===o.rank||1===o.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`)),Vs(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=A&&Vs(3===A.rank||1===A.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${A.rank}.`)),null!=u&&Vs(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`)),Sp(i,o,l,u,A,s)}}),Fp=lc({batchNorm4d_:function(e,t,n,r,a,s){const i=sc(e,"x","batchNorm"),o=sc(t,"mean","batchNorm"),l=sc(n,"variance","batchNorm");let A,u;return null!=a&&(A=sc(a,"scale","batchNorm")),null!=r&&(u=sc(r,"offset","batchNorm")),Vs(4===i.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`)),Vs(4===o.rank||1===o.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`)),Vs(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=A&&Vs(4===A.rank||1===A.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${A.rank}.`)),null!=u&&Vs(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`)),Sp(i,o,l,u,A,s)}}),Tp=lc({bincount_:function(e,t,n){const r=sc(e,"x","bincount"),a=sc(t,"weights","bincount");Vs("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),Vs(n>=0,(()=>`size must be non-negative, but got ${n}.`)),Vs(a.size===r.size||0===a.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`));const s={x:r,weights:a},i={size:n};return Ju.runKernel(qi,s,i)}}),Lp=lc({bitwiseAnd_:function(e,t){const n=sc(e,"x","bitwiseAnd"),r=sc(t,"y","bitwiseAnd");if(!js(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const a={a:n,b:r};return Ju.runKernel(Xi,a)}}),Up=lc({broadcastArgs_:function(e,t){const n=sc(e,"s0","broadcastArgs","int32"),r=sc(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const a={s0:n,s1:r};return Ju.runKernel(Ji,a)}}),_p=lc({broadcastTo_:function(e,t){let n=sc(e,"broadcastTo","x");const r=n.shape;if(gi(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=gp(n,e)}const a=n.shape,s=Array.from(t);for(let e=t.length-1;e>=0;e--)if(a[e]===t[e])s[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);const i=s.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===i.length)return Bh(n);const o={x:n},l={reps:s};return Ju.runKernel(NA,o,l)}}),Rp=lc({ceil_:function(e){const t={x:sc(e,"x","ceil","float32")};return Ju.runKernel(Zi,t)}}),Dp=lc({clipByValue_:function(e,t,n){const r=sc(e,"x","clipByValue");if(Vs(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`)),t===n)return Ph(r.shape,t,r.dtype);const a={x:r},s={clipValueMin:t,clipValueMax:n};return Ju.runKernel(eo,a,s)}}),Qp=lc({concat1d_:function(e){return wp(e,0)}}),Op=lc({concat2d_:function(e,t){return wp(e,t)}}),$p=lc({concat3d_:function(e,t){return wp(e,t)}}),Mp=lc({concat4d_:function(e,t){return wp(e,t)}}),Pp=lc({conv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){const o=sc(e,"x","conv2d","float32"),l=sc(t,"filter","conv2d","float32");let A=o,u=!1;3===o.rank&&(u=!0,A=gp(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vs(4===A.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${A.rank}.`)),Vs(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),mp("conv2d",r,i);const c="NHWC"===a?A.shape[3]:A.shape[1];Vs(c===l.shape[2],(()=>`Error in conv2d: depth of input (${c}) must match input depth for filter ${l.shape[2]}.`)),Vs(dp(n,s),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`)),Vs(pp(s),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),Vs(pp(n),(()=>"Error in conv2D: Strides should be larger than 0."));const h={x:A,filter:l},d={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i},p=Ju.runKernel(ao,h,d);return u?gp(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),Hp=lc({conv1d_:function(e,t,n,r,a="NWC",s=1,i){const o=sc(e,"x","conv1d"),l=sc(t,"filter","conv1d");let A=o,u=!1;2===o.rank&&(u=!0,A=gp(o,[1,o.shape[0],o.shape[1]])),Vs(3===A.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${A.rank}.`)),Vs(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),mp("conv1d",r,i),Vs(A.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${A.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),Vs(dp(n,s),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`)),Vs(pp(s),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),Vs(pp(n),(()=>"Error in conv1D: Stride should be larger than 0.")),Vs("NWC"===a,(()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`));const c=gp(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=gp(A,[A.shape[0],1,A.shape[1],A.shape[2]]),d=Pp(h,c,[1,n],r,"NHWC",[1,s],i);return gp(d,u?[d.shape[2],d.shape[3]]:[d.shape[0],d.shape[2],d.shape[3]])}}),zp=lc({conv2DBackpropInput_:function(e,t,n,r,a,s="NHWC",i){Vs(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let o=e,l=t,A=!1;3===t.rank&&(A=!0,l=gp(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),Vs(4===o.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`)),Vs(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),Vs(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const u="NHWC"===s?o[3]:o[1],c="NHWC"===s?l.shape[3]:l.shape[1];Vs(u===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`)),Vs(c===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[3]}.`)),mp("conv2dDerInput",a,i);const h={dy:l,filter:n},d={strides:r,pad:a,dataFormat:s,dimRoundingMode:i,inputShape:o},p=Ju.runKernel(io,h,d);return A?gp(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),Vp=lc({conv2dTranspose_:function(e,t,n,r,a,s){const i=sc(e,"x","conv2dTranspose"),o=sc(t,"filter","conv2dTranspose");return zp(n,i,o,r,a,"NHWC",s)}}),Wp=lc({conv3d_:function(e,t,n,r,a="NDHWC",s=[1,1,1]){const i=sc(e,"x","conv3d"),o=sc(t,"filter","conv3d");let l=i,A=!1;4===i.rank&&(A=!0,l=gp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Vs(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),Vs(5===o.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`)),Vs(l.shape[4]===o.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`)),Vs(dp(n,s),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`)),Vs("NDHWC"===a,(()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`)),Vs(pp(s),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),Vs(pp(n),(()=>"Error in conv3D: Strides should be larger than 0."));const u={x:l,filter:o},c={strides:n,pad:r,dataFormat:a,dilations:s},h=Ju.runKernel(oo,u,c);return A?gp(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Kp=lc({conv3DBackpropInput_:function(e,t,n,r,a){Vs(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,i=t,o=!1;4===t.rank&&(o=!0,i=gp(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);const l=s[4],A=i.shape[4];Vs(5===s.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`)),Vs(5===i.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`)),Vs(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),Vs(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),Vs(A===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${A}) must match output depth for filter ${n.shape[4]}.`));const u={dy:i,filter:n},c={pad:a,strides:r,inputShape:s},h=Ju.runKernel(Ao,u,c);return o?gp(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Gp=lc({conv3dTranspose_:function(e,t,n,r,a){const s=sc(e,"x","conv3dTranspose"),i=sc(t,"filter","conv3dTranspose");return Kp(n,s,i,r,a)}}),jp=lc({cos_:function(e){const t={x:sc(e,"x","cos","float32")};return Ju.runKernel(uo,t)}}),qp=lc({cosh_:function(e){const t={x:sc(e,"x","cosh","float32")};return Ju.runKernel(co,t)}}),Xp=lc({cumprod_:function(e,t=0,n=!1,r=!1){const a={x:sc(e,"x","cumprod")},s={axis:t,exclusive:n,reverse:r};return Ju.runKernel(ho,a,s)}}),Jp=lc({cumsum_:function(e,t=0,n=!1,r=!1){const a={x:sc(e,"x","cumsum")},s={axis:t,exclusive:n,reverse:r};return Ju.runKernel(po,a,s)}}),Yp=lc({denseBincount_:function(e,t,n,r=!1){const a=sc(e,"x","denseBincount"),s=sc(t,"weights","denseBincount");Vs("int32"===a.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`)),Vs(a.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`)),Vs(n>=0,(()=>`size must be non-negative, but got ${n}.`)),Vs(s.size===a.size||0===s.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${s.shape}.`));const i={x:a,weights:s},o={size:n,binaryOutput:r};return Ju.runKernel(mo,i,o)}}),Zp=lc({depthToSpace_:function(e,t,n="NHWC"){const r=sc(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];Vs(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),Vs(a*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),Vs(s*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),Vs(i%(t*t)===0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${r.shape}`));const o={x:r},l={blockSize:t,dataFormat:n};return Ju.runKernel(go,o,l)}}),ef=lc({depthwiseConv2d_:function(e,t,n,r,a="NHWC",s=[1,1],i){const o=sc(e,"x","depthwiseConv2d","float32"),l=sc(t,"filter","depthwiseConv2d","float32");let A=o,u=!1;3===o.rank&&(u=!0,A=gp(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vs(4===A.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${A.rank}.`)),Vs(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`));const c="NHWC"===a?A.shape[3]:A.shape[1];Vs(c===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${c}) must match the inChannels dimension in filter ${l.shape[2]}.`)),mp("depthwiseConv2d",r,i);const h={x:A,filter:l},d={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i},p=Ju.runKernel(yo,h,d);return u?gp(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),tf=lc({diag_:function(e){const t={x:sc(e,"x","diag")};return Ju.runKernel(vo,t)}}),nf=lc({dilation2d_:function(e,t,n,r,a=[1,1],s="NHWC"){const i=sc(e,"x","dilation2d"),o=sc(t,"filter","dilation2d");Vs(3===i.rank||4===i.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`)),Vs(3===o.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`)),Vs("NHWC"===s,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`));let l=i,A=!1;3===i.rank&&(l=gp(i,[1,i.shape[0],i.shape[1],i.shape[2]]),A=!0),Vs(l.shape[3]===o.shape[2],(()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`));const u={x:l,filter:o},c={strides:n,pad:r,dilations:a},h=Ju.runKernel(xo,u,c);return A?gp(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),rf=lc({equal_:function(e,t){let n=sc(e,"a","equal","string_or_numeric"),r=sc(t,"b","equal","string_or_numeric");[n,r]=zu(n,r),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(Fo,a)}}),af=lc({where_:function(e,t,n){const r=sc(t,"a","where"),a=sc(n,"b","where"),s=sc(e,"condition","where","bool"),i=qh(qh(s.shape,r.shape),a.shape),o={condition:_p(s,i),t:_p(r,i),e:_p(a,i)};return Ju.runKernel(Yl,o)}}),sf=lc({divNoNan_:function(e,t){let n=sc(e,"a","div"),r=sc(t,"b","div");[n,r]=zu(n,r);const a=Sh(n,r),s=Th(a),i=rf(r,s);return af(i,s,a)}}),of=lc({dot_:function(e,t){const n=sc(e,"t1","dot"),r=sc(t,"t2","dot");Vs(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const a=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(Vs(a===s,(()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${s}.`)),1===n.rank&&1===r.rank){const e=gp(n,[1,-1]),t=gp(r,[-1,1]),a=vp(e,t);return gp(a,[])}if(1===n.rank&&2===r.rank){const e=gp(n,[1,-1]),t=gp(r,[r.shape[0],r.shape[1]]),a=vp(e,t);return gp(a,[a.size])}if(2===n.rank&&1===r.rank){const e=gp(r,[-1,1]),t=vp(n,e);return gp(t,[t.size])}{const e=gp(r,[r.shape[0],r.shape[1]]);return vp(n,e)}}}),lf=lc({einsum_:function(e,...t){const n=t.map(((e,t)=>sc(e,`tensors${t}`,"einsum"))),r={equation:e};return Ju.runKernel(No,n,r)}}),Af=lc({elu_:function(e){const t={x:sc(e,"x","elu","float32")};return Ju.runKernel(So,t)}}),uf=lc({ensureShape_:function(e,t){const n=sc(e,"x","ensureShape","string_or_numeric");if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}}),cf=lc({erf_:function(e){let t=sc(e,"x","erf");Vs("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=xh(t,"float32"));const n={x:t};return Ju.runKernel(Eo,n)}});function hf(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function df(e,t,n){const r=e.length+t.length,a=[];let s=0,i=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?a.push(e[s++]):a.push(t[i++]);return a}function pf(e,t){const n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((t=>e[t]))]}function ff(e,t){return df(e,t.map((e=>1)),t)}function mf(e,t,n){Vs(hf(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function gf(e,t){if(hf(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function yf(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function bf(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const wf=lc({max_:function(e,t=null,n=!1){const r={x:sc(e,"x","max")},a={reductionIndices:t,keepDims:n};return Ju.runKernel(ol,r,a)}}),vf=lc({min_:function(e,t=null,n=!1){const r={x:sc(e,"x","min")},a={axis:t,keepDims:n};return Ju.runKernel(fl,r,a)}}),xf=lc({sum_:function(e,t=null,n=!1){let r=sc(e,"x","sum");"bool"===r.dtype&&(r=xh(r,"int32"));const a={x:r},s={axis:t,keepDims:n};return Ju.runKernel(oA,a,s)}});function Bf(e,t,n=null){if(0===e.rank)return Kh(e);if(1!==e.rank&&null===n)return Bf(gp(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return xf(Kh(e),n);if(t===1/0)return wf(Kh(e),n);if(t===-1/0)return vf(Kh(e),n);if("euclidean"===t||2===t)return Eh(xf(zh(Kh(e),Uh(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return wf(xf(Kh(e),n[0]),n[1]-1);if(t===1/0)return wf(xf(Kh(e),n[1]),n[0]);if(t===-1/0)return vf(xf(Kh(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Eh(xf(Fh(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const kf=lc({norm_:function(e,t="euclidean",n=null,r=!1){const a=Bf(e=sc(e,"x","norm"),t,n);let s=a.shape;if(r){const t=ei(n,e.shape);s=ff(a.shape,t)}return gp(a,s)}}),Cf=lc({euclideanNorm_:function(e,t=null,n=!1){return kf(e,"euclidean",t,n)}}),Nf=lc({exp_:function(e){const t={x:sc(e,"x","exp")};return Ju.runKernel(To,t)}}),Sf=lc({expandDims_:function(e,t=0){const n=sc(e,"x","expandDims","string_or_numeric");Vs(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},a={dim:t};return Ju.runKernel(Lo,r,a)}}),If=lc({expm1_:function(e){const t={x:sc(e,"x","expm1")};return Ju.runKernel(Uo,t)}}),Ef=lc({tile_:function(e,t){const n=sc(e,"x","tile","string_or_numeric");Vs(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},a={reps:t};return Ju.runKernel(NA,r,a)}}),Ff=lc({eye_:function(e,t,n,r="float32"){null==t&&(t=e);const a=vh([e,t],r),s=e<=t?e:t;for(let e=0;e<s;++e)a.set(1,e,e);const i=gp(a.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return Ef(Sf(i,0),[n[0],1,1]);if(2===n.length)return Ef(Sf(Sf(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ef(Sf(Sf(Sf(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}}),Tf=lc({floor_:function(e){const t={x:sc(e,"x","floor","float32")};return Ju.runKernel(Qo,t)}}),Lf=lc({gather_:function(e,t,n=0,r=0){const a={x:sc(e,"x","gather"),indices:sc(t,"indices","gather","int32")},s={axis:n,batchDims:r};return Ju.runKernel(Mo,a,s)}}),Uf=lc({greater_:function(e,t){let n=sc(e,"a","greater","string_or_numeric"),r=sc(t,"b","greater","string_or_numeric");[n,r]=zu(n,r),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(Ho,a)}}),_f=lc({greaterEqual_:function(e,t){let n=sc(e,"a","greaterEqual","string_or_numeric"),r=sc(t,"b","greaterEqual","string_or_numeric");[n,r]=zu(n,r),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(zo,a)}}),Rf=lc({imag_:function(e){const t={input:sc(e,"input","imag")};return Ju.runKernel(Ko,t)}}),Df=lc({isFinite_:function(e){const t={x:sc(e,"x","isFinite")};return Ju.runKernel(Go,t)}}),Qf=lc({isInf_:function(e){const t={x:sc(e,"x","isInf")};return Ju.runKernel(jo,t)}}),Of=lc({isNaN_:function(e){const t={x:sc(e,"x","isNaN")};return Ju.runKernel(qo,t)}}),$f=lc({leakyRelu_:function(e,t=.2){const n={x:sc(e,"x","leakyRelu")},r={alpha:t};return Ju.runKernel(Xo,n,r)}}),Mf=lc({less_:function(e,t){let n=sc(e,"a","less","string_or_numeric"),r=sc(t,"b","less","string_or_numeric");[n,r]=zu(n,r),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(Jo,a)}}),Pf=lc({lessEqual_:function(e,t){let n=sc(e,"a","lessEqual","string_or_numeric"),r=sc(t,"b","lessEqual","string_or_numeric");[n,r]=zu(n,r),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(Yo,a)}});function Hf(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return Ju.runKernel(Zo,{},r)}const zf=lc({localResponseNormalization_:function(e,t=5,n=1,r=1,a=.5){const s=sc(e,"x","localResponseNormalization");Vs(4===s.rank||3===s.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`)),Vs(qs(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let i=s,o=!1;3===s.rank&&(o=!0,i=gp(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:i},A={depthRadius:t,bias:n,alpha:r,beta:a},u=Ju.runKernel(sl,l,A);return o?gp(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),Vf=lc({log_:function(e){const t={x:sc(e,"x","log","float32")};return Ju.runKernel(el,t)}}),Wf=lc({log1p_:function(e){const t={x:sc(e,"x","log1p")};return Ju.runKernel(tl,t)}}),Kf=lc({neg_:function(e){const t={x:sc(e,"x","neg")};return Ju.runKernel(vl,t)}}),Gf=lc({softplus_:function(e){const t={x:sc(e,"x","softplus")};return Ju.runKernel(sA,t)}}),jf=lc({logSigmoid_:function(e){const t=sc(e,"x","logSigmoid"),n=Lh((e=>({value:Kf(Gf(Kf(e))),gradFunc:t=>Ih(t,xp(Kf(e)))})));return n(t)}}),qf=lc({logSoftmax_:function(e,t=-1){const n=sc(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=Lh(((e,n)=>{const r=wf(e,t,!0),a=Vh(e,r),s=Vh(xh(a,"float32"),Vf(xf(Nf(a),t,!0)));return n([s]),{value:s,gradFunc:(e,n)=>{const[r]=n,a=Nf(r);return Vh(e,Ih(xf(e,t,!0),a))}}}));return r(n)}}),Xf=lc({logSumExp_:function(e,t=null,n=!1){const r=sc(e,"x","logSumExp"),a=ei(t,r.shape),s=wf(r,a,!0),i=Vh(r,s),o=Nf(i),l=xf(o,a),A=Vf(l),u=Ch(gp(s,A.shape),A);if(n){const e=ff(u.shape,a);return gp(u,e)}return u}}),Jf=lc({logicalAnd_:function(e,t){const n=sc(e,"a","logicalAnd","bool"),r=sc(t,"b","logicalAnd","bool");qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(nl,a)}}),Yf=lc({logicalNot_:function(e){const t={x:sc(e,"x","logicalNot","bool")};return Ju.runKernel(rl,t)}}),Zf=lc({logicalOr_:function(e,t){const n=sc(e,"a","logicalOr","bool"),r=sc(t,"b","logicalOr","bool");qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(al,a)}}),em=lc({logicalXor_:function(e,t){const n=sc(e,"a","logicalXor","bool"),r=sc(t,"b","logicalXor","bool");return qh(n.shape,r.shape),Jf(Zf(e,t),Yf(Jf(e,t)))}}),tm=2147483648,nm=lc({searchSorted_:function(e,t,n="left"){const r=sc(e,"sortedSequence","searchSorted"),a=sc(t,"values","searchSorted"),s=r.shape[r.shape.length-1],i=a.shape[a.shape.length-1],o=gp(r,[-1,s]),l=gp(a,[-1,i]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Gs(l.shape)>=tm)throw new Error("values tensor size must less than 2147483648");if(o.shape[1]>=tm)throw new Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${o.shape[1]}`);const A={sortedSequence:o,values:l},u={side:n};return Ju.runKernel(Jl,A,u)}});function rm(e,t){return nm(e,t,"left")}const am=lc({maxPool_:function(e,t,n,r,a){const s=sc(e,"x","maxPool");let i=s,o=!1;3===s.rank&&(o=!0,i=gp(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Vs(4===i.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`)),Vs(dp(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),mp("maxPool",r,a);const l={x:i},A={filterSize:t,strides:n,pad:r,dimRoundingMode:a},u=Ju.runKernel(Al,l,A);return o?gp(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),sm=lc({maxPool3d_:function(e,t=[1,1,1],n,r,a,s="NDHWC"){const i=sc(e,"x","maxPool3d");let o=i,l=!1;4===i.rank&&(l=!0,o=gp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Vs(5===o.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`)),Vs("NDHWC"===s,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`)),mp("maxPool3d",r,a);const A={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:s},c=Ju.runKernel(cl,A,u);return l?gp(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),im=lc({maxPoolWithArgmax_:function(e,t,n,r,a=!1){const s={x:sc(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},o=Ju.runKernel(dl,s,i);return{result:o[0],indexes:o[1]}}}),om=lc({mean_:function(e,t=null,n=!1){const r={x:sc(e,"x","mean")},a={axis:t,keepDims:n};return Ju.runKernel(pl,r,a)}});function lm(e,t="float32"){if(gi(e),"complex64"===t){const t=lm(e,"float32"),n=lm(e,"float32");return Ac(t,n)}const n=fi(Gs(e),t);return Ju.makeTensor(n,e,t)}function Am(e,t="float32"){if(gi(e),"complex64"===t){const t=Am(e,"float32"),n=lm(e,"float32");return Ac(t,n)}const n=pi(Gs(e),t);return Ju.makeTensor(n,e,t)}function um(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=sc(e,"x","meshgrid",e instanceof Fu?e.dtype:"float32");if(void 0===t)return[r];let a=sc(t,"y","meshgrid",t instanceof Fu?t.dtype:"float32");const s=Gs(r.shape),i=Gs(a.shape);return"xy"===n?(r=gp(r,[1,-1]),a=gp(a,[-1,1]),[vp(Am([i,1],r.dtype),r),vp(a,Am([1,s],a.dtype))]):(r=gp(r,[-1,1]),a=gp(a,[1,-1]),[vp(r,Am([1,i],r.dtype)),vp(Am([s,1],a.dtype),a)])}const cm=lc({minimum_:function(e,t){let n=sc(e,"a","minimum"),r=sc(t,"b","minimum");[n,r]=zu(n,r),"bool"===n.dtype&&(n=xh(n,"int32"),r=xh(r,"int32")),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(ml,a)}}),hm=lc({mirrorPad_:function(e,t,n){Vs("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=sc(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Vs(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const a="reflect"===n?1:0;for(let e=0;e<r.rank;e++)Vs(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Vs(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${r.shape[e]-a} or less than 0 for input of shape ${r.shape}`));const s={paddings:t,mode:n},i={x:r};return Ju.runKernel(gl,i,s)}}),dm=lc({mod_:function(e,t){let n=sc(e,"a","mod"),r=sc(t,"b","mod");[n,r]=zu(n,r);const a={a:n,b:r};return Ju.runKernel(yl,a)}}),pm=lc({moments_:function(e,t=null,n=!1){const r=ei(t,(e=sc(e,"x","moments")).shape),a=om(e,r,n);let s=a.shape;n||(s=ff(a.shape,r));const i=Fh(Vh(xh(e,"float32"),gp(a,s)));return{mean:a,variance:om(i,r,n)}}}),fm=lc({multiRNNCell_:function(e,t,n,r){const a=sc(t,"data","multiRNNCell"),s=ic(n,"c","multiRNNCell"),i=ic(r,"h","multiRNNCell");let o=a;const l=[];for(let t=0;t<e.length;t++){const n=e[t](o,s[t],i[t]);l.push(n[0]),l.push(n[1]),o=n[1]}const A=[],u=[];for(let e=0;e<l.length;e+=2)A.push(l[e]),u.push(l[e+1]);return[A,u]}}),mm=lc({multinomial_:function(e,t,n,r=!1){const a=sc(e,"logits","multinomial"),s=a.size,i=a.rank;if(s<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${s}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const o={logits:1===i?gp(a,[1,-1]):a},l={numSamples:t,seed:n,normalized:r},A=Ju.runKernel(bl,o,l);return 1===i?gp(A,[A.size]):A}}),gm=lc({notEqual_:function(e,t){let n=sc(e,"a","notEqual","string_or_numeric"),r=sc(t,"b","notEqual","string_or_numeric");[n,r]=zu(n,r),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(xl,a)}}),ym=lc({oneHot_:function(e,t,n=1,r=0,a="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const s={indices:sc(e,"indices","oneHot","int32")},i={dtype:a,depth:t,onValue:n,offValue:r};return Ju.runKernel(Sl,s,i)}}),bm=lc({onesLike_:function(e){const t={x:sc(e,"x","onesLike")};return Ju.runKernel(Nl,t)}}),wm=lc({outerProduct_:function(e,t){const n=sc(e,"v1","outerProduct"),r=sc(t,"v2","outerProduct");Vs(1===n.rank&&1===r.rank,(()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`));const a=gp(n,[-1,1]),s=gp(r,[1,-1]);return vp(a,s)}}),vm=lc({pad_:function(e,t,n=0){const r=sc(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:t,constantValue:n},s={x:r};return Ju.runKernel(El,s,a)}}),xm=lc({pad1d_:function(e,t,n=0){return Vs(2===t.length,(()=>"Invalid number of paddings. Must be length of 2.")),vm(e,[t],n)}}),Bm=lc({pad2d_:function(e,t,n=0){return Vs(2===t.length&&2===t[0].length&&2===t[1].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),vm(e,t,n)}}),km=lc({pad3d_:function(e,t,n=0){return Vs(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),vm(e,t,n)}}),Cm=lc({pad4d_:function(e,t,n=0){return Vs(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),vm(e,t,n)}}),Nm=lc({spaceToBatchND_:function(e,t,n){const r=sc(e,"x","spaceToBatchND");Vs(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),Vs(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),Vs(r.shape.reduce(((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const a={x:r},s={blockShape:t,paddings:n};return Ju.runKernel(lA,a,s)}}),Sm=lc({pool_:function(e,t,n,r,a,s,i){null==a&&(a=[1,1]),null==s&&(s=1),0===r&&(r="valid");const o=sc(e,"x","maxPool");let l=o,A=!1;3===o.rank&&(A=!0,l=gp(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vs(dp(s,a),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${a}'`));const u=rp(l.shape,t,s,a,r),c=[u.dilationHeight,u.dilationWidth];let h;h="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),a=r.map((e=>Math.floor(e/2))),s=r.map(((e,t)=>e-a[t]));return r.map(((e,t)=>[a[t],s[t]]))}([u.filterHeight,u.filterWidth],c):[[0,0],[0,0]];const d=1===c[0]&&1===c[1],[p,f]=function(e,t,n){const r=n.map((e=>e[0])),a=n.map((e=>e[1])),s=e.concat(r,a),i=t.map(((e,t)=>(e-s[t]%e)%e)),o=a.map(((e,t)=>e+i[t])),l=t.map(((e,t)=>[r[t],o[t]])),A=t.map(((e,t)=>[0,i[t]]));return[l,A]}([u.inHeight,u.inWidth],c,h),m=d?r:"valid",g=d?l:Nm(l,c,p),y=("avg"===n?()=>yp(g,t,s,m,i):()=>am(g,t,s,m,i))(),b=d?y:Np(y,c,f);return A?gp(b,[b.shape[1],b.shape[2],b.shape[3]]):b}}),Im=lc({prelu_:function(e,t){const n={x:sc(e,"x","prelu"),alpha:sc(t,"alpha","prelu")};return Ju.runKernel(Tl,n)}}),Em=lc({prod_:function(e,t=null,n=!1){let r=sc(e,"x","prod");"bool"===r.dtype&&(r=xh(r,"int32"));const a={x:r},s={axis:t,keepDims:n};return Ju.runKernel(Ll,a,s)}}),Fm=lc({raggedGather_:function(e,t,n,r){const a=e.map(((e,t)=>sc(e,`tensors${t}`,"raggedGather","int32"))),s={paramsNestedSplits:a,paramsDenseValues:sc(t,"paramsDenseValues","raggedGather"),indices:sc(n,"indices","raggedGather","int32")},i={outputRaggedRank:r},o=Ju.runKernel(Ul,s,i);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}}),Tm=lc({raggedRange_:function(e,t,n){const r=sc(e,"starts","raggedRange"),a={starts:r,limits:sc(t,"limits","raggedRange",r.dtype),deltas:sc(n,"deltas","raggedRange",r.dtype)},s=Ju.runKernel(_l,a);return{rtNestedSplits:s[0],rtDenseValues:s[1]}}}),Lm=lc({raggedTensorToTensor_:function(e,t,n,r,a){const s=sc(e,"shape","raggedTensorToTensor","int32"),i=sc(t,"values","raggedTensorToTensor"),o=sc(n,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map(((e,t)=>sc(e,`tensors${t}`,"raggedTensorToTensor","int32"))),A={shape:s,values:i,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:a};return Ju.runKernel(Rl,A,u)}}),Um=lc({rand_:function(e,t,n){gi(e);const r=Gs(e);let a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);a=new Uint8Array(r)}for(let e=0;e<r;e++)a[e]=t();return Ju.makeTensor(a,e,n)}});var _m=i(7391);class Rm{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=a||Math.random();this.random=_m.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,s;do{r=2*this.random()-1,a=2*this.random()-1,s=r*r+a*a}while(s>=1||0===s);const i=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*r*i,t=this.mean+this.stdDev*a*i,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Dm{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const a=r||Math.random();this.randu=_m.alea(a.toString()),this.randn=new Rm(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-s+Math.log(s)),a=this.randu(),a<t||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class Qm{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=_m.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Om=lc({randomGamma_:function(e,t,n=1,r="float32",a){if(gi(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const s=new Dm(t,n,r,a),i=vh(e,r);for(let e=0;e<i.values.length;e++)i.values[e]=s.nextValue();return i.toTensor()}}),$m=lc({randomNormal_:function(e,t=0,n=1,r,a){if(gi(e),null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const s=new Rm(t,n,r,!1,a),i=vh(e,r);for(let e=0;e<i.values.length;e++)i.values[e]=s.nextValue();return i.toTensor()}}),Mm=lc({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error(`Unsupported data type ${t}`);return $m(e,0,1,t,n)}}),Pm=lc({randomUniform_:function(e,t=0,n=1,r="float32",a){gi(e);const s=vh(e,r),i=new Qm(t,n,null,a);for(let e=0;e<s.values.length;e++)s.values[e]=i.nextValue();return s.toTensor()}}),Hm=lc({randomUniformInt_:function(e,t,n,r){return Pm(e,t,n,"int32",r)}});function zm(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");const a={start:e,stop:t,step:n,dtype:r};return Ju.runKernel(Dl,{},a)}const Vm=lc({real_:function(e){const t={input:sc(e,"input","real")};return Ju.runKernel(Ql,t)}}),Wm=lc({reciprocal_:function(e){const t={x:sc(e,"x","reciprocal")};return Ju.runKernel(Ol,t)}}),Km=lc({relu_:function(e){const t={x:sc(e,"x","relu")};return Ju.runKernel($l,t)}}),Gm=lc({relu6_:function(e){const t={x:sc(e,"x","relu6")};return Ju.runKernel(Wl,t)}}),jm=lc({reverse_:function(e,t){const n={x:sc(e,"x","reverse")},r={dims:t};return Ju.runKernel(Kl,n,r)}}),qm=lc({reverse1d_:function(e){const t=sc(e,"x","reverse");return Vs(1===t.rank,(()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`)),jm(t,0)}}),Xm=lc({reverse2d_:function(e,t){const n=sc(e,"x","reverse");return Vs(2===n.rank,(()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`)),jm(n,t)}}),Jm=lc({reverse3d_:function(e,t){const n=sc(e,"x","reverse");return Vs(3===n.rank,(()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`)),jm(n,t)}}),Ym=lc({reverse4d_:function(e,t){const n=sc(e,"x","reverse");return Vs(4===n.rank,(()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`)),jm(n,t)}}),Zm=lc({round_:function(e){const t={x:sc(e,"x","round")};return Ju.runKernel(Gl,t)}}),eg=lc({rsqrt_:function(e){const t={x:sc(e,"x","rsqrt","float32")};return Ju.runKernel(jl,t)}}),tg=lc({selu_:function(e){const t={x:sc(e,"x","selu")};return Ju.runKernel(Zl,t)}}),ng=lc({separableConv2d_:function(e,t,n,r,a,s=[1,1],i="NHWC"){const o=sc(e,"x","separableConv2d"),l=sc(t,"depthwiseFilter","separableConv2d"),A=sc(n,"pointwiseFilter","separableConv2d");let u=o,c=!1;if(3===o.rank&&(c=!0,u=gp(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Vs(4===u.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`)),Vs(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),Vs(4===A.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),Vs(1===A.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${A.shape[0]}.`)),Vs(1===A.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${A.shape[1]}.`));const h=l.shape[2],d=l.shape[3];Vs(A.shape[2]===h*d,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*d}, but got ${A.shape[2]}.`));const p=ef(u,l,r,a,i,s),f=Pp(p,A,1,"valid",i);return c?gp(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),rg=async function(e,t){const n=sc(e,"x","setdiff1d"),r=sc(t,"y","setdiff1d");Vs(n.dtype===r.dtype,(()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`)),Vs(1===n.rank,(()=>`x should be 1D tensor, but got x (${n.shape}).`)),Vs(1===r.rank,(()=>`y should be 1D tensor, but got y (${r.shape}).`));const a=await n.data(),s=await r.data(),i=new Set(s);let o=0;for(let e=0;e<a.length;e++)i.has(a[e])||o++;const l=new Nu([o],n.dtype),A=new Nu([o],"int32");for(let e=0,t=0;e<a.length;e++)i.has(a[e])||(l.values[t]=a[e],A.values[t]=e,t++);return[l.toTensor(),A.toTensor()]},ag=lc({sign_:function(e){const t={x:sc(e,"x","sign")};return Ju.runKernel(rA,t)}}),sg=lc({sin_:function(e){const t={x:sc(e,"x","sin","float32")};return Ju.runKernel(tA,t)}}),ig=lc({sinh_:function(e){const t={x:sc(e,"x","sinh")};return Ju.runKernel(nA,t)}}),og=lc({slice1d_:function(e,t,n){const r=sc(e,"x","slice1d");return Vs(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),Bp(r,[t],[n])}}),lg=lc({slice2d_:function(e,t,n){const r=sc(e,"x","slice2d");return Vs(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),Bp(r,t,n)}}),Ag=lc({slice3d_:function(e,t,n){const r=sc(e,"x","slice3d");return Vs(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),Bp(r,t,n)}}),ug=lc({slice4d_:function(e,t,n){const r=sc(e,"x","slice4d");return Vs(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),Bp(r,t,n)}}),cg=lc({softmax_:function(e,t=-1){const n=sc(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},a={dim:t};return Ju.runKernel(uA,r,a)}}),hg=lc({fft_:function(e){Vs("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return Ju.runKernel(_o,t)}}),dg=lc({ifft_:function(e){Vs("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return Ju.runKernel(Wo,t)}}),pg=lc({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const a=gp(e,[n,t]);r=dg(a)}else{const a=[n,2*(t-1)],s=gp(Vm(e),[n,t]),i=gp(Rf(e),[n,t]),o=jm(Bp(s,[0,1],[n,t-2]),1),l=Ih(jm(Bp(i,[0,1],[n,t-2]),1),Uh(-1)),A=wp([s,o],1),u=wp([i,l],1),c=gp(Ac(A,u),[a[0],a[1]]);r=dg(c)}if(r=Vm(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=gp(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}}),fg=lc({split_:function(e,t,n=0){const r={x:sc(e,"x","split")},a={numOrSizeSplits:t,axis:n};return Ju.runKernel(AA,r,a)}}),mg=lc({rfft_:function(e,t){Vs("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let a;if(null!=t&&t<n){const r=e.shape.map((e=>0)),s=e.shape.map((e=>e));s[e.shape.length-1]=t,a=Bp(e,r,s),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,a=wp([e,lm(r)],e.shape.length-1),n=t}else a=e;const s=Th(a),i=gp(Ac(a,s),[r,n]),o=hg(i),l=Math.floor(n/2)+1,A=Vm(o),u=Rf(o),c=fg(A,[l,n-l],A.shape.length-1),h=fg(u,[l,n-l],u.shape.length-1),d=a.shape.slice();return d[a.shape.length-1]=l,gp(Ac(c[0],h[0]),d)}}),gg=lc({squaredDifference_:function(e,t){let n=sc(e,"a","squaredDifference"),r=sc(t,"b","squaredDifference");[n,r]=zu(n,r),qh(n.shape,r.shape);const a={a:n,b:r};return Ju.runKernel(mA,a,{})}}),yg=lc({squeeze_:function(e,t){const n=sc(e,"x","squeeze","string_or_numeric");return gp(n,ti(n.shape,t).newShape)}}),bg=lc({stack_:function(e,t=0){const n=ic(e,"tensors","stack","string_or_numeric");Vs(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&Vs(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,a={axis:t};return Ju.runKernel(Il,r,a)}}),wg=lc({step_:function(e,t=0){const n={x:sc(e,"x","step")},r={alpha:t};return Ju.runKernel(_A,n,r)}}),vg=lc({stridedSlice_:function(e,t,n,r,a=0,s=0,i=0,o=0,l=0){const A={x:sc(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:a,endMask:s,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};return Ju.runKernel(bA,A,u)}}),xg=lc({tan_:function(e){const t={x:sc(e,"x","tan","float32")};return Ju.runKernel(kA,t)}});function Bg(e,t){Ks(e);const n=nc(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return uc(e,null,n,t)}function kg(e,t,n){if(Ks(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=nc(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return uc(e,t,r,n)}function Cg(e,t,n){if(Ks(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=nc(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return uc(e,t,r,n)}function Ng(e,t,n){if(Ks(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=nc(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return uc(e,t,r,n)}function Sg(e,t,n){if(Ks(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=nc(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return uc(e,t=t||r,r,n)}function Ig(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(s+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw new Error(s+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+e.length-r)throw new Error(s+" update.rank != "+(a+e.length-r));for(let e=0;e<a;++e)if(n.shape[e]!==t.shape[e])throw new Error(s+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-a;++t)if(n.shape[t+a]!==e[t+r])throw new Error(s+` updates.shape[${t+a}] (${n.shape[t+a]}) != shape[${t+a}] (${e[t+a]})`)}function Eg(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}Ig(n,t,e)}function Fg(e,t,n){const r=t.shape.length,a=r>1?t.shape[r-1]:1,s=n.length;let i=1;for(let e=a;e<s;++e)i*=n[e];const o=a<1?1:a;return{sliceRank:a,numUpdates:Gs(t.shape)/o,sliceSize:i,strides:[...ci(n.slice(0,a)),1],outputSize:Gs(n)}}const Tg=lc({tensorScatterUpdate_:function(e,t,n){const r=sc(e,"tensor","tensorScatterupdate"),a=sc(t,"indices","tensorScatterupdate","int32"),s=sc(n,"updates","tensorScatterupdate");if(Eg(s,a,r.shape),r.dtype!==s.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${s.dtype}.`);const i={tensor:r,indices:a,updates:s};return Ju.runKernel(Xl,i,{})}}),Lg=lc({topk_:function(e,t=1,n=!0){const r=sc(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const a=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);const s={x:r},i={k:t,sorted:n},[o,l]=Ju.runKernel(SA,s,i);return{values:o,indices:l}}}),Ug=lc({truncatedNormal_:function(e,t=0,n=1,r,a){if(gi(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const s=new Rm(t,n,r,!0,a),i=vh(e,r);for(let e=0;e<i.values.length;e++)i.values[e]=s.nextValue();return i.toTensor()}}),_g=lc({unique_:function(e,t=0){const n=sc(e,"x","unique","string_or_numeric");Vs(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},a={axis:t},[s,i]=Ju.runKernel(FA,r,a);return{values:s,indices:i}}}),Rg=lc({unsortedSegmentSum_:function(e,t,n){const r=sc(e,"x","unsortedSegmentSum"),a=sc(t,"segmentIds","unsortedSegmentSum","int32");Vs(qs(n),(()=>"numSegments must be of dtype int"));const s={x:r,segmentIds:a},i={numSegments:n};return Ju.runKernel(LA,s,i)}}),Dg=lc({unstack_:function(e,t=0){const n=sc(e,"x","unstack","string_or_numeric");Vs(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},a={axis:t};return Ju.runKernel(TA,r,a)}});function Qg(e,t){return nm(e,t,"right")}function Og(e,t=!0,n,r){return Ju.makeVariable(e,t,n,r)}function $g(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const r=vh(e,"int32"),a=vh([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const s=r.indexToLoc(n[t]),i=t*e.length;a.values.set(s,i)}return a.toTensor()}const Mg=async function(e){const t=sc(e,"condition","whereAsync","bool"),n=await t.data(),r=$g(t.shape,n);return e!==t&&t.dispose(),r},Pg=async function(e,t,n){const r=sc(e,"tensor","boolMask"),a=sc(t,"mask","boolMask","bool"),s=null==n?0:n,i=a.rank,o=r.shape;Vs(i>0,(()=>"mask cannot be scalar")),Ws(o.slice(s,s+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let e=s;e<s+i;e++)l*=o[e];const A=o.slice(0,s).concat([l],o.slice(s+i)),u=gp(r,A),c=gp(a,[-1]),h=await Mg(c),d=yg(h,[1]),p=Lf(u,d,s);return e!==r&&r.dispose(),t!==a&&a.dispose(),d.dispose(),u.dispose(),c.dispose(),h.dispose(),p},Hg=lc({transpose_:function(e,t,n){const r=sc(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),Vs(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{Vs(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const a={x:r},s={perm:t};return"complex64"===r.dtype?mc((()=>{let e=Vm(r),t=Rf(r);return e=Ju.runKernel(EA,{x:e},s),t=Ju.runKernel(EA,{x:t},s),n&&(t=Kf(t)),Ac(e,t)})):Ju.runKernel(EA,a,s)}}),zg=lc({movingAverage_:function(e,t,n,r,a=!0){const s=sc(e,"v","movingAverage"),i=sc(t,"x","movingAverage"),o=sc(n,"decay","movingAverage");!function(e,t){Vs(e.dtype===t.dtype,(()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`))}(s,i),Vs(js(s.shape,i.shape),(()=>"Shape mismatch in v and x"));const l=Uh(1),A=Vh(l,o);let u=Ih(Vh(i,s),A);if(a){Vs(null!=r,(()=>"When using zeroDebias: true, step is required."));const e=sc(r,"step","movingAverage");u=Sh(u,Vh(l,zh(o,e)))}return Ch(s,u)}}),Vg=lc({scatterND_:function(e,t,n){gi(n);const r=sc(e,"indices","scatterND","int32"),a=sc(t,"updates","scatterND");Eg(a,r,n);const s={indices:r,updates:a},i={shape:n};return Ju.runKernel(ql,s,i)}}),Wg=lc({sparseToDense_:function(e,t,n,r=0){gi(n);const a=sc(e,"sparseIndices","sparseToDense","int32"),s=sc(t,"sparseValues","sparseToDense","string_or_numeric"),i=sc(r,"defaultValue","sparseToDense",s.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,s=e.rank>1?e.shape[1]:1;if(n.length!==s)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${s}.`);const i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,s,n,i);const o={sparseIndices:a,sparseValues:s,defaultValue:i},l={outputShape:n};return Ju.runKernel(fA,o,l)}}),Kg=lc({gatherND_:function(e,t){const n=sc(t,"indices","gatherND","int32"),r={params:sc(e,"x","gatherND","string_or_numeric"),indices:n};return Ju.runKernel(Po,r)}}),Gg=lc({dropout_:function(e,t,n,r){const a=sc(e,"x","dropout");if(Vs("float32"===a.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`)),Vs(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof Fu?a.clone():a;const s=function(e,t){if(null==t)return e.shape.slice();if(js(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,o=Sh(Tf(Ch(Pm(s,0,1,"float32",r),i)),i);return Ih(a,o)}});function jg(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function qg(e,t,n){const r=1-e%2,a=new Float32Array(e);for(let s=0;s<e;++s){const i=2*Math.PI*s/(e+r-1);a[s]=t-n*Math.cos(i)}return Bg(a,"float32")}const Xg=async function(e,t,n=1){const r=sc(e,"predictions","inTopK"),a=sc(t,"targets","inTopK");Vs(r.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`)),Vs(r.rank-1===a.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`)),Ws(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];Vs(n>0&&n<=s,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${s}), but got ${n}`));const i=await r.data(),o=await a.data(),[l,A]=[i.length/s,s],u=ni("bool",l);for(let e=0;e<l;e++){const t=e*A,r=i.subarray(t,t+A),a=[];for(let e=0;e<r.length;e++)a.push({value:r[e],index:e});a.sort(((e,t)=>t.value-e.value)),u[e]=0;for(let t=0;t<n;t++)if(a[t].index===o[e]){u[e]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),cc(u,a.shape,"bool")},Jg=lc({conv2DBackpropFilter_:function(e,t,n,r,a,s="NHWC",i){let o=e;3===e.rank&&(o=gp(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=gp(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Vs(4===o.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`)),Vs(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),Vs(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const A="NHWC"===s?o.shape[3]:o.shape[1],u="NHWC"===s?l.shape[3]:l.shape[1];Vs(A===n[2],(()=>`Error in conv2dDerFilter: depth of input ${A}) must match input depth in filter (${n[2]}.`)),Vs(u===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`)),mp("conv2dDerFilter",a,i);const c={x:o,dy:l},h={strides:r,pad:a,dataFormat:s,dimRoundingMode:i,filterShape:n};return Ju.runKernel(so,c,h)}});function Yg(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Ih(e,wg(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Zg(e,t){let n=t;const r=jh(e.shape,t.shape);return r.length>0&&(n=xf(n,r)),gp(n,e.shape)}function ey(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Km(e);if("elu"===t)return Af(e);if("relu6"===t)return Gm(e);if("prelu"===t)return Im(e,n);if("leakyrelu"===t)return $f(e,r);if("sigmoid"===t)return xp(e);throw new Error(`Unknown fused activation ${t}.`)}const ty=(e,t)=>!(e>0)||"linear"===t,ny=lc({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:A,leakyreluAlpha:u}){if(l=l||"linear",!1===ty(Ju.state.gradientDepth,l)){Vs("NHWC"===a,(()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let c=Pp(e,t,n,r,a,s,i);return null!=o&&(c=Ch(c,o)),ey(c,l,A,u)}const c=sc(e,"x","conv2d","float32"),h=sc(t,"filter","conv2d","float32");let d=c,p=!1;3===c.rank&&(p=!0,d=gp(c,[1,c.shape[0],c.shape[1],c.shape[2]])),Vs(4===d.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`)),Vs(4===h.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`)),mp("fused conv2d",r,i);const f="NHWC"===a?d.shape[3]:d.shape[1];Vs(h.shape[2]===f,(()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${h.shape[2]}.`)),Vs(dp(n,s),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`));const m=sp(d.shape,h.shape,n,s,r,i);let g,y;if(null!=o&&(g=sc(o,"bias","fused conv2d"),[g]=zu(g,c),"NHWC"===a?qh(m.outShape,g.shape):(Vs(g.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`)),Vs(0===g.shape.length||g.shape[0]===m.outChannels||1===g.shape[0],(()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${m.outChannels})`)))),null!=A){const e=A.shape;if(Vs(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)Vs(1===e[0]||e[0]===m.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${m.outChannels}).`));else if(3===e.length)try{qh(e,m.outShape)}catch(t){const n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(n)}y=sc(A,"prelu weights","fused conv2d")}const b=(e,t)=>{Vs("NHWC"===a,(()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`));const[i,o,A,u]=t,c=Yg(e,A,l);Vs(hp(s),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`));const h=[zp(o.shape,c,i,n,r),Jg(o,c,i.shape,n,r)];if(null!=u){const e=Zg(u,c);h.push(e)}return h},w={x:d,filter:h,bias:g,preluActivationWeights:y},v={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:u};if(null==o){const e=Lh(((e,t,n)=>{let r=Ju.runKernel(OA,w,v);return n([t,e,r]),p&&(r=gp(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return e(d,h)}{const e=Lh(((e,t,n,r)=>{let a=Ju.runKernel(OA,w,v);return r([t,e,a,n]),p&&(a=gp(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}}));return e(d,h,g)}}}),ry=lc({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a,s=[1,1],i){let o=e;3===e.rank&&(o=gp(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=gp(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const A={x:o,dy:l},u={strides:r,pad:a,dimRoundingMode:i,dilations:s,filterShape:n};return Ju.runKernel(bo,A,u)}}),ay=lc({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a,s=[1,1],i){let o=t,l=!1;3===t.rank&&(l=!0,o=gp(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const A={dy:o,filter:n},u={strides:r,pad:a,dimRoundingMode:i,dilations:s,inputShape:e},c=Ju.runKernel(wo,A,u);return l?gp(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),sy=lc({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:A,leakyreluAlpha:u}){if(!1===ty(Ju.state.gradientDepth,l)){let c=ef(e,t,n,r,a,s,i);return null!=o&&(c=Ch(c,o)),ey(c,l,A,u)}const c=sc(e,"x","depthwiseConv2d","float32"),h=sc(t,"filter","depthwiseConv2d","float32");let d=c,p=!1;3===c.rank&&(p=!0,d=gp(c,[1,c.shape[0],c.shape[1],c.shape[2]])),Vs(4===d.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`)),Vs(4===h.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`)),Vs(d.shape[3]===h.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${d.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`)),null==s&&(s=[1,1]),Vs(dp(n,s),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`)),mp("fused depthwiseConv2d",r,i);const f=sp(d.shape,h.shape,n,s,r,i,!0);let m,g;null!=o&&(m=sc(o,"bias","fused conv2d"),[m]=zu(m,c),qh(f.outShape,m.shape)),null!=A&&(g=sc(A,"prelu weights","fused depthwiseConv2d"));const y=(e,t)=>{Vs(hp(s),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`));const[a,o,A,u]=t,c=Yg(e,A,l),h=ay(o.shape,c,a,n,r,s,i),d=ry(o,c,a.shape,n,r,s,i);return null!=u?[h,d,Zg(m,c)]:[h,d]},b={x:d,filter:h,bias:m,preluActivationWeights:g},w={strides:n,pad:r,dataFormat:a,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:u};if(null==o){const e=Lh(((e,t,n)=>{let r=Ju.runKernel($A,b,w);return n([t,e,r]),p&&(r=gp(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}}));return e(d,h)}{const e=Lh(((e,t,n,r)=>{let a=Ju.runKernel($A,b,w);return r([t,e,a,n]),p&&(a=gp(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:y}}));return e(d,h,m)}}}),iy=lc({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:o=.2}){if(!1===ty(Ju.state.gradientDepth,s)){let l=vp(e,t,n,r);return null!=a&&(l=Ch(l,a)),ey(l,s,i,o)}let l=sc(e,"a","fused matMul"),A=sc(t,"b","fused matMul");[l,A]=zu(l,A);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],c=r?A.shape[A.rank-1]:A.shape[A.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],d=r?A.shape[A.rank-2]:A.shape[A.rank-1],p=l.shape.slice(0,-2),f=A.shape.slice(0,-2),m=Gs(p),g=Gs(f);Vs(u===c,(()=>`Error in fused matMul: inner shapes (${u}) and (${c}) of Tensors with shapes ${l.shape} and ${A.shape} and transposeA=${n} and transposeB=${r} must match.`));const y=qh(l.shape.slice(0,-2),A.shape.slice(0,-2)).concat([h,d]),b=gp(l,n?[m,u,h]:[m,h,u]),w=gp(A,r?[g,d,c]:[g,c,d]);let v,x;null!=a&&(v=sc(a,"bias","fused matMul"),[v]=zu(v,l),qh(y,v.shape)),null!=i&&(x=sc(i,"prelu weights","fused matMul"));const B=(e,t)=>{const[i,o,l,A]=t,u=Yg(gp(e,l.shape),l,s);let c,h;return n||r?!n&&r?(c=vp(u,o,!1,!1),h=vp(u,i,!0,!1)):n&&!r?(c=vp(o,u,!1,!0),h=vp(i,u,!1,!1)):(c=vp(o,u,!0,!0),h=vp(u,i,!0,!0)):(c=vp(u,o,!1,!0),h=vp(i,u,!0,!1)),null!=a?[c,h,Zg(A,u)]:[c,h]},k={a:b,b:w,bias:v,preluActivationWeights:x},C={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:o};if(null==a){const e=Lh(((e,t,n)=>{const r=Ju.runKernel(QA,k,C);return n([e,t,r]),{value:gp(r,y),gradFunc:B}}));return e(b,w)}{const e=Lh(((e,t,n,r)=>{const a=Ju.runKernel(QA,k,C);return r([e,t,a,n]),{value:gp(a,y),gradFunc:B}}));return e(b,w,v)}}}),oy=lc({hammingWindow_:function(e){return qg(e,.54,.46)}}),ly=lc({hannWindow_:function(e){return qg(e,.5,.5)}}),Ay=lc({frame_:function(e,t,n,r=!1,a=0){let s=0;const i=[];for(;s+t<=e.size;)i.push(Bp(e,s,t)),s+=n;if(r)for(;s<e.size;){const r=s+t-e.size,o=wp([Bp(e,s,t-r),Ph([r],a)]);i.push(o),s+=n}return 0===i.length?kg([],[0,t]):gp(wp(i),[i.length,t])}}),uy=lc({stft_:function(e,t,n,r,a=ly){null==r&&(r=jg(t));const s=Ay(e,t,n),i=Ih(s,a(t));return mg(i,r)}}),cy=lc({cropAndResize_:function(e,t,n,r,a="bilinear",s=0){const i=sc(e,"image","cropAndResize"),o=sc(t,"boxes","cropAndResize","float32"),l=sc(n,"boxInd","cropAndResize","int32"),A=o.shape[0];Vs(4===i.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`)),Vs(2===o.rank&&4===o.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${A},4] but had shape ${o.shape}.`)),Vs(1===l.rank&&l.shape[0]===A,(()=>`Error in cropAndResize: boxInd must be have size [${A}] but had shape ${o.shape}.`)),Vs(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),Vs(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),Vs("bilinear"===a||"nearest"===a,(()=>`method must be bilinear or nearest, but was ${a}`));const u={image:i,boxes:o,boxInd:l},c={method:a,extrapolationValue:s,cropSize:r};return Ju.runKernel(fo,u,c)}}),hy=lc({flipLeftRight_:function(e){const t=sc(e,"image","flipLeftRight","float32");Vs(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return Ju.runKernel(Do,n,{})}}),dy=lc({grayscaleToRGB_:function(e){const t=sc(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Vs(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),Vs(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Ef(t,a)}}),py=lc({rgbToGrayscale_:function(e){const t=sc(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];Vs(t.rank>=2,(()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`)),Vs(3===r,(()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`));const a=t.dtype,s=xh(t,"float32"),i=Bg([.2989,.587,.114]);let o;switch(t.rank){case 2:o=lf("ij,j->i",s,i);break;case 3:o=lf("ijk,k->ij",s,i);break;case 4:o=lf("ijkl,l->ijk",s,i);break;case 5:o=lf("ijklm,m->ijkl",s,i);break;case 6:o=lf("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return o=Sf(o,-1),xh(o,a)}}),fy=lc({rotateWithOffset_:function(e,t,n=0,r=.5){const a=sc(e,"image","rotateWithOffset","float32");Vs(4===a.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`));const s={image:a},i={radians:t,fillValue:n,center:r};return Ju.runKernel(DA,s,i)}});function my(e,t,n,r,a,s){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==s&&(s=0);const i=e.shape[0];return n=Math.min(n,i),Vs(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),Vs(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),Vs(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),Vs(1===t.rank,(()=>"scores must be a 1D tensor")),Vs(t.shape[0]===i,(()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`)),Vs(0<=s&&s<=1,(()=>`softNmsSigma must be in [0, 1], but was '${s}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:s}}const gy=lc({nonMaxSuppression_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=sc(e,"boxes","nonMaxSuppression","float32"),i=sc(t,"scores","nonMaxSuppression","float32"),o=my(s,i,n,r,a),l={maxOutputSize:n=o.maxOutputSize,iouThreshold:r=o.iouThreshold,scoreThreshold:a=o.scoreThreshold};return Ju.runKernel(Bl,{boxes:s,scores:i},l)}});function yy(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,s=0,i=!1;for(;r<a;){s=r+(a-r>>>1);const o=n(t,e[s]);o>0?r=s+1:(a=s,i=!o)}return i?r:-r-1}(e,t,n||by)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function by(e,t){return e>t?1:e<t?-1:0}function wy(e,t,n,r,a){return By(e,t,n,r,a,0)}function vy(e,t,n,r,a,s){return By(e,t,n,r,a,0,!1,s,!0)}function xy(e,t,n,r,a,s){return By(e,t,n,r,a,s,!0)}function By(e,t,n,r,a,s,i=!1,o=!1,l=!1){const A=[];for(let e=0;e<t.length;e++)t[e]>a&&A.push({score:t[e],boxIndex:e,suppressBeginIndex:0});A.sort(Ny);const u=s>0?-.5/s:0,c=[],h=[];for(;c.length<n&&A.length>0;){const t=A.pop(),{score:n,boxIndex:s,suppressBeginIndex:i}=t;if(n<a)break;let o=!1;for(let n=c.length-1;n>=i;--n){const i=ky(e,s,c[n]);if(i>=r){o=!0;break}if(t.score=t.score*Cy(r,u,i),t.score<=a)break}t.suppressBeginIndex=c.length,o||(t.score===n?(c.push(s),h.push(t.score)):t.score>a&&yy(A,t,Ny))}const d=c.length,p=n-d;o&&p>0&&(c.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const f={selectedIndices:c};return i&&(f.selectedScores=h),l&&(f.validOutputs=d),f}function ky(e,t,n){const r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),A=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),c=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),d=(o-s)*(l-i),p=(c-A)*(h-u);if(d<=0||p<=0)return 0;const f=Math.max(s,A),m=Math.max(i,u),g=Math.min(o,c),y=Math.min(l,h),b=Math.max(g-f,0)*Math.max(y-m,0);return b/(d+p-b)}function Cy(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function Ny(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const Sy=lc({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const i=sc(e,"boxes","nonMaxSuppression"),o=sc(t,"scores","nonMaxSuppression"),l=my(i,o,n,r,a,s),A={boxes:i,scores:o},u={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:s=l.softNmsSigma},c=Ju.runKernel(Cl,A,u);return{selectedIndices:c[0],selectedScores:c[1]}}}),Iy=lc({nonMaxSuppressionPadded_:function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const i=sc(e,"boxes","nonMaxSuppression"),o=sc(t,"scores","nonMaxSuppression"),l=my(i,o,n,r,a,null),A={boxes:i,scores:o},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:s},c=Ju.runKernel(kl,A,u);return{selectedIndices:c[0],validOutputs:c[1]}}}),Ey=lc({resizeBilinear_:function(e,t,n=!1,r=!1){const a=sc(e,"images","resizeBilinear");Vs(3===a.rank||4===a.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`)),Vs(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),Vs(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let s=a,i=!1;3===a.rank&&(i=!0,s=gp(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,o={images:s},l={alignCorners:n,halfPixelCenters:r,size:t},A=Ju.runKernel(zl,o,l);return i?gp(A,[A.shape[1],A.shape[2],A.shape[3]]):A}}),Fy=lc({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){const a=sc(e,"images","resizeNearestNeighbor");Vs(3===a.rank||4===a.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`)),Vs(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),Vs("float32"===a.dtype||"int32"===a.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),Vs(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let s=a,i=!1;3===a.rank&&(i=!0,s=gp(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const[]=t,o={images:s},l={alignCorners:n,halfPixelCenters:r,size:t},A=Ju.runKernel(Pl,o,l);return i?gp(A,[A.shape[1],A.shape[2],A.shape[3]]):A}}),Ty=lc({threshold_:function(e,t="binary",n=!1,r=.5){const a=sc(e,"image","threshold"),s=a.shape[0]*a.shape[1];let i,o,l,A,u=Ih(Bg([r]),255);if(Vs(3===a.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`)),Vs(3===a.shape[2]||1===a.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`)),Vs("int32"===a.dtype||"float32"===a.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`)),Vs("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===a.shape[2]){[i,o,l]=fg(a,[1,1,1],-1);const e=Ih(i,.2989),t=Ih(o,.587),n=Ih(l,.114);A=Ch(Ch(e,t),n)}else A=e;"otsu"===t&&(u=function(e,t){let n,r,a,s,i,o,l=Bg([-1]),A=Bg([0]),u=Bg([0]);for(let c=0;c<e.size-1;c++){n=Bp(e,0,c+1),r=Bp(e,c+1),i=Sh(xf(n),t),o=Sh(xf(r),t);const h=xf(Ih(n,zm(0,n.size)));a=Sh(h,xf(n));const d=Ph(r.shape,n.size),p=Ch(zm(0,r.size),d),f=Ih(r,p);s=Sh(xf(f),xf(r));const m=Vh(a,s),g=Vh(a,s),y=Ih(i,o);u=Ih(Ih(y,m),g);const b=Uf(u,A);A=af(b,u,A),l=af(b,Bg([c]),l)}return l}(Tp(xh(Zm(A),"int32"),cc([]),256),s));const c=n?Pf(A,u):Uf(A,u);return xh(Ih(c,255),"int32")}}),Ly=lc({transform_:function(e,t,n="nearest",r="constant",a=0,s){const i=sc(e,"image","transform","float32"),o=sc(t,"transforms","transform","float32");Vs(4===i.rank,(()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`)),Vs(2===o.rank&&(o.shape[0]===i.shape[0]||1===o.shape[0])&&8===o.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),Vs(null==s||2===s.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`));const l={image:i,transforms:o},A={interpolation:n,fillMode:r,fillValue:a,outputShape:s};return Ju.runKernel(IA,l,A)}}),Uy=lc({bandPart_:function(e,t,n){const r=sc(e,"a","bandPart");Vs(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const a=r.shape,[s,i]=r.shape.slice(-2);let o,l;"number"==typeof t?(Vs(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),Vs(t<=s,(()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`)),o=sc(t<0?s:t,"numLower","bandPart")):(Vs("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),o=af(Mf(t,0),s,cm(t,s))),"number"==typeof n?(Vs(n%1==0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`)),Vs(n<=i,(()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`)),l=sc(n<0?i:n,"numUpper","bandPart")):(Vs("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),l=af(Mf(n,0),i,cm(n,i)));const A=gp(zm(0,s,1,"int32"),[-1,1]),u=zm(0,i,1,"int32"),c=Vh(A,u),h=Jf(Pf(c,o),_f(c,Kf(l))),d=lm([s,i],r.dtype);return gp(bg(Dg(gp(r,[-1,s,i])).map((e=>af(h,e,d)))),a)}}),_y=lc({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Vs(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)Vs(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=fg(e,e.shape[0],0).map((e=>yg(e,[0])));Vs(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let t=0;t<e.length;++t)n.push(Ju.tidy((()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){const t=Ih(xf(Ih(n[r],e)),n[r]);e=Vh(e,t)}return Sh(e,kf(e,"euclidean"))})));return t?bg(n,0):n}});function Ry(e,t=!1){return Ju.tidy((()=>{Vs(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let a=Ff(n),s=Bh(e);const i=kg([[1]],[1,1]);let o=Bh(i);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=s,l=o,A=a;[o,s,a]=Ju.tidy((()=>{const t=Bp(s,[e,e],[n-e,1]),l=kf(t),A=Bp(s,[e,e],[1,1]),u=af(Uf(A,0),kg([[-1]]),kg([[1]])),c=Vh(A,Ih(u,l)),h=Sh(t,c);o=1===h.shape[0]?Bh(i):wp([i,Bp(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);const d=Kf(Sh(vp(u,c),l)),p=Bp(s,[e,0],[n-e,r]),f=Ih(d,o),m=Hg(o);if(0===e)s=Vh(p,vp(f,vp(m,p)));else{const t=Vh(p,vp(f,vp(m,p)));s=wp([Bp(s,[0,0],[e,r]),t],0)}const g=Hg(f),y=Bp(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Vh(y,vp(vp(y,o),g));else{const t=Vh(y,vp(vp(y,o),g));a=wp([Bp(a,[0,0],[n,e]),t],1)}return[o,s,a]})),gc([t,l,A])}return!t&&n>r&&(a=Bp(a,[0,0],[n,r]),s=Bp(s,[0,0],[r,r])),[a,s]}))}const Dy=lc({qr_:function(e,t=!1){if(Vs(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return Ry(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=Dg(gp(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],s=[];return r.forEach((e=>{const[n,r]=Ry(e,t);a.push(n),s.push(r)})),[gp(bg(a,0),e.shape),gp(bg(s,0),e.shape)]}}});var Qy;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Qy||(Qy={}));const Oy=lc({computeWeightedLoss_:function(e,t,n=Qy.SUM_BY_NONZERO_WEIGHTS){const r=sc(e,"losses","computeWeightedLoss");let a=null;null!=t&&(a=sc(t,"weights","computeWeightedLoss"));const s=null==a?r:Ih(r,a);if(n===Qy.NONE)return s;if(n===Qy.SUM)return xf(s);if(n===Qy.MEAN){if(null==a)return om(s);{const e=r.size/a.size,t=Sh(xf(s),xf(a));return e>1?Sh(t,Uh(e)):t}}if(n===Qy.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Sh(xf(s),Uh(r.size));{const e=Ih(a,Am(r.shape)),t=xh(xf(gm(e,Uh(0))),"float32");return Sh(xf(s),t)}}throw Error(`Unknown reduction: ${n}`)}}),$y=lc({absoluteDifference_:function(e,t,n,r=Qy.SUM_BY_NONZERO_WEIGHTS){const a=sc(e,"labels","absoluteDifference"),s=sc(t,"predictions","absoluteDifference");let i=null;null!=n&&(i=sc(n,"weights","absoluteDifference")),Ws(a.shape,s.shape,"Error in absoluteDifference: ");const o=Kh(Vh(a,s));return Oy(o,i,r)}}),My=lc({cosineDistance_:function(e,t,n,r,a=Qy.SUM_BY_NONZERO_WEIGHTS){const s=sc(e,"labels","cosineDistance"),i=sc(t,"predictions","cosineDistance");let o=null;null!=r&&(o=sc(r,"weights","cosineDistance")),Ws(s.shape,i.shape,"Error in cosineDistance: ");const l=Uh(1),A=Vh(l,xf(Ih(s,i),n,!0));return Oy(A,o,a)}}),Py=lc({hingeLoss_:function(e,t,n,r=Qy.SUM_BY_NONZERO_WEIGHTS){let a=sc(e,"labels","hingeLoss");const s=sc(t,"predictions","hingeLoss");let i=null;null!=n&&(i=sc(n,"weights","hingeLoss")),Ws(a.shape,s.shape,"Error in hingeLoss: ");const o=Uh(1);a=Vh(Ih(Uh(2),a),o);const l=Km(Vh(o,Ih(a,s)));return Oy(l,i,r)}}),Hy=lc({huberLoss_:function(e,t,n,r=1,a=Qy.SUM_BY_NONZERO_WEIGHTS){const s=sc(e,"labels","huberLoss"),i=sc(t,"predictions","huberLoss");let o=null;null!=n&&(o=sc(n,"weights","huberLoss")),Ws(s.shape,i.shape,"Error in huberLoss: ");const l=Uh(r),A=Kh(Vh(i,s)),u=cm(A,l),c=Vh(A,u),h=Ch(Ih(Uh(.5),Fh(u)),Ih(l,c));return Oy(h,o,a)}}),zy=lc({logLoss_:function(e,t,n,r=1e-7,a=Qy.SUM_BY_NONZERO_WEIGHTS){const s=sc(e,"labels","logLoss"),i=sc(t,"predictions","logLoss");let o=null;null!=n&&(o=sc(n,"weights","logLoss")),Ws(s.shape,i.shape,"Error in logLoss: ");const l=Uh(1),A=Uh(r),u=Kf(Ih(s,Vf(Ch(i,A)))),c=Ih(Vh(l,s),Vf(Ch(Vh(l,i),A))),h=Vh(u,c);return Oy(h,o,a)}}),Vy=lc({meanSquaredError_:function(e,t,n,r=Qy.SUM_BY_NONZERO_WEIGHTS){const a=sc(e,"labels","meanSquaredError"),s=sc(t,"predictions","meanSquaredError");let i=null;null!=n&&(i=sc(n,"weights","meanSquaredError")),Ws(a.shape,s.shape,"Error in meanSquaredError: ");const o=gg(a,s);return Oy(o,i,r)}}),Wy=lc({sigmoidCrossEntropy_:function(e,t,n,r=0,a=Qy.SUM_BY_NONZERO_WEIGHTS){let s=sc(e,"multiClassLabels","sigmoidCrossEntropy");const i=sc(t,"logits","sigmoidCrossEntropy");let o=null;if(null!=n&&(o=sc(n,"weights","sigmoidCrossEntropy")),Ws(s.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=Uh(r),t=Uh(1),n=Uh(.5);s=Ch(Ih(s,Vh(t,e)),Ih(n,e))}const l=function(e,t){const n=sc(e,"labels","sigmoidCrossEntropyWithLogits"),r=sc(t,"logits","sigmoidCrossEntropyWithLogits");Ws(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Km(r),s=Ih(r,n),i=Wf(Nf(Kf(Kh(r))));return Ch(Vh(a,s),i)}(s,i);return Oy(l,o,a)}}),Ky=lc({softmaxCrossEntropy_:function(e,t,n,r=0,a=Qy.SUM_BY_NONZERO_WEIGHTS){let s=sc(e,"onehotLabels","softmaxCrossEntropy");const i=sc(t,"logits","softmaxCrossEntropy");let o=null;if(null!=n&&(o=sc(n,"weights","softmaxCrossEntropy")),Ws(s.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const e=Uh(r),t=Uh(1),n=Uh(s.shape[1]);s=Ch(Ih(s,Vh(t,e)),Sh(e,n))}const l=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const r=Lh(((e,t,r)=>{const a=Xf(t,[n],!0),s=Vh(xh(t,"float32"),a);r([e,s]);const i=Kf(Ih(s,e));return{value:xf(i,[n]),gradFunc:(e,t)=>{const[r,a]=t,s=ff(e.shape,[n]);return[Ih(gp(e,s),Vh(xh(r,"float32"),Nf(a))),Ih(gp(e,s),Vh(Nf(a),xh(r,"float32")))]}}}));return r(e,t)}(s,i);return Oy(l,o,a)}}),Gy=lc({sparseFillEmptyRows_:function(e,t,n,r){const a=sc(e,"indices","sparseFillEmptyRows","int32"),s=sc(t,"values","sparseFillEmptyRows"),i=sc(n,"denseShape","sparseFillEmptyRows","int32"),o=sc(r,"defaultValue","sparseFillEmptyRows",s.dtype);if(2!==a.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${a.shape}`);if(1!==s.rank)throw new Error(`Values should be Tensor1D but received shape ${s.shape}`);if(1!==i.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(0!==o.rank)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:a,values:s,denseShape:i,defaultValue:o},A=Ju.runKernel(cA,l);return{outputIndices:A[0],outputValues:A[1],emptyRowIndicator:A[2],reverseIndexMap:A[3]}}}),jy=lc({sparseReshape_:function(e,t,n){const r=sc(e,"inputIndices","sparseReshape","int32"),a=sc(t,"inputShape","sparseReshape","int32"),s=sc(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==a.rank)throw new Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(1!==s.rank)throw new Error(`New shape should be Tensor1D but received shape ${s.shape}`);const i={inputIndices:r,inputShape:a,newShape:s},o=Ju.runKernel(hA,i);return{outputIndices:o[0],outputShape:o[1]}}}),qy=lc({sparseSegmentMean_:function(e,t,n){const r=sc(e,"data","sparseSegmentMean"),a=sc(t,"indices","sparseSegmentMean","int32"),s=sc(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${a.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${s.shape}`);const i={data:r,indices:a,segmentIds:s};return Ju.runKernel(dA,i)}}),Xy=lc({sparseSegmentSum_:function(e,t,n){const r=sc(e,"data","sparseSegmentSum"),a=sc(t,"indices","sparseSegmentSum","int32"),s=sc(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${a.shape}`);if(1!==s.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${s.shape}`);const i={data:r,indices:a,segmentIds:s};return Ju.runKernel(pA,i)}}),Jy=lc({stringNGrams_:function(e,t,n,r,a,s,i,o){const l=sc(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const A=sc(t,"dataSplits","stringNGrams");if("int32"!==A.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:a,rightPad:s,padWidth:i,preserveShortSequences:o},c={data:l,dataSplits:A},h=Ju.runKernel(wA,c,u);return{nGrams:h[0],nGramsSplits:h[1]}}}),Yy={fft:hg,ifft:dg,rfft:mg,irfft:pg},Zy={hammingWindow:oy,hannWindow:ly,frame:Ay,stft:uy},eb={flipLeftRight:hy,grayscaleToRGB:dy,resizeNearestNeighbor:Fy,resizeBilinear:Ey,rgbToGrayscale:py,rotateWithOffset:fy,cropAndResize:cy,nonMaxSuppression:gy,nonMaxSuppressionAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){const s=sc(e,"boxes","nonMaxSuppressionAsync"),i=sc(t,"scores","nonMaxSuppressionAsync"),o=my(s,i,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;const l=await Promise.all([s.data(),i.data()]),A=l[0],u=l[1],{selectedIndices:c}=wy(A,u,n,r,a);return s!==e&&s.dispose(),i!==t&&i.dispose(),Bg(c,"int32")},nonMaxSuppressionWithScore:Sy,nonMaxSuppressionWithScoreAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=0){const i=sc(e,"boxes","nonMaxSuppressionAsync"),o=sc(t,"scores","nonMaxSuppressionAsync"),l=my(i,o,n,r,a,s);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,s=l.softNmsSigma;const A=await Promise.all([i.data(),o.data()]),u=A[0],c=A[1],{selectedIndices:h,selectedScores:d}=xy(u,c,n,r,a,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:Bg(h,"int32"),selectedScores:Bg(d)}},nonMaxSuppressionPadded:Iy,nonMaxSuppressionPaddedAsync:async function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,s=!1){const i=sc(e,"boxes","nonMaxSuppressionAsync"),o=sc(t,"scores","nonMaxSuppressionAsync"),l=my(i,o,n,r,a,null),A=l.maxOutputSize,u=l.iouThreshold,c=l.scoreThreshold,[h,d]=await Promise.all([i.data(),o.data()]),{selectedIndices:p,validOutputs:f}=vy(h,d,A,u,c,s);return i!==e&&i.dispose(),o!==t&&o.dispose(),{selectedIndices:Bg(p,"int32"),validOutputs:Uh(f,"int32")}},threshold:Ty,transform:Ly},tb={bandPart:Uy,gramSchmidt:_y,qr:Dy},nb={absoluteDifference:$y,computeWeightedLoss:Oy,cosineDistance:My,hingeLoss:Py,huberLoss:Hy,logLoss:zy,meanSquaredError:Vy,sigmoidCrossEntropy:Wy,softmaxCrossEntropy:Ky},rb={sparseFillEmptyRows:Gy,sparseReshape:jy,sparseSegmentMean:qy,sparseSegmentSum:Xy},ab={stringNGrams:Jy,stringSplit:lc({stringSplit_:function(e,t,n=!0){const r=sc(e,"input","stringSplit","string"),a=sc(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==a.rank)throw new Error(`Delimiter should be a scalar but received shape ${a.shape}`);const s={skipEmpty:n},i={input:r,delimiter:a},o=Ju.runKernel(vA,i,s);return{indices:o[0],values:o[1],shape:o[2]}}}),stringToHashBucketFast:lc({stringToHashBucketFast_:function(e,t){const n=sc(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const a={input:n};return Ju.runKernel(xA,a,r)}}),staticRegexReplace:lc({staticRegexReplace_:function(e,t,n,r=!0){const a=sc(e,"input","staticRegexReplace","string"),s={pattern:t,rewrite:n,replaceGlobal:r};return Ju.runKernel(yA,{x:a},s)}})},sb=class{static sgd(e){return new Yh(e)}static momentum(e,t,n=!1){return new Zh(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new ed(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new Wh(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new Mh(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new Jh(e,t,n,r,a)}static adagrad(e,t=.1){return new Hh(e,t)}},ib="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function ob(){return new Promise((e=>ib((()=>e()))))}function lb(e,t){const n=e[0].length;e.forEach(((e,t)=>{Vs(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),Vs(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,a)=>{for(let s=0;s<n;s++)Vs(s===t||e[s]===r[s],(()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`))}))}function Ab(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var ub;function cb(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){const s=n[a],i=r[r.length-n.length+a],o=r[i];if(s>=0)if(o>=0){if(o!==s)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${a+e}] = ${s} but shape[${a+e}] = ${o}`)}else r[i]=s}return r}function hb(e){const t={FIRST_DIM_SIZE:ub.FIRST_DIM_SIZE,VALUE_ROWIDS:ub.VALUE_ROWIDS,ROW_LENGTHS:ub.ROW_LENGTHS,ROW_SPLITS:ub.ROW_SPLITS,ROW_LIMITS:ub.ROW_LIMITS,ROW_STARTS:ub.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function db(e){return 0===e.length?0:e[0]===ub.FIRST_DIM_SIZE?e.length-1:e.length}function pb(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){const n=e[a],r=t[a+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${a-e.length}] = ${n} but ragged tensor input.flatValues.shape[${a-e.length}] = ${r}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(ub||(ub={}));const fb=30;function mb(e){return e<=fb?e:ui(e,Math.floor(Math.sqrt(e)))}function gb(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function yb(e,t,n,r=!0){let a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function bb(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function wb(e,t,n,r=!0){const a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?a.push(t[n-1]*e[n]):a.push(e[n]/t[n-1]):a.push(e[n]);return a}function vb(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function xb(e,t,n){const r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Bb(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===Gs(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const a=t.shape,s=a[a.length-1];let i=1;for(let e=0;e<a.length-1;++e)i*=a[e];const o=e.shape,l=a.slice();l.pop();let A=1;for(let e=s;e<n;++e)A*=o[e],l.push(o[e]);const u=[...ci(e.shape).map((e=>e/A)),1].slice(0,s);return[l,i,A,u]}const kb=1.7580993408473768,Cb=1.0507009873554805,Nb=.3275911,Sb=.254829592,Ib=-.284496736,Eb=1.421413741,Fb=-1.453152027,Tb=1.061405429;function Lb(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Ub(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function _b(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function Rb(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function Db(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Qb(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Ob(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){const s=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(s),r[a]=Math.sin(s)}return{real:n,imag:r}}function $b(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const Mb="->",Pb=/->/g,Hb=",",zb="...";function Vb(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(Pb,"").length)/Mb.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Mb}").`);const[r,a]=e.split(Mb);Vs(-1===r.indexOf(zb),(()=>`The ellipsis notation ("${zb}") is not supported yet.`));const s=r.split(Hb),i=s.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let e=0;e<a.length;++e){const t=a[e];if(!s.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===o.indexOf(t)&&o.push(t)}for(let e=0;e<r.length;++e){const t=r[e];-1===o.indexOf(t)&&t!==Hb&&o.push(t)}const l=new Array(s.length);for(let e=0;e<i;++e){if(new Set(s[e].split("")).size!==s[e].length)throw new Error(`Found duplicate axes in input component ${s[e]}. Support for duplicate axes in input is not implemented yet.`);l[e]=[];for(let t=0;t<s[e].length;++t)l[e].push(o.indexOf(s[e][t]))}const A=o.length,u=[];for(let e=a.length;e<A;++e)u.push(e);return{allDims:o,summedDims:u,idDims:l}}function Wb(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function Kb(e,t,n){const r=new Array(e);for(let e=0;e<n.length;++e){const a=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=a[n]:Vs(r[t[e][n]]===a[n],(()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(a)}, but got dimension ${a[n]}`))}}function Gb(e,t){const n=e,r=[];let a=0;0===e.length&&n.push(-1),a=e.length+1;for(let e=0;e<a;++e)r.push([]);const s=[];for(let e=0;e<n.length;++e){const a=qb(t,n[e]);for(const t of a)-1===s.indexOf(t)&&(r[e].push(t),s.push(t))}return{path:n,steps:r}}function jb(e){return e.every(((e,t)=>e===t))}function qb(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Xb(e,t,n=0){let r=[];if("number"==typeof t)Vs(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const a=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);Vs(a<=1,(()=>"There should be only one negative value in split array."));const s=t.indexOf(-1);if(-1!==s){const r=t.reduce(((e,t)=>t>0?e+t:e));t[s]=e.shape[n]-r}Vs(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function Jb(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function Yb(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function Zb(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function ew(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function tw(e,t){return`size ${e} must be non-negative, not ${t}`}function nw(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function rw(e,t){return`Input to reshape is a SparseTensor with ${Gs(e)}\n  dense values, but the requested shape requires a multiple of ${Gs(t)}. inputShape=${e} outputShape= ${t}`}function aw(e,t){return`Input to reshape is a tensor with ${Gs(e)} dense values, but the requested shape has ${Gs(t)}. inputShape=${e} outputShape=${t}`}function sw(){return"segment ids must be >= 0"}function iw(){return"segment ids are not increasing"}function ow(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function lw(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function Aw(e,t){let n,r=!1;for(e<=fb?(n=e,r=!0):n=ui(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ui(e,n+1);return n}function uw(e,t,n){const r=[],a=e.length;for(let s=0;s<a;s++)s!==t?r.push(e[s]):r.push(n);return r}function cw(e,t,n,r){const a=t.shape.length,s=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const i=e.shape[n],o=[];let l=1,A=1,u=1;for(let t=0;t<r;++t)o.push(e.shape[t]),l*=e.shape[t];for(let t=r;t<n;t++)o.push(e.shape[t]),A*=e.shape[t];for(let e=r;e<a;e++)o.push(t.shape[e]);for(let t=n+1;t<s;t++)o.push(e.shape[t]),u*=e.shape[t];return{batchSize:l,sliceSize:u,outerSize:A,dimSize:i,outputShape:o}}function hw(e){try{return e.map((e=>fu(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function dw(e){return e.map((e=>pu(e)))}!function(){for(const e of td)Oh(e)}();const pw={kernelName:Ei,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(e,wg(xh(n,"float32"),-1))}}},fw={kernelName:Fi,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Fh(xh(n,"float32")),r=Eh(Vh(Uh(1),t));return Kf(Sh(e,r))}}}},mw={kernelName:Ti,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Eh(Vh(Fh(xh(n,"float32")),1));return Sh(e,t)}}}},gw={kernelName:Li,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=qh(n.shape,r.shape);return{a:()=>{let t=e;const r=jh(n.shape,a);return r.length>0&&(t=xf(t,r)),gp(t,n.shape)},b:()=>{let t=e;const n=jh(r.shape,a);return n.length>0&&(t=xf(t,n)),gp(t,r.shape)}}}},yw={kernelName:Ui,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},bw={kernelName:Di,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Th(n)}}},ww={kernelName:Qi,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Th(n)}}},vw={kernelName:Oi,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,Eh(Vh(Uh(1),Fh(xh(n,"float32")))))}}},xw={kernelName:$i,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Eh(Ch(Uh(1),Fh(xh(n,"float32"))));return Sh(e,t)}}}},Bw={kernelName:Hi,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=qh(n.shape,r.shape);return{a:()=>{const t=Ch(Fh(n),Fh(r));let s=Ih(e,Sh(r,t));const i=jh(n.shape,a);return i.length>0&&(s=xf(s,i)),gp(s,n.shape)},b:()=>{const t=Ch(Fh(n),Fh(r));let s=Kf(Ih(e,Sh(n,t)));const i=jh(r.shape,a);return i.length>0&&(s=xf(s,i)),gp(s,r.shape)}}}},kw={kernelName:Mi,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,Ch(Fh(xh(n,"float32")),1))}}},Cw={kernelName:Pi,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,Vh(Uh(1),Fh(xh(n,"float32"))))}}},Nw=lc({avgPool3dGrad_:function(e,t,n,r,a,s){const i=sc(e,"dy","avgPool3dGrad"),o=sc(t,"input","avgPool3dGrad");let l=i,A=o,u=!1;4===o.rank&&(u=!0,l=gp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),A=gp(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Vs(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),Vs(5===A.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${A.rank}.`)),mp("avgPool3dGrad",a,s);const c={dy:l,input:A},h={filterSize:n,strides:r,pad:a,dimRoundingMode:s},d=Ju.runKernel(Ki,c,h);return u?gp(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),Sw={kernelName:Wi,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:s,pad:i,dimRoundingMode:o}=n;return{x:()=>Nw(e,r,a,s,i,o)}}},Iw=lc({avgPoolGrad_:function(e,t,n,r,a){const s=sc(e,"dy","avgPoolGrad"),i=sc(t,"input","avgPoolGrad");Vs(i.rank===s.rank,(()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`));let o=i,l=s,A=!1;3===i.rank&&(A=!0,o=gp(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=gp(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Vs(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),Vs(4===o.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`));const u={dy:l,input:o},c={filterSize:n,strides:r,pad:a},h=Ju.runKernel(Vi,u,c);return A?gp(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),Ew={kernelName:zi,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:a,strides:s,pad:i}=n;return{x:()=>Iw(e,r,a,s,i)}}},Fw={kernelName:Gi,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,a]=t,{transposeA:s,transposeB:i}=n;return s||i?!s&&i?{a:()=>vp(e,a,!1,!1),b:()=>vp(e,r,!0,!1)}:s&&!i?{a:()=>vp(a,e,!1,!0),b:()=>vp(r,e,!1,!1)}:{a:()=>vp(a,e,!0,!0),b:()=>vp(e,r,!0,!0)}:{a:()=>vp(e,a,!1,!0),b:()=>vp(r,e,!0,!1)}}},Tw={kernelName:ji,gradFunc:(e,t,n)=>{const{blockShape:r,crops:a}=n;return{x:()=>Nm(e,r,a)}}},Lw={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,a=r.inputShape,s=r.shape,i=Array.from(s);for(let e=a.length-1;e>=0;e--)if(a[e]===s[e])i[e]=1;else if(1!==a[e])throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${s}].`);const o=[];for(let e=0;e<i.length;e++)i[e]>1&&o.push(e);return{x:()=>xf(e,o,!0)}}},Uw={kernelName:Yi,gradFunc:e=>({x:()=>e.clone()})},_w={kernelName:Zi,gradFunc:e=>({x:()=>Th(e)})},Rw={kernelName:eo,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:a,clipValueMax:s}=n;return{x:()=>af(Jf(_f(r,a),Pf(r,s)),e,Th(e))}}},Dw={kernelName:no,inputsToSave:["x"],gradFunc:pw.gradFunc},Qw={kernelName:ro,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:a}=n,s=ei(a,t[0].shape)[0],i=r.map((e=>e[s]));return fg(e,i,s).map((e=>()=>e))}},Ow={kernelName:ao,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{dilations:s,strides:i,pad:o,dataFormat:l}=n;return Vs(hp(s),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`)),{x:()=>zp(r.shape,e,a,i,o,l),filter:()=>Jg(r,e,a.shape,i,o,l)}}},$w={kernelName:io,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,{strides:s,pad:i,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Pp(e,a,s,i,o,1,l),filter:()=>Jg(e,r,a.shape,s,i,o,l)}}},Mw=lc({conv3DBackpropFilter_:function(e,t,n,r,a){let s=e;4===e.rank&&(s=gp(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;4===i.rank&&(i=gp(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Vs(5===s.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`)),Vs(5===i.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`)),Vs(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),Vs(s.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`)),Vs(i.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`));const o={x:s,dy:i},l={strides:r,pad:a,filterShape:n};return Ju.runKernel(lo,o,l)}}),Pw={kernelName:oo,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:s}=n;Vs(hp(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[i,o]=t;return{x:()=>Kp(i.shape,e,o,a,s),filter:()=>Mw(i,e,o.shape,a,s)}}},Hw={kernelName:uo,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(Kf(sg(xh(n,"float32"))),e)}}},zw={kernelName:co,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(ig(xh(n,"float32")),e)}}},Vw={kernelName:po,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a,exclusive:s,reverse:i}=n;return{x:()=>{const t=gf([a],r.rank);let n=Jp(e,a,s,!i);return null!=t&&(n=Hg(n,t)),n}}}},Ww={kernelName:yo,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:a,pad:s,dimRoundingMode:i}=n,o=null==r?[1,1]:r;Vs(hp(o),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`));const[l,A]=t;return Vs(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),Vs(4===A.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${A.rank}.`)),Vs(l.shape[3]===A.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${A.shape[2]}.`)),Vs(dp(a,o),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${o}'.`)),mp("depthwiseConv2d",s,i),{x:()=>ay(l.shape,e,A,a,s,o,i),filter:()=>ry(l,e,A.shape,a,s,o,i)}}},Kw={kernelName:xo,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,a]=t,s={x:r,filter:a,dy:e},i={x:r,filter:a,dy:e};return{x:()=>Ju.runKernel(Bo,s,n),filter:()=>Ju.runKernel(ko,i,n)}}},Gw={kernelName:So,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>Ju.runKernel(Io,r)}}},jw={kernelName:Eo,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Ih(Nf(Kf(Fh(n))),2/Math.sqrt(Math.PI));return{x:()=>Ih(e,r)}}},qw={kernelName:To,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(e,n)}}},Xw={kernelName:Lo,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>gp(e,n.shape)}}},Jw={kernelName:Uo,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(e,Nf(n))}}},Yw={kernelName:Qo,gradFunc:e=>({x:()=>Th(e)})},Zw={kernelName:Oo,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=qh(n.shape,r.shape);return{a:()=>{const t=Sh(e,xh(r,"float32")),s=jh(n.shape,a);return s.length>0?gp(xf(t,s),n.shape):t},b:()=>{let t=Ih(e,xh(n,"float32"));const s=jh(r.shape,a);s.length>0&&(t=gp(xf(t,s),r.shape));const i=Fh(r);return Kf(Sh(t,xh(i,"float32")))}}}},ev={kernelName:$o,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[a,s,i,o]=t,l=null==o?Uh(1):o,A=jh(s.shape,a.shape),u=[];if(1===s.rank){for(let e=0;e<a.shape.length-1;++e)u.push(a.shape[e]);u.push(1)}const c=Vh(a,s),h=Ih(e,l),d=eg(Ch(i,Uh(r))),p=Ih(Ih(Ih(d,d),d),Uh(-.5));return{x:()=>1===s.rank?gp(Ih(Ih(e,Ef(gp(d,[1,1,1,s.shape[0]]),u)),l),a.shape):gp(Ih(Ih(e,d),l),a.shape),mean:()=>{let e=Ih(Ih(d,Uh(-1)),h);return 1===s.rank&&(e=xf(e,A)),gp(e,s.shape)},variance:()=>{let e=Ih(Ih(p,c),h);return 1===s.rank&&(e=xf(e,A)),gp(e,s.shape)},scale:()=>{const t=Ih(c,d);let n=Ih(e,t);return 1===s.rank&&(n=xf(n,A)),gp(n,s.shape)},offset:()=>{let t=e;return 1===s.rank&&(t=xf(t,A)),gp(t,s.shape)}}}},tv={kernelName:Mo,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,a]=t,{axis:s,batchDims:i}=n,o=ei(s,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,a=t.size,i=r.slice(0,o),l=i.length,A=r.slice(s,r.length).slice(1),u=A.length,c=nv(0,l),h=nv(l+1,l+1+u),d=rv([i,[a],A]),p=gp(n,d),f=gp(t,[a]),m=rv([[l],c,h]),g=Hg(p,m);let y=Rg(g,f,e.shape[o]);const b=yf(m);return y=Hg(y,b),y};if(1===i){const t=r.shape[0],n=r.split(t,0),s=()=>{const t=bg(n.map(((t,n)=>l(t,a.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)};return{x:s,indices:()=>a}}return{x:l(r,a,e),indices:()=>a}}};function nv(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function rv(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const av={kernelName:zo,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Th(n),b:()=>Th(r)}}},sv={kernelName:Vo,gradFunc:e=>({x:()=>xh(e,"float32")})},iv={kernelName:Go,gradFunc:e=>({x:()=>Th(e)})},ov={kernelName:jo,gradFunc:e=>({x:()=>Th(e)})},lv={kernelName:qo,gradFunc:e=>({x:()=>Th(e)})},Av={kernelName:Xo,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:a}=n,s=Uf(r,0);return{x:()=>af(s,e,Ih(e,a))}}},uv={kernelName:tl,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,Ch(n,1))}}},cv={kernelName:el,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,xh(n,"float32"))}}},hv={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;return{logits:()=>{const t=Nf(r);return Vh(e,Ih(xf(e,a,!0),t))}}}},dv=lc({localResponseNormalizationBackprop_:function(e,t,n,r=5,a=1,s=1,i=.5){const o={x:e,y:t,dy:n},l={depthRadius:r,bias:a,alpha:s,beta:i};return Ju.runKernel(il,o,l)}}),pv={kernelName:sl,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{depthRadius:s,bias:i,alpha:o,beta:l}=n;return{x:()=>dv(r,a,e,s,i,o,l)}}};function fv(e,t,n,r){return t.rank<n.rank&&(t=gp(t,ff(t.shape,r))),e.rank<n.rank&&(e=gp(e,ff(e.shape,r))),{x:()=>Ih(e,xh(rf(n,t),e.dtype))}}const mv={kernelName:ol,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:a}=r,s=t[0],i=fv(e,t[1],s,ei(a,s.shape));return{x:()=>i.x()}}},gv={kernelName:ll,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Ih(e,xh(_f(n,r),"float32")),b:()=>Ih(e,xh(Mf(n,r),"float32"))}}},yv=lc({maxPool3dGrad_:function(e,t,n,r,a,s,i){const o=sc(e,"dy","maxPool3dGrad"),l=sc(t,"input","maxPool3dGrad"),A=sc(n,"output","maxPool3dGrad");let u=o,c=l,h=A,d=!1;4===l.rank&&(d=!0,u=gp(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=gp(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=gp(A,[1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]])),Vs(5===u.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`)),Vs(5===c.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${c.rank}.`)),Vs(5===h.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`)),mp("maxPool3dGrad",s,i);const p={dy:u,input:c,output:h},f={filterSize:r,strides:a,pad:s,dimRoundingMode:i},m=Ju.runKernel(hl,p,f);return d?gp(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),bv={kernelName:cl,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=n;return{x:()=>yv(e,r,a,s,i,o,l)}}},wv=lc({maxPoolGrad_:function(e,t,n,r,a,s,i){const o=sc(e,"dy","maxPoolGrad"),l=sc(t,"input","maxPoolGrad"),A=sc(n,"output","maxPoolGrad");Vs(l.rank===o.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`)),Vs(4===o.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`)),Vs(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),mp("maxPoolGrad",s,i);const u={dy:o,input:l,output:A},c={filterSize:r,strides:a,pad:s,dimRoundingMode:i};return Ju.runKernel(ul,u,c)}}),vv={kernelName:Al,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,a]=t,{filterSize:s,strides:i,pad:o}=n;return{x:()=>wv(e,r,a,s,i,o)}}},xv={kernelName:pl,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n,s=ei(a,r.shape),i=Gs(pf(r.shape,s)[1]);return{x:()=>{const t=r.shape.slice();s.forEach((e=>{t[e]=1}));const n=gp(e,t);return Sh(Ih(n,Am(r.shape,"float32")),i)}}}},Bv={kernelName:fl,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:a}=r,[s,i]=t,o=fv(e,i,s,ei(a,s.shape));return{x:()=>o.x()}}},kv={kernelName:ml,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Ih(e,xh(Pf(n,r),"float32")),b:()=>Ih(e,xh(Uf(n,r),"float32"))}}},Cv={kernelName:gl,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,s=a.map((e=>e[0]));return{x:()=>Bp(e,s,r.shape)}}},Nv={kernelName:yl,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=qh(n.shape,r.shape);return{a:()=>{const t=jh(n.shape,a);return t.length>0?gp(xf(e,t),n.shape):e},b:()=>{const t=Ih(e,Kf(Tf(Sh(n,r)))),s=jh(r.shape,a);return s.length>0?gp(xf(t,s),r.shape):t}}}},Sv={kernelName:wl,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=qh(n.shape,r.shape);return{a:()=>{const t=Ih(e,xh(r,"float32")),s=jh(n.shape,a);return s.length>0?gp(xf(t,s),n.shape):t},b:()=>{const t=Ih(e,xh(n,"float32")),s=jh(r.shape,a);return s.length>0?gp(xf(t,s),r.shape):t}}}},Iv={kernelName:Il,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return Dg(e,r).map((e=>()=>e))}},Ev={kernelName:El,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:a}=n,s=a.map((e=>e[0]));return{x:()=>Bp(e,s,r.shape)}}},Fv={kernelName:Fl,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,a]=t,s=n,i=r,o=qh(s.shape,i.shape);return{a:()=>{const t=xh(i,"float32");let n=Ih(e,Ih(t,zh(s,Vh(t,Uh(1)))));const r=jh(s.shape,o);return r.length>0&&(n=xf(n,r)),gp(n,s.shape)},b:()=>{const t=Uf(s,0),n=af(t,Vf(s),Th(s));let r=Ih(e,Ih(a,n));const l=jh(i.shape,o);return l.length>0&&(r=xf(r,l)),gp(r,i.shape)}}}},Tv={kernelName:Tl,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,a=Uf(n,0);return{x:()=>af(a,e,Ih(e,r)),alpha:()=>{let t=af(a,Th(e),Ih(e,n));const s=jh(r.shape,e.shape);return s.length>0&&(t=xf(t,s)),gp(t,r.shape)}}}};const Lv={kernelName:Ll,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:a}=n;let s=[];return s=null==a?r.shape.map(((e,t)=>t)):"number"==typeof a?[a]:a,{x:()=>function(e,t,n){const r=e.shape.length,a=r-n.length,s=gf(n,r);let i=e;null!=s&&(i=Hg(e,s));const o=i.shape.slice(),l=o.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);o.push(l);let A=function(e,t,n){const r=e.shape.slice();r[n]=1;const a=gp(t,r),s=Xp(e,n,!0,!1),i=Xp(e,n,!0,!0),o=Ih(s,i);return Ih(a,o)}(i.reshape(o),t,a);if(A=A.reshape(i.shape),null!=s){const e=yf(s);A=Hg(A,e)}return A}(r,e,s)}}},Uv={kernelName:Co,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=qh(n.shape,r.shape);return{a:()=>{const t=Sh(e,xh(r,"float32")),s=jh(n.shape,a);return s.length>0?gp(xf(t,s),n.shape):t},b:()=>{let t=Ih(e,xh(n,"float32"));const s=jh(r.shape,a);s.length>0&&(t=gp(xf(t,s),r.shape));const i=Fh(r);return Kf(Sh(t,xh(i,"float32")))}}}},_v={kernelName:Ol,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,Kf(Fh(n)))}}},Rv={kernelName:Wl,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=Ih(Pf(n,6),wg(n));return{x:()=>Ih(e,xh(r,"float32"))}}},Dv={kernelName:$l,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(e,xh(wg(n),"float32"))}}},Qv={kernelName:Ml,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>gp(e,n.shape)}}},Ov={kernelName:jl,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Kf(Sh(e,Ih(zh(n,1.5),2)))}}},$v={kernelName:Zl,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Uf(n,Uh(0)),r=Uh(kb),a=Uh(Cb),s=Ih(e,a),i=Ih(Ih(e,r),Nf(xh(n,"float32")));return af(t,s,i)}}}},Mv={kernelName:aA,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(e,Ih(n,Vh(Uh(1),n)))}}},Pv={kernelName:tA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(jp(xh(n,"float32")),e)}}},Hv={kernelName:nA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(qp(xh(n,"float32")),e)}}},zv={kernelName:eA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:a,size:s}=n,i=r.shape,[o,l]=Pd(r,a,s),A=[];for(let t=0;t<e.rank;t++)A.push([o[t],i[t]-o[t]-l[t]]);return{x:()=>vm(e,A)}}},Vv={kernelName:uA,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:a}=n,s=Ih(e,r);return{logits:()=>Vh(s,Ih(xf(s,[a],!0),r))}}},Wv={kernelName:sA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(e,xp(n))}}},Kv={kernelName:lA,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:a}=n;return{x:()=>Np(e,r,a)}}},Gv={kernelName:AA,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>wp(e,r)}}},jv={kernelName:iA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,Ih(Eh(xh(n,"float32")),2))}}},qv={kernelName:gA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(e,Ih(xh(n,"float32"),2))}}},Xv={kernelName:mA,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=Uh(2);return{a:()=>Ih(e,Ih(a,Vh(n,r))),b:()=>Ih(e,Ih(a,Vh(r,n)))}}},Jv={kernelName:BA,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,a=qh(n.shape,r.shape);return{a:()=>{let t=e;const r=jh(n.shape,a);return r.length>0&&(t=xf(t,r)),gp(t,n.shape)},b:()=>{let t=e;const n=jh(r.shape,a);return n.length>0&&(t=xf(t,n)),gp(Kf(t),r.shape)}}}},Yv={kernelName:oA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,a=r.shape.slice(),{axis:s}=n;ei(s,r.shape).forEach((e=>{a[e]=1}));const i=gp(e,a),o=Ih(i,Am(r.shape,"float32"));return{x:()=>o}}},Zv={kernelName:kA,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Sh(e,Fh(jp(n)))}}},ex={kernelName:CA,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ih(Vh(Uh(1),Fh(n)),e)}}},tx={kernelName:NA,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:a}=n;return{x:()=>{let t=Th(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=Ch(t,Bp(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)t=Ch(t,Bp(e,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)t=Ch(t,Bp(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<a[0];++n)for(let s=0;s<a[1];++s)for(let i=0;i<a[2];++i)for(let o=0;o<a[3];++o)t=Ch(t,Bp(e,[n*r.shape[0],s*r.shape[1],i*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},nx={kernelName:LA,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=Xh(t,Th(t)),r=Lf(e,n);let a=_f(t,Uh(0,"int32"));const s=r.rank-a.rank;for(let e=0;e<s;++e)a=Sf(a,e+1);a=Jf(a,Am(r.shape,"bool"));const i=Th(r);return af(a,r,i)}(e,n)}}},rx=[pw,fw,mw,gw,yw,bw,ww,vw,xw,Bw,kw,Cw,Sw,Ew,Fw,Tw,Lw,Uw,_w,Rw,Dw,Qw,$w,Ow,Pw,Hw,zw,Vw,Ww,Kw,Uv,Gw,jw,qw,Xw,Jw,Zw,Yw,ev,tv,av,sv,iv,ov,lv,Av,uv,cv,hv,pv,mv,mv,gv,bv,vv,xv,Bv,kv,Cv,Nv,Sv,{kernelName:vl,gradFunc:e=>({x:()=>Kf(e)})},{kernelName:Sl,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>lm(n.shape,"float32")}}},{kernelName:Nl,gradFunc:e=>({x:()=>Th(e)})},Iv,Ev,Ev,Fv,Tv,Lv,_v,Rv,Dv,Qv,{kernelName:zl,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>Ju.runKernel(Vl,a,n)}}},{kernelName:Pl,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,a={dy:e,images:r};return{images:()=>Ju.runKernel(Hl,a,n)}}},{kernelName:Kl,gradFunc:(e,t,n)=>{const{dims:r}=n,a=ei(r,e.shape);return{x:()=>jm(e,a)}}},{kernelName:Gl,gradFunc:e=>({x:()=>Th(e)})},Ov,{kernelName:Yl,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>xh(Th(n),"float32"),t:()=>Ih(e,xh(n,e.dtype)),e:()=>Ih(e,xh(Yf(n),e.dtype))}}},$v,Mv,{kernelName:rA,gradFunc:e=>({x:()=>Th(e)})},Pv,Hv,zv,Vv,Wv,Kv,Kv,Gv,Gv,jv,Xv,qv,{kernelName:_A,gradFunc:e=>({x:()=>Th(e)})},Jv,Yv,Zv,ex,tx,{kernelName:EA,gradFunc:(e,t,n)=>{const r=n,{perm:a}=r,s=yf(a);return{x:()=>Hg(e,s)}}},{kernelName:TA,gradFunc:(e,t,n)=>{const r=n,{axis:a}=r;return{value:()=>bg(e,a)}}},nx,{kernelName:UA,gradFunc:e=>({x:()=>Th(e)})}];for(const e of rx)jA(e);Tu().prototype.abs=function(){return this.throwIfDisposed(),Kh(this)},Tu().prototype.acos=function(){return this.throwIfDisposed(),Vd(this)},Tu().prototype.acosh=function(){return this.throwIfDisposed(),Wd(this)},Tu().prototype.add=function(e){return this.throwIfDisposed(),Ch(this,e)},Tu().prototype.all=function(e,t){return this.throwIfDisposed(),Gd(this,e,t)},Tu().prototype.any=function(e,t){return this.throwIfDisposed(),jd(this,e,t)},Tu().prototype.argMax=function(e){return this.throwIfDisposed(),qd(this,e)},Tu().prototype.argMin=function(e){return this.throwIfDisposed(),Xd(this,e)},Tu().prototype.asScalar=function(){return this.throwIfDisposed(),Vs(1===this.size,(()=>"The array must have only 1 element.")),gp(this,[])},Tu().prototype.asType=function(e){return this.throwIfDisposed(),xh(this,e)},Tu().prototype.as1D=function(){return this.throwIfDisposed(),gp(this,[this.size])},Tu().prototype.as2D=function(e,t){return this.throwIfDisposed(),gp(this,[e,t])},Tu().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),gp(this,[e,t,n])},Tu().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),gp(this,[e,t,n,r])},Tu().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),gp(this,[e,t,n,r,a])},Tu().prototype.asin=function(){return this.throwIfDisposed(),Jd(this)},Tu().prototype.asinh=function(){return this.throwIfDisposed(),Yd(this)},Tu().prototype.atan=function(){return this.throwIfDisposed(),Zd(this)},Tu().prototype.atan2=function(e){return this.throwIfDisposed(),ep(this,e)},Tu().prototype.atanh=function(){return this.throwIfDisposed(),tp(this)},Tu().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),yp(this,e,t,n,r)},Tu().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Np(this,e,t)},Tu().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Sp(this,e,t,n,r,a)},Tu().prototype.broadcastTo=function(e){return this.throwIfDisposed(),_p(this,e)},Tu().prototype.cast=function(e){return this.throwIfDisposed(),xh(this,e)},Tu().prototype.ceil=function(){return this.throwIfDisposed(),Rp(this)},Tu().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Dp(this,e,t)},Tu().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Fu&&(e=[e]),wp([this,...e],t)},Tu().prototype.conv1d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Hp(this,e,t,n,r,a,s)},Tu().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Vp(this,e,t,n,r,a)},Tu().prototype.conv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),Pp(this,e,t,n,r,a,s)},Tu().prototype.cos=function(){return this.throwIfDisposed(),jp(this)},Tu().prototype.cosh=function(){return this.throwIfDisposed(),qp(this)},Tu().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Xp(this,e,t,n)},Tu().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Jp(this,e,t,n)},Tu().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Zp(this,e,t)},Tu().prototype.depthwiseConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),ef(this,e,t,n,r,a,s)},Tu().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),nf(this,e,t,n,r,a)},Tu().prototype.divNoNan=function(e){return this.throwIfDisposed(),sf(this,e)},Tu().prototype.div=function(e){return this.throwIfDisposed(),Sh(this,e)},Tu().prototype.dot=function(e){return this.throwIfDisposed(),of(this,e)},Tu().prototype.elu=function(){return this.throwIfDisposed(),Af(this)},Tu().prototype.equal=function(e){return this.throwIfDisposed(),rf(this,e)},Tu().prototype.erf=function(){return this.throwIfDisposed(),cf(this)},Tu().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Cf(this,e,t)},Tu().prototype.exp=function(){return this.throwIfDisposed(),Nf(this)},Tu().prototype.expandDims=function(e){return this.throwIfDisposed(),Sf(this,e)},Tu().prototype.expm1=function(){return this.throwIfDisposed(),If(this)},Tu().prototype.fft=function(){return this.throwIfDisposed(),hg(this)},Tu().prototype.flatten=function(){return this.throwIfDisposed(),gp(this,[this.size])},Tu().prototype.floor=function(){return this.throwIfDisposed(),Tf(this)},Tu().prototype.floorDiv=function(e){return this.throwIfDisposed(),Nh(this,e)},Tu().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Lf(this,e,t,n)},Tu().prototype.greaterEqual=function(e){return this.throwIfDisposed(),_f(this,e)},Tu().prototype.greater=function(e){return this.throwIfDisposed(),Uf(this,e)},Tu().prototype.ifft=function(){return this.throwIfDisposed(),dg(this)},Tu().prototype.irfft=function(){return this.throwIfDisposed(),pg(this)},Tu().prototype.isFinite=function(){return this.throwIfDisposed(),Df(this)},Tu().prototype.isInf=function(){return this.throwIfDisposed(),Qf(this)},Tu().prototype.isNaN=function(){return this.throwIfDisposed(),Of(this)},Tu().prototype.leakyRelu=function(e){return this.throwIfDisposed(),$f(this,e)},Tu().prototype.lessEqual=function(e){return this.throwIfDisposed(),Pf(this,e)},Tu().prototype.less=function(e){return this.throwIfDisposed(),Mf(this,e)},Tu().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),zf(this,e,t,n,r)},Tu().prototype.logSigmoid=function(){return this.throwIfDisposed(),jf(this)},Tu().prototype.logSoftmax=function(e){return this.throwIfDisposed(),qf(this,e)},Tu().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Xf(this,e,t)},Tu().prototype.log=function(){return this.throwIfDisposed(),Vf(this)},Tu().prototype.log1p=function(){return this.throwIfDisposed(),Wf(this)},Tu().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Jf(this,e)},Tu().prototype.logicalNot=function(){return this.throwIfDisposed(),Yf(this)},Tu().prototype.logicalOr=function(e){return this.throwIfDisposed(),Zf(this,e)},Tu().prototype.logicalXor=function(e){return this.throwIfDisposed(),em(this,e)},Tu().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),vp(this,e,t,n)},Tu().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),am(this,e,t,n,r)},Tu().prototype.max=function(e,t){return this.throwIfDisposed(),wf(this,e,t)},Tu().prototype.maximum=function(e){return this.throwIfDisposed(),Xh(this,e)},Tu().prototype.mean=function(e,t){return this.throwIfDisposed(),om(this,e,t)},Tu().prototype.min=function(e,t){return this.throwIfDisposed(),vf(this,e,t)},Tu().prototype.minimum=function(e){return this.throwIfDisposed(),cm(this,e)},Tu().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),hm(this,e,t)},Tu().prototype.mod=function(e){return this.throwIfDisposed(),dm(this,e)},Tu().prototype.mul=function(e){return this.throwIfDisposed(),Ih(this,e)},Tu().prototype.neg=function(){return this.throwIfDisposed(),Kf(this)},Tu().prototype.norm=function(e,t,n){return this.throwIfDisposed(),kf(this,e,t,n)},Tu().prototype.notEqual=function(e){return this.throwIfDisposed(),gm(this,e)},Tu().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),ym(this,e,t,n)},Tu().prototype.onesLike=function(){return this.throwIfDisposed(),bm(this)},Tu().prototype.pad=function(e,t){return this.throwIfDisposed(),vm(this,e,t)},Tu().prototype.pool=function(e,t,n,r,a,s){return this.throwIfDisposed(),Sm(this,e,t,n,r,a,s)},Tu().prototype.pow=function(e){return this.throwIfDisposed(),zh(this,e)},Tu().prototype.prelu=function(e){return this.throwIfDisposed(),Im(this,e)},Tu().prototype.prod=function(e,t){return this.throwIfDisposed(),Em(this,e,t)},Tu().prototype.reciprocal=function(){return this.throwIfDisposed(),Wm(this)},Tu().prototype.relu=function(){return this.throwIfDisposed(),Km(this)},Tu().prototype.relu6=function(){return this.throwIfDisposed(),Gm(this)},Tu().prototype.reshapeAs=function(e){return this.throwIfDisposed(),gp(this,e.shape)},Tu().prototype.reshape=function(e){return this.throwIfDisposed(),gp(this,e)},Tu().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Ey(this,e,t,n)},Tu().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Fy(this,e,t,n)},Tu().prototype.reverse=function(e){return this.throwIfDisposed(),jm(this,e)},Tu().prototype.rfft=function(){return this.throwIfDisposed(),mg(this)},Tu().prototype.round=function(){return this.throwIfDisposed(),Zm(this)},Tu().prototype.rsqrt=function(){return this.throwIfDisposed(),eg(this)},Tu().prototype.selu=function(){return this.throwIfDisposed(),tg(this)},Tu().prototype.separableConv2d=function(e,t,n,r,a,s){return this.throwIfDisposed(),ng(this,e,t,n,r,a,s)},Tu().prototype.sigmoid=function(){return this.throwIfDisposed(),xp(this)},Tu().prototype.sign=function(){return this.throwIfDisposed(),ag(this)},Tu().prototype.sin=function(){return this.throwIfDisposed(),sg(this)},Tu().prototype.sinh=function(){return this.throwIfDisposed(),ig(this)},Tu().prototype.slice=function(e,t){return this.throwIfDisposed(),Bp(this,e,t)},Tu().prototype.softmax=function(e){return this.throwIfDisposed(),cg(this,e)},Tu().prototype.softplus=function(){return this.throwIfDisposed(),Gf(this)},Tu().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Nm(this,e,t)},Tu().prototype.split=function(e,t){return this.throwIfDisposed(),fg(this,e,t)},Tu().prototype.sqrt=function(){return this.throwIfDisposed(),Eh(this)},Tu().prototype.square=function(){return this.throwIfDisposed(),Fh(this)},Tu().prototype.squaredDifference=function(e){return this.throwIfDisposed(),gg(this,e)},Tu().prototype.squeeze=function(e){return this.throwIfDisposed(),yg(this,e)},Tu().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Fu?[this,e]:[this,...e];return bg(n,t)},Tu().prototype.step=function(e){return this.throwIfDisposed(),wg(this,e)},Tu().prototype.stridedSlice=function(e,t,n,r,a,s,i,o){return this.throwIfDisposed(),vg(this,e,t,n,r,a,s,i,o)},Tu().prototype.sub=function(e){return this.throwIfDisposed(),Vh(this,e)},Tu().prototype.sum=function(e,t){return this.throwIfDisposed(),xf(this,e,t)},Tu().prototype.tan=function(){return this.throwIfDisposed(),xg(this)},Tu().prototype.tanh=function(){return this.throwIfDisposed(),kp(this)},Tu().prototype.tile=function(e){return this.throwIfDisposed(),Ef(this,e)},Tu().prototype.toBool=function(){return this.throwIfDisposed(),xh(this,"bool")},Tu().prototype.toFloat=function(){return this.throwIfDisposed(),xh(this,"float32")},Tu().prototype.toInt=function(){return this.throwIfDisposed(),xh(this,"int32")},Tu().prototype.topk=function(e,t){return this.throwIfDisposed(),Lg(this,e,t)},Tu().prototype.transpose=function(e){return this.throwIfDisposed(),Hg(this,e)},Tu().prototype.unique=function(e){return this.throwIfDisposed(),_g(this,e)},Tu().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Rg(this,e,t)},Tu().prototype.unstack=function(e){return this.throwIfDisposed(),Dg(this,e)},Tu().prototype.where=function(e,t){return this.throwIfDisposed(),af(e,this,t)},Tu().prototype.zerosLike=function(){return this.throwIfDisposed(),Th(this)};class ax extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ax.prototype)}}class sx extends Error{constructor(e){super(e),Object.setPrototypeOf(this,sx.prototype)}}class ix extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ix.prototype)}}class ox extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ox.prototype)}}class lx extends Error{constructor(e){super(e),Object.setPrototypeOf(this,lx.prototype)}}Error;class Ax{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function ux(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function cx(e,t){if(!e)throw new lx(t)}function hx(e,t){let n=0;for(const r of e)r===t&&n++;return n}function dx(e){return 1===e.length?e[0]:e}function px(e){return Array.isArray(e)?e:[e]}function fx(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function mx(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let gx={};function yx(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function bx(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((e=>bx(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?bx(t):e[n]=t.value)}}}function wx(e,t={},n={},r="object",a=!1){if("string"==typeof e){const a=e;let s;if(a in n)s=n[a];else if(a in gx)s=gx[a];else if(s=t[a],null==s)throw new ix(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}{const s=e;if(null==s.className||null==s.config)throw new ix(`${r}: Improper config format: ${JSON.stringify(s)}.\n'className' and 'config' must set.`);const i=s.className;let o,l;if(i in n?[o,l]=n[i]:i in gx?[o,l]=gx.className:i in t&&([o,l]=t[i]),null==o)throw new ix(`Unknown ${r}: ${i}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const t of Object.keys(gx))e[t]=gx[t];for(const t of Object.keys(n))e[t]=n[t];s.config.customObjects=e;const t=Object.assign({},gx);for(const e of Object.keys(n))gx[e]=n[e];bx(s.config);const r=l(o,s.config,n,a);return gx=Object.assign({},t),r}{const e=Object.assign({},gx);for(const e of Object.keys(n))gx[e]=n[e];const t=new o(s.config);return gx=Object.assign({},e),t}}}function vx(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function xx(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function Bx(e){if(null==e)throw new ix(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function kx(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new ix(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function Cx(e,t,n=0,r=1/0){return cx(n>=0),cx(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function Nx(e,t){Array.isArray(e)?(Vs(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>Nx(e,`element ${n+1} of ${t}`)))):Vs(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${Sx(e)}.`))}function Sx(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>Sx(e))).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function Ix(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let Ex=0;function Fx(){return Ex++}const Tx={};function Lx(e=""){return e in Tx||(Tx[e]=0),Tx[e]+=1,e+Tx[e].toString()}const Ux=["channelsFirst","channelsLast"],_x=["nearest","bilinear"],Rx=["valid","same","causal"],Dx=["max","avg"],Qx=["sum","mul","concat","ave"],Ox=new Map;function $x(e){kx(Ux,"DataFormat",e)}function Mx(e){kx(Rx,"PaddingMode",e)}function Px(e){kx(Dx,"PoolMode",e)}const Hx=[];function zx(e,t){Hx.push(e);try{const e=t();return Hx.pop(),e}catch(e){throw Hx.pop(),e}}function Vx(e){if(!Gx(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Hx.length?"":Hx.join("/")+"/")+e}function Wx(e){if(!Gx(e))throw new Error("Not a valid tensor name: '"+e+"'");Ox.has(e)||Ox.set(e,0);const t=Ox.get(e);if(Ox.set(e,Ox.get(e)+1),t>0){const n=`${e}_${t}`;return Ox.set(n,1),n}return e}const Kx=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Gx(e){return!!e.match(Kx)}function jx(e){return e===parseInt(e.toString(),10)}function qx(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function Xx(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function Jx(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function Yx(e,t){if(t<e)throw new ix(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}let Zx;function eB(){return null==Zx&&(Zx=wc().epsilon()),Zx}function tB(e,t){return xh(e,t)}function nB(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),gp(e,n)}function rB(e,t,n){return mc((()=>{switch(e.rank){case 1:return og(e,t,n);case 2:return lg(e,[t,0],[n,e.shape[1]]);case 3:return Ag(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return ug(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Bp(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Bp(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new ix(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function aB(e,t,n){return mc((()=>{switch(e.rank){case 1:return og(e,t,n);case 2:return lg(e,[0,t],[e.shape[0],n]);case 3:return Ag(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return ug(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new ix(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function sB(e,t,n,r){return mc((()=>{switch(e.rank){case 1:return og(e,t,n);case 2:switch(r){case 1:return rB(e,t,n);case 2:return aB(e,t,n);default:throw new ix(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return rB(e,t,n);case 2:return Ag(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return aB(e,t,n);default:throw new ix(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return rB(e,t,n);case 2:return ug(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return ug(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return aB(e,t,n);default:throw new ix(`The axis is not within the rank of the tensor ${r}`)}default:throw new ix(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function iB(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),wp(e,t)}function oB(e,t){switch(e.rank){case 1:return Qp([e,t]);case 2:return Op([e,t],0);case 3:return $p([e,t],0);case 4:return Mp([e,t],0);default:throw new ix(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function lB(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new ix(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return Ef(e,t)}function AB(e,t=0,n=1,r,a){return $m(e,t,n,r,a)}function uB(e,t,n,r){if(e.rank<2||t.rank<2)throw new ox(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new ox(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`);if(2===e.rank&&2===t.rank)return iy({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?dB(e.rank,r,"channelsLast"):null,activation:n});{const a=e.shape.slice(),s=a.pop();e=gp(e,[-1,s]);const i=t.shape.slice(),o=i.pop(),l=i.pop(),A=[...i,o],u=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=gp(Hg(t,u),[l,-1]);const c=[...a,...A];return gp(iy({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?dB(e.rank,r,"channelsLast"):null,activation:n}),c)}}function cB(e,t,n){return mc((()=>(t=Array.isArray(t)?Bg(t,"int32"):xh(t,"int32"),Lf(e,t,n))))}function hB(e){return Ih(e,e)}function dB(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new ix(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?gp(t,[1,r[0],1,1,1]):gp(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?gp(t,[1,1,1,1,r[0]]):gp(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?gp(t,[1,r[0],1,1]):gp(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?gp(t,[1,1,1,r[0]]):gp(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?gp(t,[1,r[0],1]):gp(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?gp(t,[1,1,r[0]]):gp(t,[1].concat(r))}else if(e<3)return t;throw new ix(`Unsupported input rank by biasAdd: ${t.rank}`)}function pB(e,t,n){return mc((()=>(null==n&&(n="channelsLast"),$x(n),Ch(e,dB(e.rank,t,n)))))}function fB(e,t,n,r){return mc((()=>Gg(e,t,n,r)))}function mB(e,t,n=!1){return n?e():t()}const gB=["fanIn","fanOut","fanAvg"],yB=["normal","uniform","truncatedNormal"];class bB extends Dh{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class wB extends bB{apply(e,t){return lm(e,t)}}wB.className="Zeros",Oh(wB);class vB extends bB{apply(e,t){return Am(e,t)}}vB.className="Ones",Oh(vB);class xB extends bB{constructor(e){if(super(),"object"!=typeof e)throw new ix(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new ix(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return mc((()=>Ih(Uh(this.value),Am(e,t))))}getConfig(){return{value:this.value}}}xB.className="Constant",Oh(xB);class BB extends bB{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Pm(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}BB.className="RandomUniform",Oh(BB);class kB extends bB{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new ox(`randomNormal does not support dType ${t}.`);return AB(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}kB.className="RandomNormal",Oh(kB);class CB extends bB{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new ox(`truncatedNormal does not support dType ${t}.`);return Ug(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}CB.className="TruncatedNormal",Oh(CB);class NB extends bB{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return mc((()=>{if(2!==e.length||e[0]!==e[1])throw new ix("Identity matrix initializer can only be used for 2D square matrices.");return Ih(this.gain,Ff(e[0]))}))}getConfig(){return{gain:this.gain}}}NB.className="Identity",Oh(NB);class SB extends bB{constructor(e){if(super(),e.scale<0)throw new ix(`scale must be a positive float. Got: ${e.scale}`);var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,kx(gB,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){kx(yB,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e,t="channelsLast"){let n,r;if($x(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=qx(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){const t=qx(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{const t=qx(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),r=n[0],a=n[1];let s=this.scale;if("fanIn"===this.mode?s/=Math.max(1,r):"fanOut"===this.mode?s/=Math.max(1,a):s/=Math.max(1,(r+a)/2),"normal"===this.distribution){const n=Math.sqrt(s);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new ox(`${this.getClassName()} does not support dType ${t}.`);return Ug(e,0,n,t,this.seed)}{const n=Math.sqrt(3*s);return Pm(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}SB.className="VarianceScaling",Oh(SB);class IB extends SB{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return SB.className}}IB.className="GlorotUniform",Oh(IB);class EB extends SB{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return SB.className}}EB.className="GlorotNormal",Oh(EB);class FB extends SB{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return SB.className}}FB.className="HeNormal",Oh(FB);class TB extends SB{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return SB.className}}TB.className="HeUniform",Oh(TB);class LB extends SB{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return SB.className}}LB.className="LeCunNormal",Oh(LB);class UB extends SB{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return SB.className}}UB.className="LeCunUniform",Oh(UB);class _B extends bB{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return mc((()=>{if(e.length<2)throw new ox("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError(`Unsupported data type ${t}.`);const n=Gs(e.slice(0,-1)),r=e[e.length-1],a=n*r;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const s=AB([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),i=tb.qr(s,!1);let o=i[0];const l=i[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return o=Ih(o,l.sign()),n<r&&(o=o.transpose()),Ih(Uh(this.gain),o.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}_B.className="Orthogonal",Oh(_B);const RB={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function DB(e,t={}){return wx(e,Qh.getMap().classNameMap,t,"initializer")}function QB(e){return yx(e)}function OB(e){if("string"==typeof e){const t=e in RB?RB[e]:e;if("GlorotNormal"===t)return new EB;if("GlorotUniform"===t)return new IB;if("HeNormal"===t)return new FB;if("HeUniform"===t)return new TB;if("LeCunNormal"===t)return new LB;if("LeCunUniform"===t)return new UB;{const e={};return e.className=t,e.config={},DB(e)}}return e instanceof bB?e:DB(e)}function $B(e){return Array.isArray(e)&&Array.isArray(e[0])}function MB(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function PB(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new ix(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function HB(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new ix(`Expected exactly 1 Shape; got ${e.length}`)}return e}function zB(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const VB="Variable";class WB{constructor(e,t="float32",n=VB,r=!0,a=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=Fx(),n=null==n?VB:n,this.originalName=Vx(n),this.name=Wx(this.originalName),this.trainable_=r,this.constraint=a,this.val=Og(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function KB(e){return e.map((e=>e.read()))}function GB(e){e.forEach((e=>{e[0].write(e[1])}))}class jB{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class qB{constructor(e,t,n,r,a,s,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=i,this.id=Fx(),null!=s&&(this.originalName=Vx(s),this.name=Wx(this.originalName)),this.rank=t.length}}let XB=0;class JB{constructor(e,t){this.callArgs=t,this.id=XB++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const t of e.inboundLayers)null!=t&&t.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let YB=0;class ZB extends Dh{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=YB++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=fx(e)+"_"+Lx(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new sx(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new ix(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return dx(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return dx(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new ax(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new ax(`Layer ${this.name} is not connected, no input to return.`);return dx(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new ax(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new ax(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return dx(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=px(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=px(this.inputSpec);if(t.length!==n.length)throw new ix(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let e=0;e<t.length;e++){const r=t[e],a=n[e];if(null==a)continue;const s=r.rank;if(null!=a.ndim&&s!==a.ndim)throw new ix(`Input ${e} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${s}`);if(null!=a.maxNDim&&s>a.maxNDim)throw new ix(`Input ${e} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${s}`);if(null!=a.minNDim&&s<a.minNDim)throw new ix(`Input ${e} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${s}.`);if(null!=a.dtype&&r.dtype!==a.dtype)throw new ix(`Input ${e} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${r.dtype}.`);if(a.axes){const t=r.shape;for(const n in a.axes){const r=Number(n),s=a.axes[n],i=r>=0?t[r]:t[t.length+r];if(null!=s&&-1===[s,null].indexOf(i))throw new ix(`Input ${e} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${s} but got shape ${t}.`)}}if(null!=a.shape)for(let t=0;t<a.shape.length;++t){const n=a.shape[t],s=r.shape[t];if(null!=n&&null!=s&&n!==s)throw new ix(`Input ${e} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=px(e),r=function(e){let t=!0;for(const n of px(e))if(!(n instanceof qB)){t=!1;break}return t}(e),a=function(e){let t=!0;for(const n of px(e))if(n instanceof qB){t=!1;break}return t}(e);if(r===a)throw new ix("Arguments to apply() must be all SymbolicTensors or all Tensors");return zx(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of px(e))t.push(n.shape);this.build(dx(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const a=px(r),s=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),s.push(e);if(r=dx(s),null!=this.activityRegularizer)throw new ox("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=px(e);const t=[];for(const n of e)t.push(n.shape);return dx(t)}(e),r=this.computeOutputShape(n);let a;const s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),a=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new qB(s,n,this,px(e),t,this.name,r))):new qB(s,r,this,px(e),t,this.name),this.addInboundNode(e,a,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new ox("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new ax(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new ax(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new sx(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return zB(this.weights)}build(e){this.built=!0}getWeights(e=!1){return KB(e?this.trainableWeights:this.weights)}setWeights(e){mc((()=>{const t=this.weights;if(t.length!==e.length)throw new ix(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=KB(t);for(let a=0;a<r.length;++a){const s=r[a],i=t[a],o=e[a];if(!js(s.shape,o.shape))throw new ix(`Layer weight shape ${s.shape} not compatible with provided weight shape ${o.shape}`);n.push([i,o])}GB(n)}))}addWeight(e,t,n,r,a,s,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new ix(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=o?o():OB("zeros"));const l=r.apply(t,n),A=new WB(l,n,e,s,i);return l.dispose(),null!=a&&this.addLoss((()=>a.apply(A.read()))),null==s&&(s=!0),s?this._trainableWeights.push(A):this._nonTrainableWeights.push(A),A}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=px(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),a=px(t),s=px(r);if(a.length!==s.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let e=0;e<a.length;e++)a[e].kerasMask=s[e]}addInboundNode(e,t,n,r,a,s,i=null){const o=px(e);t=px(t),n=px(n),r=px(r),a=MB(a),s=MB(s);const l=[],A=[],u=[];for(const e of o)l.push(e.sourceLayer),A.push(e.nodeIndex),u.push(e.tensorIndex);new JB({outboundLayer:this,inboundLayers:l,nodeIndices:A,tensorIndices:u,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:s},i);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function ek(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=ek(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class tk extends ZB{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:Lx("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new ix("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new ix("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new ix("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new qB(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new JB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new ix(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}tk.className="InputLayer",Oh(tk);class nk{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof nk)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new ix(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return xh(t,e.dtype)}catch(n){throw new ix(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof qB){if(null==this.id2Value[e.id])throw new ix(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new ix(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof qB){if(null==this.id2Value[e.id])throw new ix(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new ix(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&gc(this.id2Mask)}}const rk=new Ax,ak=new Ax;function sk(e,t,n,r){const a=null!=n&&n.training,s=Array.isArray(e),i=s?e:[e],o=i.map((e=>e.name)),l=[],A=t.names();for(const e of o)-1!==A.indexOf(e)?l.push(t.getValue(e)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=o.join(",")+"|"+t.names().sort().join(",");let c,h=rk.get(u);if(null==h){const e=function(e,t){Vs(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const a=ok(e[0],t);n=a.sorted,r=a.recipientMap}else{const a=new Set;for(const s of e){const{sorted:e,recipientMap:i}=ok(s,t);for(const t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(const e in i)null==r[e]&&(r[e]=new Set),i[e].forEach((t=>r[e].add(t)))}}return{sorted:n,recipientCounts:ik(r)}}(i,t);h=e.sorted,c=e.recipientCounts,rk.put(u,h),ak.put(u,c)}c={},a||Object.assign(c,ak.get(u));const d=new nk(t);for(let e=0;e<h.length;++e){if(null!=r){const e=fc().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const s=h[e],i=s.sourceLayer;if(i instanceof tk)continue;const A=[],u=[],p=[];let f=!1;for(const e of s.inputs){const n=d.getValue(e),r=d.getMask(e);A.push(n),u.push(r),null!=r&&(f=!0),a||(c[e.name]--,0!==c[e.name]||t.hasKey(e)||-1!==o.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||p.push(n))}f&&((n=n||{}).mask=u[0]);const m=px(i.apply(A,n));let g=null;i.supportsMasking&&(g=i.computeMask(A,u));const y=lk(s),b=Array.isArray(y)?y:[y];for(let e=0;e<b.length;++e){d.hasKey(b[e])||d.add(b[e],m[e],Array.isArray(g)?g[0]:g);const t=o.indexOf(b[e].name);-1!==t&&(l[t]=m[e])}a||gc(p)}return d.disposeMasks(),s?l:l[0]}function ik(e){const t={};for(const n in e)t[n]=e[n].size;return t}function ok(e,t){const n=new Set,r=[],a={};for(const e of t.names())n.add(e);const s=[],i=[];for(s.push(e);s.length>0;){const e=s[s.length-1];if(n.has(e.name)){s.pop();continue}const t=i[i.length-1]===s.length-1;if(0===e.inputs.length||t)s.pop(),r.push(e),n.add(e.name),t&&i.pop();else{i.push(s.length-1);for(const t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||s.push(t)}}return{sorted:r,recipientMap:a}}function lk(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function Ak(e,t){return mc((()=>Eh(xf(Ih(e,e),t,!0))))}ki().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=rk&&rk.setMaxEntries(e),null!=ak&&ak.setMaxEntries(e)}));class uk extends Dh{getConfig(){return{}}}class ck extends uk{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return mc((()=>{const t=Ak(e,this.axis),n=Dp(t,0,this.maxValue);return Ih(e,Sh(n,Ch(eB(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}ck.className="MaxNorm",Oh(ck);class hk extends uk{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return mc((()=>Sh(e,Ch(eB(),Ak(e,this.axis)))))}getConfig(){return{axis:this.axis}}}hk.className="UnitNorm",Oh(hk);class dk extends uk{apply(e){return Km(e)}}dk.className="NonNeg",Oh(dk);class pk extends uk{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return mc((()=>{const t=Ak(e,this.axis),n=Ch(Ih(this.rate,Dp(t,this.minValue,this.maxValue)),Ih(1-this.rate,t));return Ih(e,Sh(n,Ch(eB(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}pk.className="MinMaxNorm",Oh(pk);const fk={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function mk(e){return yx(e)}function gk(e,t={}){return wx(e,Qh.getMap().classNameMap,t,"constraint")}function yk(e){return null==e?null:"string"==typeof e?gk({className:e in fk?fk[e]:e,config:{}}):e instanceof uk?e:gk(e)}async function bk(e){if(null==e)return;const t=[],n=[],r=[];for(const a in e){const s=e[a];if("number"!=typeof s){const e=s;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){const a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];gc(r)}}function wk(e){if(null!=e)for(const t in e){const n=e[t];"number"!=typeof n&&n.dispose()}}var vk;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(vk||(vk={}));class xk{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Bk{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class kk extends xk{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const e in t){const r=t[e];if("number"==typeof r)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+r*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;const a=mc((()=>Ch(this.totals[e],Ih(r,n))));this.totals[e]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:mc((()=>{const n=Ih(Sh(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),yc(t[e])})))}}class Ck extends xk{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const e in t)null==this.history[e]&&(this.history[e]=[]),this.history[e].push(t[e])}async syncData(){const e=[],t=[],n=[];for(const r in this.history){const a=this.history[r];for(let s=0;s<a.length;++s)if("number"!=typeof a[s]){const i=a[s];e.push(i.data()),t.push(r),n.push(s)}}const r=await Promise.all(e);for(let e=0;e<r.length;++e)this.history[t[e]][n[e]].dispose(),this.history[t[e]][n[e]]=r[e][0]}}class Nk extends xk{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||ob,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");oi(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,a=null!=n?n():du();return(...s)=>{const i=null!=n?n():du();return i-a<t||(a=i,r=e(...s)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await bk(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await bk(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await bk(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await bk(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await bk(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):oi(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await bk(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await bk(e),await this.trainEnd(e))}}function Sk(e,t){return null==e&&(e={}),e instanceof xk?[e]:Array.isArray(e)&&e[0]instanceof xk?e:px(e).map((e=>new Nk(e,t)))}class Ik{constructor(){}static registerCallbackConstructor(e,t){Vs(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),Ik.checkForDuplicate(t),null==Ik.constructors[e]&&(Ik.constructors[e]=[]),Ik.constructors[e].push(t)}static checkForDuplicate(e){for(const t in Ik.constructors)Ik.constructors[+t].forEach((t=>{if(t===e)throw new ix("Duplicate callback constructor.")}))}static clear(){Ik.constructors={}}static createCallbacks(e){const t=[];for(const n in Ik.constructors){const r=+n;e>=r&&t.push(...Ik.constructors[r])}return t.map((e=>new e))}}function Ek(e,t,n,r,a,s,i,o,l){const A=new Ck,u=[new kk,...Ik.createCallbacks(t)];null!=e&&u.push(...e),u.push(A);const c=new Bk(u);return c.setParams({epochs:n,initialEpoch:r,samples:a,steps:s,batchSize:i,verbose:t,doValidation:o,metrics:l}),{callbackList:c,history:A}}function Fk(e,t={},n=!1){return wx(e,Qh.getMap().classNameMap,t,"layer",n)}function Tk(e,t){return mc((()=>{"float32"!==e.dtype&&(e=xh(e,"float32"));const n=xf(hB(e),t,!0),r=Ph(n.shape,eB()),a=Eh(Xh(n,r));return Sh(e,a)}))}function Lk(e,t){return mc((()=>om(hB(Vh(t,e)),-1)))}function Uk(e,t){return mc((()=>om(Kh(Vh(t,e)),-1)))}function _k(e,t){return mc((()=>{const n=Vh(e,t),r=Dp(Kh(e),eB(),Number.MAX_VALUE),a=Kh(Sh(n,r));return Ih(100,om(a,-1))}))}function Rk(e,t,n=!1){return mc((()=>{if(n)t=cg(t);else{const e=xf(t,t.shape.length-1,!0);t=Sh(t,e)}return t=Dp(t,eB(),1-eB()),Kf(xf(Ih(xh(e,"float32"),Vf(t)),t.shape.length-1))}))}function Dk(e,t,n=!1){return mc((()=>{const r=xh(Tf(function(e){const t=[qx(e.shape)];return gp(e,t)}(e)),"int32"),a=(t=Dp(t,eB(),1-eB())).shape;return Rk(gp(ym(r,a[a.length-1]),a),t,n)}))}function Qk(e,t){return mc((()=>{let n;return n=Dp(t,eB(),1-eB()),n=Vf(Sh(n,Vh(1,n))),om(function(e,t){if(!js(e.shape,t.shape))throw new ix(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return mc((()=>{const n=Km(t),r=Kf(Kh(t));return Ch(Vh(n,Ih(t,e)),Wf(Nf(r)))}))}(e,n),-1)}))}function Ok(e,t){return mc((()=>{const n=Tk(e,-1),r=Tk(t,-1),a=Ih(n,r);return Kf(xf(a,-1))}))}Ik.constructors={};const $k={meanSquaredError:Lk,meanAbsoluteError:Uk,meanAbsolutePercentageError:_k,meanSquaredLogarithmicError:function(e,t){return mc((()=>{const n=Dp(t,eB(),Number.MAX_VALUE),r=Vf(Ch(1,n)),a=Dp(e,eB(),Number.MAX_VALUE),s=Vf(Ch(1,a));return om(hB(Vh(r,s)),-1)}))},squaredHinge:function(e,t){return mc((()=>{const n=Xh(0,Vh(1,Ih(e,t)));return om(hB(n),-1)}))},hinge:function(e,t){return mc((()=>{const n=Xh(0,Vh(1,Ih(e,t)));return om(n,-1)}))},categoricalHinge:function(e,t){return mc((()=>{const n=xf(Ih(e,t),-1),r=wf(Ih(Vh(1,e),t),-1);return Xh(0,Ch(1,Vh(r,n)))}))},logcosh:function(e,t){return mc((()=>{const n=Math.log(2),r=Vh(t,e),a=Vh(Ch(r,Gf(Ih(-2,r))),n);return om(a,-1)}))},categoricalCrossentropy:Rk,sparseCategoricalCrossentropy:Dk,binaryCrossentropy:Qk,kullbackLeiblerDivergence:function(e,t){return mc((()=>{const n=Dp(e,eB(),1),r=Dp(t,eB(),1);return xf(Ih(e,Vf(Sh(n,r))),-1)}))},poisson:function(e,t){return mc((()=>{const n=Vf(Ch(eB(),t));return om(Vh(t,Ih(e,n)),-1)}))},cosineProximity:Ok};function Mk(e){if("string"==typeof e){if(e in $k)return $k[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ix(t)}return e}function Pk(e,t){return mc((()=>{const n=Ih(.5,bm(t)),r=tB(Uf(t,n),e.dtype);return om(rf(e,r),-1)}))}function Hk(e,t){return mc((()=>tB(rf(qd(e,-1),qd(t,-1)),"float32")))}function zk(e,t){return Qk(e,t)}function Vk(e,t){return e.rank===t.rank&&(e=yg(e,[e.rank-1])),(t=qd(t,-1)).dtype!==e.dtype&&(t=xh(t,e.dtype)),xh(rf(e,t),"float32")}const Wk=Rk,Kk=Dk,Gk={binaryAccuracy:Pk,categoricalAccuracy:Hk,precision:function(e,t){return mc((()=>{const n=function(e,t){return mc((()=>xh(xf(Jf(rf(e,1),rf(t,1))),"float32")))}(e,t),r=function(e,t){return mc((()=>xh(xf(Jf(rf(e,0),rf(t,1))),"float32")))}(e,t),a=Ch(n,r);return xh(af(Uf(a,0),Sh(n,a),0),"float32")}))},categoricalCrossentropy:Wk,sparseCategoricalCrossentropy:Kk,mse:Lk,MSE:Lk,mae:Uk,MAE:Uk,mape:_k,MAPE:_k,cosine:Ok};function jk(e){if("string"==typeof e&&e in Gk)return Gk[e];if("string"!=typeof e&&null!=e)return e;throw new ix(`Unknown metric ${e}`)}function qk(e){if(cx(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(const n of Object.keys($k))if($k[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(Gk))if(Gk[n]===e){t=n;break}return void 0!==t?t:e.name}}function Xk(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Jk(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function Jk(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!=typeof n)return!1;if(!Jk(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!Jk(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function Yk(e,t,n=console.log){let r="";for(let n=0;n<e.length;++n)n>0&&(r=r.slice(0,r.length-1)+" "),r+=e[n],r=r.slice(0,t[n]),r+=" ".repeat(t[n]-r.length);n(r)}function Zk(e,t,n){let r,a;try{a=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(e){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}Yk([`${e.name} (${e.getClassName()})`,a,r,e.countParams().toString()],t,n)}function eC(e,t,n,r){let a,s;try{s=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(e){s="multiple"}try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}const i=[];for(const t of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(t)))for(let e=0;e<t.inboundLayers.length;++e){const n=t.inboundLayers[e].name,r=t.nodeIndices[e],a=t.tensorIndices[e];i.push(`${n}[${r}][${a}]`)}const o=e.name,l=e.getClassName(),A=0===i.length?"":i[0];Yk([`${o} (${l})`,s,a,e.countParams().toString(),A],t,r);for(let e=1;e<i.length;++e)Yk(["","","","",i[e]],t,r)}function tC(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function nC(e,t){if(null===e)return null;if("string"==typeof e)return mx(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];tC(t,a,r)?n.push(r):n.push(nC(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{const e=mx(n);t[e]=nC(r,e)}}return t}}function rC(e,t){if(null==e)return null;if("string"==typeof e)return fx(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let a=0;a<r;++a){const r=e[a];tC(t,a,r)?n.push(r):n.push(rC(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];t[fx(n)]="name"!==n&&"className"!==n||"string"!=typeof r?rC(r,n):r}return t}}const aC="4.22.0";class sC extends ZB{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=Lx(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],xx(this.inputs).length!==this.inputs.length)throw new ix(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);xx(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const e of this.outputs){const t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(n),this.outputLayersTensorIndices.push(r)}for(const e of this.inputs){const t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;cx(0===n,"input layer has >1 nodes"),cx(0===r,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(n),this.inputLayersTensorIndices.push(r)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let t=0;t<this.inputLayers.length;t++){const n=this.inputLayers[t];if(!(n instanceof tk))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${t} (0-based) originates from layer type ${n.getClassName()}.`);this.inputNames.push(n.name),this.feedInputShapes.push(n.batchInputShape),this.feedInputNames.push(n.name)}for(const e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},a={},s={},i=[],o=(e,t,n,r,a,l)=>{null!=r&&null!=a&&null!=l||(r=e.sourceLayer,a=e.nodeIndex,l=e.tensorIndex);const A=r.inboundNodes[a];if(-1!==n.indexOf(A))throw new sx(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(A))return;this.containerNodes.add(sC.nodeKey(r,a)),r.id in s||(s[r.id]=Object.keys(s).length),-1===n.indexOf(A)&&n.push(A);const u=A.inboundLayers.length;for(let e=0;e<u;e++){const r=A.inputTensors[e],a=A.inboundLayers[e],s=A.nodeIndices[e],i=A.tensorIndices[e];o(r,t,n,a,s,i)}for(t.push(A);n.indexOf(A)>=0;)n.splice(n.indexOf(A),1);i.push(A)},l=[],A=[];for(const e of this.outputs)o(e,l,A);const u=i.slice().reverse();for(const e of u){n[e.id]=e,e.id in t||(t[e.id]=0);let s=t[e.id];const i=null==r[e.outboundLayer.id]?0:r[e.outboundLayer.id];s=Math.max(s,i),r[e.outboundLayer.id]=s,a[e.outboundLayer.id]=e.outboundLayer,t[e.id]=s;for(let r=0;r<e.inboundLayers.length;r++){const a=e.inboundLayers[r],i=e.nodeIndices[r],o=a.inboundNodes[i],l=null==t[o.id]?0:t[o.id];t[o.id]=Math.max(s+1,l),n[o.id]=o}}const c={};for(const e in t){const r=t[e];r in c||(c[r]=[]),c[r].push(n[e])}const h={};for(const e in r){const t=r[e];t in h||(h[t]=[]),h[t].push(a[e])}let d=Object.keys(h).map((e=>parseInt(e,10))).sort(vx);this.layers=[];for(const e of d){const t=h[e];t.sort(((e,t)=>{const n=s[e.id],r=s[t.id];return n<r?-1:n>r?1:0}));for(const e of t)e instanceof sC&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=h,d=Object.keys(c).map((e=>parseInt(e,10))).sort(vx);const p=this.inputs.slice(),f=[];for(const e of d)for(const t of c[e]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===p.indexOf(n))throw new sx(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${e.name}". The following previous layers were accessed without issue: ${f}`);for(const e of t.outputTensors)p.push(e);f.push(e.name)}}this.nodesByDepth=c;const m=this.layers.map((e=>e.name));for(const e of m){const t=m.filter((t=>t===e)).length;if(1!==t)throw new sx(`The name "${e}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(m))}this.outboundNodes=[],this.inboundNodes=[],new JB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ix("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const n={};let r=0;const a=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);a&&this.parseWeights(e);for(const e of this.layers)for(const[t,s]of e.weights.entries()){const e=a?`${s.name.split("/").slice(0,-1).join("/")+"/"}${t}`:s.originalName;if(null!=n[e])throw new ix(`Duplicate weight name: ${e}`);n[e]=s,r++}const s=[];for(const r in e){let a=r;if(null==n[r]){const e=r.split("/");a=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[a])s.push([n[a],e[r]]);else if(t)throw new ix(`Provided weight data has no target variable: ${r}`);delete n[a]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new ix(`${e.length} of ${r} weights are not set: ${e}`)}GB(s)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],a=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${aC}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const n=rC(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return mc((()=>{e=px(e);const n=new nk;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return sk(this.outputs,n,t)}))}computeMask(e,t){return mc((()=>{let n;return e=px(e),n=null==t?ux(null,e.length):px(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=MB(e);if(t.length!==this.inputLayers.length)throw new ix(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let e=0;e<t.length;e++){const r=this.inputLayers[e],a=t[e];n[r.name+"_0_0"]=a}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(vx);if(r.length>1)for(const e of r){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(t.id))continue;const r=[];for(let t=0;t<e.inboundLayers.length;t++){const a=e.inboundLayers[t],s=e.nodeIndices[t],i=e.tensorIndices[t],o=n[`${a.name}_${s}_${i}`];r.push(o)}const a=MB(t.computeOutputShape(dx(r))),s=t.inboundNodes.indexOf(e);for(let e=0;e<a.length;e++)n[`${t.name}_${s}_${e}`]=a[e]}}const a=[],s=[];for(let e=0;e<this.outputLayers.length;e++){const t=this.outputLayers[e],n=this.outputLayersNodeIndices[e],r=this.outputLayersTensorIndices[e],a=`${t.name}_${n}_${r}`;s.push(a)}for(let e=0;e<s.length;e++){const t=s[e];cx(t in n),a.push(n[t])}return dx(a)}runInternalGraph(e,t){null==t&&(t=ux(null,e.length));const n={};for(let r=0;r<this.inputs.length;++r){const a=this.inputs[r],s=e[r],i=t[r];n[a.id]=[s,i]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(vx);for(const e of r){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,a=e.outputTensors,s=new Array;for(const e of r)e.id in n&&s.push(n[e.id]);if(s.length===r.length){let r,i,o,l,A={};if(null!=e.callArgs&&(A=e.callArgs),1===s.length){const[e,n]=s[0];null==A.mask&&(A.mask=n),o=px(t.call(e,A)),l=px(t.computeMask(e,n)),r=[e],i=[n]}else r=s.map((e=>e[0])),i=s.map((e=>e[1])),null==A.mask&&(A.mask=i),o=px(t.call(r,A)),l=px(t.computeMask(r,i));if(t.activityRegularizer)throw new ox("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e){const t=a[e],r=o[e],s=l[e];n[t.id]=[r,s]}}}}const a=[],s=[],i=[];for(const e of this.outputs){cx(e.id in n,`Could not compute output ${e.name} : ${e.id}`);const[t,r]=n[e.id];i.push(t.shape),a.push(t),s.push(r)}return[a,s,i]}buildNodeConversionMap(e){const t={};let n;for(const e of this.layers){n=e instanceof sC?1:0;for(let r=0;r<e.inboundNodes.length;r++){const a=sC.nodeKey(e,r);this.containerNodes.has(a)&&(t[a]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new ix("Provide either a layer name or layer index");if("number"==typeof e)return this.findLayer(e);for(const t of this.layers)if(t.name===e)return t;throw new ix(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ix(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return mc((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=sC.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const e of this.layers){const r=e.getClassName(),a=e.getConfig(),s=[];for(let n=0;n<e.inboundNodes.length;n++){const r=e.inboundNodes[n],a=sC.nodeKey(e,n);let i={};if(this.containerNodes.has(a)){if(r.callArgs)try{JSON.stringify(r.callArgs),i=r.callArgs}catch(t){console.warn(`Layer ${e.name} was passed non-serializable keyword arguments: ${r.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),i={}}if(r.inboundLayers.length>0){const e=[];for(let n=0;n<r.inboundLayers.length;n++){const a=r.inboundLayers[n],s=r.nodeIndices[n],o=r.tensorIndices[n];let l=t[sC.nodeKey(a,s)];null==l&&(l=0),e.push([a.name,l,o,i])}s.push(e)}}}const i={};i.name=e.name,i.className=r,i.config=a,i.inboundNodes=s,n.push(i)}e.layers=n;const r=[];for(let e=0;e<this.inputLayers.length;e++){const n=this.inputLayers[e],a=this.inputLayersNodeIndices[e],s=sC.nodeKey(n,a);if(!this.containerNodes.has(s))continue;let i=t[s];null==i&&(i=0);const o=this.inputLayersTensorIndices[e];r.push([n.name,i,o])}e.inputLayers=r;const a=[];for(let e=0;e<this.outputLayers.length;e++){const n=this.outputLayers[e],r=this.outputLayersNodeIndices[e],s=sC.nodeKey(n,r);if(!this.containerNodes.has(s))continue;let i=t[s];null==i&&(i=0);const o=this.outputLayersTensorIndices[e];a.push([n.name,i,o])}return e.outputLayers=a,e}static fromConfig(e,t,n={},r=!1){const a={},s={};function i(e,t){e.name in s?s[e.name].push(t):s[e.name]=[t]}function o(e,t){const n=[];let r;for(const s of t){const o=s[0],l=s[1],A=s[2];if(r=null==s[3]?{}:s[3],!(o in a))return void i(e,t);const u=a[o];if(u.inboundNodes.length<=l)return void i(e,t);const c=u.inboundNodes[l];n.push(c.outputTensors[A])}n.length>0&&e.apply(dx(n),r)}function l(e){const n=e.name,s=Fk(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(r),a[n]=s,e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new ix(`Corrupted configuration, expected array for nodeData: ${e}`);i(s,e)}))}const A=t.name,u=t.layers;for(const e of u)l(e);for(;!Bx(s);)for(const e of u){const t=a[e.name];if(t.name in s){const e=s[t.name];delete s[t.name];for(const n of e)o(t,n)}}const c=[],h=[],d=t.inputLayers;for(const e of d){const t=e[0],n=e[1],r=e[2];cx(t in a);const s=a[t].inboundNodes[n].outputTensors;c.push(s[r])}const p=t.outputLayers;for(const e of p){const t=e[0],n=e[1],r=e[2];cx(t in a);const s=a[t].inboundNodes[n].outputTensors;h.push(s[r])}return new e({inputs:c,outputs:h,name:A})}get stateful(){if(this._stateful)throw new ix("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){mc((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function iC(e,t){return function(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}(e,t,"classWeight")}async function oC(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=mc((()=>{if(1===e.shape.length)return Bh(e);if(2===e.shape.length){if(e.shape[1]>1)return qd(e,1);if(1===e.shape[1])return gp(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());gc(t);const a=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);a.push(n[e])})),Bg(a,"float32")}return null}function lC(e,t){return Ih(e,t)}function AC(e,t){let n,r;const a=t;n=a.xs,r=a.ys,Vs(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const s=uC("input",e.inputNames,n),i=uC("output",e.outputNames,r),o=s[0].shape[0];Vs(s.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),Vs(i.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let t=0;t<s.length;t++)Vs(s[t].shape[0]===o,(()=>`Batch size mismatch: input ${e.inputNames[t]} has ${s[t].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`));for(let t=0;t<i.length;t++)Vs(i[t].shape[0]===o,(()=>`Batch size mismatch: output ${e.outputNames[t]} has ${i[t].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`));return{xs:s,ys:i}}function uC(e,t,n){if(n instanceof Fu)return[n];if(Array.isArray(n))return Vs(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const a of t){if(null==n[a])throw new ix(`The feature data generated by the dataset lacks the required ${e} key '${a}'.`);r.push(n[a])}return r}}function cC(e){return"function"==typeof e.iterator}function hC(e){Vs(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function dC(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>rB(e,t,n-t))):rB(e,t,n-t)}function pC(e,t){return mc((()=>null==e?null:Array.isArray(e)?e.map((e=>pC(e,t))):cB(e,"int32"===t.dtype?t:xh(t,"int32"))))}function fC(e,t){const n=[];let r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function mC(e){const t=[];e instanceof Fu&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(nB(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function gC(e,t){if(null==e)return;const n=[];if(t instanceof Fu)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const e in t){const r=t[e];n.push(r.id)}const r=[];if(e instanceof Fu)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const t in e){const a=e[t];-1===n.indexOf(a.id)&&r.push(a)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function yC(e){return Array.isArray(e)}function bC(e){return!function(e){return e instanceof Fu}(e)&&!yC(e)}function wC(e,t,n,r=!0,a=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(yC(e)&&e.length>0)t=!0;else if(bC(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new ix(`Error when checking model ${a} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));let s;if(bC(e)){s=[];for(const n of t){if(null==e[n])throw new ix(`No data provided for "${n}". Need data for each key in: ${t}`);s.push(e[n])}}else if(yC(e)){if(e.length!==t.length)throw new ix(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);s=e}else{if(t.length>1)throw new ix(`The model ${a} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);s=[e]}if(s=mC(s),null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const i=s[e];if(i.shape.length!==n[e].length)throw new ix(`Error when checking ${a}: expected ${t[e]} to have ${n[e].length} dimension(s). but got array with shape ${i.shape}`);for(let t=0;t<n[e].length;++t){if(0===t&&!r)continue;const s=i.shape[t],o=n[e][t];if(null!=o&&o>=0&&s!==o)throw new ix(`${a} expected a batch of elements where each example has shape [${n[e].slice(1,n[e].length)}] (i.e.,tensor shape [*,${n[e].slice(1,n[e].length)}]) but the ${a} received an input with ${i.shape[0]} examples, each with shape [${i.shape.slice(1,i.shape.length)}] (tensor shape [${i.shape}])`)}}return s}function vC(e,t,n,r=!0,a=""){let s;if(Array.isArray(e)){if(e.length!==t.length)throw new ix(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);s=e}else{if(t.length>1)throw new ix(`The model expects ${t.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);s=[e]}if(null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const i=s[e];if(i.shape.length!==n[e].length)throw new ix(`Error when checking ${a}: expected ${t[e]} to have ${n[e].length} dimension(s), but got array with shape ${JSON.stringify(i.shape)}`);for(let s=0;s<n[e].length;++s){if(0===s&&!r)continue;const o=i.shape[s],l=n[e][s];if(null!=l&&l!==o)throw new ix(`Error when checking ${a}: expected ${t[e]} to have shape ${JSON.stringify(n[e])} but got array with shape ${JSON.stringify(i.shape)}.`)}}}class xC extends sC{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new ix("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(e,t,n,r=console.log){const a=function(e){let t=!0;const n=[],r=[];for(const t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(const e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}r.push(...e)}if(t)for(const n of e.layers){let e=!1;for(const a of n.inboundNodes)if(-1!==r.indexOf(a)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),s=["Layer (type)","Input Shape","Output shape","Param #"];let i;if(a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!a){s.push("Receives inputs"),i=[];for(const t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),Yk(s,n,r),r("=".repeat(t));const o=e.layers;for(let e=0;e<o.length;++e)a?Zk(o[e],n,r):eC(o[e],n,i,r),r((e===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;return t=null!=e.collectedTrainableWeights?zB(e.collectedTrainableWeights):zB(e.trainableWeights),t}(e),A=zB(e.nonTrainableWeights);r(`Total params: ${l+A}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${A}`),r("_".repeat(t))}(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>sb.adagrad(.01),Adadelta:()=>sb.adadelta(1,.95,eB()),Adam:()=>sb.adam(.001,.9,.999,eB()),Adamax:()=>sb.adamax(.002,.9,.999,eB(),0),RMSProp:()=>sb.rmsprop(.001,.9,0,eB()),SGD:()=>sb.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new ix(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof $h))throw new ix("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ix(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>Mk(e)))}else{const n=Mk(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new ix(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(Mk(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){const t=this.internalOutputShapes[e],n=this.outputNames[e];this.feedOutputNames.push(n),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],zx("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};zx("metric",(()=>{for(let e=0;e<this.outputs.length;++e)-1===n.indexOf(e)&&(t=>{let n,r,s;for(const i of t){if("string"==typeof i&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(i)){const t=this.internalOutputShapes[e];let a;1===t[t.length-1]||this.lossFunctions[e]===Qk?-1!==["accuracy","acc"].indexOf(i)?r=Pk:-1!==["crossentropy","ce"].indexOf(i)&&(r=zk):this.lossFunctions[e]===Dk?-1!==["accuracy","acc"].indexOf(i)?r=Vk:-1!==["crossentropy","ce"].indexOf(i)&&(r=Kk):-1!==["accuracy","acc"].indexOf(i)?r=Hk:-1!==["crossentropy","ce"].indexOf(i)&&(r=Wk),-1!==["accuracy","acc"].indexOf(i)?a="acc":-1!==["crossentropy","ce"].indexOf(i)&&(a="ce"),s=r,n=""+a}else{const e=jk(i);s=e,n=""+qk(i)}let t;zx(n,(()=>{t=s})),a(e,n,t)}})(r[e])})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){const r=null==n.batchSize?32:n.batchSize;hC(r);const a=this.standardizeUserDataXY(e,t,!0,r);try{const e=a[0].concat(a[1]);this.makeTestFunction();const t=this.testFunction;return dx(this.testLoop(t,e,r,n.verbose,n.steps))}finally{gC(a[0],e),gC(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,a=e.testFunction;let s=[];if(n.verbose>0)throw new ox("Verbose mode is not implemented yet.");Vs(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const i="function"==typeof t.next?t:await t.iterator();let o=0,l=0;for(;!r||l<n.batches;){const t=await i.next();if(s=mc((()=>{if(t.value){const{xs:n,ys:r}=AC(e,t.value),i=n.concat(r),A=mc((()=>a(i)));if(gc(i),0===l)for(let e=0;e<A.length;++e)s.push(Uh(0));const u=i[0].shape[0];for(let e=0;e<A.length;++e){const t=A[e],n=s[e];s[e]=mc((()=>Ch(s[e],Ih(u,t)))),l>0&&gc(n)}gc(A),o+=u,++l}return s})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<s.length;++e){const t=s[e];s[e]=Sh(s[e],o),gc(t)}return dx(s)}(this,e,t)}checkNumSamples(e,t,n,r="steps"){let a;if(null!=n){if(a=null,null!=t)throw new ix(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new ix(`Either the input data should have a defined shape, or ${r} shoud be specified.`);a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new ix("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),s=new nk;if(e instanceof Fu&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ix(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)s.add(this.inputs[t],e[t])}else for(const t of this.inputs){const n=e[t.name];if(null==n)throw new ix(`No value is provided for the model's input ${t.name}`);s.add(t,n)}const i=sk(a,s);return n?i:i[0]}retrieveSymbolicTensors(e){const t=ux(null,e.length);let n=e.length;for(const r of this.layers){const a=Array.isArray(r.output)?r.output:[r.output],s=a.map((e=>e.name));for(let r=0;r<e.length;++r){const i=s.indexOf(e[r]);if(-1!==i&&(t[r]=a[i],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new ix(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e,t=32,n=!1){return mc((()=>{const r=this.checkNumSamples(e);if(n)throw new ox("Verbose predictLoop() is not implemented yet.");const a=fC(r,t),s=this.outputs.map((e=>[]));for(let t=0;t<a.length;++t){const n=mc((()=>{const n=a[t][0],r=a[t][1],s=dC(e,n,r),i=[];if(Array.isArray(s))for(let e=0;e<s.length;++e)i.push({key:this.inputs[e],value:s[e]});else i.push({key:this.inputs[0],value:s});const o=new nk(i);return sk(this.outputs,o)}));n.forEach(((e,t)=>s[t].push(e)))}return dx(s.map((e=>wp(e,0))))}))}predict(e,t={}){const n=mC(e);vC(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return hC(e),this.predictLoop(n,e)}finally{gC(n,e)}}predictOnBatch(e){vC(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(null==this.optimizer_)throw new sx("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let e=0;e<this.feedOutputShapes.length;++e){const t=this.feedOutputShapes[e];this.feedLossFns[e]===Dk?a.push(t.slice(0,t.length-1).concat([1])):a.push(t)}if(function(e,t){const n=xx(e.map((e=>e.shape[0])));n.sort();const r=xx(t.map((e=>e.shape[0])));if(r.sort(),n.length>1)throw new ix(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(r.length>1)throw new ix(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(n.length>0&&r.length>0&&!js(n,r))throw new ix(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${r[0]} target sample(s).`)}(e=wC(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=wC(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){const r=[Lk,Qk,Rk];for(let a=0;a<e.length;++a){const s=e[a],i=t[a],o=n[a];if(null!=i){if(i===Rk&&1===s.shape[s.shape.length-1])throw new ix(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(i)){const e=s.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){const r=e[n],a=t[n];if(null!=a&&r!==a)throw new ix(`A target Tensor with shape ${s.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!==0)throw new ix(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,a=!0,s){const[i,o]=this.standardizeUserDataXY(e,t,a,s);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=iC(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await oC(o[t],null,e[t]))}return[i,o,l]}testLoop(e,t,n,r=0,a){return mc((()=>{const s=this.checkNumSamples(t,n,a,"steps"),i=[];if(r>0)throw new ox("Verbose mode is not implemented yet.");if(null!=a)throw new ox("steps mode in testLoop() is not implemented yet");{const r=fC(s,n),a=Bg(Yx(0,s));for(let n=0;n<r.length;++n){const s=r[n][0],o=r[n][1],l=rB(a,s,o-s),A=pC(t,l),u=e(A);if(0===n)for(let e=0;e<u.length;++e)i.push(Uh(0));for(let e=0;e<u.length;++e){const t=u[e];i[e]=Ch(i[e],Ih(o-s,t))}}for(let e=0;e<i.length;++e)i[e]=Sh(i[e],s)}return i}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let a=r;hx(e,r)>1&&(a+=`_${hx(e.slice(0,n),r)}`),t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],i=this.collectedTrainableWeights.map((e=>e.read())),o=this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const i=new nk(e),o=sk(this.outputs,i,{training:!0});let l;for(let e=0;e<this.lossFunctions.length;++e){let n=(0,this.lossFunctions[e])(r[e],o[e]);null!=a[e]&&(n=lC(n,a[e]));const s=om(n);t.push(s),l=0===e?n:Ch(l,n)}for(let e=0;e<this.metricsTensors.length;++e){let n;if(this.outputs.length>1&&e<this.outputs.length)n=t[e];else{const t=this.metricsTensors[e][0],a=this.metricsTensors[e][1];n=om(t(r[a],o[a]))}yc(n),s.push(n)}return l=om(l),this.calculateLosses().forEach((e=>{l=Ch(l,e)})),l}),!0,i);return[o].concat(s)}}makeTestFunction(){this.testFunction=e=>mc((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let e=0;e<this.inputs.length;++e)s.push({key:this.inputs[e],value:r[e]});const i=new nk(s),o=sk(this.outputs,i);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],s=om(r(a[e],o[e]));n=0===e?s:Ch(n,s),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],s=om(n(a[r],o[r]));t.push(s)}return t}))}async fit(e,t,n={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let r,a,s,i,o,l,A,u,c;this.isTraining=!0;try{const h=null==n.batchSize?32:n.batchSize;hC(h);const d=!1,p=await this.standardizeUserData(e,t,n.sampleWeight,n.classWeight,d,h);r=p[0],a=p[1],c=p[2];let f,m=!1;if(null!=n.validationData&&n.validationData.length>0){if(m=!0,2!==n.validationData.length)throw 3===n.validationData.length?new ox("validationData including sample weights is not supported yet."):new ix(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${n.validationData} is invalid.`);o=n.validationData[0],l=n.validationData[1];const e=!0,t=await this.standardizeUserData(o,l,null,null,e,h);A=t[0],u=t[1],f=A.concat(u)}else if(null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1){m=!0;const e=Math.floor(r[0].shape[0]*(1-n.validationSplit)),t=r[0].shape[0];A=dC(r,e,t),s=r,r=dC(r,0,e),u=dC(a,e,t),i=a,a=dC(a,0,e),f=A.concat(u)}else null!=n.validationSteps&&(m=!0);const g=r.concat(a).concat(c);this.checkTrainableWeightsConsistency();const y=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,v;m?(this.makeTestFunction(),w=this.testFunction,v=b.slice().concat(b.map((e=>"val_"+e)))):(w=null,f=[],v=b.slice());const x=Sk(n.callbacks,n.yieldEvery);return await this.fitLoop(y,g,b,h,n.epochs,n.verbose,x,w,f,n.shuffle,v,n.initialEpoch,null,null)}finally{this.isTraining=!1,gC(r,e),gC(a,t),gC(s,e),gC(i,t),gC(A,o),gC(u,l),null!=c&&gc(c)}}async fitLoop(e,t,n,r,a,s,i,o,l,A,u,c,h,d){null==r&&(r=32),null==a&&(a=1),null==A&&(A=!0),null==c&&(c=0);let p=!1;if(null!=o&&null!=l&&(p=!0),null!=d&&(p=!0,null==h))throw new ix("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const f=this.checkNumSamples(t,r,h,"steps_per_epoch");let m;null!=f&&(m=Yx(0,f)),null==s&&(s=1);const{callbackList:g,history:y}=Ek(i,s,a,c,f,h,r,p,u);g.setModel(this),this.history=y,await g.onTrainBegin(),this.stopTraining_=!1;for(let s=c;s<a;++s){await g.onEpochBegin(s);const a={};if(null!=h)throw new ox("stepsPerEpoch mode is not implemented yet.");{if("batch"===A)throw new ox("batch shuffling is not implemneted yet");A&&Ms(m);const s=Bg(m),i=fC(f,r);for(let A=0;A<i.length;++A){const u={};if(await g.onBatchBegin(A,u),mc((()=>{const c=i[A][0],h=i[A][1],d=rB(s,c,h-c);u.batch=A,u.size=h-c;const f=pC(t,d),m=e(f);for(let e=0;e<n.length;++e){const t=n[e],r=m[e];u[t]=r,yc(r)}if(A===i.length-1&&p){const e=this.testLoop(o,l,r);for(let t=0;t<n.length;++t){const r=n[t],s=e[t];yc(s),a["val_"+r]=s}}})),await g.onBatchEnd(A,u),wk(u),this.stopTraining_)break}s.dispose()}if(await g.onEpochEnd(s,a),this.stopTraining_)break}return await g.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return async function(e,t,n){const r=null!=n.batchesPerEpoch;if(Vs(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),Vs(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),Vs(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),Vs(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),Vs(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const a=null!=n.validationData;let s,i;if(a)if(cC(n.validationData))Vs(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new ox("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);s=e.xs,i=e.ys}const o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let A;A=a?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const u=Sk(n.callbacks,n.yieldEvery),c=null==n.verbose?1:n.verbose,{callbackList:h,history:d}=Ek(u,c,n.epochs,null,null,function(e,t){let n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(t,n),null,a,A);h.setModel(e),e.history=d,await h.onTrainBegin(),e.stopTraining_=!1;let p=null==n.initialEpoch?0:n.initialEpoch,f=await t.iterator();for(;p<n.epochs;){const A={};await h.onEpochBegin(p);let u=0,c=0;for(r||(f=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await f.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${u} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:a}=AC(e,t.value),s={};s.batch=c,s.size=r[0].shape[0],await h.onBatchBegin(c,s);const i=[];if(null!=n.classWeight){const t=iC(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)i.push(await oC(a[e],null,t[e]))}const A=r.concat(a).concat(i),d=o(A);gc(A);for(let e=0;e<l.length;++e){const t=l[e],n=d[e];s[t]=n,yc(n)}await h.onBatchEnd(c,s),wk(s),c++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(a){let t;t=cC(n.validationData)?px(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):px(e.evaluate(s,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)A[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await h.onEpochEnd(p,A),p++,e.stopTraining_)break}return await h.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],a=n[1],s=this.makeTrainFunction()(r.concat(a)),i=[];for(const e of s){const t=await e.data();i.push(t[0])}return gc(s),gC(n[0],e),gC(n[1],t),dx(i)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let e=0;e<r.length;++e)n&&!r[e].trainable||t.push({name:r[e].originalName,tensor:a[e]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=fc().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-fc().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=fx(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>fx(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=fx(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[fx(qk(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>fx(qk(e))));{const e={};for(const t in this.metrics)e[t]=fx(qk(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=Fk(nC(e.optimizer_config));let n,r;if("string"==typeof e.loss)n=mx(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>mx(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=mx(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>mx(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=mx(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"==typeof e){const t=Hc(e);if(0===t.length)throw new ix(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new ix(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new ix("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await xc(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${aC}`,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:a}=await xc(await this.optimizer.getWeights(),e);n.specs.push(...a),n.data=Lc([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;Xk(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){Xk(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}xC.className="Model",Oh(xC);class BC extends xC{}BC.className="Functional",Oh(BC);class kC extends xC{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:Lx("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new ix(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof kC||e instanceof xC;let n;if(t){if(n=e,1!==n.outputs.length)throw new ix("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new ix("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new ix("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new ix("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new tk({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new ix(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new ix("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=ek(this.outputs[0])}this.inboundNodes=[],new JB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ux(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(HB(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new xC({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new sx("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new sx("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new sx("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new sx("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let a,s={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new ix("Legacy serialization format not supported yet.");a=t}else Vs(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),a=t.layers,delete t.layers,s=t;const i=new e(s);if(!(i instanceof kC))throw new ox(`Sequential.fromConfig called on non-Sequential input: ${i}`);for(const e of a){const t=Fk(e,void 0,r);r&&t.setFastWeightInitDuringBuild(!0),i.add(t)}return i}set stopTraining(e){if(null==this.model)throw new ix("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new ix("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}kC.className="Sequential",Oh(kC);class CC extends Dh{getConfig(){return{}}}class NC extends CC{apply(e,t=1){return function(e,t=1){if(1!==t)throw new ox(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Af(e)}(e,t)}}NC.className="elu",Oh(NC);class SC extends CC{apply(e){return tg(e)}}SC.className="selu",Oh(SC);class IC extends CC{apply(e){return Km(e)}}IC.className="relu",Oh(IC);class EC extends CC{apply(e){return mc((()=>cm(6,Km(e))))}}EC.className="relu6",Oh(EC);class FC extends CC{apply(e){return e}}FC.className="linear",Oh(FC);class TC extends CC{apply(e){return xp(e)}}TC.className="sigmoid",Oh(TC);class LC extends CC{apply(e){return function(e){return mc((()=>{const t=Ch(.5,Ih(.2,e));return Dp(t,0,1)}))}(e)}}LC.className="hardSigmoid",Oh(LC);class UC extends CC{apply(e){return Gf(e)}}UC.className="softplus",Oh(UC);class _C extends CC{apply(e){return function(e){return mc((()=>Sh(e,Ch(Kh(e),1))))}(e)}}_C.className="softsign",Oh(_C);class RC extends CC{apply(e){return kp(e)}}RC.className="tanh",Oh(RC);class DC extends CC{apply(e,t=-1){return cg(e,t)}}DC.className="softmax",Oh(DC);class QC extends CC{apply(e,t=-1){return qf(e,t)}}QC.className="logSoftmax",Oh(QC);class OC extends CC{apply(e){return mc((()=>mc((()=>{const t=Math.sqrt(2),n=Ih(.5,Ch(1,cf(Sh(e,t))));return Ih(e,n)}))))}}OC.className="gelu",Oh(OC);class $C extends CC{apply(e){return mc((()=>Ih(.5,Ih(e,Ch(1,kp(Ih(Eh(Sh(2,Math.PI)),Ch(e,Ih(.044715,zh(e,3))))))))))}}$C.className="gelu_new",Oh($C);class MC extends CC{apply(e){return mc((()=>Ih(e,kp(Gf(e)))))}}MC.className="mish",Oh(MC);class PC extends CC{apply(e,t=1){return mc((()=>Ih(xp(Ih(e,t)),e)))}}function HC(e){return e.getClassName()}function zC(e,t={}){return wx(e,Qh.getMap().classNameMap,t,"activation")}function VC(e){if(null==e){return zC({className:"linear",config:{}})}if("string"==typeof e){const t={};return t.className=e,t.config={},zC(t)}return e instanceof CC?e:zC(e)}PC.className="swish",Oh(PC);class WC extends Dh{}class KC extends WC{constructor(e){super(),function(e){if(null!=e&&"object"!=typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return mc((()=>{let t=lm([1]);return this.hasL1&&(t=Ch(t,xf(Ih(this.l1,Kh(e))))),this.hasL2&&(t=Ch(t,xf(Ih(this.l2,hB(e))))),gp(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}KC.className="L1L2",Oh(KC);const GC={l1l2:"L1L2"};function jC(e){return yx(e)}function qC(e,t={}){return wx(e,Qh.getMap().classNameMap,t,"regularizer")}function XC(e){return null==e?null:"string"==typeof e?qC({className:e in GC?GC[e]:e,config:{}}):e instanceof WC?e:qC(e)}class JC extends ZB{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=PB(e);let n=Km(e);return null!=this.maxValue&&(n=Dp(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}JC.className="ReLU",Oh(JC);class YC extends ZB{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=PB(e);return $f(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}YC.className="LeakyReLU",Oh(YC);class ZC extends ZB{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=OB(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=XC(e.alphaRegularizer),this.alphaConstraint=yk(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new ix(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=HB(e)).slice(1);if(null!=this.sharedAxes)for(const e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new jB({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=PB(e),Im(e,this.alpha.read())}getConfig(){const e={alphaInitializer:QB(this.alphaInitializer),alphaRegularizer:jC(this.alphaRegularizer),alphaConstraint:mk(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}ZC.className="PReLU",Oh(ZC);class eN extends ZB{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new ox(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=PB(e);return Af(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}eN.className="ELU",Oh(eN);class tN extends ZB{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=PB(e);return Ih(n,xh(Uf(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}tN.className="ThresholdedReLU",Oh(tN);class nN extends ZB{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new DC).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return mc((()=>{let n=PB(e);const r=t.mask;if(null!=r){const e=Ih(Vh(Am(n.shape),xh(r,n.dtype)),Uh(-1e9));n=Ch(n,e)}return this.axis instanceof Array?this.axis.length>1?Nf(Vh(n,Xf(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function rN(e,t,n){if("number"==typeof e)return ux(e,t);if(e.length!==t)throw new ix(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const a=e[r];if(!jx(a))throw new ix(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${a}`)}return e}function aN(e,t,n,r,a=1){if(null==e)return e;let s;return s="same"===n?e:e-(t+(t-1)*(a-1))+1,Math.floor((s+r-1)/r)}function sN(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Jx([n-t,0]);else{if("same"!==r)throw new ix(`Unsupport padding mode: ${r}.`);e*=t}return e}function iN(e,t){return mc((()=>($x(t),"channelsFirst"===t?Hg(e,[0,2,3,1]):e)))}function oN(e,t){return mc((()=>($x(t),"channelsFirst"===t?Hg(e,[0,2,3,4,1]):e)))}function lN(e,t,n,r=[1,1],a="valid",s,i,o=null){return mc((()=>{if(null==s&&(s="channelsLast"),$x(s),3!==e.rank&&4!==e.rank)throw new ix(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new ix(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=iN(e,s);if("causal"===a)throw new ox("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=ny({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===s&&(l=Hg(l,[0,3,1,2])),l}))}nN.className="Softmax",Oh(nN);class AN extends ZB{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",AN.verifyArgs(t),this.rank=e,Nx(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new ox(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=rN(t.kernelSize,e,"kernelSize"),this.strides=rN(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,Mx(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,$x(this.dataFormat),this.activation=VC(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=OB(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=yk(t.biasConstraint),this.biasRegularizer=XC(t.biasRegularizer),this.activityRegularizer=XC(t.activityRegularizer),this.dilationRate=rN(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new ix(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new ix(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new ix(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(cx("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!Cx(e.kernelSize,"number",1,3))throw new ix(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:HC(this.activation),useBias:this.useBias,biasInitializer:QB(this.biasInitializer),biasRegularizer:jC(this.biasRegularizer),activityRegularizer:jC(this.activityRegularizer),biasConstraint:mk(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class uN extends AN{constructor(e,t){super(e,t),this.kernel=null,uN.verifyArgs(t),this.filters=t.filters,Nx(this.filters,"filters"),this.kernelInitializer=OB(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=yk(t.kernelConstraint),this.kernelRegularizer=XC(t.kernelRegularizer)}build(e){e=HB(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ix(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return mc((()=>{let t;e=PB(e);const n=null==this.bias?null:this.bias.read(),r=Ix(this.activation.getClassName());if(null!=r&&2===this.rank)t=lN(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=function(e,t,n,r=1,a="valid",s,i=1){return mc((()=>{if(null==s&&(s="channelsLast"),$x(s),3!==e.shape.length)throw new ix(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new ix(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new ix(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if("channelsFirst"===s&&(e=Hg(e,[0,2,1])),"causal"===a)throw new ox("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=Hp(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(o=pB(o,n)),o}))}(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=lN(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new ox("convolutions greater than 3D are not implemented yet.");t=function(e,t,n,r=[1,1,1],a="valid",s,i){return mc((()=>{if(null==s&&(s="channelsLast"),$x(s),4!==e.rank&&5!==e.rank)throw new ix(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new ix(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=oN(e,s);if("causal"===a)throw new ox("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=Wp(o,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(o=pB(o,n)),"channelsFirst"===s&&(o=Hg(o,[0,4,1,2,3])),o}))}(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=HB(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let e=0;e<n.length;++e){const r=aN(n[e],this.kernelSize[e],this.padding,this.strides[e],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[e]);t.push(r)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:QB(this.kernelInitializer),kernelRegularizer:jC(this.kernelRegularizer),kernelConstraint:mk(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new ix(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class cN extends uN{constructor(e){super(2,e),cN.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Cx(e.kernelSize,"number",1,2))throw new ix(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}cN.className="Conv2D",Oh(cN);class hN extends uN{constructor(e){super(3,e),hN.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new ix(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}hN.className="Conv3D",Oh(hN);class dN extends cN{constructor(e){if(super(e),this.inputSpec=[new jB({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new ix(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=HB(e)).length)throw new ix("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ix("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new jB({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return mc((()=>{let t=PB(e);if(4!==t.shape.length)throw new ix(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let a,s;"channelsFirst"===this.dataFormat?(a=2,s=3):(a=1,s=2);const i=n[a],o=n[s],l=this.kernelSize[0],A=this.kernelSize[1],u=this.strides[0],c=this.strides[1],h=[r,sN(i,u,l,this.padding),sN(o,c,A,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Hg(t,[0,2,3,1]));let d=Vp(t,this.kernel.read(),h,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(d=Hg(d,[0,3,1,2])),null!=this.bias&&(d=pB(d,this.bias.read(),this.dataFormat)),null!=this.activation&&(d=this.activation.apply(d)),d}))}computeOutputShape(e){const t=(e=HB(e)).slice();let n,r,a;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3):(n=3,r=1,a=2);const s=this.kernelSize[0],i=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=sN(t[r],o,s,this.padding),t[a]=sN(t[a],l,i,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}dN.className="Conv2DTranspose",Oh(dN);class pN extends hN{constructor(e){if(super(e),this.inputSpec=[new jB({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new ix(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=HB(e)).length)throw new ix("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new ix("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new jB({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return mc((()=>{let t=PB(e);if(5!==t.shape.length)throw new ix(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let a,s,i;"channelsFirst"===this.dataFormat?(i=2,a=3,s=4):(i=1,a=2,s=3);const o=n[i],l=n[a],A=n[s],u=this.kernelSize[0],c=this.kernelSize[1],h=this.kernelSize[2],d=this.strides[0],p=this.strides[1],f=this.strides[2],m=[r,sN(o,d,u,this.padding),sN(l,p,c,this.padding),sN(A,f,h,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Hg(t,[0,2,3,4,1]));let g=Gp(t,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(g=Hg(g,[0,4,1,2,3])),null!==this.bias&&(g=pB(g,this.bias.read(),this.dataFormat)),null!==this.activation&&(g=this.activation.apply(g)),g}))}computeOutputShape(e){const t=(e=HB(e)).slice();let n,r,a,s;"channelsFirst"===this.dataFormat?(n=1,r=2,a=3,s=4):(n=4,r=1,a=2,s=3);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],A=this.strides[0],u=this.strides[1],c=this.strides[2];return t[n]=this.filters,t[r]=sN(t[r],A,i,this.padding),t[a]=sN(t[a],u,o,this.padding),t[s]=sN(t[s],c,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}pN.className="Conv3DTranspose",Oh(pN);class fN extends uN{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new ix("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new ix("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new ix(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=OB(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=XC(t.depthwiseRegularizer),this.depthwiseConstraint=yk(t.depthwiseConstraint),this.pointwiseInitializer=OB(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=XC(t.pointwiseRegularizer),this.pointwiseConstraint=yk(t.pointwiseConstraint)}build(e){if((e=HB(e)).length<this.rank+2)throw new ix(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new ix(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let e=0;e<this.rank;++e)a.push(1);a.push(n*this.depthMultiplier,this.filters);const s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new jB({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return mc((()=>{let t;if(e=PB(e),1===this.rank)throw new ox("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Hg(e,[0,2,3,1])),t=ng(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=pB(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Hg(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=QB(this.depthwiseInitializer),e.pointwiseInitializer=QB(this.pointwiseInitializer),e.depthwiseRegularizer=jC(this.depthwiseRegularizer),e.pointwiseRegularizer=jC(this.pointwiseRegularizer),e.depthwiseConstraint=mk(this.depthwiseConstraint),e.pointwiseConstraint=mk(this.pointwiseConstraint),e}}fN.className="SeparableConv";class mN extends fN{constructor(e){super(2,e)}}mN.className="SeparableConv2D",Oh(mN);class gN extends uN{constructor(e){super(1,e),gN.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!Cx(e.kernelSize,"number",1,1))throw new ix(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}gN.className="Conv1D",Oh(gN);class yN extends ZB{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return mc((()=>{if(e=PB(e),"channelsLast"===this.dataFormat){const t=sB(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return sB(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=sB(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return sB(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}yN.className="Cropping2D",Oh(yN);class bN extends ZB{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,$x(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,kx(_x,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return mc((()=>{let t=PB(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=Hg(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?eb.resizeNearestNeighbor(t,[e,r]):eb.resizeBilinear(t,[e,r]);return Hg(a,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?eb.resizeNearestNeighbor(t,[e,r]):eb.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}bN.className="UpSampling2D",Oh(bN);class wN extends AN{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=OB(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=yk(e.depthwiseConstraint),this.depthwiseRegularizer=XC(e.depthwiseRegularizer)}build(e){if((e=HB(e)).length<4)throw new ix(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new ix(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return mc((()=>{let t=function(e,t,n=[1,1],r="valid",a,s){return mc((()=>{null==a&&(a="channelsLast"),$x(a);let i=iN(e,a);if(4!==e.rank)throw new ix(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new ix(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=ef(i,t,n,"same"===r?"same":"valid","NHWC",s),"channelsFirst"===a&&(i=Hg(i,[0,3,1,2])),i}))}(e=PB(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=pB(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=HB(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=aN(t,this.kernelSize[0],this.padding,this.strides[0]),s=aN(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,s]:[e[0],a,s,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=QB(this.depthwiseInitializer),e.depthwiseRegularizer=jC(this.depthwiseRegularizer),e.depthwiseConstraint=mk(this.depthwiseRegularizer),e}}function vN(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new ix("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function xN(e,t,n,r=!1,a,s,i=!1,o=!1){return mc((()=>{const l=t.shape.length;if(l<3)throw new ix(`Input should be at least 3D, but is ${l}D.`);const A=[1,0].concat(Yx(2,l));if(t=Hg(t,A),null!=s)throw new ox("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=xh(xh(a,"bool"),"float32")).rank===l-1&&(a=Sf(a,-1)),a=Hg(a,A)),r&&(t=jm(t,0),null!=a&&(a=jm(a,0)));const u=[];let c,h=n;const d=t.shape[0],p=Dg(t);let f,m;null!=a&&(f=Dg(a));for(let t=0;t<d;++t){const n=p[t],r=mc((()=>e(n,h)));if(null==a)c=r[0],h=r[1];else{const e=mc((()=>{const e=f[t],n=Vh(bm(e),e),a=Ch(Ih(r[0],e),Ih(h[0],n)),s=h.map(((t,a)=>Ch(Ih(r[1][a],e),Ih(t,n))));return{output:a,newStates:s}}));c=e.output,h=e.newStates}o&&u.push(c)}return o&&(m=bg(u,1)),[c,m,h]}))}wN.className="DepthwiseConv2D",Oh(wN);class BN extends ZB{constructor(e){let t;if(super(e),null==e.cell)throw new ix("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new TN({cells:e.cell}):e.cell,null==t.stateSize)throw new ix("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new jB({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?Yx(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null)):this.states_}setStates(e){this.states_=e}computeOutputShape(e){$B(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return mc((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new ox("Constants support is not implemented in RNN yet.");$B(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new jB({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let a;if(this.cell.build(r),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!js(this.stateSpec.map((e=>e.shape[e.shape.length-1])),a))throw new ix(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map((e=>new jB({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e,t=!1){mc((()=>{if(!this.stateful)throw new ax("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new ix("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>lm([n,e]))):this.states_=[lm([n,this.cell.stateSize])];else if(null==e)gc(this.states_),null!=this.keptStates&&(gc(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>lm([n,e]))):this.states_[0]=lm([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ix(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):gc(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,s=[n,a];if(!js(r.shape,s))throw new ix(`State ${t} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>yc(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=vN(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let s=[],i=[];if(null!=n){t.initialState=n,s=s.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new jB({shape:e.shape}));i=i.concat(this.stateSpec)}if(null!=r&&(t.constants=r,s=s.concat(r),this.numConstants=r.length),s[0]instanceof qB){const n=[e].concat(s),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return mc((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let a=null==t?null:t.initialState;e=PB(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==s)throw new ix(`RNN Layer has ${s} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const i={training:r},o=xN(((e,t)=>{const n=this.cell.call([e].concat(t),i);return[n[0],n.slice(1)]}),e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],A=o[1],u=o[2];this.stateful&&this.resetStates(u,r);const c=this.returnSequences?A:l;return this.returnState?[c].concat(u):c}))}getInitialState(e){return mc((()=>{let t=lm(e.shape);return t=xf(t,[1,2]),t=nB(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?lB(t,[1,e]):t)):this.cell.stateSize>1?[lB(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===BN.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t,n={}){const r=Fk(t.cell,n);return new e(Object.assign(t,{cell:r}))}}BN.className="RNN",Oh(BN);class kN extends ZB{}class CN extends kN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Nx(this.units,"units"),this.activation=VC(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=OB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=OB(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=OB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=XC(e.kernelRegularizer),this.recurrentRegularizer=XC(e.recurrentRegularizer),this.biasRegularizer=XC(e.biasRegularizer),this.kernelConstraint=yk(e.kernelConstraint),this.recurrentConstraint=yk(e.recurrentConstraint),this.biasConstraint=yk(e.biasConstraint),this.dropout=Xx([1,Jx([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Xx([1,Jx([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=HB(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return mc((()=>{if(2!==e.length)throw new ix(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let a;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=LN({ones:()=>bm(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=LN({ones:()=>bm(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;a=uB(null!=s?Ih(e,s):e,this.kernel.read()),null!=this.bias&&(a=pB(a,this.bias.read())),null!=i&&(n=Ih(n,i));let o=Ch(a,uB(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:HC(this.activation),useBias:this.useBias,kernelInitializer:QB(this.kernelInitializer),recurrentInitializer:QB(this.recurrentInitializer),biasInitializer:QB(this.biasInitializer),kernelRegularizer:jC(this.kernelRegularizer),recurrentRegularizer:jC(this.recurrentRegularizer),biasRegularizer:jC(this.biasRegularizer),activityRegularizer:jC(this.activityRegularizer),kernelConstraint:mk(this.kernelConstraint),recurrentConstraint:mk(this.recurrentConstraint),biasConstraint:mk(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}CN.className="SimpleRNNCell",Oh(CN);class NN extends BN{constructor(e){e.cell=new CN(e),super(e)}call(e,t){return mc((()=>{null!=this.cell.dropoutMask&&(gc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(gc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}static fromConfig(e,t){return new e(t)}}NN.className="SimpleRNN",Oh(NN);class SN extends kN{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ix("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Nx(this.units,"units"),this.activation=VC(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=VC(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=OB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=OB(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=OB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=XC(e.kernelRegularizer),this.recurrentRegularizer=XC(e.recurrentRegularizer),this.biasRegularizer=XC(e.biasRegularizer),this.kernelConstraint=yk(e.kernelConstraint),this.recurrentConstraint=yk(e.recurrentConstraint),this.biasConstraint=yk(e.biasConstraint),this.dropout=Xx([1,Jx([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Xx([1,Jx([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=HB(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return mc((()=>{if(2!==e.length)throw new ix(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=LN({ones:()=>bm(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=LN({ones:()=>bm(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=this.recurrentDropoutMask;let i,o,l;0<this.dropout&&this.dropout<1&&(e=Ih(e,a[0]));let A=uB(e,this.kernel.read());this.useBias&&(A=pB(A,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Ih(r,s[0]));const u=this.recurrentKernel.read(),[c,h]=fg(u,[2*this.units,this.units],u.rank-1),d=uB(r,c),[p,f,m]=fg(A,3,A.rank-1),[g,y]=fg(d,2,d.rank-1);i=this.recurrentActivation.apply(Ch(p,g)),o=this.recurrentActivation.apply(Ch(f,y));const b=uB(Ih(o,r),h);l=this.activation.apply(Ch(m,b));const w=Ch(Ih(i,r),Ih(Ch(1,Kf(i)),l));return[w,w]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:HC(this.activation),recurrentActivation:HC(this.recurrentActivation),useBias:this.useBias,kernelInitializer:QB(this.kernelInitializer),recurrentInitializer:QB(this.recurrentInitializer),biasInitializer:QB(this.biasInitializer),kernelRegularizer:jC(this.kernelRegularizer),recurrentRegularizer:jC(this.recurrentRegularizer),biasRegularizer:jC(this.biasRegularizer),activityRegularizer:jC(this.activityRegularizer),kernelConstraint:mk(this.kernelConstraint),recurrentConstraint:mk(this.recurrentConstraint),biasConstraint:mk(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}SN.className="GRUCell",Oh(SN);class IN extends BN{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new SN(e),super(e)}call(e,t){return mc((()=>{null!=this.cell.dropoutMask&&(gc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(gc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}IN.className="GRU",Oh(IN);class EN extends kN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Nx(this.units,"units"),this.activation=VC(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=VC(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=OB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=OB(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=OB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=XC(e.kernelRegularizer),this.recurrentRegularizer=XC(e.recurrentRegularizer),this.biasRegularizer=XC(e.biasRegularizer),this.kernelConstraint=yk(e.kernelConstraint),this.recurrentConstraint=yk(e.recurrentConstraint),this.biasConstraint=yk(e.biasConstraint),this.dropout=Xx([1,Jx([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Xx([1,Jx([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=HB(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends bB{apply(t,r){const a=e.apply([n]),s=(new vB).apply([n]),i=e.apply([2*n]);return oB(oB(a,s),i)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return mc((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new ix(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=LN({ones:()=>bm(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=LN({ones:()=>bm(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;let o,l,A,u;0<this.dropout&&this.dropout<1&&(e=Ih(e,s[0]));let c=uB(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Ih(r,i[0])),c=Ch(c,uB(r,this.recurrentKernel.read())),this.useBias&&(c=pB(c,this.bias.read()));const[h,d,p,f]=fg(c,4,c.rank-1);o=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(d),A=Ch(Ih(l,a),Ih(o,this.activation.apply(p))),u=this.recurrentActivation.apply(f);const m=Ih(u,this.activation.apply(A));return[m,m,A]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:HC(this.activation),recurrentActivation:HC(this.recurrentActivation),useBias:this.useBias,kernelInitializer:QB(this.kernelInitializer),recurrentInitializer:QB(this.recurrentInitializer),biasInitializer:QB(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:jC(this.kernelRegularizer),recurrentRegularizer:jC(this.recurrentRegularizer),biasRegularizer:jC(this.biasRegularizer),activityRegularizer:jC(this.activityRegularizer),kernelConstraint:mk(this.kernelConstraint),recurrentConstraint:mk(this.recurrentConstraint),biasConstraint:mk(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}EN.className="LSTMCell",Oh(EN);class FN extends BN{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new EN(e),super(e)}call(e,t){return mc((()=>{null!=this.cell.dropoutMask&&(gc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(gc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}FN.className="LSTM",Oh(FN);class TN extends kN{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return mc((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const a=[];let s;for(let i=0;i<this.cells.length;++i){const o=this.cells[i];n=r[i],s=0===i?[e[0]].concat(n):[s[0]].concat(n),s=o.call(s,t),a.push(s.slice(1))}n=[];for(const e of a.slice().reverse())n.push(...e);return[s[0]].concat(n)}))}build(e){let t;$B(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{zx(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t,n={}){const r=[];for(const e of t.cells)r.push(Fk(e,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return KB(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,a=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],a[e]])}GB(t)}}function LN(e){const{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:s}=e,i=()=>null!=s?s(t(),n):fB(t(),n),o=()=>mB(i,t,r);return!a||a<=1?yc(o().clone()):Array(a).fill(void 0).map(o).map((e=>yc(e.clone())))}TN.className="StackedRNNCells",Oh(TN);class UN extends BN{constructor(e){if(e.unroll)throw new ox("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new ox("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new jB({ndim:5})]}call(e,t){return mc((()=>{if(null!=this.cell.dropoutMask&&(gc(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(gc(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new ix("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return mc((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=lm([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(a):[a]}))}resetStates(e,t=!1){mc((()=>{if(!this.stateful)throw new ax("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new ix("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>lm(a))):this.states_=[lm(a)];else if(null==e)gc(this.states_),null!=this.keptStates&&(gc(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>lm(a))):this.states_[0]=lm(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ix(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):gc(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=a;if(!js(n.shape,r))throw new ix(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>yc(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:s,dilationRate:i}=this.cell,o="channelsFirst"===t,l=e[o?3:2],A=e[o?4:3],u=aN(l,r[0],a,s[0],i[0]),c=aN(A,r[1],a,s[1],i[1]);return[...e.slice(0,2),...o?[n,u,c]:[u,c,n]]}}UN.className="ConvRNN2D";class _N extends EN{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:s,dilationRate:i}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Nx(this.filters,"filters"),this.kernelSize=rN(n,2,"kernelSize"),this.kernelSize.forEach((e=>Nx(e,"kernelSize"))),this.strides=rN(r||1,2,"strides"),this.strides.forEach((e=>Nx(e,"strides"))),this.padding=a||"valid",Mx(this.padding),this.dataFormat=s||"channelsLast",$x(this.dataFormat),this.dilationRate=rN(i||1,2,"dilationRate"),this.dilationRate.forEach((e=>Nx(e,"dilationRate")))}build(e){var t;e=HB(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new ix(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends bB{apply(e,t){return iB([n.apply([r]),Am([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return mc((()=>{if(3!==e.length)throw new ix(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],a=e[1],s=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=LN({ones:()=>bm(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=(e,t,n)=>t&&t[n]?Ih(t[n],e):e;let l=o(r,i,0),A=o(r,i,1),u=o(r,i,2),c=o(r,i,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=LN({ones:()=>bm(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const h=this.recurrentDropoutMask;let d=o(a,h,0),p=o(a,h,1),f=o(a,h,2),m=o(a,h,3);const[g,y,b,w]=fg(this.kernel.read(),4,3),[v,x,B,k]=this.useBias?fg(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,g,v,this.padding),A=this.inputConv(A,y,x,this.padding),u=this.inputConv(u,b,B,this.padding),c=this.inputConv(c,w,k,this.padding);const[C,N,S,I]=fg(this.recurrentKernel.read(),4,3);d=this.recurrentConv(d,C),p=this.recurrentConv(p,N),f=this.recurrentConv(f,S),m=this.recurrentConv(m,I);const E=this.recurrentActivation.apply(Ch(l,d)),F=this.recurrentActivation.apply(Ch(A,p)),T=Ch(Ih(F,s),Ih(E,this.activation.apply(Ch(u,f)))),L=Ih(this.recurrentActivation.apply(Ch(c,m)),this.activation.apply(T));return[L,L,T]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const a=Pp(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?pB(a,n,this.dataFormat):a}recurrentConv(e,t){return Pp(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}_N.className="ConvLSTM2DCell",Oh(_N);class RN extends UN{constructor(e){const t=new _N(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}RN.className="ConvLSTM2D",Oh(RN);class DN extends ZB{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return mc((()=>{this.invokeCallHook(e,t);const n=PB(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return mB((()=>fB(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}DN.className="Dropout",Oh(DN);class QN extends DN{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}QN.className="SpatialDropout1D",Oh(QN);class ON extends ZB{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Nx(this.units,"units"),this.activation=VC(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=OB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=OB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=yk(e.kernelConstraint),this.biasConstraint=yk(e.biasConstraint),this.kernelRegularizer=XC(e.kernelRegularizer),this.biasRegularizer=XC(e.biasRegularizer),this.activityRegularizer=XC(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=HB(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=HB(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return mc((()=>{this.invokeCallHook(e,t);const n=PB(e),r=Ix(this.activation.getClassName());let a;return null!=r?a=uB(n,this.kernel.read(),r,this.bias?this.bias.read():null):(a=uB(n,this.kernel.read()),null!=this.bias&&(a=pB(a,this.bias.read())),null!=this.activation&&(a=this.activation.apply(a))),a}))}getConfig(){const e={units:this.units,activation:HC(this.activation),useBias:this.useBias,kernelInitializer:QB(this.kernelInitializer),biasInitializer:QB(this.biasInitializer),kernelRegularizer:jC(this.kernelRegularizer),biasRegularizer:jC(this.biasRegularizer),activityRegularizer:jC(this.activityRegularizer),kernelConstraint:mk(this.kernelConstraint),biasConstraint:mk(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}ON.className="Dense",Oh(ON);class $N extends ZB{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=HB(e);for(const t of e.slice(1))if(null==t)throw new ix(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],qx(e,1)]}call(e,t){return mc((()=>{this.invokeCallHook(e,t);let n=PB(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=Hg(n,e)}return function(e){if(e.rank<=1)throw new ix(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],qx(e.shape,1)];return gp(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}$N.className="Flatten",Oh($N);class MN extends ZB{constructor(e){super(e),this.supportsMasking=!0,this.activation=VC(e.activation)}call(e,t){return mc((()=>{this.invokeCallHook(e,t);const n=PB(e);return this.activation.apply(n)}))}getConfig(){const e={activation:HC(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}MN.className="Activation",Oh(MN);class PN extends ZB{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return mc((()=>function(e,t){return mc((()=>{if(2!==e.shape.length)throw new ix(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return lB(nB(e,1),[1,t,1])}))}(e=PB(e),this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}PN.className="RepeatVector",Oh(PN);class HN extends ZB{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let a=1,s=null;for(let e=0;e<r.length;++e){const t=r[e];if(this.isUnknown(t)){if(null!==s)throw new ix("Can only specifiy one unknown dimension.");s=e}else a*=t}const i=qx(e);if(null!==s){if(0===a||i%a!==0)throw new ix(n);r[s]=i/a}else if(i!==a)throw new ix(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return mc((()=>{this.invokeCallHook(e,t);const n=PB(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return gp(n,a)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}HN.className="Reshape",Oh(HN);class zN extends ZB{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=Yx(1,e.dims.length+1);if(!js(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new jB({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=HB(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return Hg(PB(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}zN.className="Permute",Oh(zN);class VN extends ZB{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=PB(e);return jd(gm(n,this.maskValue),-1)}call(e,t){return mc((()=>{this.invokeCallHook(e,t);const n=PB(e),r=jd(gm(n,this.maskValue),-1,!0);return Ih(n,xh(r,n.dtype))}))}}VN.className="Masking",Oh(VN);class WN extends ZB{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(px(e.inputLength))}this.inputDim=e.inputDim,Nx(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Nx(this.outputDim,"outputDim"),this.embeddingsInitializer=OB(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=XC(e.embeddingsRegularizer),this.activityRegularizer=XC(e.activityRegularizer),this.embeddingsConstraint=yk(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return mc((()=>this.maskZero?(e=PB(e),gm(e,Th(e))):null))}computeOutputShape(e){if(e=HB(e),null==this.inputLength)return[...e,this.outputDim];const t=px(this.inputLength);if(t.length!==e.length-1)throw new ix(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const a=t[r],s=e[r+1];if(null!=a&&null!=s&&a!==s)throw new ix(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==a&&(t[n]=s),n++}}return[e[0],...t,this.outputDim]}call(e,t){return mc((()=>{this.invokeCallHook(e,t);let n=PB(e);"int32"!==n.dtype&&(n=tB(n,"int32"));const r=cB(this.embeddings.read(),gp(n,[n.size]));return gp(r,HB(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:QB(this.embeddingsInitializer),embeddingsRegularizer:jC(this.embeddingsRegularizer),activityRegularizer:jC(this.activityRegularizer),embeddingsConstraint:mk(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}WN.className="Embedding",Oh(WN);class KN extends ZB{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new ox}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const a=e[e.length-t.length+r],s=t[r];if(null==a||null==s||a<0||s<0)n.push(null);else if(1===a)n.push(s);else if(1===s)n.push(a);else{if(a!==s)throw new ix("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[HB(e)]),e.length<2)throw new ix(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const n of e)null!=n&&null!==n[0]&&t.push(n[0]);if(t=xx(t),t.length>1)throw new ix(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){const r=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===xx(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return mc((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=Jx(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=nB(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const r of e){const e=r.rank;if(null==e){const e=r.shape,a=e[0],s=e.slice(1).concat([a]);let i=gp(r,[a].concat(qx(e.slice(1))));i=Hg(i,[1,0]),i=gp(i,s),t.push(i),n=!0}else if(e>1){const a=Yx(1,e).concat([0]);t.push(Hg(r,a)),n=!0}else t.push(r)}let r=this.mergeFunction(t);const a=r.rank;if(n)if(null==a){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=gp(Hg(gp(r,[-1,t]),[1,0]),n)}else if(a>1){const e=[a-1].concat(Yx(0,a-1));r=Hg(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let n=[];for(const t of e)null!=t&&null!==t[0]&&n.push(t[0]);return n=xx(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return mc((()=>{if(null==t)return null;if(!Array.isArray(t))throw new ix("`mask` should be an Array");if(!Array.isArray(e))throw new ix("`inputs` should be an Array");if(t.length!==e.length)throw new ix(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;t=t.map((e=>null==e?e:Sf(e,0)));let n=t[0];for(let e=1;e<t.length-1;++e)n=Jf(n,t[e]);return n}))}}class GN extends KN{constructor(e){super(e)}mergeFunction(e){return mc((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Ch(t,e[n]);return t}))}}GN.className="Add",Oh(GN);class jN extends KN{constructor(e){super(e)}mergeFunction(e){return mc((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Ih(t,e[n]);return t}))}}jN.className="Multiply",Oh(jN);class qN extends KN{constructor(e){super(e)}mergeFunction(e){return mc((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Ch(t,e[n]);return Ih(1/e.length,t)}))}}qN.className="Average",Oh(qN);class XN extends KN{constructor(e){super(e)}mergeFunction(e){return mc((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Xh(t,e[n]);return t}))}}XN.className="Maximum",Oh(XN);class JN extends KN{constructor(e){super(e)}mergeFunction(e){return mc((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=cm(t,e[n]);return t}))}}JN.className="Minimum",Oh(JN);class YN extends KN{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new ix("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const n of e)if(null!=n){t=!1;break}if(t)return;const n=[];for(let t=0;t<e.length;++t){const r=e[t].slice();r.splice(this.axis,1);let a=!1;for(const e of n)if(js(e,r)){a=!0;break}a||n.push(r)}if(n.length>1)throw new ix("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return mc((()=>iB(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new ix("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const e of t.slice(1)){if(null==n[r]||null==e[r]){n[r]=null;break}n[r]+=e[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new ix("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ix("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new ix(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return mc((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let n=0;n<e.length;++n)null==t[n]?r.push(xh(bm(e[n]),"bool")):t[n].rank<e[n].rank?r.push(Sf(t[n],-1)):r.push(t[n]);const a=wp(r,this.axis);return Gd(a,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function ZN(e,t){for(;e<0;)e+=t;return e}YN.className="Concatenate",Oh(YN);class eS extends KN{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Vs(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new ox("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new ix(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new ix(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>ZN(t,e[n].shape.length))):[ZN(this.axes,n.shape.length),ZN(this.axes,r.shape.length)],this.normalize&&(n=Tk(n,t[0]),r=Tk(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new ox("batchDot is not implemented for tensors of 4D or higher rank yet");if(Vs(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),Vs(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new ox("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);const s=n;return mc((()=>{let n,i;if(r>a){n=r-a;const e=[];for(let t=0;t<n;++t)e.push(1);t=gp(t,t.shape.concat(e))}else if(a>r){n=a-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=gp(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=s[0]===s[1]?xf(Ih(e,t),s[0]):xf(Ih(Hg(e,[1,0]),t),s[1]);else{const n=s[0]!==e.shape.length-1,r=s[1]===t.shape.length-1;i=vp(e,t,n,r)}if(n>0){let e;e=r>a?r+a-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);i=yg(i,t)}return 1===i.shape.length&&(i=Sf(i,1)),i}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[ZN(this.axes,e.length),ZN(this.axes,t.length)],n}computeOutputShape(e){Vs(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new ox("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}eS.className="Dot",Oh(eS);class tS extends ZB{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return mc((()=>{this.invokeCallHook(e,t);const n=PB(e);return mB((()=>Ch(AB(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}tS.className="GaussianNoise",Oh(tS);class nS extends ZB{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return mc((()=>{this.invokeCallHook(e,t);const n=PB(e);return this.rate>0&&this.rate<1?mB((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return Ih(n,AB(n.shape,1,e))}),(()=>n),t.training||!1):n}))}}nS.className="GaussianDropout",Oh(nS);class rS extends ZB{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||PB(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return mc((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=PB(e),r=-1.7580993408473766;let a=_f(Pm(n),this.rate);a=tB(a,"float32");const s=((1-this.rate)*(1+this.rate*r**2))**-.5,i=-s*r*this.rate,o=Ch(Ih(t,a),Ih(Ch(a,-1),r));return Ch(Ih(o,s),i)};return mB(r,(()=>PB(e)),t.training||!1)}return e}))}}function aS(e,t,n,r,a,s=.001){let i;if(2===e.rank)i=Ip(e,t,n,r,a,s);else if(3===e.rank)i=Ep(e,t,n,r,a,s);else{if(4!==e.rank)throw new ox(`batchNormalization is not implemented for array of rank ${e.rank} yet`);i=Fp(e,t,n,r,a,s)}return i}rS.className="AlphaDropout",Oh(rS);class sS extends ZB{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=OB(e.betaInitializer||"zeros"),this.gammaInitializer=OB(e.gammaInitializer||"ones"),this.movingMeanInitializer=OB(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=OB(e.movingVarianceInitializer||"ones"),this.betaConstraint=yk(e.betaConstraint),this.gammaConstraint=yk(e.gammaConstraint),this.betaRegularizer=XC(e.betaRegularizer),this.gammaRegularizer=XC(e.gammaRegularizer)}build(e){e=HB(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new ix(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new jB({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return mc((()=>{const n=null!=t.training&&t.training,r=PB(e),a=r.shape,s=a.length,i=Yx(0,s),o=this.axis>=0?this.axis:this.axis+s;i.splice(o,1);const l=ux(1,s);l[o]=a[o];const A=i.slice();A.sort();const u=!js(A,Yx(0,s).slice(0,s-1));if(!n)return(()=>{if(u){const e=gp(this.movingMean.read(),l),t=gp(this.movingVariance.read(),l),n=this.center?gp(this.beta.read(),l):null,a=this.scale?gp(this.gamma.read(),l):null;return aS(r,e,t,n,a,this.epsilon)}return aS(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[c,h,d]=function(e,t,n,r,a=.001){return js(r.slice().sort(),Yx(0,e.rank-1))?function(e,t,n,r,a=.001){return mc((()=>{const s=pm(e,r),i=s.mean,o=s.variance;return[aS(e,i,o,n,t,a),i,o]}))}(e,t,n,r,a):function(e,t,n,r,a=.001){return mc((()=>{const s=pm(e,r),i=s.mean,o=s.variance,l=[];for(const t of Yx(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const A=gp(i,l),u=gp(o,l),c=null==t?null:gp(t,l),h=null==n?null:gp(n,l);return[aS(e,A,u,h,c,a),i,o]}))}(e,t,n,r,a)}(r,this.gamma.read(),this.beta.read(),i,this.epsilon),p=(e,t,n)=>{mc((()=>{const r=1-n,a=e.read(),s=Ih(Vh(a,t),r);e.write(Vh(a,s))}))};return(()=>{p(this.movingMean,h,this.momentum),p(this.movingVariance,d,this.momentum)})(),c}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:QB(this.betaInitializer),gammaInitializer:QB(this.gammaInitializer),movingMeanInitializer:QB(this.movingMeanInitializer),movingVarianceInitializer:QB(this.movingVarianceInitializer),betaRegularizer:jC(this.betaRegularizer),gammaRegularizer:jC(this.gammaRegularizer),betaConstraint:mk(this.betaConstraint),gammaConstraint:mk(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}sS.className="BatchNormalization",Oh(sS);class iS extends ZB{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=OB(e.betaInitializer||"zeros"),this.gammaInitializer=OB(e.gammaInitializer||"ones"),this.betaRegularizer=XC(e.betaRegularizer),this.gammaRegularizer=XC(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=HB(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(const e of this.axis)if(e<0||e>=t)throw new Error(`Invalid axis: ${e}`);if(this.axis.length!==xx(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t])),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=PB(e),r=n.shape,a=r.length;return mc((()=>{let{mean:e,variance:t}=pm(n,this.axis,!0);const s=ux(1,a);for(const e of this.axis)s[e]=r[e];const i=e=>null!=e&&e.shape.length!==a?gp(e,s):e;let o=this.scale?i(this.gamma.read()):null,l=this.center?i(this.beta.read()):null;const A=[],u=[];for(let e=0;e<a;++e)-1!==this.axis.indexOf(e)?(A.push(r[e]),u.push(1)):(A.push(1),u.push(r[e]));return e=Ef(e,A),t=Ef(t,A),null!=o&&(o=Ef(o,u)),null!=l&&(l=Ef(l,u)),aS(n,e,t,l,o,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:QB(this.betaInitializer),gammaInitializer:QB(this.gammaInitializer),betaRegularizer:jC(this.betaRegularizer),gammaRegularizer:jC(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}iS.className="LayerNormalization",Oh(iS);class oS extends ZB{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new ix(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new ix(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new ix(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new jB({ndim:4})]}computeOutputShape(e){let t,n;return e=HB(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return mc((()=>function(e,t,n){return mc((()=>{if(4!==e.rank)throw new ix(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new ix("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new ix(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],vm(e,r)}))}(PB(e),this.padding,this.dataFormat)))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function lS(e,t,n,r,a,s){return mc((()=>{let i;$x(a),Px(s),Mx(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=iN(e,a);const o="same"===r?"same":"valid";return i="max"===s?am(e,t,n,o):yp(e,t,n,o),"channelsFirst"===a&&(i=Hg(i,[0,3,1,2])),i}))}function AS(e,t,n,r,a,s){return mc((()=>{let i;$x(a),Px(s),Mx(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==s&&(s="max"),e=oN(e,a);const o="same"===r?"same":"valid";return i="max"===s?sm(e,t,n,o):bp(e,t,n,o),"channelsFirst"===a&&(i=Hg(i,[0,4,1,2,3])),i}))}oS.className="ZeroPadding2D",Oh(oS);class uS extends ZB{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new ix(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(Nx(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new ix(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}Nx(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,Mx(this.padding),this.inputSpec=[new jB({ndim:3})]}computeOutputShape(e){const t=aN((e=HB(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return mc((()=>{this.invokeCallHook(e,t),e=nB(PB(e),2);const n=this.poolingFunction(PB(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return yg(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class cS extends uS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return $x(a),Mx(r),lS(e,t,n,r,a,"max")}}cS.className="MaxPooling1D",Oh(cS);class hS extends uS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return $x(a),Mx(r),lS(e,t,n,r,a,"avg")}}hS.className="AveragePooling1D",Oh(hS);class dS extends ZB{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new ix(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Nx(this.poolSize,"poolSize"),Nx(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,$x(this.dataFormat),Mx(this.padding),this.inputSpec=[new jB({ndim:4})]}computeOutputShape(e){e=HB(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=aN(t,this.poolSize[0],this.padding,this.strides[0]),n=aN(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return mc((()=>(this.invokeCallHook(e,t),this.poolingFunction(PB(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class pS extends dS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return $x(a),Mx(r),lS(e,t,n,r,a,"max")}}pS.className="MaxPooling2D",Oh(pS);class fS extends dS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return $x(a),Mx(r),lS(e,t,n,r,a,"avg")}}fS.className="AveragePooling2D",Oh(fS);class mS extends ZB{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new ix(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Nx(this.poolSize,"poolSize"),Nx(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,$x(this.dataFormat),Mx(this.padding),this.inputSpec=[new jB({ndim:5})]}computeOutputShape(e){e=HB(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=aN(t,this.poolSize[0],this.padding,this.strides[0]),n=aN(n,this.poolSize[1],this.padding,this.strides[1]),r=aN(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return mc((()=>(this.invokeCallHook(e,t),this.poolingFunction(PB(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class gS extends mS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return $x(a),Mx(r),AS(e,t,n,r,a,"max")}}gS.className="MaxPooling3D",Oh(gS);class yS extends mS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return $x(a),Mx(r),AS(e,t,n,r,a,"avg")}}yS.className="AveragePooling3D",Oh(yS);class bS extends ZB{constructor(e){super(e),this.inputSpec=[new jB({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new ox}}class wS extends bS{constructor(e){super(e||{})}call(e,t){return mc((()=>{const t=PB(e);return om(t,1)}))}}wS.className="GlobalAveragePooling1D",Oh(wS);class vS extends bS{constructor(e){super(e||{})}call(e,t){return mc((()=>{const t=PB(e);return wf(t,1)}))}}vS.className="GlobalMaxPooling1D",Oh(vS);class xS extends ZB{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,$x(this.dataFormat),this.inputSpec=[new jB({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new ox}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class BS extends xS{call(e,t){return mc((()=>{const t=PB(e);return"channelsLast"===this.dataFormat?om(t,[1,2]):om(t,[2,3])}))}}BS.className="GlobalAveragePooling2D",Oh(BS);class kS extends xS{call(e,t){return mc((()=>{const t=PB(e);return"channelsLast"===this.dataFormat?wf(t,[1,2]):wf(t,[2,3])}))}}kS.className="GlobalMaxPooling2D",Oh(kS);class CS extends ZB{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){const r=Fk(t.layer,n);delete t.layer;const a={layer:r};return Object.assign(a,t),new e(a)}}class NS extends CS{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=HB(e)).length<3)throw new ix(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=HB(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return mc((()=>xN(((e,n)=>[PB(this.layer.call(e,t)),[]]),e=PB(e),[],!1,null,null,!1,!0)[1]))}}NS.className="TimeDistributed",Oh(NS);class SS extends CS{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=Fk(n),t.goBackwards=!0!==t.goBackwards;const r={};var a;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=Fk(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,a=this.mergeMode,kx(Qx,"BidirectionalMergeMode",a),e.weights)throw new ox("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):dx(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const a=vN(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const s=[],i=[];if(null!=n){const e=n.length;if(e%2>0)throw new ix("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,s.push(...n);const r=n.map((e=>new jB({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),i.push(...r)}if(null!=r)throw new ox("Support for constants in Bidirectional layers is not implemented yet.");const o=s[0]instanceof qB;for(const e of s)if(e instanceof qB!==o)throw new ix("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){const n=[e].concat(s),r=this.inputSpec.concat(i),a=this.inputSpec;this.inputSpec=r;const o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return mc((()=>{const n=t.initialState;let r,a,s,i;if(null==n)r=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const s=n.slice(0,n.length/2),i=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:s})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(r)&&(s=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),this.returnSequences&&(a=jm(a,1)),"concat"===this.mergeMode?i=iB([r,a]):"sum"===this.mergeMode?i=Ch(r,a):"ave"===this.mergeMode?i=Ih(.5,Ch(r,a)):"mul"===this.mergeMode?i=Ih(r,a):null==this.mergeMode&&(i=[r,a]),this.returnState?null==this.mergeMode?i.concat(s):[i].concat(s):i}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){zx(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),zx(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=Fk(t.layer);if(delete t.layer,null!=t.numConstants)throw new ox("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}SS.className="Bidirectional",Oh(SS);class IS extends ZB{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return mc((()=>("float32"!==(e=PB(e)).dtype&&(e=tB(e,"float32")),Ch(Ih(e,this.scale),this.offset))))}}IS.className="Rescaling",Oh(IS);const{resizeBilinear:ES,cropAndResize:FS}=eb;class TS extends ZB{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,a,s,i,o){return mc((()=>{let l,A=!1;const u=[t/s,n/i,(r+t)/s,(a+n)/i],c=[];3===e.rank?(A=!0,l=bg([e])):l=e;for(let e=0;e<l.shape[0];e++)c.push(u);const h=cc(c,[c.length,4]),d=zm(0,c.length,1,"int32"),p=FS(l,h,d,[r,a],"nearest");return tB(A?PB(Dg(p)):p,o)}))}upsize(e,t,n,r){return mc((()=>tB(ES(e,[t,n]),r)))}call(e,t){return mc((()=>{const t=PB(e),n=t.dtype,r=t.shape,a=r[r.length-3],s=r[r.length-2];let i=0;a!==this.height&&(i=Math.floor((a-this.height)/2));let o=0;return s!==this.width&&(o=Math.floor((s-this.width)/2),0===o&&(o=1)),i>=0&&o>=0?this.centerCrop(t,i,o,this.height,this.width,a,s,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=HB(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}TS.className="CenterCrop",Oh(TS);class LS extends ZB{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=HB(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return mc((()=>{let n;if("int32"!==(e=PB(e)).dtype&&(e=tB(e,"int32")),void 0!==t.countWeights){if("count"!==this.outputMode)throw new ix(`countWeights is not used when outputMode !== count.\n              Received countWeights=${t.countWeights}`);n=PB(t.countWeights)}const r=wf(e),a=vf(e),s=Uf(this.numTokens,r).bufferSync().get(0),i=_f(a,0).bufferSync().get(0);if(!s||!i)throw new ix(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(e,t,n,r){let a=PB(e);if("int32"!==a.dtype&&(a=tB(a,"int32")),"int"===t)return a;const s=a.shape;if(0===a.rank&&(a=Sf(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=Sf(a,-1)),a.rank>2)throw new ix(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${s} which would result in output rank ${a.rank}.`);const i=["multiHot","oneHot"].includes(t);let o;if(o=Yp(a,void 0!==r&&"count"===t?r:[],n,i),"tfIdf"!==t)return o;if(r)return Ih(o,r);throw new ix("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}LS.className="CategoryEncoding",Oh(LS);const US=new Set(["bilinear","nearest"]);class _S extends ZB{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!US.has(e.interpolation))throw new ix(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=HB(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return mc((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return eb.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return eb.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...US]} are supported`)}))}}_S.className="Resizing",Oh(_S);class RS{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}RS.className="RandomSeed";class DS extends ZB{constructor(e){super(e),this.randomGenerator=new RS(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}DS.className="BaseRandomLayer";const QS=new Set(["bilinear","nearest"]);class OS extends DS{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new ix(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new ix(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ix(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(n){if(!QS.has(n))throw new ix(`Invalid interpolation parameter: ${n} is not implemented`);this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=HB(e))[2];return[this.imgHeight,-1,t]}call(e,t){return mc((()=>{const t=PB(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=Pm([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const a=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return eb.resizeBilinear(e,a);case"nearest":return eb.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...QS]} are supported`)}}))}}var $S,MS;OS.className="RandomWidth",Oh(OS),ki().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}($S||($S={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(MS||(MS={}));const PS={};function HS(e){return PS[e]}function zS(e,t,n,r,a){const s=t.inputParams[e];if(s&&void 0!==s.inputIndexStart){const e=s.inputIndexStart,i=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?e+1:s.inputIndexEnd,o=e<0?t.inputNames.length+e:e;if("tensor"===s.type)return VS(t.inputNames[o],n,r,a);if("tensors"===s.type){const s=t.inputs.slice(e,i),o=t.inputNames.slice(e,i).filter(((e,t)=>{var n;return"NoOp"!==(null===(n=s[t])||void 0===n?void 0:n.op)}));return o.map((e=>VS(e,n,r,a)))}const l=VS(t.inputNames[o],n,r,a),A=l.dataSync();return"number"===s.type?A[0]:di(l.shape,A)}const i=t.attrParams[e];return i&&i.value}function VS(e,t,n,r){const[a,s]=jS(e,n);if(null!=r){const e=r.getHashTableHandleByName(a);if(null!=e)return e}const i=n.currentContextIds.find((e=>!!t[GS(a,e)]));return void 0!==i?t[GS(a,i)][s]:void 0}function WS(e,t,n){return t[GS(e,n.currentContextId)]}function KS(e,t){const[n,r,a]=jS(e,t);return[GS(n,t&&t.currentContextId),r,a]}function GS(e,t){return t?`${e}-${t}`:e}function jS(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let a;if(1===r.length)a=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;a=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,a),a}function qS(e,t,n){let r=zS("pad",e,t,n);if("explicit"===r){r=zS("explicitPaddings",e,t,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function XS(e){return e.kept?e:Bh(e)}const JS=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],YS=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ZS=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],eI=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],tI=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],nI=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],rI=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],aI=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],sI=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],iI=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],oI=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],lI=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],AI=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],uI=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],cI=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],hI=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],dI=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],pI=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],fI=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class mI{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[s,o,l,A,u,c,h,d,p,f,m,g,y,b,w,v,x,B,k].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e,t={}){const n=e.node,r=[],a=[],s=[],i=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):null!=t.input&&0!==t.input.length||s.push(e[t.name]),e)),{});let o=[];const l=[];let A={},u={};null!=t&&(A=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const c=Object.keys(i);c.forEach((e=>{const t=i[e];t.inputNames.forEach(((e,n)=>{const[r,,a]=KS(e),s=i[r];if(null!=s.outputs){const e=s.outputs.indexOf(a);if(-1!==e){const a=`${r}:${e}`;t.inputNames[n]=a}}t.inputs.push(s),s.children.push(t)}))})),0===Object.keys(u).length?c.forEach((e=>{const t=i[e];0===t.children.length&&l.push(t)})):Object.keys(u).forEach((e=>{const[t]=KS(e),n=i[t];null!=n&&(n.signatureKey=u[e],l.push(n))})),Object.keys(A).length>0?Object.keys(A).forEach((e=>{const[t]=KS(e),n=i[t];n&&(n.signatureKey=A[e],o.push(n))})):o=r;let h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const d={nodes:i,inputs:o,outputs:l,weights:a,placeholders:r,signature:t,functions:h};return s.length>0&&(d.initNodes=s),d}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=HS(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let a;switch(n.type){case"string":a=yI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=yI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":a=II(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=II(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":a=wI(e.attr,n.tfName,n.defaultValue||0),void 0===a&&n.tfDeprecatedName&&(a=wI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":a=SI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=SI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":a=bI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=bI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":a=FI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=FI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":a=NI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=NI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":a=EI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=EI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":a=BI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=BI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":a=kI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=kI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":a=xI(e.attr,n.tfName,n.defaultValue),void 0===a&&n.tfDeprecatedName&&(a=xI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:a,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const a=[],s=[];e.signature.inputArg.forEach((e=>{const[t]=KS(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:vI(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n})),Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[a,,s]=KS(e),i=r[a];if(null!=i.outputs){const e=i.outputs.indexOf(s);if(-1!==e){const r=`${a}:${e}`;t.inputNames[n]=r}}t.inputs.push(i),i.children.push(t)}))}));const i=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=KS(i[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,s.push(a))}));const o=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:s,weights:n,placeholders:[],signature:o}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function gI(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=ki().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function yI(e,t,n,r=!1){const a=e[t];return null!=a?gI(a.s,r):n}function bI(e,t,n){const r=e[t];return r?r.b:n}function wI(e,t,n){const r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function vI(e){switch("string"==typeof e&&(e=$S[e]),e){case $S.DT_FLOAT:case $S.DT_HALF:return"float32";case $S.DT_INT32:case $S.DT_INT64:case $S.DT_INT8:case $S.DT_UINT8:return"int32";case $S.DT_BOOL:return"bool";case $S.DT_DOUBLE:return"float32";case $S.DT_STRING:return"string";case $S.DT_COMPLEX64:case $S.DT_COMPLEX128:return"complex64";default:return null}}function xI(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function BI(e,t,n){const r=e[t];return r&&r.type?vI(r.type):n}function kI(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>vI(e))):n}function CI(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function NI(e,t,n){const r=e[t];return r&&r.shape?CI(r.shape):n}function SI(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):n}function II(e,t,n,r=!1){const a=e[t];return a&&a.list&&a.list.s?a.list.s.map((e=>gI(e,r))):n}function EI(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>CI(e))):n}function FI(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class TI{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return VS(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return VS(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return wI(this.node.rawAttrs,e,t);if(null!=n.s)return yI(this.node.rawAttrs,e,t);if(null!=n.b)return bI(this.node.rawAttrs,e,t);if(null!=n.shape)return NI(this.node.rawAttrs,e,t);if(null!=n.type)return BI(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return SI(this.node.rawAttrs,e,t);if(null!=n.list.s)return II(this.node.rawAttrs,e,t);if(null!=n.list.shape)return EI(this.node.rawAttrs,e,t);if(null!=n.list.b)return FI(this.node.rawAttrs,e,t);if(null!=n.list.type)return kI(this.node.rawAttrs,e,t)}return t}}function LI(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){Vs(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const a=e[r],s=t[r];Vs(a<0||s<0||a===s,(()=>n+` Shapes ${e} and ${t} must match`))}}}function UI(e){return"number"!=typeof e&&!e.some((e=>e<0))}function _I(e,t,n){let r=RI(e,n);const a=!UI(r);if(a&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&t.forEach((e=>{r=RI(e.shape,r)})),!UI(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function RI(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const a=e[r],s=t[r];if(a>=0&&s>=0&&a!==s)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:s}return n}class DI{constructor(e,t,n,r,a,s,i){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=s,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=Uh(0),yc(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),LI(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,yc(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return cc([],[0].concat(this.elementShape));const n=this.readMany(e);return LI(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),bg(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return cc([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const n=this.readMany(t);return LI(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),wp(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,Dg(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=0===n?0:t.size/n,s=[];mc((()=>{t=gp(t,[1,n,a]);for(let n=0;n<e.length;++n){const i=[0,0===n?0:r[n-1],0],o=[1,e[n],a];s[n]=gp(Bp(t,i,o),this.elementShape)}return s}));const i=[];for(let t=0;t<e.length;t++)i[t]=t;this.writeMany(i,s)}}class QI{get id(){return this.idTensor.id}constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);LI(t,e.shape,"TensorList shape mismatch: "),yc(e)})),this.idTensor=Uh(0),this.maxNumElements=r,yc(this.idTensor)}copy(){return new QI([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);LI(e,this.elementShape,"TensorList shape mismatch: ");const r=_I(this.elementShape,this.tensors,e);return mc((()=>{const e=this.tensors.map((e=>gp(e,r)));return bg(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=_I(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,LI(r.shape,e,"TensorList shape mismatch: "),gp(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(LI(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");yc(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new QI([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);LI(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=_I(this.elementShape,this.tensors,t);return gp(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);LI(this.elementShape,t.shape,"TensorList shape mismatch: "),yc(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);LI(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=_I(this.elementShape,this.tensors,n);return 0===e.length?cc([],[0].concat(r)):mc((()=>{const t=e.map((e=>gp(this.tensors[e],r)));return bg(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);LI(this.elementShape,t,"TensorList shape mismatch: ");const n=_I(this.elementShape,this.tensors,t);return 0===this.size()?cc([],[0].concat(n)):mc((()=>{const e=this.tensors.map((e=>gp(e,n)));return wp(e,0)}))}}function OI(e,t,n){const[r,a]=zS("fusedOps",e,t,n),s="biasadd"===r,i=!s,o="prelu"===a,l="fusedbatchnorm"===r,A=zS("numArgs",e,t,n);if(s){if(o&&2!==A)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&s&&1!==A)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=zS("strides",e,t,n),c=qS(e,t,n),h=zS("dataFormat",e,t,n).toUpperCase(),d=zS("dilations",e,t,n);let[p,f]=zS("args",e,t,n);return i&&(f=p,p=void 0),{stride:u,pad:c,dataFormat:h,dilations:d,biasArg:p,preluArg:f,activationFunc:a,leakyreluAlpha:zS("leakyreluAlpha",e,t,n)}}function $I(e,t,n){return{boxes:zS("boxes",e,t,n),scores:zS("scores",e,t,n),maxOutputSize:zS("maxOutputSize",e,t,n),iouThreshold:zS("iouThreshold",e,t,n),scoreThreshold:zS("scoreThreshold",e,t,n),softNmsSigma:zS("softNmsSigma",e,t,n)}}class MI{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Uh(0),this.tensorMap=new Map,yc(this.handle)}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Uh(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),mc((()=>{const e=Dg(t),r=n.length,a=e.length;Vs(r===a,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${a} elements.`));for(let t=0;t<r;t++){const r=n[t],a=e[t];yc(a),this.tensorMap.set(r,a)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return mc((()=>{const e=[];for(let r=0;r<n.length;r++){const a=n[r],s=this.findWithDefault(a,t);e.push(s)}return bg(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}function PI(e,t,n,r,a=mc){const s=((e,t,n)=>{switch(e.category){case"arithmetic":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(zS("a",e,t,n),zS("b",e,t,n))];case"AddN":return[r.addN(zS("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(zS("a",e,t,n),zS("b",e,t,n))];case"Mul":return[r.mul(zS("a",e,t,n),zS("b",e,t,n))];case"RealDiv":case"Div":return[r.div(zS("a",e,t,n),zS("b",e,t,n))];case"DivNoNan":return[r.divNoNan(zS("a",e,t,n),zS("b",e,t,n))];case"FloorDiv":return[r.floorDiv(zS("a",e,t,n),zS("b",e,t,n))];case"Sub":return[r.sub(zS("a",e,t,n),zS("b",e,t,n))];case"Minimum":return[r.minimum(zS("a",e,t,n),zS("b",e,t,n))];case"Maximum":return[r.maximum(zS("a",e,t,n),zS("b",e,t,n))];case"Pow":return[r.pow(zS("a",e,t,n),zS("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(zS("a",e,t,n),zS("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"basic_math":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(zS("x",e,t,n))];case"Acos":return[r.acos(zS("x",e,t,n))];case"Acosh":return[r.acosh(zS("x",e,t,n))];case"Asin":return[r.asin(zS("x",e,t,n))];case"Asinh":return[r.asinh(zS("x",e,t,n))];case"Atan":return[r.atan(zS("x",e,t,n))];case"Atan2":return[r.atan2(zS("x",e,t,n),zS("y",e,t,n))];case"Atanh":return[r.atanh(zS("x",e,t,n))];case"Ceil":return[r.ceil(zS("x",e,t,n))];case"Complex":return[r.complex(zS("real",e,t,n),zS("imag",e,t,n))];case"Cos":return[r.cos(zS("x",e,t,n))];case"Cosh":return[r.cosh(zS("x",e,t,n))];case"Elu":return[r.elu(zS("x",e,t,n))];case"Erf":return[r.erf(zS("x",e,t,n))];case"Exp":return[r.exp(zS("x",e,t,n))];case"Expm1":return[r.expm1(zS("x",e,t,n))];case"Floor":return[r.floor(zS("x",e,t,n))];case"Log":return[r.log(zS("x",e,t,n))];case"Log1p":return[r.log1p(zS("x",e,t,n))];case"Imag":return[r.imag(zS("x",e,t,n))];case"Neg":return[r.neg(zS("x",e,t,n))];case"Reciprocal":return[r.reciprocal(zS("x",e,t,n))];case"Real":return[r.real(zS("x",e,t,n))];case"Relu":return[r.relu(zS("x",e,t,n))];case"Round":return[r.round(zS("x",e,t,n))];case"Selu":return[r.selu(zS("x",e,t,n))];case"Sigmoid":return[r.sigmoid(zS("x",e,t,n))];case"Sin":return[r.sin(zS("x",e,t,n))];case"Sign":return[r.sign(zS("x",e,t,n))];case"Sinh":return[r.sinh(zS("x",e,t,n))];case"Softplus":return[r.softplus(zS("x",e,t,n))];case"Sqrt":return[r.sqrt(zS("x",e,t,n))];case"Square":return[r.square(zS("x",e,t,n))];case"Tanh":return[r.tanh(zS("x",e,t,n))];case"Tan":return[r.tan(zS("x",e,t,n))];case"ClipByValue":return[r.clipByValue(zS("x",e,t,n),zS("clipValueMin",e,t,n),zS("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(zS("x",e,t,n))];case"Rsqrt":return[r.rsqrt(VS(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(zS("x",e,t,n),zS("alpha",e,t,n))];case"Prelu":return[r.prelu(zS("x",e,t,n),zS("alpha",e,t,n))];case"IsNan":return[r.isNaN(VS(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(VS(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(VS(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"control":return(async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=zS("thenBranch",e,t,n),a=zS("elseBranch",e,t,n),s=zS("cond",e,t,n),i=zS("args",e,t,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=zS("body",e,t,n),a=zS("cond",e,t,n),s=zS("args",e,t,n),i=await n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap),o=s.map((e=>e.id));let l=await i[0].data();i.forEach((e=>{e.kept||-1!==o.indexOf(e.id)||e.dispose()}));let A=s;for(;l[0];){const e=A;A=await n.functionMap[r].executeFunctionAsync(A,n.tensorArrayMap,n.tensorListMap);const t=A.map((e=>e.id));e.forEach((e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const s=await n.functionMap[a].executeFunctionAsync(A,n.tensorArrayMap,n.tensorListMap);l=await s[0].data(),s.forEach((e=>{e.kept||-1!==o.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return A}case"LoopCond":return[XS(zS("pred",e,t,n))];case"Switch":{const r=zS("pred",e,t,n);let a=zS("data",e,t,n);return a.kept||(a=XS(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==VS(e,t,n)));return r?[XS(VS(r,t,n))]:void 0}case"Enter":{const r=zS("frameName",e,t,n),a=zS("tensor",e,t,n);return n.enterFrame(r),[XS(a)]}case"Exit":{const r=zS("tensor",e,t,n);return n.exitFrame(),[XS(r)]}case"NextIteration":{const r=zS("tensor",e,t,n);return n.nextIteration(),[XS(r)]}case"TensorArrayV3":{const r=zS("size",e,t,n),a=zS("dtype",e,t,n),s=zS("elementShape",e,t,n),i=zS("dynamicSize",e,t,n),o=zS("clearAfterRead",e,t,n),l=zS("identicalElementShapes",e,t,n),A=zS("name",e,t,n),u=new DI(A,a,r,s,l,i,o);return n.addTensorArray(u),[u.idTensor,Uh(1)]}case"TensorArrayWriteV3":{const r=zS("tensorArrayId",e,t,n),a=zS("index",e,t,n),s=zS("tensor",e,t,n),i=n.getTensorArray(r.id);return i.write(a,s),[i.idTensor]}case"TensorArrayReadV3":{const r=zS("tensorArrayId",e,t,n),a=zS("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{const r=zS("tensorArrayId",e,t,n),a=zS("indices",e,t,n),s=zS("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,s)]}case"TensorArrayScatterV3":{const r=zS("tensorArrayId",e,t,n),a=zS("indices",e,t,n),s=zS("tensor",e,t,n),i=n.getTensorArray(r.id);return i.scatter(a,s),[i.idTensor]}case"TensorArrayConcatV3":{const r=zS("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),s=zS("dtype",e,t,n);return[a.concat(s)]}case"TensorArraySplitV3":{const r=zS("tensorArrayId",e,t,n),a=zS("tensor",e,t,n),s=zS("lengths",e,t,n),i=n.getTensorArray(r.id);return i.split(s,a),[i.idTensor]}case"TensorArraySizeV3":{const r=zS("tensorArrayId",e,t,n);return[Uh(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=zS("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const r=zS("tensorListId",e,t,n),a=zS("index",e,t,n),s=zS("tensor",e,t,n),i=n.getTensorList(r.id);return i.setItem(a,s),[i.idTensor]}case"TensorListGetItem":{const r=zS("tensorListId",e,t,n),a=zS("index",e,t,n),s=zS("elementShape",e,t,n),i=zS("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,s,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=zS("indices",e,t,n),a=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw new Error(`Max index must be < array size (${a}  vs. ${r})`);const s=new QI([],n,e.dtype,r),i=Dg(e,0);return t.forEach(((e,t)=>{s.setItem(e,i[t])})),s}(zS("tensor",e,t,n),r,zS("elementShape",e,t,n),zS("numElements",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=zS("elementShape",e,t,n),a=zS("elementDType",e,t,n);let s;s="TensorListReserve"===e.op?"numElements":"maxNumElements";const i=zS(s,e,t,n),o=function(e,t,n,r){return new QI([],e,t,r)}(r,a,0,"TensorListReserve"===e.op?-1:i);return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{const r=zS("tensorListId",e,t,n),a=zS("indices",e,t,n),s=zS("elementShape",e,t,n),i=zS("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,i,s)]}case"TensorListStack":{const r=zS("tensorListId",e,t,n),a=zS("elementShape",e,t,n),s=zS("elementDType",e,t,n),i=zS("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,s,i)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);LI(e.shape.slice(1),t,"TensorList shape mismatch: ");const a=Dg(e);return new QI(a,t,r)}(zS("tensor",e,t,n),zS("elementShape",e,t,n),zS("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=zS("tensorListId",e,t,n),a=n.getTensorList(r.id),s=zS("dtype",e,t,n),i=zS("elementShape",e,t,n);return[a.concat(s,i)]}case"TensorListPushBack":{const r=zS("tensorListId",e,t,n),a=zS("tensor",e,t,n),s=n.getTensorList(r.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{const r=zS("tensorListId",e,t,n),a=zS("elementShape",e,t,n),s=zS("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,s)]}case"TensorListSplit":{const r=zS("tensor",e,t,n),a=zS("elementShape",e,t,n),s=function(e,t,n){let r=0;const a=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const s=RI(e.shape.slice(1),n),i=0===r?0:e.size/r,o=mc((()=>{const n=[];e=gp(e,[1,r,i]);for(let r=0;r<t.length;++r){const o=[0,0===r?0:a[r-1],0],l=[1,t[r],i];n[r]=gp(Bp(e,o,l),s)}return e.dispose(),n})),l=new QI([],n,e.dtype,t.length);for(let e=0;e<o.length;e++)l.setItem(e,o[e]);return l}(r,zS("lengths",e,t,n),a);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{const r=zS("tensorListId",e,t,n);return[Uh(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=zS("tensorListId",e,t,n),a=zS("size",e,t,n),s=n.getTensorList(r.id).resize(a);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"convolution":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"Conv1D":{const a=zS("stride",e,t,n),s=zS("pad",e,t,n),i=zS("dataFormat",e,t,n).toUpperCase(),o=zS("dilation",e,t,n);return[r.conv1d(zS("x",e,t,n),zS("filter",e,t,n),a,s,i,o)]}case"Conv2D":{const a=zS("strides",e,t,n),s=qS(e,t,n),i=zS("dataFormat",e,t,n).toUpperCase(),o=zS("dilations",e,t,n);return[r.conv2d(zS("x",e,t,n),zS("filter",e,t,n),[a[1],a[2]],s,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:a,pad:s,dataFormat:i,dilations:o,biasArg:l,preluArg:A,activationFunc:u,leakyreluAlpha:c}=OI(e,t,n);return[r.fused.conv2d({x:zS("x",e,t,n),filter:zS("filter",e,t,n),strides:[a[1],a[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:A,leakyreluAlpha:c})]}case"FusedDepthwiseConv2dNative":{const{stride:a,pad:s,dataFormat:i,dilations:o,biasArg:l,preluArg:A,activationFunc:u,leakyreluAlpha:c}=OI(e,t,n);return[r.fused.depthwiseConv2d({x:zS("x",e,t,n),filter:zS("filter",e,t,n),strides:[a[1],a[2]],pad:s,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:A,leakyreluAlpha:c})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const a=zS("outputShape",e,t,n),s=zS("strides",e,t,n),i=qS(e,t,n);return[r.conv2dTranspose(zS("x",e,t,n),zS("filter",e,t,n),a,[s[1],s[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const a=zS("strides",e,t,n),s=qS(e,t,n),i=zS("dilations",e,t,n),o=zS("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(zS("input",e,t,n),zS("filter",e,t,n),[a[1],a[2]],s,o,[i[1],i[2]])]}case"Conv3D":{const a=zS("strides",e,t,n),s=zS("pad",e,t,n),i=zS("dataFormat",e,t,n).toUpperCase(),o=zS("dilations",e,t,n);return[r.conv3d(zS("x",e,t,n),zS("filter",e,t,n),[a[1],a[2],a[3]],s,i,[o[1],o[2],o[3]])]}case"AvgPool":{const a=zS("strides",e,t,n),s=zS("pad",e,t,n),i=zS("kernelSize",e,t,n);return[r.avgPool(zS("x",e,t,n),[i[1],i[2]],[a[1],a[2]],s)]}case"MaxPool":{const a=zS("strides",e,t,n),s=zS("pad",e,t,n),i=zS("kernelSize",e,t,n);return[r.maxPool(zS("x",e,t,n),[i[1],i[2]],[a[1],a[2]],s)]}case"MaxPoolWithArgmax":{const a=zS("strides",e,t,n),s=zS("pad",e,t,n),i=zS("kernelSize",e,t,n),o=zS("includeBatchInIndex",e,t,n),{result:l,indexes:A}=r.maxPoolWithArgmax(zS("x",e,t,n),[i[1],i[2]],[a[1],a[2]],s,o);return[l,A]}case"AvgPool3D":{const a=zS("strides",e,t,n),s=zS("pad",e,t,n),i=zS("kernelSize",e,t,n);return[r.avgPool3d(zS("x",e,t,n),[i[1],i[2],i[3]],[a[1],a[2],a[3]],s)]}case"MaxPool3D":{const a=zS("strides",e,t,n),s=zS("pad",e,t,n),i=zS("kernelSize",e,t,n);return[r.maxPool3d(zS("x",e,t,n),[i[1],i[2],i[3]],[a[1],a[2],a[3]],s)]}case"Dilation2D":{const a=zS("strides",e,t,n),s=zS("pad",e,t,n),i=zS("dilations",e,t,n),o=a[1],l=a[2],A=i[1],u=i[2];return[r.dilation2d(zS("x",e,t,n),zS("filter",e,t,n),[o,l],s,[A,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"creation":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"Fill":{const a=zS("shape",e,t,n),s=zS("dtype",e,t,n),i=zS("value",e,t,n);return[r.fill(a,i,s)]}case"LinSpace":{const a=zS("start",e,t,n),s=zS("stop",e,t,n),i=zS("num",e,t,n);return[r.linspace(a,s,i)]}case"Multinomial":{const a=zS("logits",e,t,n),s=zS("numSamples",e,t,n),i=zS("seed",e,t,n);return[r.multinomial(a,s,i)]}case"OneHot":{const a=zS("indices",e,t,n),s=zS("depth",e,t,n),i=zS("onValue",e,t,n),o=zS("offValue",e,t,n),l=zS("dtype",e,t,n);return[r.oneHot(a,s,i,o,l)]}case"Ones":return[r.ones(zS("shape",e,t,n),zS("dtype",e,t,n))];case"OnesLike":return[r.onesLike(zS("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(zS("shape",e,t,n),zS("dtype",e,t,n),zS("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(zS("shape",e,t,n),zS("minval",e,t,n),zS("maxval",e,t,n),zS("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(zS("shape",e,t,n),zS("minval",e,t,n),zS("maxval",e,t,n),zS("seed",e,t,n))];case"Range":{const a=zS("start",e,t,n),s=zS("stop",e,t,n),i=zS("step",e,t,n);return[r.range(a,s,i,zS("dtype",e,t,n))]}case"TruncatedNormal":{const a=zS("shape",e,t,n),s=zS("mean",e,t,n),i=zS("stdDev",e,t,n),o=zS("seed",e,t,n);return[r.truncatedNormal(a,s,i,zS("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(zS("shape",e,t,n),zS("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(zS("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"dynamic":return(async(e,t,n,r,a=C)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:A}=$I(e,t,n),u=await a.image.nonMaxSuppressionWithScoreAsync(r,s,i,o,l,A);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=$I(e,t,n),A=zS("padToMaxOutputSize",e,t,n),u=await a.image.nonMaxSuppressionPaddedAsync(r,s,i,o,l,A);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=$I(e,t,n);return[await a.image.nonMaxSuppressionAsync(r,s,i,o,l)]}case"Where":{const r=a.cast(zS("condition",e,t,n),"bool"),s=[await a.whereAsync(r)];return r.dispose(),s}case"ListDiff":return a.setdiff1dAsync(zS("x",e,t,n),zS("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"LowerBound":{const a=zS("sortedSequence",e,t,n),s=zS("values",e,t,n);return[r.lowerBound(a,s)]}case"TopKV2":{const a=zS("x",e,t,n),s=zS("k",e,t,n),i=zS("sorted",e,t,n),o=r.topk(a,s,i);return[o.values,o.indices]}case"UpperBound":{const a=zS("sortedSequence",e,t,n),s=zS("values",e,t,n);return[r.upperBound(a,s)]}case"Unique":{const a=zS("x",e,t,n),s=r.unique(a);return[s.values,s.indices]}case"UniqueV2":{const a=zS("x",e,t,n),s=zS("axis",e,t,n),i=r.unique(a,s);return[i.values,i.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"image":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"ResizeBilinear":{const a=zS("images",e,t,n),s=zS("size",e,t,n),i=zS("alignCorners",e,t,n),o=zS("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[s[0],s[1]],i,o)]}case"ResizeNearestNeighbor":{const a=zS("images",e,t,n),s=zS("size",e,t,n),i=zS("alignCorners",e,t,n),o=zS("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[s[0],s[1]],i,o)]}case"CropAndResize":{const a=zS("image",e,t,n),s=zS("boxes",e,t,n),i=zS("boxInd",e,t,n),o=zS("cropSize",e,t,n),l=zS("method",e,t,n),A=zS("extrapolationValue",e,t,n);return[r.image.cropAndResize(a,s,i,o,l,A)]}case"ImageProjectiveTransformV3":{const a=zS("images",e,t,n),s=zS("transforms",e,t,n),i=zS("outputShape",e,t,n),o=zS("fillValue",e,t,n),l=zS("interpolation",e,t,n),A=zS("fillMode",e,t,n);return[r.image.transform(a,s,l.toLowerCase(),A.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"graph":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const a=zS("default",e,t,n);return[VS(e.name,t,n)||a];case"Placeholder":return[VS(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[XS(zS("x",e,t,n))];case"IdentityN":return zS("x",e,t,n).map((e=>XS(e)));case"Shape":return[r.tensor1d(zS("x",e,t,n).shape,"int32")];case"ShapeN":return zS("x",e,t,n).map((e=>r.tensor1d(e.shape)));case"Size":return[r.scalar(zS("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(zS("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const s=zS("x",e,t,n),i=zS("data",e,t,n),o=zS("message",e,t,n),l=zS("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let e=0;e<i.length;e++)console.log(Array.prototype.slice.call(i[e].dataSync()).slice(0,l));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"logical":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"Equal":return[r.equal(zS("a",e,t,n),zS("b",e,t,n))];case"NotEqual":return[r.notEqual(zS("a",e,t,n),zS("b",e,t,n))];case"Greater":return[r.greater(zS("a",e,t,n),zS("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(zS("a",e,t,n),zS("b",e,t,n))];case"Less":return[r.less(zS("a",e,t,n),zS("b",e,t,n))];case"LessEqual":return[r.lessEqual(zS("a",e,t,n),zS("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(zS("a",e,t,n),zS("b",e,t,n))];case"LogicalNot":return[r.logicalNot(zS("a",e,t,n))];case"LogicalOr":return[r.logicalOr(zS("a",e,t,n),zS("b",e,t,n))];case"Select":case"SelectV2":return[r.where(zS("condition",e,t,n),zS("a",e,t,n),zS("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(zS("a",e,t,n),zS("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"matrices":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(zS("a",e,t,n),zS("b",e,t,n),zS("transposeA",e,t,n),zS("transposeB",e,t,n))];case"Einsum":return[r.einsum(zS("equation",e,t,n),...zS("tensors",e,t,n))];case"Transpose":return[r.transpose(zS("x",e,t,n),zS("perm",e,t,n))];case"_FusedMatMul":const[a,s]=zS("fusedOps",e,t,n),i="biasadd"===a,o="prelu"===s,l=zS("numArgs",e,t,n),A=zS("leakyreluAlpha",e,t,n);if(i){if(o&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,c]=zS("args",e,t,n);return[r.fused.matMul({a:zS("a",e,t,n),b:zS("b",e,t,n),transposeA:zS("transposeA",e,t,n),transposeB:zS("transposeB",e,t,n),bias:u,activation:s,preluActivationWeights:c,leakyreluAlpha:A})];case"MatrixBandPart":return[r.linalg.bandPart(zS("a",e,t,n),zS("numLower",e,t,n),zS("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"normalization":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(zS("x",e,t,n),zS("axis",e,t,n),zS("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(zS("x",e,t,n),zS("mean",e,t,n),zS("variance",e,t,n),zS("offset",e,t,n),zS("scale",e,t,n),zS("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(zS("x",e,t,n),zS("radius",e,t,n),zS("bias",e,t,n),zS("alpha",e,t,n),zS("beta",e,t,n))];case"Softmax":return[r.softmax(zS("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(zS("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"ragged":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:a,outputDenseValues:s}=r.raggedGather(zS("paramsNestedSplits",e,t,n),zS("paramsDenseValues",e,t,n),zS("indices",e,t,n),zS("outputRaggedRank",e,t,n));return a.concat(s)}case"RaggedRange":{const{rtNestedSplits:a,rtDenseValues:s}=r.raggedRange(zS("starts",e,t,n),zS("limits",e,t,n),zS("splits",e,t,n));return[a,s]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(zS("shape",e,t,n),zS("values",e,t,n),zS("defaultValue",e,t,n),zS("rowPartitionTensors",e,t,n),zS("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"reduction":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"Max":{const a=zS("axis",e,t,n),s=zS("keepDims",e,t,n);return[r.max(zS("x",e,t,n),a,s)]}case"Mean":{const a=zS("axis",e,t,n),s=zS("keepDims",e,t,n);return[r.mean(zS("x",e,t,n),a,s)]}case"Min":{const a=zS("axis",e,t,n),s=zS("keepDims",e,t,n);return[r.min(zS("x",e,t,n),a,s)]}case"Sum":{const a=zS("axis",e,t,n),s=zS("keepDims",e,t,n);return[r.sum(zS("x",e,t,n),a,s)]}case"All":{const a=zS("axis",e,t,n),s=zS("keepDims",e,t,n);return[r.all(zS("x",e,t,n),a,s)]}case"Any":{const a=zS("axis",e,t,n),s=zS("keepDims",e,t,n);return[r.any(zS("x",e,t,n),a,s)]}case"ArgMax":{const a=zS("axis",e,t,n);return[r.argMax(zS("x",e,t,n),a)]}case"ArgMin":{const a=zS("axis",e,t,n);return[r.argMin(zS("x",e,t,n),a)]}case"Prod":{const a=zS("axis",e,t,n),s=zS("keepDims",e,t,n);return[r.prod(zS("x",e,t,n),a,s)]}case"Cumprod":{const a=zS("axis",e,t,n),s=zS("exclusive",e,t,n),i=zS("reverse",e,t,n);return[r.cumprod(zS("x",e,t,n),a,s,i)]}case"Cumsum":{const a=zS("axis",e,t,n),s=zS("exclusive",e,t,n),i=zS("reverse",e,t,n);return[r.cumsum(zS("x",e,t,n),a,s,i)]}case"Bincount":const a=zS("x",e,t,n),s=zS("weights",e,t,n),i=zS("size",e,t,n);return[r.bincount(a,s,i)];case"DenseBincount":{const a=zS("x",e,t,n),s=zS("weights",e,t,n),i=zS("size",e,t,n),o=zS("binaryOutput",e,t,n);return[r.denseBincount(a,s,i,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"slice_join":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"ConcatV2":case"Concat":{const a=zS("n",e,t,n),s=zS("axis",e,t,n);let i=zS("tensors",e,t,n);return i=i.slice(0,a),[r.concat(i,s)]}case"Gather":{const a=zS("x",e,t,n),s=zS("indices",e,t,n);return[r.gather(a,r.cast(s,"int32"),0)]}case"GatherV2":{const a=zS("axis",e,t,n),s=zS("batchDims",e,t,n),i=zS("x",e,t,n),o=zS("indices",e,t,n);return[r.gather(i,r.cast(o,"int32"),a,s)]}case"Reverse":{const a=zS("dims",e,t,n),s=[];for(let e=0;e<a.length;e++)a[e]&&s.push(e);const i=zS("x",e,t,n);return[r.reverse(i,s)]}case"ReverseV2":{const a=zS("axis",e,t,n),s=zS("x",e,t,n);return[r.reverse(s,a)]}case"Slice":{const a=zS("begin",e,t,n),s=zS("size",e,t,n);return[r.slice(zS("x",e,t,n),a,s)]}case"StridedSlice":{const a=zS("begin",e,t,n),s=zS("end",e,t,n),i=zS("strides",e,t,n),o=zS("beginMask",e,t,n),l=zS("endMask",e,t,n),A=zS("ellipsisMask",e,t,n),u=zS("newAxisMask",e,t,n),c=zS("shrinkAxisMask",e,t,n),h=zS("x",e,t,n);return[r.stridedSlice(h,a,s,i,o,l,A,u,c)]}case"Pack":return mc((()=>{const a=zS("axis",e,t,n),s=zS("tensors",e,t,n),i=s[0].shape,o=r.squeeze(s[0]).shape,l=s.map((e=>{const t=js(e.shape,i);if(!t&&!js(r.squeeze(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,i)}));return[r.stack(l,a)]}));case"Unpack":{const a=zS("axis",e,t,n),s=zS("tensor",e,t,n);return r.unstack(s,a)}case"Tile":{const a=zS("reps",e,t,n);return[r.tile(zS("x",e,t,n),a)]}case"Split":case"SplitV":{const a=zS("axis",e,t,n),s=zS("numOrSizeSplits",e,t,n),i=zS("x",e,t,n);return r.split(i,s,a)}case"ScatterNd":{const a=zS("indices",e,t,n),s=zS("values",e,t,n),i=zS("shape",e,t,n);return[r.scatterND(a,s,i)]}case"GatherNd":{const a=zS("x",e,t,n),s=zS("indices",e,t,n);return[r.gatherND(a,s)]}case"SparseToDense":{const a=zS("sparseIndices",e,t,n),s=zS("outputShape",e,t,n),i=zS("sparseValues",e,t,n),o=zS("defaultValue",e,t,n);return[r.sparseToDense(a,i,s,i.dtype===o.dtype?o:r.cast(o,i.dtype))]}case"TensorScatterUpdate":{const a=zS("indices",e,t,n),s=zS("values",e,t,n),i=zS("tensor",e,t,n);return[r.tensorScatterUpdate(i,a,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"sparse":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:a,outputValues:s,emptyRowIndicator:i,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(zS("indices",e,t,n),zS("values",e,t,n),zS("denseShape",e,t,n),zS("defaultValue",e,t,n));return[a,s,i,o]}case"SparseReshape":{const{outputIndices:a,outputShape:s}=r.sparse.sparseReshape(zS("inputIndices",e,t,n),zS("inputShape",e,t,n),zS("newShape",e,t,n));return[a,s]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(zS("data",e,t,n),zS("indices",e,t,n),zS("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(zS("data",e,t,n),zS("indices",e,t,n),zS("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"spectral":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"FFT":return[r.fft(zS("x",e,t,n))];case"IFFT":return[r.ifft(zS("x",e,t,n))];case"RFFT":return[r.rfft(zS("x",e,t,n))];case"IRFFT":return[r.irfft(zS("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"string":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(zS("input",e,t,n),zS("pattern",e,t,n),zS("rewrite",e,t,n),zS("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:a,nGramsSplits:s}=r.string.stringNGrams(zS("data",e,t,n),zS("dataSplits",e,t,n),zS("separator",e,t,n),zS("nGramWidths",e,t,n),zS("leftPad",e,t,n),zS("rightPad",e,t,n),zS("padWidth",e,t,n),zS("preserveShortSequences",e,t,n));return[a,s]}case"StringSplit":{const{indices:a,values:s,shape:i}=r.string.stringSplit(zS("input",e,t,n),zS("delimiter",e,t,n),zS("skipEmpty",e,t,n));return[a,s,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(zS("input",e,t,n),zS("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"transformation":return a((()=>((e,t,n,r=C)=>{switch(e.op){case"Cast":return[r.cast(zS("x",e,t,n),zS("dtype",e,t,n))];case"ExpandDims":{const a=zS("axis",e,t,n);return[r.expandDims(zS("x",e,t,n),a)]}case"Squeeze":{const a=zS("axis",e,t,n);return[r.squeeze(zS("x",e,t,n),a)]}case"Reshape":return[r.reshape(zS("x",e,t,n),zS("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(zS("x",e,t,n),zS("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(zS("x",e,t,n),zS("padding",e,t,n),zS("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(zS("x",e,t,n),zS("padding",e,t,n),zS("constantValue",e,t,n))];case"SpaceToBatchND":{const a=zS("blockShape",e,t,n),s=zS("paddings",e,t,n);return[r.spaceToBatchND(zS("x",e,t,n),a,s)]}case"BatchToSpaceND":{const a=zS("blockShape",e,t,n),s=zS("crops",e,t,n);return[r.batchToSpaceND(zS("x",e,t,n),a,s)]}case"DepthToSpace":{const a=zS("blockSize",e,t,n),s=zS("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(zS("x",e,t,n),a,s)]}case"BroadcastTo":return[r.broadcastTo(zS("x",e,t,n),zS("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(zS("s0",e,t,n),zS("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const a=r.getHashTableHandleByName(e.name);if(null!=a)return[a];{const a=zS("keyDType",e,t,n),s=zS("valueDType",e,t,n),i=new MI(a,s);return r.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const a=zS("tableHandle",e,t,n,r),s=zS("keys",e,t,n),i=zS("values",e,t,n),o=r.getHashTableById(a.id);return[await o.import(s,i)]}case"LookupTableFind":case"LookupTableFindV2":{const a=zS("tableHandle",e,t,n,r),s=zS("keys",e,t,n),i=zS("defaultValue",e,t,n),o=r.getHashTableById(a.id);return[await o.find(s,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const a=zS("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const s=HS(e.op);if(s&&s.customExecutor)return s.customExecutor(new TI(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return wi(s)?s.then((e=>[].concat(e))):[].concat(s)}class HI{constructor(e={},t={},n={},r={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function zI(e,t,n,r){const a=new Set,s=[];let i=null,o=null;const l=new Set,A=new Set(Object.keys(e).map((e=>jS(e)[0])));r=r||[];const u=new Set(r.map((e=>jS(e.name)[0]))),c=[...t];for(;c.length>0;){const e=c.pop();(jI(e)||qI(e)||XI(e))&&null==i&&(i=e,o=i.children.map((e=>e.name)).filter((e=>a.has(e)))),a.add(e.name),null==n[e.name]&&(A.has(e.name)||u.has(e.name)||(0!==e.inputs.length?e.inputs.forEach((e=>{l.has(e.name)||(l.add(e.name),c.push(e))})):s.push(e.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:s,dynamicNode:i,syncInputs:o}}class VI extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}const WI=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),KI=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),GI=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function jI(e){return WI.has(e.op)}function qI(e){return KI.has(e.op)}function XI(e){return GI.has(e.op)}class JI{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new JI(e.functions[t],this)}))}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=zI(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:s}=n;if(null!=a)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){const n=t.map((e=>e.name)),a=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}const i=function(e,t){const{usedNodes:n,inputs:r}=t,a=Object.keys(r).map((e=>jS(e)[0])).map((t=>e.nodes[t])),s=e.initNodes||[],i=e=>n.has("string"==typeof e?e:e.name);function o(e){return[...new Map(e.map((e=>[e.name,e]))).values()]}const l=o([...a,...e.weights,...s]).filter(i),A=o([...l,...Object.values(e.nodes)]).filter(i),u=new Map(A.map((e=>[e.name,e]))),c={};for(const e of A){c[e.name]=c[e.name]||0;for(const t of e.children)i(t)||(c[t.name]=Number.POSITIVE_INFINITY),c[t.name]=(c[t.name]||0)+1}const h=Object.entries(c).filter((([,e])=>0===e)).map((([e])=>e)),d=[...h];for(;h.length>0;){const e=h.pop(),t=u.get(e);for(const e of t.children.filter(i))0===--c[e.name]&&(d.push(e.name),h.push(e.name))}const p=function(e,t){const n=new Map(e.map((e=>[e.name,e]))),r=t.map((e=>e.name)),a=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const e of t.children)n.has(e.name)&&!a.has(e.name)&&(a.add(e.name),r.push(e.name))}return e.filter((e=>a.has(e.name)))}(d.map((e=>u.get(e))),l);return function(e,t){const n=new Map(e.map(((e,t)=>[e.name,t]))),r=new Set(t.map((e=>e.name))),a=e=>r.has("string"==typeof e?e:e.name),s=new Set(e.map((e=>e.name))),i=e=>s.has("string"==typeof e?e:e.name);for(const t of e){for(const e of t.children.filter(i)){if(!n.has(e.name))throw new VI(`Child ${e.name} of node ${t.name} is unreachable.`);if(n.get(t.name)>n.get(e.name))throw new VI(`Node ${t.name} is scheduled to run after its child ${e.name}.`)}if(!a(t))for(const e of t.inputs){if(!n.has(e.name))throw new VI(`Input ${e.name} of node ${t.name} is unreachable.`);if(n.get(e.name)>n.get(t.name))throw new VI(`Node ${t.name} is scheduled to run before its input ${e.name}.`)}}}(p,l),p}(this.graph,n),o=function(e){const t=new Map(e.map(((e,t)=>[e.name,t]))),n=Number.MAX_SAFE_INTEGER,r=e.map(((e,t)=>jI(e)?n:t)),a=e=>{const n=r[t.get(e.name)];return null==n?-1:n},s=e.map(((e,t)=>e.children.map(a).reduce(((e,t)=>Math.max(e,t)),r[t]))),i=new Map;for(let t=0;t<e.length;++t){const r=s[t];if(r===n)continue;const a=e[t],o=e[r];i.has(o.name)||i.set(o.name,[]),i.get(o.name).push(a)}return i}(i);return{orderedNodes:i,nodeLiveUntilMap:o}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return yc(t),t}cloneTensorList(e){if(!e)return null;const t=e.map((e=>this.cloneAndKeepTensor(e)));return t}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,this.cloneTensorList(t)])))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[jS(e)[0]])),a=t.map((e=>jS(e)[0])),s=new Set(a);let i=a.map((e=>this.graph.nodes[e]));0===i.length&&(i=this._outputs);const o=this.getCompilationKey(r,i);let l=this.compiledMap.get(o);null==l&&(l=this.compile(e,i),this.compiledMap.set(o,l));try{this.keepIntermediateTensors=ki().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const A={},u={};return mc((()=>{const n=new HI(this.weightMap,A,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[a,s]=jS(t,n),i=[];i[s]=e[t],r[a]=i,this.keepIntermediateTensors&&(this.clonedTensorsMap[a]=this.cloneTensorList(i))}));const a=this.getFrozenTensorIds(r),{orderedNodes:i,nodeLiveUntilMap:o}=l;for(const e of i){if(r[e.name])continue;const t=PI(e,r,n,this._resourceManager);if(wi(t))throw new Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,a,s,o.get(e.name))}return null==this.parent&&n.dispose(a),t.map((e=>VS(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,s,i){if(!jI(t)&&!s.has(e)){for(const r of n[e])null!=r&&(i[r.id]=(i[r.id]||0)+t.children.length);for(const e of t.inputs){if(jI(e))continue;const t=WS(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||a.has(e.id))continue;const t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,a,s){function i(e){return jI(e)||a.has(e.name)}if(!jI(e)&&null!=s)for(const e of s){if(i(e))continue;const a=WS(e.name,t,n);for(const e of a)!e||e.kept||r.has(e.id)||e.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,n=!1,r={},a={}){this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=ki().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const s=new HI(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(e,s,t,n),o=t.map((e=>VS(e,i,s))),l=o.map((e=>e.id)),A=Object.keys(e).map((t=>e[t].id)),u=new Set([...l,...A,...this.weightIds]);return Object.values(i).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()}))})),null==this.parent&&s.dispose(u),o}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const a=Object.keys(e),s=a.map((e=>this.graph.nodes[jS(e)[0]])),i=n.map((e=>jS(e)[0])),o=new Set(i);let l=i.map((e=>this.graph.nodes[e]));0===l.length&&(l=this._outputs);const{usedNodes:A,missingInputs:u,dynamicNode:c,syncInputs:h}=zI(e,l,this.weightMap,this._initNodes),d=[...s,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),p=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=jS(t),a=[];a[r]=e[t],p[n]=a}));const f={},m=this.getFrozenTensorIds(p),g={};for(;d.length>0;){const e=this.processStack(s,d,t,p,g,m,o,f,A);await Promise.all(e)}null!=c||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const y=l.filter((e=>!jI(e)&&!VS(e.name,p,t))).map((e=>e.name));if(y.length>0){let e="";throw null!=c&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${a}]. Consider providing the following inputs: [${u}]. ${e}`)}return p}processStack(e,t,n,r,a,s,i,o,l){const A=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&zS("isConstant",e.node,r,n)&&([u]=KS(e.node.name,n)),null==r[e.node.name]){const c=PI(e.node,r,n,this._resourceManager);u||([u]=KS(e.node.name,n));const h=n.currentContext;wi(c)?A.push(c.then((A=>(r[u]=A,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(A)),n.currentContext=h,this.checkTensorForDisposal(u,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,l),A)))):(r[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),this.checkTensorForDisposal(u,e.node,r,n,s,i,o),this.processChildNodes(e.node,t,n,r,a,l))}else this.processChildNodes(e.node,t,n,r,a,l)}return A}processChildNodes(e,t,n,r,a,s){e.children.forEach((e=>{const[i]=KS(e.name,n);!a[i]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!VS(e,r,n)))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!VS(e,r,n)))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=jS(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){const e=a.attrParams.shape.value;Vs(e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t)),(()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}a.attrParams.dtype&&a.attrParams.dtype.value&&Vs(n.dtype===a.attrParams.dtype.value,(()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){var t,n;const r={};for(const a in e){const s=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=s?r[s.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=jS(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=jS(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class YI{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class ZI{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=e){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new YI}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return wi(e)?e.then((e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e))):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await Ic(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new JI(mI.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=mI.Instance.transformGraph(e.modelInitializer);this.initializer=new JI(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof Fu?[e]:e).forEach(((e,n)=>t[this.structuredOutputKeys[n]]=e)),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof Fu||Array.isArray(e))){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce(((t,n)=>{var a,s,i;const o=null===(i=null===(s=null===(a=this.signature)||void 0===a?void 0:a.inputs)||void 0===s?void 0:s[n])||void 0===i?void 0:i.resourceId;return t[n]=null!=o?this.resourceIdToCapturedInput[o]:e[r++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&gc(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function eE(t,n={},r=e){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"==typeof t&&(t=function(e){return e.endsWith("/")||(e+="/"),`${e}model.json?tfjs-format=file`}(t));const a=new ZI(t,n,r);return await a.load(),a}function tE(e,t,n=new Map,r=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(sE(e)){const a=Array.isArray(e)?[]:{};r.add(e);for(const s in e){const i=tE(e[s],t,n,r);a[s]=i}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,a.value),a.value}function nE(e,t=aE){return rE(e,t)}function rE(e,t,n=new Set){const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(sE(r)){const a=Array.isArray(r)?[]:{};n.add(r);for(const s in r){const r=e.map((e=>e[s])),i=rE(r,t,n);a[s]=i}return n.delete(r),a}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return a.value}function aE(e){return null===e?null:sE(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function sE(e){let t=!1;if(ki().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:n}=i(551);t=e instanceof n}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof Fu)&&!(e instanceof Promise)&&!t)}function iE(e){return tE(e,oE)}function oE(e){return e instanceof Fu?{value:e.clone(),recurse:!1}:sE(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class lE{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class AE extends lE{constructor(){super(AE.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}AE.INITIAL_CAPACITY=32;class uE{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new bE(this,e)}filter(e){return new gE(this,e)}map(e){return new yE(this,e)}mapAsync(e){return new wE(this,e)}serialMapAsync(e){return new wE(this,e).serial()}flatmap(e){return new xE(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e,t=!0){return new mE(this,e,t)}columnMajorBatch(e,t=!0,n=aE){return this.rowMajorBatch(e,t).map((e=>nE(e,n)))}concatenate(e,t){return new BE(new cE([this,e]),t)}take(e){return e<0||null==e?this:new fE(this,e)}skip(e){return e<0||null==e?this:new pE(this,e)}prefetch(e){return new NE(this,e)}shuffle(e,t){return new SE(this,e,t)}serial(){return new dE(this)}}class cE extends uE{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:iE(e),done:!1}}}class hE extends uE{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class dE extends uE{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class pE extends uE{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;gc(e.value)}return this.upstream.next()}}class fE extends uE{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class mE extends uE{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class gE extends uE{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;gc(e.value)}}}class yE extends uE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Wu(e.value),n=this.transform(e.value),r=Wu(n);for(const e of t)Vu(e,r)||e.dispose();return{value:n,done:!1}}}class bE extends uE{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class wE extends uE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=Wu(e.value),n=await this.transform(e.value),r=Wu(n);for(const e of t)Vu(e,r)||e.dispose();return{value:n,done:!1}}}class vE extends uE{constructor(){super(),this.outputQueue=new AE,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class xE extends vE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=Wu(e.value),n=this.transform(e.value),r=Wu(n);this.outputQueue.pushAll(n);for(const e of t)Vu(e,r)||e.dispose();return!0}}class BE extends uE{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var kE,CE;(CE=kE||(kE={}))[CE.FAIL=0]="FAIL",CE[CE.SHORTEST=1]="SHORTEST",CE[CE.LONGEST=2]="LONGEST";class NE extends uE{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new lE(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class SE extends NE{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=_m.alea(n||du().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class IE{constructor(){this.size=null}batch(e,t=!0){const n=this;let r;return Vs(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),EE((async()=>(await n.iterator()).columnMajorBatch(e,t,FE)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,EE((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,EE((async()=>(await t.iterator()).filter((t=>mc((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return EE((async()=>(await t.iterator()).map((t=>mc((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return EE((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return EE((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,EE((async()=>{return n=(a=async()=>({value:await t.iterator(),done:!1}),new hE(a)).take(e),new BE(n,r);var n,r,a}),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,EE((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,a=_m.alea(t||du().toString());return EE((async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,EE((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function EE(e,t=null){return new class extends IE{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function FE(e){if(null===e)return null;return null==(t=e[0])||null===(n=t)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(t)||"object"==typeof t&&t instanceof Fu||mu(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Fu?bg(e):cc(e)}(e),recurse:!1}:{value:null,recurse:!0};var t,n}function TE(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Vs("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}IE.MAX_BUFFER_SIZE=1e4,Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");const LE=$g;class UE extends Os{nextDataId(){return UE.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Qs(this,pc())}write(e,t,n){this.firstUse&&(this.firstUse=!1,ki().get("IS_NODE")&&MA("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&ii(n[0])){const a=n.map((e=>pu(e)));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);return"complex64"===t?Lb(this.readSync(n.real.dataId),this.readSync(n.imag.dataId)):function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>fu(e)));return vh(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return vh(e.shape,e.dtype,t)}makeOutput(e,t,n){return pc().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=du();return e(),{kernelMs:du()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){TE([e],"where");const t=this.readSync(e.dataId);return LE(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function _E(e){return(t,n,r)=>{const a=ri(n,t.length);for(let n=0;n<t.length;++n)a[n]=e(t[n],r);return a}}function RE(e,t,n){return DE(e,_E(t),n)}function DE(e,t,n){return({inputs:r,attrs:a,backend:s})=>{const{x:i}=r;TE(i,e);const o=s,l=o.data.get(i.dataId).values;let A;if("string"===i.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");A=hw(l)}else A=l;const u=n||i.dtype,c=t(A,u,a);return o.makeTensorInfo(i.shape,u,c)}}UE.nextDataId=0,bc("cpu",(()=>new UE),1);const QE=RE(So,(e=>e>=0?e:Math.exp(e)-1)),OE={kernelName:So,backendName:"cpu",kernelFunc:QE};function $E(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const ME={kernelName:Vo,backendName:"cpu",kernelFunc:$E};function PE(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r;TE([a],"leakyRelu");const i=Gs(a.shape),o=n.data.get(a.dataId).values,l=ni("float32",i);for(let e=0;e<o.length;e++)l[e]=o[e]<0?s*o[e]:o[e];return n.makeTensorInfo(a.shape,"float32",l)}const HE={kernelName:Xo,backendName:"cpu",kernelFunc:PE};function zE(e){return(t,n,r,a,s)=>{const i=qh(t,n),o=i.length,l=ci(i),A=ni(s,Gs(i)),u=t.length,c=n.length,h=ci(t),d=ci(n),p=Gh(t,i),f=Gh(n,i);if(p.length+f.length===0)for(let t=0;t<A.length;++t)A[t]=e(r[t%r.length],a[t%a.length]);else for(let t=0;t<A.length;++t){const n=bi(t,o,l),s=n.slice(-u);p.forEach((e=>s[e]=0));const i=yi(s,u,h),m=n.slice(-c);f.forEach((e=>m[e]=0));const g=yi(m,c,d);A[t]=e(r[i],a[g])}return[A,i]}}const VE=zE(((e,t)=>e<0?t*e:e));function WE(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t;TE([r,a],"prelu");const s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,[o,l]=VE(r.shape,a.shape,s,i,"float32");return n.makeTensorInfo(l,"float32",o)}const KE={kernelName:Tl,backendName:"cpu",kernelFunc:WE},GE=RE($l,(e=>Math.max(0,e))),jE={kernelName:$l,backendName:"cpu",kernelFunc:GE},qE=RE(Wl,(e=>Math.min(Math.max(0,e),6))),XE={kernelName:Wl,backendName:"cpu",kernelFunc:qE},JE=_E((e=>1/(1+Math.exp(-e)))),YE=RE(aA,(e=>1/(1+Math.exp(-e)))),ZE={kernelName:aA,backendName:"cpu",kernelFunc:YE};function eF(e,t,n,r,a){if("linear"===n)return $E({inputs:{x:t},backend:e});if("relu"===n)return GE({inputs:{x:t},backend:e});if("elu"===n)return QE({inputs:{x:t},backend:e});if("relu6"===n)return qE({inputs:{x:t},backend:e});if("prelu"===n)return WE({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return PE({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return YE({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function tF(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(a.shape,"float32",i)},o}const nF={kernelName:to,backendName:"cpu",kernelFunc:tF};function rF(e,t,n="float32"){if("complex64"===n)return tF({inputs:{real:rF(e,t,"float32"),imag:rF(e,t,"float32")},backend:e});const r=fi(Gs(t),n);return e.makeTensorInfo(t,n,r)}function aF(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const sF={kernelName:Ql,backendName:"cpu",kernelFunc:aF};function iF(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){const r=hu([0],n),[a,s]=zE(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[s,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function oF(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:s}=r;if("complex64"===s){if("complex64"===a.dtype)return $E({inputs:{x:a},backend:n});const e=rF(n,a.shape,a.dtype),t=oF({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=tF({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){const e=aF({inputs:{input:a},backend:n}),t=oF({inputs:{x:e},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(e),t}if(!ai(a.dtype,s)){const e=$E({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:s}}const i=n.data.get(a.dataId).values,[o,l,A]=iF(i,a.shape,a.dtype,s);return n.makeTensorInfo(o,l,A)}const lF={kernelName:Yi,backendName:"cpu",kernelFunc:oF};function AF(e,t,n,r){return null==n?({inputs:n,backend:a})=>{const{a:s,b:i}=n,o=a;TE([s,i],e);const l=o.data.get(s.dataId).values,A=o.data.get(i.dataId).values,u="string"===s.dtype?hw(l):l,c="string"===s.dtype?hw(A):A,h=r||s.dtype,[d,p]=t(s.shape,i.shape,u,c,h);return o.makeTensorInfo(p,h,d)}:({inputs:e,backend:a})=>{const{a:s,b:i}=e,o=a;if("complex64"===s.dtype||"complex64"===i.dtype){const e=oF({inputs:{x:s},backend:o,attrs:{dtype:"complex64"}}),t=o.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,l=o.data.get(r.dataId).values,A=o.data.get(a.dataId).values,u=oF({inputs:{x:i},backend:o,attrs:{dtype:"complex64"}}),c=o.data.get(u.dataId),h=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,p=o.data.get(h.dataId).values,f=o.data.get(d.dataId).values,[m,g,y]=n(s.shape,i.shape,l,A,p,f),b=o.makeTensorInfo(y,"float32",m),w=o.makeTensorInfo(y,"float32",g),v=tF({inputs:{real:b,imag:w},backend:o});return o.disposeIntermediateTensorInfo(e),o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(w),v}{const e=o.data.get(s.dataId).values,n=o.data.get(i.dataId).values,a=r||s.dtype,[l,A]=t(s.shape,i.shape,e,n,a);return o.makeTensorInfo(A,a,l)}}}function uF(e){return(t,n,r,a,s,i)=>{const o=qh(t,n),l=Gs(o),A=o.length,u=ci(o),c=ni("float32",l),h=ni("float32",l),d=Gh(t,o),p=Gh(n,o),f=Lb(r,a),m=Lb(s,i),g=t.length,y=ci(t),b=n.length,w=ci(n);if(d.length+p.length===0)for(let t=0;t<c.length;t++){const n=t%f.length,r=t%m.length,a=e(f[2*n],f[2*n+1],m[2*r],m[2*r+1]);c[t]=a.real,h[t]=a.imag}else for(let t=0;t<c.length;t++){const n=bi(t,A,u),r=n.slice(-g);d.forEach((e=>r[e]=0));const a=yi(r,g,y),s=n.slice(-b);p.forEach((e=>s[e]=0));const i=yi(s,b,w),o=e(f[2*a],f[2*a+1],m[2*i],m[2*i+1]);c[t]=o.real,h[t]=o.imag}return[c,h,o]}}const cF=zE(((e,t)=>e+t)),hF=uF(((e,t,n,r)=>({real:e+n,imag:t+r}))),dF=AF(Li,cF,hF),pF={kernelName:Li,backendName:"cpu",kernelFunc:dF};function fF(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,i=Gs(a.shape),o=Zs(s,i),l=Gs(o);Vs(i===l,(()=>`The new shape (${o}) has ${l} elements and the old shape (${a.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(a.dataId);const A=n.data.get(a.dataId);if(null!=A.complexTensorInfos){const e=A.complexTensorInfos.real,t=A.complexTensorInfos.imag;e.shape=o,t.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}const mF={kernelName:Ml,backendName:"cpu",kernelFunc:fF};function gF(e){const{inputs:t,backend:n,attrs:r}=e,{a,b:s}=t,{transposeA:i,transposeB:o}=r;TE([a,s],"matMul");const l=a.shape.length,A=s.shape.length,u=i?a.shape[l-2]:a.shape[l-1],c=o?s.shape[A-1]:s.shape[A-2],h=i?a.shape[l-1]:a.shape[l-2],d=o?s.shape[A-2]:s.shape[A-1],p=a.shape.slice(0,-2),f=s.shape.slice(0,-2),m=Gs(p),g=Gs(f),y=qh(a.shape.slice(0,-2),s.shape.slice(0,-2)).concat([h,d]);Vs(u===c,(()=>`Error in matMul: inner shapes (${u}) and (${c}) of Tensors with shapes ${a.shape} and ${s.shape} and transposeA=${i} and transposeB=${o} must match.`));const b=o?[g,d,c]:[g,c,d],w=fF({inputs:{x:a},backend:n,attrs:{shape:i?[m,u,h]:[m,h,u]}}),v=fF({inputs:{x:s},backend:n,attrs:{shape:b}}),x=i?w.shape[1]:w.shape[2],B=i?w.shape[2]:w.shape[1],k=o?v.shape[1]:v.shape[2],C=Math.max(m,g),N=n.data.get(w.dataId).values,S=n.data.get(v.dataId).values,I=ci(w.shape),E=ci(v.shape),[F,T,L]=i?[I[0],1,I[1]]:[I[0],I[1],1],[U,_,R]=o?[1,E[1],E[0]]:[E[1],1,E[0]],D=B*k,Q=vh([C,B,k],w.dtype),O=Q.values,$=n.blockSize;for(let e=0;e<C;e++){const t=e%m,n=e%g;for(let r=0;r<B;r+=$){const a=Math.min(r+$,B);for(let s=0;s<k;s+=$){const i=Math.min(s+$,k);for(let o=0;o<x;o+=$){const l=Math.min(o+$,x);for(let A=r;A<a;A++)for(let r=s;r<i;r++){let a=0;for(let e=o;e<l;e++)a+=N[t*F+A*T+e*L]*S[e*U+r*_+n*R];O[e*D+(A*k+r)]+=a}}}}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(y,Q.dtype,Q.values)}const yF={kernelName:Gi,backendName:"cpu",kernelFunc:gF},bF={kernelName:QA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a,b:s,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:A,activation:u,leakyreluAlpha:c}=r;let h,d,p;const f=[];h=gF({inputs:{a,b:s},attrs:{transposeA:l,transposeB:A},backend:n}),i&&(d=dF({inputs:{a:h,b:i},backend:n}),f.push(h),h=d),u&&(p=eF(n,h,u,o,c),f.push(h),h=p);for(const e of f)n.disposeIntermediateTensorInfo(e);return h}};function wF(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const vF={kernelName:Ei,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;TE(t,"abs");let r=new Float32Array(Gs(t.shape));return r=wF(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},xF=RE(Fi,(e=>Math.acos(e))),BF={kernelName:Fi,backendName:"cpu",kernelFunc:xF},kF=RE(Ti,(e=>Math.acosh(e))),CF={kernelName:Ti,backendName:"cpu",kernelFunc:kF},NF={kernelName:Ui,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;TE(t,"addN");const a=r.map((e=>n.data.get(e.dataId).values)),s=vh(r[0].shape,r[0].dtype),i=s.values;for(let e=0;e<r.length;e++){const t=a[e];for(let e=0;e<i.length;e++)i[e]+=t[e]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}};function SF(e,t,n,r,a){const s=t.length,i=Gs(t),o=ci(t),l=ci(a),A=ni(n,Gs(a));for(let t=0;t<i;++t){const n=bi(t,s,o),a=new Array(n.length);for(let e=0;e<a.length;e++)a[e]=n[r[e]];A[yi(a,s,l)]=e[t]}return A}function IF(e){const{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:s}=n;TE(a,"transpose");const i=a.shape.length,o=new Array(i);for(let e=0;e<o.length;e++)o[e]=a.shape[s[e]];const l=SF(r.data.get(a.dataId).values,a.shape,a.dtype,s,o);return{dataId:r.write(l,o,a.dtype),shape:o,dtype:a.dtype}}const EF={kernelName:EA,backendName:"cpu",kernelFunc:IF},FF={kernelName:_i,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;TE(a,"all");const o=ei(s,a.shape);let l=o;const A=gf(l,a.shape.length);let u=a;null!=A&&(u=IF({inputs:{x:a},backend:n,attrs:{perm:A}}),l=bf(l.length,a.shape.length)),mf("all",l,u.shape.length);const[c,h]=pf(u.shape,l),d=Gs(h),p=fi(Gs(c),u.dtype),f=n.data.get(u.dataId).values;for(let e=0;e<p.length;++e){const t=e*d;let n=f[t];for(let e=0;e<d;++e){const r=f[t+e];n=n&&r}p[e]=n}null!=A&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(c,u.dtype,p);if(i){const e=fF({inputs:{x:m},backend:n,attrs:{shape:ff(c,o)}});return n.disposeIntermediateTensorInfo(m),e}return m}},TF={kernelName:Ri,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;TE(a,"any");const o=ei(s,a.shape);let l=o;const A=gf(l,a.shape.length);let u=a;null!=A&&(u=IF({inputs:{x:a},backend:n,attrs:{perm:A}}),l=bf(l.length,a.shape.length)),mf("any",l,u.shape.length);const[c,h]=pf(u.shape,l),d=Gs(h),p=fi(Gs(c),u.dtype),f=n.data.get(u.dataId).values;for(let e=0;e<p.length;++e){const t=e*d;let n=f[t];for(let e=0;e<d;++e){const r=f[t+e];n=n||r}p[e]=n}null!=A&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(c,u.dtype,p);if(i){const e=fF({inputs:{x:m},backend:n,attrs:{shape:ff(c,o)}});return n.disposeIntermediateTensorInfo(m),e}return m}},LF={kernelName:Di,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;TE(a,"argMax");let i=ei(s,a.shape);const o=gf(i,a.shape.length);let l=a;const A=[];null!=o&&(l=IF({inputs:{x:a},backend:n,attrs:{perm:o}}),A.push(l),i=bf(i.length,l.shape.length)),i=[i[0]],mf("argMax",i,l.shape.length);const[u,c]=pf(l.shape,i),h=fi(Gs(u),"int32"),d=Gs(c),p=n.data.get(l.dataId).values;for(let e=0;e<h.length;++e){const t=e*d;let n=p[t],r=0;for(let e=0;e<d;++e){const a=p[t+e];a>n&&(n=a,r=e)}h[e]=r}return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",h)}},UF={kernelName:Qi,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;TE(a,"argMin");let i=ei(s,a.shape);const o=gf(i,a.shape.length);let l=a;const A=[];null!=o&&(l=IF({inputs:{x:a},backend:n,attrs:{perm:o}}),A.push(l),i=bf(i.length,l.shape.length)),i=[i[0]],mf("argMin",i,l.shape.length);const[u,c]=pf(l.shape,i),h=fi(Gs(u),"int32"),d=Gs(c),p=n.data.get(l.dataId).values;for(let e=0;e<h.length;++e){const t=e*d;let n=p[t],r=0;for(let e=0;e<d;++e){const a=p[t+e];a<n&&(n=a,r=e)}h[e]=r}return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u,"int32",h)}},_F=RE(Oi,(e=>Math.asin(e))),RF={kernelName:Oi,backendName:"cpu",kernelFunc:_F},DF=RE($i,(e=>Math.asinh(e))),QF={kernelName:$i,backendName:"cpu",kernelFunc:DF},OF=RE(Mi,(e=>Math.atan(e))),$F={kernelName:Mi,backendName:"cpu",kernelFunc:OF},MF=zE(((e,t)=>Math.atan2(e,t))),PF=AF(Hi,MF),HF={kernelName:Hi,backendName:"cpu",kernelFunc:PF},zF=RE(Pi,(e=>Math.atanh(e))),VF={kernelName:Pi,backendName:"cpu",kernelFunc:zF};function WF(e,t,n,r,a,s){const i=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,A=a.dilationWidth,u=a.effectiveFilterHeight,c=a.effectiveFilterWidth,h=a.padInfo.top,d=a.padInfo.left,p="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=vh(a.outShape,n),m=f.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3];for(let t=0;t<a.batchSize;++t){const n=t*g,f=t*r[0];for(let t=0;t<a.inChannels;++t)for(let g=0;g<a.outHeight;++g){const w=g*i-h,v=Math.max(0,w),x=Math.min(a.inHeight,u+w),B=n+g*y;for(let n=0;n<a.outWidth;++n){const i=n*o-d,u=Math.max(0,i),h=Math.min(a.inWidth,c+i);let g=p,y=0,w=0;for(let n=v;n<x;n+=l){const a=f+n*r[1];for(let n=u;n<h;n+=A){const i=e[a+n*r[2]+t];"max"===s&&i>g?g=i:"avg"===s&&(y+=i,w++)}if(isNaN(g))break}m[B+n*b+t]="avg"===s?y/w:g}}}return f}function KF(e,t,n,r,a=!1,s=!1){const i=vh(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,A=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,p=r.padInfo.left,f=vh(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){const m=n*o-d;let g=m;for(;g<0;)g+=A;const y=Math.min(r.inHeight,c+m);for(let o=0;o<r.outWidth;++o){const c=o*l-p;let d=c;for(;d<0;)d+=u;const b=Math.min(r.inWidth,h+c);let w=Number.NEGATIVE_INFINITY,v=-1;for(let n=g;n<y;n+=A){const i=n-m;for(let o=d;o<b;o+=u){const l=o-c,A=f.get(e,n,o,t);A>w&&(w=A,v=a?s?((e*r.inHeight+n)*r.inWidth+o)*r.inChannels+t:(n*r.inWidth+o)*r.inChannels+t:i*h+l)}}i.set(v,e,n,o,t)}}return i}function GF(e,t,n,r,a,s){const i=a.strideDepth,o=a.strideHeight,l=a.strideWidth,A=a.dilationDepth,u=a.dilationHeight,c=a.dilationWidth,h=a.effectiveFilterDepth,d=a.effectiveFilterHeight,p=a.effectiveFilterWidth,f=a.padInfo.front,m=a.padInfo.top,g=a.padInfo.left,y="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=vh(a.outShape,n),w=b.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],x=a.outShape[2]*a.outShape[3]*a.outShape[4],B=a.outShape[3]*a.outShape[4],k=a.outShape[4];for(let t=0;t<a.batchSize;++t){const n=t*v,b=t*r[0];for(let t=0;t<a.inChannels;++t)for(let v=0;v<a.outDepth;++v){const C=v*i-f;let N=C;for(;N<0;)N+=A;const S=Math.min(a.inDepth,h+C),I=n+v*x;for(let n=0;n<a.outHeight;++n){const i=n*o-m;let h=i;for(;h<0;)h+=u;const f=Math.min(a.inHeight,d+i),v=I+n*B;for(let n=0;n<a.outWidth;++n){const i=n*l-g;let o=i;for(;o<0;)o+=c;const d=Math.min(a.inWidth,p+i),m=v+n*k;let x=y,B=0,C=0;for(let n=N;n<S;n+=A){const a=b+n*r[1];for(let n=h;n<f;n+=u){const i=a+n*r[2];for(let n=o;n<d;n+=c){const a=e[i+n*r[3]+t];if("max"===s&&a>x?x=a:"avg"===s&&(B+=a,C++),isNaN(x))break}if(isNaN(x))break}if(isNaN(x))break}w[m+t]="avg"===s?B/Math.max(C,1):x}}}}return b}const jF={kernelName:zi,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;TE(a,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;Vs(dp(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const A=rp(a.shape,s,i,1,o,l);let u;if(1===A.filterWidth&&1===A.filterHeight&&js(A.inShape,A.outShape))u=$E({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=ci(a.shape),r=WF(e,a.shape,a.dtype,t,A,"avg");u=n.makeTensorInfo(A.outShape,a.dtype,r.values)}return u}},qF={kernelName:Wi,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:A}=r;TE(a,"avgPool3d");const u=ap(a.shape,s,i,1,o,l,A),c=GF(n.data.get(a.dataId).values,a.shape,a.dtype,ci(a.shape),u,"avg");return n.makeTensorInfo(c.shape,"float32",c.values)}},XF={kernelName:Ki,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:A}=r;TE([a,s],"avgPool3DGrad");const u=ap(s.shape,i,o,1,l,A),c=u.strideDepth,h=u.strideHeight,d=u.strideWidth,p=u.filterDepth,f=u.filterHeight,m=u.filterWidth,g=u.dilationDepth,y=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,v=u.effectiveFilterHeight,x=u.effectiveFilterWidth,B=w-1-u.padInfo.front,k=x-1-u.padInfo.left,C=v-1-u.padInfo.top,N=vh(s.shape,"float32"),S=1/(p*f*m),I=n.bufferSync(a);for(let e=0;e<u.batchSize;++e)for(let t=0;t<u.inChannels;++t)for(let n=0;n<u.inDepth;++n)for(let r=0;r<u.inHeight;++r)for(let a=0;a<u.inWidth;++a){const s=n-B,i=r-C,o=a-k;let l=0;for(let n=0;n<w;n+=g){const r=(s+n)/c;if(!(r<0||r>=u.outDepth||Math.floor(r)!==r))for(let n=0;n<v;n+=y){const a=(i+n)/h;if(!(a<0||a>=u.outHeight||Math.floor(a)!==a))for(let n=0;n<x;n+=b){const s=(o+n)/d;s<0||s>=u.outWidth||Math.floor(s)!==s||(l+=I.get(e,r,a,s,t))}}}N.set(l*S,e,n,r,a,t)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}},JF={kernelName:Vi,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s;TE([a,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:A}=r,u=rp(i.shape,o,l,1,A),c=u.strideHeight,h=u.strideWidth,d=u.filterHeight,p=u.filterWidth,f=u.dilationHeight,m=u.dilationWidth,g=u.effectiveFilterHeight,y=u.effectiveFilterWidth,b=y-1-u.padInfo.left,w=g-1-u.padInfo.top,v=vh(i.shape,"float32"),x=1/(d*p),B=n.data.get(a.dataId).values,k=vh(a.shape,"float32",B);for(let e=0;e<u.batchSize;++e)for(let t=0;t<u.inChannels;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const a=n-w,s=r-b;let i=0;for(let n=0;n<g;n+=f){const r=(a+n)/c;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let n=0;n<y;n+=m){const a=(s+n)/h;a<0||a>=u.outWidth||Math.floor(a)!==a||(i+=k.get(e,r,a,t))}}v.set(i*x,e,n,r,t)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},YF={kernelName:$o,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,scale:s,offset:i,mean:o,variance:l}=t;Vs(o.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Vs(null==i||o.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Vs(null==s||o.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),TE([a,o,l,s,i],"batchNorm");let{varianceEpsilon:A}=r;null==A&&(A=.001);const u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,h=n.data.get(l.dataId).values,d=s?n.data.get(s.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),f=new Float32Array(u.length),m=p.length,g=d.length,y=h.length,b=c.length;let w=0,v=0,x=0,B=0;for(let e=0;e<u.length;++e)f[e]=p[w++]+(u[e]-c[v++])*d[x++]/Math.sqrt(h[B++]+A),w>=m&&(w=0),v>=b&&(v=0),x>=g&&(x=0),B>=y&&(B=0);return n.makeTensorInfo(a.shape,a.dtype,f)}};function ZF(e,t,n,r,a){const s=$d(r,t,n),i=Gs(n),o=ci(r);if(s){const n=Md(t,o);return"string"===a?e.slice(n,n+i):e.subarray(n,n+i)}const l=vh(r,a,"string"===a?hw(e):e),A=vh(n,a);for(let e=0;e<A.size;++e){const n=A.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));A.set(l.get(...r),...n)}return"string"===a?dw(A.values):A.values}function eT(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:i}=r;TE(a,"slice");const[o,l]=Pd(a,s,i);Sd(a,o,l);const A=ZF(n.data.get(a.dataId).values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,A)}const tT={kernelName:eA,backendName:"cpu",kernelFunc:eT},nT={kernelName:ji,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:i}=r;TE([a],"batchToSpaceND");const o=s.reduce(((e,t)=>e*t)),l=yb(a.shape,s,o),A=bb(l.length,s.length),u=wb(a.shape,s,o),c=vb(i,s.length),h=xb(u,i,s.length),d=fF({inputs:{x:a},backend:n,attrs:{shape:l}}),p=IF({inputs:{x:d},backend:n,attrs:{perm:A}}),f=fF({inputs:{x:p},backend:n,attrs:{shape:u}}),m=eT({inputs:{x:f},backend:n,attrs:{begin:c,size:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function rT(e,t,n,r,a){const s=Gs(r),i=fi(a,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=a||(i[r]+=s>0?t[n]:1)}return i}function aT(e,t,n,r=!1){const a=e.shape[0],s=e.shape[1],i=vh([a,n],t.dtype);for(let o=0;o<a;o++)for(let a=0;a<s;a++){const s=e.get(o,a);if(s<0)throw new Error("Input x must be non-negative!");s>=n||(r?i.set(1,o,s):t.size>0?i.set(i.get(o,s)+t.get(o,a),o,s):i.set(i.get(o,s)+1,o,s))}return i}const sT={kernelName:qi,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i}=r,o=rT(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,o)}},iT=zE(((e,t)=>e&t)),oT=AF(Xi,iT),lT={kernelName:Xi,backendName:"cpu",kernelFunc:oT},AT={kernelName:Ji,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,o=qh(Array.from(s),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},uT=_E((e=>Math.ceil(e))),cT=DE(Zi,uT),hT={kernelName:Zi,backendName:"cpu",kernelFunc:cT},dT=RE(eo,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),pT={kernelName:eo,backendName:"cpu",kernelFunc:dT},fT={kernelName:no,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(Gs(t.shape)),a=n.data.get(t.dataId),s=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values;for(let e=0;e<o.length;e++){const t=o[e],n=l[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};function mT(e,t,n,r){const a=ri(n,Gs(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=Gs(e.shape);a.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const s="string"===n?hw(e.vals):e.vals;let i=0;for(let n=0;n<e.shape[0];++n){const o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[o+t]=s[i++]}r+=e.shape[1]}))}return a}function gT(e){const{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,s)}const yT={kernelName:Ko,backendName:"cpu",kernelFunc:gT};function bT(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=ei(a,t[0].shape)[0],i=t.map((e=>e.shape));lb(i,s);let o=Ab(t.map((e=>e.shape)),s);if(0===Gs(o))return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter((e=>Gs(e.shape)>0));if(1===l.length)return $E({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){const e=l.map((e=>aF({inputs:{input:e},backend:n}))),t=l.map((e=>gT({inputs:{input:e},backend:n}))),r=bT({inputs:e,backend:n,attrs:{axis:s}}),a=bT({inputs:t,backend:n,attrs:{axis:s}}),i=tF({inputs:{real:r,imag:a},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),i}const A=l.map((e=>{const t=Gs(e.shape.slice(s));return fF({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=A.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));o=Ab(A.map((e=>e.shape)),1);const c=1===A[0].shape[0],h=mT(u,o,t[0].dtype,c),d=Ab(l.map((e=>e.shape)),s),p=n.makeTensorInfo(d,t[0].dtype,h);return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}const wT={kernelName:ro,backendName:"cpu",kernelFunc:bT};function vT(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dataFormat:l,dilations:A,dimRoundingMode:u}=r;TE([a,s],"conv2d");const c=fp(l),h=sp(a.shape,s.shape,i,A,o,u,!1,c),d=h.filterHeight,p=h.filterWidth,f=h.dilationHeight,m=h.dilationWidth,g=h.padInfo.left,y=h.padInfo.top,b="channelsLast"===h.dataFormat,w=new Nu(h.outShape,a.dtype),v=ci(a.shape),x=ci(s.shape),B=v[0],k=b?v[1]:v[2],C=b?v[2]:1,N=b?1:v[1],S=w.strides[0],I=b?w.strides[1]:w.strides[2],E=b?w.strides[2]:1,F=b?1:w.strides[1],T=n.data.get(a.dataId).values,L=n.data.get(s.dataId).values,U=w.values;for(let e=0;e<h.batchSize;++e){const t=e*B,n=e*S;for(let e=0;e<h.outHeight;++e){const r=n+e*I,a=e*h.strideHeight-y;for(let e=0;e<d;++e){const n=a+e*f;if(n<0||n>=h.inHeight)continue;const s=e*x[0],i=t+n*k;for(let e=0;e<h.outWidth;++e){const t=r+e*E,n=e*h.strideWidth-g;for(let e=0;e<p;++e){const r=n+e*m;if(r<0||r>=h.inWidth)continue;const a=i+r*C;let o=s+e*x[1];for(let e=0;e<h.inChannels;++e){const n=T[a+e*N];for(let e=0;e<h.outChannels;++e)U[t+e*F]+=n*L[o+e];o+=h.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,U)}const xT={kernelName:ao,backendName:"cpu",kernelFunc:vT},BT={kernelName:so,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:A,filterShape:u}=r;TE([a,s],"conv2dBackpropFilter");const c=fp(l),h=sp(a.shape,u,i,1,o,A,!1,c),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,g="channelsLast"===h.dataFormat,y=new Nu(h.filterShape,"float32"),b=h.padInfo.left,w=h.padInfo.top,v=n.data.get(a.dataId).values,x=n.data.get(s.dataId).values,B=new Nu(a.shape,a.dtype,v),k=new Nu(s.shape,s.dtype,x);for(let e=0;e<f;++e){const t=Math.max(0,Math.ceil((w-e)/d)),n=Math.min(h.outHeight,(h.inHeight+w-e)/d);for(let r=0;r<m;++r){const a=Math.max(0,Math.ceil((b-r)/p)),s=Math.min(h.outWidth,(h.inWidth+b-r)/p);for(let i=0;i<h.inChannels;++i)for(let o=0;o<h.outChannels;++o){let l=0;for(let A=0;A<h.batchSize;++A)for(let u=t;u<n;++u){const t=e+u*d-w;for(let e=a;e<s;++e){const n=r+e*p-b;l+=g?B.get(A,t,n,i)*k.get(A,u,e,o):B.get(A,i,t,n)*k.get(A,o,u,e)}}y.set(l,e,r,i,o)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},kT={kernelName:io,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:A,dimRoundingMode:u}=r;TE([a,s],"conv2dBackpropInput");const c=ci(s.shape),h=ci(a.shape);let d=fp(A);const p=sp(i,s.shape,o,1,l,u,!1,d),f=new Nu(p.inShape,"float32"),m=f.values,g=n.data.get(a.dataId).values,y=n.data.get(s.dataId).values,[b,w,v]=c,{batchSize:x,filterHeight:B,filterWidth:k,inChannels:C,inHeight:N,inWidth:S,outChannels:I,outHeight:E,outWidth:F,strideHeight:T,strideWidth:L}=p;d=p.dataFormat;const U=B-1-p.padInfo.top,_=k-1-p.padInfo.left,R="channelsLast"===d,D=f.strides[0],Q=R?f.strides[1]:f.strides[2],O=R?f.strides[2]:1,$=R?1:f.strides[1],M=h[0],P=R?h[1]:h[2],H=R?h[2]:1,z=R?1:h[1];for(let e=0;e<x;++e)for(let t=0;t<C;++t)for(let n=0;n<N;++n){const r=n-U,a=Math.max(0,Math.ceil(r/T)),s=Math.min(E,(B+r)/T);for(let i=0;i<S;++i){const o=i-_,l=Math.max(0,Math.ceil(o/L)),A=Math.min(F,(k+o)/L);let u=0;for(let n=a;n<s;++n){const a=n*T-r;for(let r=l;r<A;++r){const s=M*e+P*n+H*r,i=b*(B-1-a)+w*(k-1-(r*L-o))+v*t;for(let e=0;e<I;++e)u+=g[s+z*e]*y[i+e]}}m[D*e+Q*n+O*i+$*t]=u}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},CT={kernelName:oo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r;TE([a,s],"conv3d");const A=ip(a.shape,s.shape,i,l,o),{filterDepth:u,filterHeight:c,filterWidth:h,dilationDepth:d,dilationHeight:p,dilationWidth:f,padInfo:m}=A,g=m.front,y=m.left,b=m.top,w=new Nu(A.outShape,a.dtype),v=n.data.get(a.dataId).values,x=n.data.get(s.dataId).values,B=w.values,k=ci(a.shape),C=ci(s.shape);for(let e=0;e<A.batchSize;++e){const t=e*k[0],n=e*w.strides[0];for(let e=0;e<A.outDepth;++e){const r=n+e*w.strides[1],a=e*A.strideDepth-g;for(let e=0;e<u;++e){const n=a+e*d;if(n<0||n>=A.inDepth)continue;const s=e*C[0],i=t+n*k[1];for(let e=0;e<A.outHeight;++e){const t=r+e*w.strides[2],n=e*A.strideHeight-b;for(let e=0;e<c;++e){const r=n+e*p;if(r<0||r>=A.inHeight)continue;const a=s+e*C[1],o=i+r*k[2];for(let e=0;e<A.outWidth;++e){const n=t+e*A.outChannels,r=e*A.strideWidth-y;for(let e=0;e<h;++e){const t=r+e*f;if(t<0||t>=A.inWidth)continue;const s=a+e*C[2],i=o+t*A.inChannels;let l=s;for(let e=0;e<A.inChannels;++e){const t=v[i+e];for(let e=0;e<A.outChannels;++e)B[n+e]+=t*x[l+e];l+=A.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},NT={kernelName:lo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,filterShape:l}=r;TE([a,s],"conv3dBackpropFilterV2");const A=ci(a.shape),u=ci(s.shape),c=ip(a.shape,l,i,1,o),h=c.strideDepth,d=c.strideHeight,p=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=new Nu(c.filterShape,"float32"),b=y.values,[w,v,x,B]=y.strides,k=n.data.get(s.dataId).values,[C,N,S,I]=u,E=n.data.get(a.dataId).values,[F,T,L,U]=A,_=c.padInfo.front,R=c.padInfo.left,D=c.padInfo.top;for(let e=0;e<f;++e){const t=Math.max(0,Math.ceil((_-e)/h)),n=Math.min(c.outDepth,(c.inDepth+_-e)/h),r=e*w;for(let a=0;a<m;++a){const s=Math.max(0,Math.ceil((D-a)/d)),i=Math.min(c.outHeight,(c.inHeight+D-a)/d),o=a*v+r;for(let r=0;r<g;++r){const l=Math.max(0,Math.ceil((R-r)/p)),A=Math.min(c.outWidth,(c.inWidth+R-r)/p),u=r*x+o;for(let o=0;o<c.inChannels;++o){const f=o*B+u;for(let u=0;u<c.outChannels;++u){let m=0;for(let f=0;f<c.batchSize;++f){const c=f*F,g=f*C;for(let f=t;f<n;++f){const t=(e+f*h-_)*T+c,n=f*N+g;for(let e=s;e<i;++e){const s=(a+e*d-D)*L+t,i=e*S+n;for(let e=l;e<A;++e){const t=e*I+i;m+=E[(r+e*p-R)*U+s+o]*k[t+u]}}}}b[f+u]=m}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},ST={kernelName:Ao,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:i,strides:o,inputShape:l}=r;TE([a],"conv3dBackpropInputV2");const A=ci(a.shape),u=ci(s.shape),c=ip(l,s.shape,o,1,i),h=new Nu(c.inShape,"float32"),d=h.values,[p,f,m,g]=h.strides,y=n.data.get(a.dataId).values,[b,w,v,x]=A,B=n.data.get(s.dataId).values,[k,C,N,S]=u,{batchSize:I,filterDepth:E,filterHeight:F,filterWidth:T,inChannels:L,inDepth:U,inHeight:_,inWidth:R,outChannels:D,outDepth:Q,outHeight:O,outWidth:$,strideDepth:M,strideHeight:P,strideWidth:H}=c,z=E-1-c.padInfo.front,V=F-1-c.padInfo.top,W=T-1-c.padInfo.left;for(let e=0;e<I;++e)for(let t=0;t<L;++t)for(let n=0;n<U;++n){const r=n-z,a=Math.max(0,Math.ceil(r/M)),s=Math.min(Q,(E+r)/M);for(let i=0;i<_;++i){const o=i-V,l=Math.max(0,Math.ceil(o/P)),A=Math.min(O,(F+o)/P);for(let u=0;u<R;++u){const c=u-W,h=Math.max(0,Math.ceil(c/H)),I=Math.min($,(T+c)/H);let L=0;for(let n=a;n<s;++n){const a=n*M-r;for(let r=l;r<A;++r){const s=r*P-o;for(let i=h;i<I;++i){const o=b*e+w*n+v*r+x*i,l=k*(E-1-a)+C*(F-1-s)+N*(T-1-(i*H-c))+S*t;for(let e=0;e<D;++e)L+=y[o+e]*B[l+e]}}}d[p*e+f*n+m*i+g*u+t]=L}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},IT=RE(uo,(e=>Math.cos(e))),ET={kernelName:uo,backendName:"cpu",kernelFunc:IT},FT=RE(co,(e=>Math.cosh(e))),TT={kernelName:co,backendName:"cpu",kernelFunc:FT},LT={kernelName:fo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:A}=r,[u,c,h,d]=a.shape,p=s.shape[0],[f,m]=o,g=vh([p,f,m,d],"float32"),y=n.data.get(s.dataId).values,b=n.data.get(i.dataId).values,w=n.data.get(a.dataId).values,v=ci(a.shape),x=ci(g.shape);for(let e=0;e<p;e++){const t=4*e,n=y[t],r=y[t+1],a=y[t+2],s=y[t+3],i=b[e];if(i>=u)continue;const o=f>1?(a-n)*(c-1)/(f-1):0,p=m>1?(s-r)*(h-1)/(m-1):0;for(let t=0;t<f;t++){const u=f>1?n*(c-1)+t*o:.5*(n+a)*(c-1);if(u<0||u>c-1)for(let n=0;n<m;n++)for(let r=0;r<d;r++){const a=r+n*x[2]+t*x[1]+e*x[0];g.values[a]=A}else if("bilinear"===l){const n=Math.floor(u),a=Math.ceil(u),o=u-n;for(let l=0;l<m;l++){const u=m>1?r*(h-1)+l*p:.5*(r+s)*(h-1);if(u<0||u>h-1){for(let n=0;n<d;n++){const r=n+l*x[2]+t*x[1]+e*x[0];g.values[r]=A}continue}const c=Math.floor(u),f=Math.ceil(u),y=u-c;for(let r=0;r<d;r++){let s=r+c*v[2]+n*v[1]+i*v[0];const A=w[s];s=r+f*v[2]+n*v[1]+i*v[0];const u=w[s];s=r+c*v[2]+a*v[1]+i*v[0];const h=w[s];s=r+f*v[2]+a*v[1]+i*v[0];const d=A+(u-A)*y,p=h+(w[s]-h)*y;s=r+l*x[2]+t*x[1]+e*x[0],g.values[s]=d+(p-d)*o}}}else for(let n=0;n<m;++n){const a=m>1?r*(h-1)+n*p:.5*(r+s)*(h-1);if(a<0||a>h-1){for(let r=0;r<d;r++){const a=r+n*x[2]+t*x[1]+e*x[0];g.values[a]=A}continue}const o=Math.round(a),l=Math.round(u);for(let r=0;r<d;r++){const a=r+o*v[2]+l*v[1]+i*v[0],s=r+n*x[2]+t*x[1]+e*x[0];g.values[s]=w[a]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},UT={kernelName:ho,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;TE(a,"cumprod");const l=gf([s],a.shape.length);let A=a;null!=l&&(A=IF({inputs:{x:a},backend:n,attrs:{perm:l}}));const u=bf(1,a.shape.length)[0];if(u!==A.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${A.shape.length-1} but got axis=${u}`);const c=$u(A.dtype,"int32"),h=pi(Gs(A.shape),c),d=n.data.get(A.dataId).values,p=A.shape[A.shape.length-1],f=o?(e,t)=>e+p-t-1:(e,t)=>e+t;for(let e=0;e<d.length;e+=p)for(let t=0;t<p;t++){const n=f(e,t);if(0===t)h[n]=i?1:d[n];else{const r=f(e,t-1);h[n]=i?d[r]*h[r]:d[n]*h[r]}}const m=n.makeTensorInfo(A.shape,c,h);if(null!=l){const e=IF({inputs:{x:m},backend:n,attrs:{perm:yf(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(A),e}return m}},_T={kernelName:po,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;TE(a,"cumsum");const l=gf([s],a.shape.length);let A=a;null!=l&&(A=IF({inputs:{x:a},backend:n,attrs:{perm:l}}));const u=bf(1,a.shape.length)[0];if(u!==A.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${A.shape.length-1} but got axis=${u}`);const c=$u(A.dtype,"int32"),h=fi(Gs(A.shape),c),d=n.data.get(A.dataId).values,p=A.shape[A.shape.length-1],f=o?(e,t)=>e+p-t-1:(e,t)=>e+t;for(let e=0;e<d.length;e+=p)for(let t=0;t<p;t++){const n=f(e,t);if(0===t)h[n]=i?0:d[n];else{const r=f(e,t-1);h[n]=i?d[r]+h[r]:d[n]+h[r]}}const m=n.makeTensorInfo(A.shape,c,h);if(null!=l){const e=IF({inputs:{x:m},backend:n,attrs:{perm:yf(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(A),e}return m}},RT={kernelName:mo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i,binaryOutput:o}=r;if(1===a.shape.length){const e=rT(n.data.get(a.dataId).values,n.data.get(s.dataId).values,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,e)}if(2===a.shape.length){const e=aT(n.bufferSync(a),n.bufferSync(s),i,o);return n.makeTensorInfo(e.shape,s.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},DT={kernelName:go,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:i}=r;Vs("NHWC"===i,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`));const o=a.shape[0],l=a.shape[1],A=a.shape[2],u=a.shape[3],c=l*s,h=A*s,d=u/(s*s),p=n.data.get(a.dataId).values,f=new Float32Array(o*c*h*d);let m=0;for(let e=0;e<o;++e)for(let t=0;t<c;++t){const n=Math.floor(t/s),r=t%s;for(let t=0;t<h;++t){const a=Math.floor(t/s),i=(r*s+t%s)*d;for(let t=0;t<d;++t){const r=t+i+u*(a+A*(n+l*e));f[m++]=p[r]}}}return n.makeTensorInfo([o,c,h,d],a.dtype,f)}};function QT(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:A}=r;TE([a,s],"depthwiseConv2DNative");const u=ci(a.shape),c=ci(s.shape);let h=l;null==h&&(h=[1,1]),Vs(dp(i,h),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`));const d=sp(a.shape,s.shape,i,h,o,A,!0),{filterHeight:p,filterWidth:f,dilationHeight:m,dilationWidth:g,padInfo:y}=d,b=y.left,w=y.top,v=d.outChannels/d.inChannels,x=new Nu(d.outShape,a.dtype),B=n.data.get(a.dataId).values,k=n.data.get(s.dataId).values,C=x.values;for(let e=0;e<d.batchSize;++e){const t=e*u[0],n=e*x.strides[0];for(let e=0;e<d.outHeight;++e){const r=n+e*x.strides[1],a=e*d.strideHeight-w;for(let e=0;e<p;++e){const n=a+e*m;if(n<0||n>=d.inHeight)continue;const s=e*c[0],i=t+n*u[1];for(let e=0;e<d.outWidth;++e){const t=r+e*x.strides[2],n=e*d.strideWidth-b;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=d.inWidth)continue;const a=s+e*c[1],o=i+r*d.inChannels;let l=t,A=a;for(let e=0;e<d.inChannels;++e){const t=B[o+e];for(let e=0;e<v;++e)C[l+e]+=t*k[A+e];l+=v,A+=v}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const OT={kernelName:yo,backendName:"cpu",kernelFunc:QT},$T={kernelName:bo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:A,filterShape:u}=r;TE([a,s],"depthwiseConv2dNativeBackpropFilter");const c=sp(a.shape,u,i,o,l,A,!0),{strideHeight:h,strideWidth:d,filterHeight:p,filterWidth:f}=c,m=new Nu(c.filterShape,"float32"),g=c.padInfo.left,y=c.padInfo.top,b=c.outChannels/c.inChannels,w=n.data.get(a.dataId).values,v=new Nu(a.shape,a.dtype,w),x=n.data.get(s.dataId).values,B=new Nu(s.shape,s.dtype,x);for(let e=0;e<p;++e){const t=Math.max(0,Math.ceil((y-e)/h)),n=Math.min(c.outHeight,(c.inHeight+y-e)/h);for(let r=0;r<f;++r){const a=Math.max(0,Math.ceil((g-r)/d)),s=Math.min(c.outWidth,(c.inWidth+g-r)/d);for(let i=0;i<c.outChannels;++i){const o=Math.trunc(i/b),l=i%b;let A=0;for(let l=0;l<c.batchSize;++l)for(let u=t;u<n;++u){const t=e+u*h-y;for(let e=a;e<s;++e){const n=r+e*d-g;A+=v.get(l,t,n,o)*B.get(l,u,e,i)}}m.set(A,e,r,o,l)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},MT={kernelName:wo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:A,inputShape:u}=r;TE([a,s],"depthwiseConv2DNativeBackpropInput");const c=ci(a.shape),h=ci(s.shape),d=sp(u,s.shape,i,o,l,A,!0),p=new Nu(d.inShape,"float32"),f=p.values,[m,g,y]=p.strides,b=n.data.get(a.dataId).values,[w,v,x]=c,B=n.data.get(s.dataId).values,[k,C,N]=h,{batchSize:S,filterHeight:I,filterWidth:E,inChannels:F,inHeight:T,inWidth:L,outChannels:U,outHeight:_,outWidth:R,strideHeight:D,strideWidth:Q}=d,O=I-1-d.padInfo.top,$=E-1-d.padInfo.left,M=U/F;for(let e=0;e<S;++e)for(let t=0;t<F;++t)for(let n=0;n<T;++n){const r=n-O,a=Math.max(0,Math.ceil(r/D)),s=Math.min(_,(I+r)/D);for(let i=0;i<L;++i){const o=i-$,l=Math.max(0,Math.ceil(o/Q)),A=Math.min(R,(E+o)/Q);let u=0;for(let n=a;n<s;++n){const a=n*D-r;for(let r=l;r<A;++r){const s=w*e+v*n+x*r,i=k*(I-1-a)+C*(E-1-(r*Q-o))+N*t;for(let e=0;e<M;++e)u+=b[s+(t*M+e)]*B[i+e]}}f[m*e+g*n+y*i+t]=u}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},PT={kernelName:vo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=Gs(r.shape),s=n.data.get(r.dataId).values,i=vh([a,a],r.dtype),o=i.values;for(let e=0;e<s.length;e++)o[e*a+e]=s[e];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}},HT={kernelName:xo,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a}=e,{strides:s,pad:i,dilations:o}=n,l=t,A=l.data.get(r.dataId).values,u=r.shape.length,c=l.data.get(a.dataId).values,h=a.shape.length,{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:w,strideWidth:v,filterHeight:x,filterWidth:B,dilationHeight:k,dilationWidth:C,outShape:N}=np(r.shape,a.shape,s,i,"NHWC",o),S=Gs(N),I=N.length,E=ri(r.dtype,S);for(let e=0;e<d;++e)for(let t=0;t<g;++t){const n=t*w-b.top;for(let s=0;s<y;++s){const i=s*v-b.left;for(let o=0;o<m;++o){let l=Number.MIN_SAFE_INTEGER;for(let t=0;t<x;++t){const s=n+t*k;if(s>=0&&s<p)for(let n=0;n<B;++n){const d=i+n*C;if(d>=0&&d<f){const i=yi([e,s,d,o],u,ci(r.shape)),p=yi([t,n,o],h,ci(a.shape)),f=A[i]+c[p];f>l&&(l=f)}}}E[yi([e,t,s,o],I,ci(N))]=l}}}return{dataId:l.write(hu(E,r.dtype),N,r.dtype),shape:N,dtype:r.dtype}}},zT={kernelName:ko,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:l}=n,A=t,u=di(r.shape,A.data.get(r.dataId).values),c=di(a.shape,A.data.get(a.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:f,outHeight:m,outWidth:g,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:v,filterWidth:x,dilationHeight:B,dilationWidth:k,outShape:C}=np(r.shape,a.shape,i,o,"NHWC",l);Vs(s.rank===C.length,(()=>`Error in ${ko}, dy must have the same rank as output ${C.length}, but got ${s.rank}`));const N=di(C,A.data.get(s.dataId).values),S=mi(a.shape,a.dtype);for(let e=0;e<h;++e)for(let t=0;t<m;++t){const n=t*b-y.top;for(let r=0;r<g;++r){const a=r*w-y.left;for(let s=0;s<f;++s){let i=Number.MIN_SAFE_INTEGER,o=0,l=0;for(let t=0;t<v;++t){const r=n+t*B;if(r>=0&&r<d)for(let n=0;n<x;++n){const A=a+n*k;if(A>=0&&A<p){const a=u[e][r][A][s]+c[t][n][s];a>i&&(i=a,o=t,l=n)}}}S[o][l][s]+=N[e][t][r][s]}}}return{dataId:A.write(hu(S,r.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},VT={kernelName:Bo,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:a,dy:s}=e,{strides:i,pad:o,dilations:l}=n,A=t,u=di(r.shape,A.data.get(r.dataId).values),c=di(a.shape,A.data.get(a.dataId).values),{batchSize:h,inHeight:d,inWidth:p,inChannels:f,outHeight:m,outWidth:g,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:v,filterWidth:x,dilationHeight:B,dilationWidth:k,outShape:C}=np(r.shape,a.shape,i,o,"NHWC",l);Vs(s.rank===C.length,(()=>`Error in ${Bo}, dy must have the same rank as output ${C.length}, but got ${s.rank}`));const N=di(C,A.data.get(s.dataId).values),S=mi(r.shape,r.dtype);for(let e=0;e<h;++e)for(let t=0;t<m;++t){const n=t*b-y.top;for(let r=0;r<g;++r){const a=r*w-y.left;for(let s=0;s<f;++s){let i=Number.MIN_SAFE_INTEGER,o=n<0?0:n,l=a<0?0:a;for(let t=0;t<v;++t){const r=n+t*B;if(r>=0&&r<d)for(let n=0;n<x;++n){const A=a+n*k;if(A>=0&&A<p){const a=u[e][r][A][s]+c[t][n][s];a>i&&(i=a,o=r,l=A)}}}S[e][o][l][s]+=N[e][t][r][s]}}}return{dataId:A.write(hu(S,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},WT={kernelName:"Draw",backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:s,options:i}=r,{contextOptions:o,imageOptions:l}=i||{},A=(null==l?void 0:l.alpha)||1,u=(null==o?void 0:o.contextType)||"2d";if("2d"!==u)throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const c=s.getContext(u,(null==o?void 0:o.contextAttributes)||{});if(null==c)throw new Error(`Could not get the context with ${u} type.`);const[h,d]=a.shape.slice(0,2),p=2===a.shape.length?1:a.shape[2],f=n.data.get(a.dataId).values,m="float32"===a.dtype?255:1,g=new Uint8ClampedArray(d*h*4);for(let e=0;e<h*d;++e){const t=[0,0,0,255*A];for(let n=0;n<p;n++){const r=f[e*p+n];if("float32"===a.dtype){if(r<0||r>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${r}.`)}else if("int32"===a.dtype&&(r<0||r>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${r}.`);1===p?(t[0]=r*m,t[1]=r*m,t[2]=r*m):t[n]=r*m}const n=4*e;g[n+0]=Math.round(t[0]),g[n+1]=Math.round(t[1]),g[n+2]=Math.round(t[2]),g[n+3]=Math.round(t[3])}s.width=d,s.height=h;const y=new ImageData(g,d,h);return c.putImageData(y,0,0),a}},KT=zE(((e,t)=>e*t)),GT=uF(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),jT=AF(wl,KT,GT),qT={kernelName:wl,backendName:"cpu",kernelFunc:jT};function XT(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;let o;TE(a,"sum"),o="bool"===a.dtype?oF({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):$E({inputs:{x:a},backend:n});const l=o.shape.length,A=ei(s,o.shape),u=gf(A,l);let c=A,h=o;null!=u&&(h=IF({inputs:{x:o},backend:n,attrs:{perm:u}}),c=bf(c.length,l)),mf("sum",c,h.shape.length);const[d,p]=pf(h.shape,c);let f=rF(n,d,$u(h.dtype,"int32"));const m=Gs(p),g=n.data.get(f.dataId).values,y=n.data.get(h.dataId).values;for(let e=0;e<g.length;++e){const t=e*m;let n=0;for(let e=0;e<m;++e)n+=y[t+e];g[e]=n}if(i){const e=f;f=fF({inputs:{x:f},backend:n,attrs:{shape:ff(f.shape,A)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(o),null!=u&&n.disposeIntermediateTensorInfo(h),f}const JT={kernelName:oA,backendName:"cpu",kernelFunc:XT},YT={kernelName:No,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:i,summedDims:o,idDims:l}=Vb(a,s.length);Kb(i.length,l,s);const{path:A,steps:u}=Gb(o,l),c=u.length;let h=null,d=i.length;const p=[];for(let e=0;e<c;++e){for(const t of u[e]){const{permutationIndices:e,expandDims:r}=Wb(d,l[t]);let a;jb(e)?a=s[t]:(a=IF({inputs:{x:s[t]},backend:n,attrs:{perm:e}}),p.push(a));const i=a.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);js(a.shape,i)||(a=fF({inputs:{x:a},backend:n,attrs:{shape:i}}),p.push(a)),null===h?h=a:(h=jT({inputs:{a,b:h},backend:n}),p.push(h))}e<c-1&&(A[e]>=0&&(h=XT({inputs:{x:h},backend:n,attrs:{axis:A[e]-(i.length-d),keepDims:!1}}),p.push(h)),d--)}for(const e of p)e!==h&&n.disposeIntermediateTensorInfo(e);return h}},ZT={kernelName:Io,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:a}=t;TE([r,a],"eluGrad");const s=new Float32Array(Gs(a.shape)),i=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let e=0;e<i.length;++e){const t=i[e];s[e]=t>=0?o[e]:o[e]*(t+1)}return n.makeTensorInfo(a.shape,"float32",s)}},eL=zE(((e,t)=>e===t?1:0)),tL=AF(Fo,eL,null,"bool"),nL={kernelName:Fo,backendName:"cpu",kernelFunc:tL},rL=Nb,aL=Sb,sL=Ib,iL=Eb,oL=Fb,lL=Tb,AL=RE(Eo,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+rL*n);return t*(1-((((lL*r+oL)*r+iL)*r+sL)*r+aL)*r*Math.exp(-n*n))})),uL={kernelName:Eo,backendName:"cpu",kernelFunc:AL},cL=_E((e=>Math.exp(e))),hL=DE(To,cL,"float32"),dL={kernelName:To,backendName:"cpu",kernelFunc:hL};function pL(e){const{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:s}=r,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(Vs(-(i+1)<=s,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),l=i+s+1),o.splice(l,0,1),fF({inputs:{x:a},backend:n,attrs:{shape:o}})}const fL={kernelName:Lo,backendName:"cpu",kernelFunc:pL},mL=_E((e=>Math.expm1(e))),gL=DE(Uo,mL),yL={kernelName:Uo,backendName:"cpu",kernelFunc:gL},bL=zE(((e,t)=>e/t)),wL=AF(Co,bL),vL={kernelName:Co,backendName:"cpu",kernelFunc:wL},xL=zE(((e,t)=>e-t)),BL=uF(((e,t,n,r)=>({real:e-n,imag:t-r}))),kL=AF(BA,xL,BL),CL={kernelName:BA,backendName:"cpu",kernelFunc:kL};function NL(e,t,n){const r=e.shape,a=r[0],s=r[1],i=n.data.get(e.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,A=[a,s],u=Gs(A),c=ni("float32",u),h=ni("float32",u);for(let e=0;e<a;e++){const r=eT({inputs:{x:o},backend:n,attrs:{begin:[e,0],size:[1,s]}}),a=eT({inputs:{x:l},backend:n,attrs:{begin:[e,0],size:[1,s]}}),i=tF({inputs:{real:r,imag:a},backend:n}),{real:A,imag:u}=SL(i,t,n),d=Lb(A,u);for(let t=0;t<s;t++){const n=Db(d,t);c[e*s+t]=n.real,h[e*s+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i)}const d=n.makeTensorInfo(A,"float32",c),p=n.makeTensorInfo(A,"float32",h),f=tF({inputs:{real:d,imag:p},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}function SL(e,t,n){const r=Gs(e.shape),a=n.data.get(e.dataId),s=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if((o=r)&o-1){const e=function(e,t,n){const r=new Float32Array(2*t);for(let a=0;a<t;a++){let s=0,i=0;for(let r=0;r<t;r++){const o=$b(a*r,t,n),l=Db(e,r);s+=l.real*o.real-l.imag*o.imag,i+=l.real*o.imag+l.imag*o.real}n&&(s/=t,i/=t),Qb(r,s,i,a)}return r}(Lb(s,i),r,t);return Ub(e)}{const a=IL(s,i,r,t,n),o=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(o,"float32",a.real),t=n.makeTensorInfo(o,"float32",a.imag),s=n.makeTensorInfo([],"float32",cu(r,"float32")),i=$E({inputs:{x:s},backend:n}),l=vL.kernelFunc({inputs:{a:e,b:s},backend:n}),A=vL.kernelFunc({inputs:{a:t,b:i},backend:n}),u=n.data.get(l.dataId).values,c=n.data.get(A.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(A),{real:u,imag:c}}return a}var o}function IL(e,t,n,r,a){if(1===n)return{real:e,imag:t};const s=Lb(e,t),i=n/2,o=_b(s),l=o.real,A=o.imag,u=[l.length],c=a.makeTensorInfo(u,"float32",l),h=a.makeTensorInfo(u,"float32",A),d=tF({inputs:{real:c,imag:h},backend:a}),p=Rb(s),f=p.real,m=p.imag,g=[f.length],y=a.makeTensorInfo(g,"float32",f),b=a.makeTensorInfo(g,"float32",m),w=tF({inputs:{real:y,imag:b},backend:a}),v=IL(l,A,i,r,a),x=v.real,B=v.imag,k=[x.length],C=a.makeTensorInfo(k,"float32",x),N=a.makeTensorInfo(k,"float32",B),S=tF({inputs:{real:C,imag:N},backend:a}),I=IL(f,m,i,r,a),E=I.real,F=I.imag,T=[E.length],L=a.makeTensorInfo(T,"float32",E),U=a.makeTensorInfo(T,"float32",F),_=tF({inputs:{real:L,imag:U},backend:a}),R=Ob(n,r),D=[R.real.length],Q=a.makeTensorInfo(D,"float32",R.real),O=a.makeTensorInfo(D,"float32",R.imag),$=tF({inputs:{real:Q,imag:O},backend:a}),M=jT({inputs:{a:$,b:_},backend:a}),P=dF({inputs:{a:S,b:M},backend:a}),H=kL({inputs:{a:S,b:M},backend:a}),z=aF({inputs:{input:P},backend:a}),V=aF({inputs:{input:H},backend:a}),W=gT({inputs:{input:P},backend:a}),K=gT({inputs:{input:H},backend:a}),G=bT({inputs:[z,V],backend:a,attrs:{axis:0}}),j=bT({inputs:[W,K],backend:a,attrs:{axis:0}}),q=a.data.get(G.dataId).values,X=a.data.get(j.dataId).values;return a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(Q),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(j),{real:q,imag:X}}const EL={kernelName:_o,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=Gs(r.shape),s=r.shape[r.shape.length-1],i=fF({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=NL(i,!1,n),l=fF({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}};function FL(e){const{backend:t,attrs:n}=e,{shape:r,value:a,dtype:s}=n,i=s||li(a),o=ri(i,Gs(r));return function(e,t){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}const TL={kernelName:Ro,backendName:"cpu",kernelFunc:FL},LL={kernelName:Do,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,a=n,s=ni(r.dtype,Gs(r.shape)),[i,o,l,A]=r.shape,u=a.data.get(r.dataId).values;for(let e=0;e<i;e++){const t=e*l*o*A;for(let e=0;e<o;e++){const n=e*(l*A);for(let e=0;e<l;e++){const r=e*A;for(let a=0;a<A;a++){const i=Math.round(l-e-1),o=t+n+r+a;let c=u[o];i>=0&&i<l&&(c=u[t+n+i*A+a]),s[o]=c}}}}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},UL=_E((e=>Math.floor(e))),_L=DE(Qo,UL),RL={kernelName:Qo,backendName:"cpu",kernelFunc:_L},DL=zE(((e,t)=>Math.floor(e/t))),QL=AF(Oo,DL,null,"int32"),OL={kernelName:Oo,backendName:"cpu",kernelFunc:QL},$L={kernelName:OA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:A,dataFormat:u,dilations:c,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let f=vT({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:A,dataFormat:u,dilations:c,dimRoundingMode:h}});if(i){const e=f;if("NCHW"===u&&1===i.shape.length&&1!==i.shape[0]){const e=fF({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});f=dF({inputs:{a:f,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else f=dF({inputs:{a:f,b:i},backend:n});n.disposeIntermediateTensorInfo(e)}if(d){const e=f;if("NCHW"===u&&"prelu"===d&&1===o.shape.length&&1!==o.shape[0]){const e=fF({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});f=eF(n,f,d,e,p),n.disposeIntermediateTensorInfo(e)}else f=eF(n,f,d,o,p);n.disposeIntermediateTensorInfo(e)}return f}},ML={kernelName:$A,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:A,dataFormat:u,dilations:c,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r;let f=QT({inputs:{x:a,filter:s},backend:n,attrs:{strides:l,pad:A,dataFormat:u,dilations:c,dimRoundingMode:h}});if(i){const e=f;f=dF({inputs:{a:f,b:i},backend:n}),n.disposeIntermediateTensorInfo(e)}if(d){const e=f;f=eF(n,f,d,o,p),n.disposeIntermediateTensorInfo(e)}return f}};function PL(e,t,n,r,a,s,i,o,l){const A=vh([r,s],n);for(let n=0;n<r;n++){const r=[];let u=0;for(let t=0;t<a;t++){const s=e[n*a+t];u+=s*i[t],r.push(s)}if(u<0||u>=l/s)throw new Error(`Invalid indices: ${r} does not index into ${o}`);for(let e=0;e<s;e++)A.values[n*s+e]=t.get(...t.indexToLoc(u*s+e))}return A}const HL={kernelName:Po,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=Gs(r.shape),i=a.shape,o=i[i.length-1],[l,A,u,c]=Bb(r,a);if(0===A)return n.makeTensorInfo(l,r.dtype,[]);const h=PL(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,A,o,u,c,r.shape,s);return n.makeTensorInfo(l,r.dtype,h.values)}};function zL(e,t,n){const r=vh(n,e.dtype);for(let n=0;n<r.size;++n){const a=r.indexToLoc(n).slice(),s=a[0],i=a[2],o=t.locToIndex([s,i]);a[2]=t.values[o];const l=e.locToIndex(a);0<=l&&l<e.values.length&&(r.values[n]=e.values[l])}return r}const VL={kernelName:Mo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:i,batchDims:o}=r;TE([a,s],"gatherV2");const l=ei(i,a.shape)[0],A=n.data.get(s.dataId).values,u=a.shape[l];for(let e=0;e<A.length;++e){const t=A[e];Vs(t<=u-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${u-1}]`))}let c=o;null==o&&(c=0);const h=Gs(s.shape),d=cw(a,s,l,c),p=fF({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),f=fF({inputs:{x:s},backend:n,attrs:{shape:[d.batchSize,h/d.batchSize]}}),m=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],g=n.bufferSync(f),y=zL(n.bufferSync(p),g,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(d.outputShape,y.dtype,y.values)}},WL=zE(((e,t)=>e>t?1:0)),KL=AF(Ho,WL,null,"bool"),GL={kernelName:Ho,backendName:"cpu",kernelFunc:KL},jL=zE(((e,t)=>e>=t?1:0)),qL=AF(zo,jL,null,"bool"),XL={kernelName:zo,backendName:"cpu",kernelFunc:qL},JL={kernelName:Wo,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,a=Gs(r.shape),s=r.shape[r.shape.length-1],i=fF({inputs:{x:r},backend:n,attrs:{shape:[a/s,s]}}),o=NL(i,!0,n),l=fF({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}},YL=RE(Go,(e=>Number.isFinite(e)?1:0),"bool"),ZL={kernelName:Go,backendName:"cpu",kernelFunc:YL},eU=RE(jo,(e=>Math.abs(e)===1/0?1:0),"bool"),tU={kernelName:jo,backendName:"cpu",kernelFunc:eU},nU=RE(qo,(e=>Number.isNaN(e)?1:0),"bool"),rU={kernelName:qo,backendName:"cpu",kernelFunc:nU},aU=zE(((e,t)=>e<t?1:0)),sU=AF(Jo,aU,null,"bool"),iU={kernelName:Jo,backendName:"cpu",kernelFunc:sU},oU=zE(((e,t)=>e<=t?1:0)),lU=AF(Yo,oU,null,"bool"),AU={kernelName:Yo,backendName:"cpu",kernelFunc:lU};function uU(e,t,n){const r=(t-e)/(n-1),a=fi(n,"float32");a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+r;return a}const cU={kernelName:Zo,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,i=uU(r,a,s);return t.makeTensorInfo([i.length],"float32",i)}},hU=_E((e=>Math.log(e))),dU=DE(el,hU),pU={kernelName:el,backendName:"cpu",kernelFunc:dU},fU=RE(tl,(e=>Math.log1p(e))),mU={kernelName:tl,backendName:"cpu",kernelFunc:fU},gU=zE(((e,t)=>e&&t)),yU=AF(nl,gU,null,"bool"),bU={kernelName:nl,backendName:"cpu",kernelFunc:yU},wU=RE(rl,(e=>e?0:1),"bool"),vU={kernelName:rl,backendName:"cpu",kernelFunc:wU},xU=zE(((e,t)=>e||t)),BU=AF(al,xU,null,"bool"),kU={kernelName:al,backendName:"cpu",kernelFunc:BU},CU={kernelName:sl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=r;TE(a,"LRN");const A=a.shape[3],u=A-1,c=n.data.get(a.dataId).values,h=Gs(a.shape),d=new Float32Array(h);function p(e){const t=e%A;let n=e-t+Math.max(0,t-s);const r=e-t+Math.min(t+s,u);let a=0;for(;n<=r;n++){const e=c[n];a+=e*e}return a}for(let e=0;e<h;e++){const t=p(e),n=c[e]*Math.pow(i+o*t,-l);d[e]=n}return n.makeTensorInfo(a.shape,a.dtype,d)}},NU={kernelName:il,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:A,beta:u}=r;TE(i,"LRNGrad");const c=Gs(i.shape),h=i.shape[3],d=n.data.get(i.dataId).values,p=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,m=new Float32Array(c),g=c;for(let e=0;e<g;e++){const t=e%h,n=e-t+Math.max(0,t-o),r=e-t+Math.min(h,t+o+1);let a=0;for(let e=n;e<r;e++)a+=Math.pow(p[e],2);a=A*a+l;for(let t=n;t<r;t++){let n=-2*A*u*p[t]*f[e]/a;e===t&&(n+=Math.pow(a,-u)),n*=d[e],m[t]+=n}}return n.makeTensorInfo(i.shape,a.dtype,m)}};function SU(e,t,n,r){const a=ni(r,Gs(n));for(let n=0;n<a.length;++n){const r=n*t;let s=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>s)&&(s=t)}a[n]=s}return a}function IU(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:i}=r,o=n;let l=a.shape;const A=l.length,u=ei(s,l);let c=u;const h=gf(c,A);let d=o.data.get(a.dataId).values;if(null!=h){const e=new Array(A);for(let t=0;t<e.length;t++)e[t]=l[h[t]];d=SF(d,l,a.dtype,h,e),c=bf(c.length,A),l=e}TE(a,"max"),mf("max",c,A);const[p,f]=pf(l,c),m=SU(d,Gs(f),p,a.dtype),g=o.write(m,p,a.dtype);let y=p;return i&&(y=ff(p,u)),{dataId:g,shape:y,dtype:a.dtype}}const EU={kernelName:ol,backendName:"cpu",kernelFunc:IU},FU=zE(((e,t)=>Math.max(e,t))),TU=AF(ll,FU),LU={kernelName:ll,backendName:"cpu",kernelFunc:TU},UU={kernelName:Al,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;TE(a,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;Vs(dp(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const A=rp(a.shape,s,i,1,o,l);let u;if(1===A.filterWidth&&1===A.filterHeight&&js(A.inShape,A.outShape))u=$E({inputs:{x:a},backend:n});else{const e=n.data.get(a.dataId).values,t=ci(a.shape),r=WF(e,a.shape,a.dtype,t,A,"max");u=n.makeTensorInfo(A.outShape,a.dtype,r.values)}return u}},_U={kernelName:cl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:A}=r;TE(a,"maxPool3d");const u=ap(a.shape,s,i,1,o,l,A),c=GF(n.data.get(a.dataId).values,a.shape,a.dtype,ci(a.shape),u,"max");return n.makeTensorInfo(c.shape,"float32",c.values)}},RU={kernelName:hl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,{filterSize:i,strides:o,pad:l,dimRoundingMode:A}=r;TE([a,s],"maxPool3DGrad");const u=ap(s.shape,i,o,1,l,A),c=function(e,t){const n=vh(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,s=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,A=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,h=t.padInfo.front,d=t.padInfo.top,p=t.padInfo.left;for(let f=0;f<t.batchSize;++f)for(let m=0;m<t.inChannels;++m)for(let g=0;g<t.outDepth;++g){const y=g*r-h;let b=y;for(;b<0;)b+=i;const w=Math.min(t.inDepth,A+y);for(let r=0;r<t.outHeight;++r){const A=r*a-d;let h=A;for(;h<0;)h+=o;const v=Math.min(t.inHeight,u+A);for(let a=0;a<t.outWidth;++a){const d=a*s-p;let x=d;for(;x<0;)x+=l;const B=Math.min(t.inWidth,c+d);let k=Number.NEGATIVE_INFINITY,C=-1;for(let t=b;t<w;t+=i){const n=t-y;for(let r=h;r<v;r+=o){const a=r-A;for(let s=x;s<B;s+=l){const i=s-d,o=e.get(f,t,r,s,m);o>=k&&(k=o,C=n*u*c+a*u+i)}}}n.set(C,f,g,r,a,m)}}}return n}(n.bufferSync(s),u),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,f=u.dilationDepth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterDepth,b=u.effectiveFilterHeight,w=u.effectiveFilterWidth,v=y-1-u.padInfo.front,x=w-1-u.padInfo.left,B=b-1-u.padInfo.top,k=vh(s.shape,"float32"),C=n.bufferSync(a);for(let e=0;e<u.batchSize;++e)for(let t=0;t<u.inChannels;++t)for(let n=0;n<u.inDepth;++n)for(let r=0;r<u.inHeight;++r)for(let a=0;a<u.inWidth;++a){const s=n-v,i=r-B,o=a-x;let l=0;for(let n=0;n<y;n+=f){const r=(s+n)/h;if(!(r<0||r>=u.outDepth||Math.floor(r)!==r))for(let a=0;a<b;a+=m){const s=(i+a)/d;if(!(s<0||s>=u.outHeight||Math.floor(s)!==s))for(let i=0;i<w;i+=g){const A=(o+i)/p;if(A<0||A>=u.outWidth||Math.floor(A)!==A)continue;const h=y*b*w-1-c.get(e,r,s,A,t)===n*b*w+a*w+i?1:0;0!==h&&(l+=C.get(e,r,s,A,t)*h)}}}k.set(l,e,n,r,a,t)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},DU={kernelName:ul,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:i}=t,o=s;TE([s,i],"maxPoolGrad");const{filterSize:l,strides:A,pad:u,dimRoundingMode:c}=r,h=rp(o.shape,l,A,1,u,c),d=n.data.get(o.dataId).values,p=vh(h.outShape,o.dtype,KF(d,o.shape,o.dtype,h).values),f=h.strideHeight,m=h.strideWidth,g=h.dilationHeight,y=h.dilationWidth,b=h.effectiveFilterHeight,w=h.effectiveFilterWidth,v=w-1-h.padInfo.left,x=b-1-h.padInfo.top,B=vh(o.shape,"float32"),k=n.data.get(a.dataId).values,C=vh(a.shape,"float32",k);for(let e=0;e<h.batchSize;++e)for(let t=0;t<h.inChannels;++t)for(let n=0;n<h.inHeight;++n)for(let r=0;r<h.inWidth;++r){const a=n-x,s=r-v;let i=0;for(let n=0;n<b;n+=g){const r=(a+n)/f;if(!(r<0||r>=h.outHeight||Math.floor(r)!==r))for(let a=0;a<w;a+=y){const o=(s+a)/m;if(o<0||o>=h.outWidth||Math.floor(o)!==o)continue;const l=b*w-1-p.get(e,r,o,t)===n*w+a?1:0;0!==l&&(i+=C.get(e,r,o,t)*l)}}B.set(i,e,n,r,t)}return n.makeTensorInfo(B.shape,B.dtype,B.values)}},QU={kernelName:dl,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=t,l=n;TE(r,"MaxPoolWithArgmax");const A=l.data.get(r.dataId).values,u=rp(r.shape,a,s,[1,1],i),[c,h]=function(e,t,n,r,a){const s=WF(e,0,n,ci(t),a,"max"),i=KF(e,t,n,a,!0,r);return[s.values,i.values]}(A,r.shape,r.dtype,o,u),d=l.write(c,u.outShape,r.dtype),p=l.write(h,u.outShape,r.dtype);return[{dataId:d,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}},OU={kernelName:pl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=ei(s,a.shape),l=Gs(pf(a.shape,o)[1]),A=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));A.push(u);const c=oF({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});A.push(c);const h=wL({inputs:{a:c,b:u},backend:n});A.push(h);const d=XT({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:i}});return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},$U={kernelName:fl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;TE(a,"min");const o=ei(s,a.shape);let l=o;const A=gf(l,a.shape.length);let u=a;null!=A&&(u=IF({inputs:{x:a},backend:n,attrs:{perm:A}}),l=bf(l.length,a.shape.length)),mf("min",l,u.shape.length);const[c,h]=pf(u.shape,l),d=Gs(h),p=fi(Gs(c),u.dtype),f=n.data.get(u.dataId).values;for(let e=0;e<p.length;++e){const t=e*d;let n=f[t];for(let e=0;e<d;++e){const r=f[t+e];(Number.isNaN(r)||r<n)&&(n=r)}p[e]=n}null!=A&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(c,u.dtype,p);if(i){const e=fF({inputs:{x:m},backend:n,attrs:{shape:ff(c,o)}});return n.disposeIntermediateTensorInfo(m),e}return m}},MU=zE(((e,t)=>Math.min(e,t))),PU=AF(ml,MU),HU={kernelName:ml,backendName:"cpu",kernelFunc:PU},zU={kernelName:gl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,mode:i}=r;TE(a,"mirrorPad");const o=s.map(((e,t)=>e[0]+a.shape[t]+e[1])),l=s.map((e=>e[0])),A=s.map(((e,t)=>e[0]+a.shape[t])),u="reflect"===i?0:1,c=n.data.get(a.dataId).values,h=a.shape.length,d=ci(a.shape),p=Gs(o),f=o.length,m=ci(o),g=ni(a.dtype,p);for(let e=0;e<p;e++){let t=bi(e,f,m);for(let e=0;e<f;e++)t[e]<l[e]?t[e]=2*l[e]-t[e]-u:t[e]>=A[e]&&(t[e]=2*(A[e]-1)-t[e]+u);t=t.map(((e,t)=>e-l[t]));const n=yi(t,h,d);g[e]=c[n]}return{dataId:n.write(g,o,a.dtype),shape:o,dtype:a.dtype}}},VU=zE(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),WU=AF(yl,VU),KU={kernelName:yl,backendName:"cpu",kernelFunc:WU};function GU(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,i=a.shape.length;let o=s;if(-1===o&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const l=ei([o],a.shape),A=IU({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=ff(A.shape,l),c=fF({inputs:{x:A},backend:n,attrs:{shape:u}}),h=kL({inputs:{a,b:c},backend:n}),d=hL({inputs:{x:h},backend:n}),p=XT({inputs:{x:d},backend:n,attrs:{axis:l,keepDims:!1}}),f=fF({inputs:{x:p},backend:n,attrs:{shape:u}}),m=wL({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}const jU={kernelName:uA,backendName:"cpu",kernelFunc:GU},qU={kernelName:bl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:i,normalized:o}=r;TE(a,"multinomial");const l=o?a:GU({inputs:{logits:a},backend:n,attrs:{dim:-1}}),A=l.shape[0],u=l.shape[1],c=n.data.get(l.dataId).values,h=[A,s],d=fi(Gs(h),"int32");for(let e=0;e<A;++e){const t=e*u,n=new Float32Array(u-1);n[0]=c[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+c[t+e];const r=_m.alea(i.toString()),a=e*s;for(let e=0;e<s;++e){const t=r();d[a+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){d[a+e]=r;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",d)}};function XU(e,t,n){const r=cu(-1,n);return KT([],t,r,e,n)}const JU={kernelName:vl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;TE(r,"neg");const a=n.data.get(r.dataId).values,[s,i]=XU(a,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}},YU=wy,ZU={kernelName:Bl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r;TE(a,"NonMaxSuppression");const A=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:c}=YU(A,u,i,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},e_=vy,t_={kernelName:kl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:A}=r;TE(a,"NonMaxSuppressionPadded");const u=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:h,validOutputs:d}=e_(u,c,i,o,l,A);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},n_=xy,r_={kernelName:Cl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:A}=r;TE(a,"NonMaxSuppressionWithScore");const u=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,h=i,d=o,p=l,f=A,{selectedIndices:m,selectedScores:g}=n_(u,c,h,d,p,f);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}},a_=zE(((e,t)=>e!==t?1:0)),s_=AF(xl,a_,null,"bool"),i_={kernelName:xl,backendName:"cpu",kernelFunc:s_},o_={kernelName:Sl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:s,depth:i,onValue:o,offValue:l}=r;TE(a,"oneHot");const A=Gs(a.shape),u=new Float32Array(A*i);u.fill(l);const c=n.data.get(a.dataId).values;for(let e=0;e<A;++e)c[e]>=0&&c[e]<i&&(u[e*i+c[e]]=o);return n.makeTensorInfo([...a.shape,i],s,u)}};function l_(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=aF({inputs:{input:r},backend:n}),t=l_({inputs:{x:e},backend:n}),a=gT({inputs:{input:r},backend:n}),s=l_({inputs:{x:a},backend:n}),i=tF({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}return FL({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const A_={kernelName:UA,backendName:"cpu",kernelFunc:l_},u_={kernelName:Nl,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){const t=aF({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=gT({inputs:{input:a},backend:r}),i=l_({inputs:{x:s},backend:r}),o=tF({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}return FL({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function c_(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return pL({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const s=t[0].shape,i=t[0].dtype;t.forEach((e=>{Ws(s,e.shape,"All tensors passed to stack must have matching shapes"),Vs(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const o=[],l=t.map((e=>{const t=pL({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t})),A=bT({inputs:l,backend:n,attrs:{axis:a}});return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),A}const h_={kernelName:Il,backendName:"cpu",kernelFunc:c_},d_={kernelName:El,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:i}=r;TE(a,"pad");const o=s.map(((e,t)=>e[0]+a.shape[t]+e[1])),l=s.map((e=>e[0])),A=n.data.get(a.dataId).values,u=Gs(a.shape),c=a.shape.length,h=ci(a.shape),d=Gs(o),p=o.length,f=ci(o),m=ni(a.dtype,d);0!==i&&m.fill(i);for(let e=0;e<u;e++){const t=bi(e,c,h).map(((e,t)=>e+l[t]));m[yi(t,p,f)]=A[e]}return{dataId:n.write(m,o,a.dtype),shape:o,dtype:a.dtype}}},p_=zE(((e,t)=>Math.pow(e,t))),f_=AF(Fl,p_),m_={kernelName:Fl,backendName:"cpu",kernelFunc:f_};function g_(e,t,n,r){const[a,s]=pf(e,r),i=$u(t,"int32"),o=fi(Gs(a),i),l=Gs(s);for(let e=0;e<o.length;++e){const t=e*l;let r=1;for(let e=0;e<l;++e)r*=n[t+e];o[e]=r}return{outVals:o,outShape:a,outDtype:i}}const y_={kernelName:Ll,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;TE(a,"prod");const o=a.shape.length,l=ei(s,a.shape),A=gf(l,o);let u=l,c=a;const h=[];null!=A&&(c=IF({inputs:{x:a},backend:n,attrs:{perm:A}}),h.push(c),u=bf(u.length,o));const d=n.data.get(c.dataId).values,{outVals:p,outShape:f,outDtype:m}=g_(c.shape,c.dtype,d,u);let g=f;return i&&(g=ff(f,l)),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(g,m,p)}};function b_(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function w_(e,t,n,r,a,s,i,o){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const a=bi(r,t.length,ci(t)).join(",");throw new Error(`indices[${a}] = ${e} is not in [0, ${n})`)}}))}(s,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:A,valueSlices:u,numValues:c}=function(e,t,n,r){const a=[];let s=0;const i=t.length-1+n.length,o=new Array(i).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let e=0;e<t.length-1;++e){l*=t[e];const n=t[e+1];for(let t=1;t<l+1;++t)o[e].push(t*n)}for(let r=0;r<e.length;++r){let i=e[r],l=e[r]+1;for(let e=0;e<n.length;++e){const r=n[e],a=e+t.length-1;if(a>=0){const e=o[a],t=e[e.length-1]-r[i];for(let e=i;e<l;++e)o[a].push(r[e+1]+t)}i=r[i],l=r[l]}l!==i&&(a.push([i,l]),s+=l-i)}return{outSplits:o,valueSlices:a,numValues:s}}(s,i,e,l),h=function(e){const t=[];for(let n=0;n<e.length;++n){const r=ri("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(A),d=function(e,t,n,r,a){const s=t.slice();s[0]=a;const i=ri(n,Gs(s)),o=e.length;return function(e,t,n,r,a,s){const i=b_(t,2)[1],o=b_(s,2)[1];let l=0;for(const t of n)for(let n=t[0];n<t[1];++n){for(let t=0;t<r;++t)a[l*o+t]=e[n*i+t];++l}}(e,t,r,0===o?0:o/t[0],i,s),[i,s]}(n,r,a,u,c);return[h,d[0],d[1]]}const v_={kernelName:Ul,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:s,indices:i}=t,{outputRaggedRank:o}=r,l=a.map((e=>n.data.get(e.dataId).values)),A=a.map((e=>e.shape)),u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,[h,d,p]=w_(l,A,u,s.shape,s.dtype,c,i.shape),f=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),m=n.makeTensorInfo(p,s.dtype,d);return f.concat([m])}},x_=2147483647;function B_(e,t,n,r,a,s,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=0===t.length,l=0===a.length,A=0===i.length,u=[];o||u.push(t[0]),l||u.push(a[0]),A||u.push(i[0]);for(let e=1;e<u.length;++e)if(u[e]!==u[e-1])throw new Error("starts, limits, and deltas must have the same shape");const c=0===u.length?1:u[0],h=ri("int32",c+1);h[0]=0;for(let t=0;t<c;++t){const n=o?e[0]:e[t],a=l?r[0]:r[t],i=A?s[0]:s[t];if(0===i)throw new Error("Requires delta != 0");let u;if(i>0&&a<n||i<0&&a>n)u=0;else if(u=Math.ceil(Math.abs((a-n)/i)),u>x_)throw new Error(`Requires ((limit - start) / delta) <= ${x_}`);h[t+1]=h[t]+u}const d=ri(n,h[c]);let p=0;for(let t=0;t<c;++t){const n=h[t+1]-h[t];let r=o?e[0]:e[t];const a=A?s[0]:s[t];for(let e=0;e<n;++e)d[p++]=r,r+=a}return[h,d]}const k_={kernelName:_l,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:s}=t,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[A,u]=B_(i,r.shape,r.dtype,o,a.shape,l,s.shape);return[n.makeTensorInfo([A.length],"int32",A),n.makeTensorInfo([u.length],r.dtype,u)]}};var C_=ub;class N_{constructor(e,t,n,r,a,s,i,o,l,A){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=s,this.defaultValueShape=i,this.rowPartitionValues=o,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=hb(A),this.raggedRank=db(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===C_.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===C_.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case C_.VALUE_ROWIDS:return N_.getMaxWidthValueRowID(t);case C_.ROW_SPLITS:return N_.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${C_[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],a=0;for(let s=1;s<t;++s){const t=e[s];t!==r&&(r=t,a=Math.max(s-n,a),n=s)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t,n=!0){if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return I_(e,n)}calculateOutputSize(e){const t=this.valuesShape;pb(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=cb(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let e=1;e<=this.raggedRank;++e)r[e]<0&&(r[e]=this.getMaxWidth(e));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),a=[];let s=0;for(let e=0;e<r;++e,s+=t)a.push(s);for(let t=r;t<e;++t)a.push(-1);return Vs(a.length===e,(()=>"Final length of result must be equal to firstDimension.")),a}calculateOutputIndexRowSplit(e,t,n,r){const a=e.length,s=[];for(let i=0;i<a-1;++i){const a=e[i+1]-e[i];let o=Math.min(r,a),l=t[i];-1===l&&(o=0);for(let e=0;e<o;++e)s.push(l),l+=n;for(let e=0;e<a-o;++e)s.push(-1)}if(a>0&&s.length!==e[a-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(e,t,n,r){const a=e.length,s=[];if(0===a)return[];let i=0,o=e[0];if(o>=t.length)throw new Error(`Got currentValueRowId=${o}, which is not less than ${t.length}`);let l=t[o];s.push(l);for(let A=1;A<a;++A){const a=e[A];if(a===o)l>=0&&(++i,i<r?l+=n:l=-1);else{if(i=0,o=a,a>=t.length)throw new Error(`Got nextValueRowId=${a} which is not less than ${t.length}`);l=t[a]}s.push(l)}if(s.length!==e.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(e,t,n,r){const a=this.getRowPartitionTensor(e),s=this.getRowPartitionTypeByDimension(e);switch(s){case C_.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case C_.ROW_SPLITS:if(a.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error(`Unsupported partition type: ${C_[s]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case C_.FIRST_DIM_SIZE:return e[0];case C_.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case C_.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${C_[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let e=n.length-2;e>=0;--e)n[e]=n[e+1]*t[e+1];const r=I_(t,!1),a=ri(this.valuesDType,Gs(r));if(n[0]*t[0]>0){let s=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e)s=this.calculateOutputIndex(e-1,s,n[e],t[e]);this.setOutput(this.raggedRank,s,a,r)}return[r,a]}setOutput(e,t,n,r){if(0===n.length)return;const a=this.values,s=n;let i=r.slice();i=i.slice(e+1);const o=Gs(i),l=t.length;let A=this.defaultValue;if(A.length!==o&&1!==A.length){const e=this.defaultValueShape;mc((()=>{const t=gp(A,e),n=_p(t,i);A=n.dataSync()}))}let u=0,c=0,h=0;for(let e=0;e<=l;++e){let r=e<l?t[e]:-1;if(r!==h){if(c<h){const e=a.subarray(u*o);S_(s.subarray(c*o),e,(h-c)*o)}if(e>=l){const e=n.length;r=Math.floor(e/o)}if(r>h)if(1===this.defaultValue.length)s.subarray(h*o,r*o).fill(this.defaultValue[0]),h=r;else for(;r>h;)S_(s.slice(h*o),A,o),++h;r<0?(u=e+1,c=h):(u=e,c=h,h=c+1)}else++h}}}function S_(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function I_(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function E_(e,t,n,r,a,s,i,o,l,A){return new N_(e,t,n,r,a,s,i,o,l,A).compute()}const F_={kernelName:Rl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:s,defaultValue:i,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,A=n.data.get(a.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,h=o.map((e=>n.data.get(e.dataId).values)),d=o.map((e=>e.shape)),[p,f]=E_(A,a.shape,u,s.shape,s.dtype,c,i.shape,h,d,l);return n.makeTensorInfo(p,s.dtype,f)}};function T_(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return fi(0,r);const a=fi(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+n;return a}const L_={kernelName:Dl,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,dtype:s,step:i}=n,o=T_(r,a,i,s);return t.makeTensorInfo([o.length],s,o)}},U_=RE(Ol,(e=>1/e)),__={kernelName:Ol,backendName:"cpu",kernelFunc:U_},R_={kernelName:zl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;TE(a,"resizeBilinear");const l=ci(a.shape),[A,u]=o,[c,h,d,p]=a.shape,f=n.data.get(a.dataId).values,m=new Float32Array(Gs([c,A,u,p])),g=[s&&A>1?h-1:h,s&&u>1?d-1:d],y=[s&&A>1?A-1:A,s&&u>1?u-1:u];let b=0;const w=g[0]/y[0],v=g[1]/y[1];for(let e=0;e<c;e++)for(let t=0;t<A;t++){let n;n=i?w*(t+.5)-.5:w*t;const r=Math.max(0,Math.floor(n)),a=n-r,s=Math.min(h-1,Math.ceil(n)),o=e*l[0]+r*l[1],A=e*l[0]+s*l[1];for(let e=0;e<u;e++){let t;t=i?v*(e+.5)-.5:v*e;const n=Math.max(0,Math.floor(t)),r=t-n,s=Math.min(d-1,Math.ceil(t)),u=o+n*l[2],c=A+n*l[2],h=o+s*l[2],g=A+s*l[2];for(let e=0;e<p;e++){const t=f[u+e],n=f[c+e],s=t+(f[h+e]-t)*r,i=s+(n+(f[g+e]-n)*r-s)*a;m[b++]=i}}}return n.makeTensorInfo([c,A,u,p],"float32",m)}},D_={kernelName:Vl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;TE([s,a],"resizeBilinearGrad");const o=ci(a.shape),[l,A,u,c]=a.shape,[,h,d]=s.shape,p=new Float32Array(l*A*u*c),f=[i&&h>1?A-1:A,i&&d>1?u-1:u],m=[i&&h>1?h-1:h,i&&d>1?d-1:d],g=f[0]/m[0],y=f[1]/m[1],b=n.data.get(s.dataId).values;let w=0;for(let e=0;e<l;e++){const t=e*o[0];for(let e=0;e<h;e++){const n=e*g,r=Math.floor(n),a=Math.min(Math.ceil(n),A-1),s=t+r*o[1],i=t+a*o[1],l=n-r,h=1-l;for(let e=0;e<d;e++){const t=e*y,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),a=t-n,A=1-a,d=s+n*o[2],f=s+r*o[2],m=i+n*o[2],g=i+r*o[2],v=h*A,x=h*a,B=l*A,k=l*a;for(let e=0;e<c;e++){const t=b[w++];p[d+e]+=t*v,p[f+e]+=t*x,p[m+e]+=t*B,p[g+e]+=t*k}}}}return n.makeTensorInfo([l,u,A,c],"float32",p)}},Q_={kernelName:Pl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r;TE(a,"resizeNearestNeighbor");const l=ci(a.shape),[A,u]=o,[c,h,d,p]=a.shape,f=n.data.get(a.dataId).values,m=new Float32Array(c*A*u*p),g=[s&&A>1?h-1:h,s&&u>1?d-1:d],y=[s&&A>1?A-1:A,s&&u>1?u-1:u],b=g[0]/y[0],w=g[1]/y[1];let v=0;for(let e=0;e<c;e++){const t=e*l[0];for(let e=0;e<A;e++){const n=i?b*(e+.5):b*e;let r=Math.min(h-1,s?Math.round(n):Math.floor(n));i&&(r=Math.max(0,r));const a=t+r*l[1];for(let e=0;e<u;e++){const t=i?w*(e+.5):w*e;let n=Math.min(d-1,s?Math.round(t):Math.floor(t));i&&(n=Math.max(0,n));const r=a+n*l[2];for(let e=0;e<p;e++){const t=f[r+e];m[v++]=t}}}}return n.makeTensorInfo([c,A,u,p],a.dtype,m)}},O_={kernelName:Hl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r;TE([s,a],"resizeNearestNeighborGrad");const o=ci(a.shape),l=ci(s.shape),[A,u,c,h]=a.shape,[,d,p]=s.shape,f=new Float32Array(A*u*c*h),m=n.data.get(s.dataId).values,g=[i&&d>1?u-1:u,i&&p>1?c-1:c],y=[i&&d>1?d-1:d,i&&p>1?p-1:p],b=g[0]/y[0],w=g[1]/y[1],v=1/b,x=1/w,B=2*Math.ceil(v)+2,k=2*Math.ceil(x)+2;for(let e=0;e<A;e++){const t=e*o[0];for(let e=0;e<u;e++){const n=t+e*o[1],r=Math.floor(e*v),a=Math.floor(r-B/2);for(let r=0;r<c;r++){const s=n+r*o[2],A=Math.floor(r*x),g=Math.floor(A-k/2);for(let n=0;n<h;n++){let o=0;for(let s=0;s<B;s++){const A=s+a;if(A<0||A>=d)continue;const h=t+A*l[1],f=A*b;if(e===Math.min(u-1,i?Math.round(f):Math.floor(f)))for(let e=0;e<k;e++){const t=e+g;if(t<0||t>=p)continue;const a=h+t*l[2],s=t*w;r===Math.min(c-1,i?Math.round(s):Math.floor(s))&&(o+=m[a+n])}}f[s+n]=o}}}}return n.makeTensorInfo(a.shape,a.dtype,f)}},$_={kernelName:Kl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r;TE(a,"reverse");const i=a.shape.length,o=ei(s,a.shape);if(0===i)return $E({inputs:{x:a},backend:n});const l=new Nu(a.shape,a.dtype),A=n.bufferSync(a);for(let e=0;e<l.size;e++){const t=l.indexToLoc(e),n=t.slice();o.forEach((e=>n[e]=a.shape[e]-1-n[e])),l.set(A.get(...n),...t)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},M_={kernelName:DA,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:a,fillValue:s,center:i}=t,o=n,l=ni(r.dtype,Gs(r.shape)),[A,u,c,h]=r.shape,[d,p]=gb(i,u,c),f=Math.sin(a),m=Math.cos(a),g=o.data.get(r.dataId).values;for(let e=0;e<A;e++){const t=e*c*u*h;for(let e=0;e<u;e++){const n=e*(c*h);for(let r=0;r<c;r++){const a=r*h;for(let i=0;i<h;i++){const o=[A,e,r,i],y=o[2],b=o[1];let w=(y-d)*m-(b-p)*f,v=(y-d)*f+(b-p)*m;w=Math.round(w+d),v=Math.round(v+p);let x=s;"number"!=typeof s&&(x=3===i?255:s[i]),w>=0&&w<c&&v>=0&&v<u&&(x=g[t+v*(c*h)+w*h+i]),l[t+n+a+i]=x}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},P_=RE(Gl,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),H_={kernelName:Gl,backendName:"cpu",kernelFunc:P_},z_=_E((e=>1/Math.sqrt(e))),V_=DE(jl,z_),W_={kernelName:jl,backendName:"cpu",kernelFunc:V_};function K_(e,t,n,r,a,s,i,o,l,A){const u=[r/a,a],c=e.values,h=t.values;if(0===r)return vh(n,t.dtype);const d=l instanceof Nu?l:vh(u,t.dtype);"string"==typeof l||"number"==typeof l?d.values.fill(l):"boolean"==typeof l&&d.values.fill(+l);for(let e=0;e<s;e++){const s=[];let l=0;for(let t=0;t<i;t++){const n=c[e*i+t];s.push(n),l+=n*o[t]}if(l<0||l>=r/a)throw new Error(`Invalid indices: ${s} does not index into ${n}`);for(let n=0;n<a;n++)A?d.values[l*a+n]+=h[e*a+n]:d.values[l*a+n]=0===t.rank?h[0]:h[e*a+n]}return d}const G_={kernelName:ql,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:A,strides:u,outputSize:c}=Fg(0,a,i),h=K_(n.bufferSync(a),n.bufferSync(s),i,c,A,l,o,u,0,!0);return n.makeTensorInfo(i,h.dtype,h.values)}};function j_(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function q_(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}const X_={kernelName:Jl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:s}=t,{side:i}=r,o=function(e,t,n,r,a,s){const i=ri("int32",n*a);for(let o=0;o<n;++o){const n=e.slice(o*r,(o+1)*r),l=o*a;for(let e=0;e<a;++e)i[l+e]="left"===s?j_(n,t[e+l]):q_(n,t[e+l])}return i}(n.data.get(a.dataId).values,n.data.get(s.dataId).values,a.shape[0],a.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",o)}},J_={kernelName:Yl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t;TE([r,a,s],"select");const i=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,A=n.data.get(s.dataId).values,u=$u(a.dtype,s.dtype),c=fi(Gs(a.shape),u);let h=0;const d=0===i||i>1||1===a.shape.length?1:Gs(a.shape.slice(1));for(let e=0;e<o.length;e++)for(let t=0;t<d;t++)1===o[e]?c[h++]=l[e]:c[h++]=A[e];return n.makeTensorInfo(a.shape,u,c)}},Y_=kb,Z_=Cb,eR=RE(Zl,(e=>e>=0?Z_*e:Y_*(Math.exp(e)-1))),tR={kernelName:Zl,backendName:"cpu",kernelFunc:eR},nR=RE(rA,(e=>e<0?-1:e>0?1:0)),rR={kernelName:rA,backendName:"cpu",kernelFunc:nR},aR=RE(tA,(e=>Math.sin(e))),sR={kernelName:tA,backendName:"cpu",kernelFunc:aR},iR=RE(nA,(e=>Math.sinh(e))),oR={kernelName:nA,backendName:"cpu",kernelFunc:iR},lR=Math.log(1.1920928955078125e-7)+2,AR=RE(sA,(e=>{const t=e>-lR,n=e<lR,r=Math.exp(e);let a;return a=n?r:t?e:Math.log(1+r),a})),uR={kernelName:sA,backendName:"cpu",kernelFunc:AR},cR={kernelName:lA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:i}=r;TE([a],"spaceToBatchND");const o=Gs(s),l=[[0,0]];l.push(...i);for(let e=1+s.length;e<a.shape.length;++e)l.push([0,0]);const A=d_.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=yb(A.shape,s,o,!1),c=bb(u.length,s.length,!1),h=wb(A.shape,s,o,!1),d=fF({inputs:{x:A},backend:n,attrs:{shape:u}}),p=IF({inputs:{x:d},backend:n,attrs:{perm:c}}),f=fF({inputs:{x:p},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}};function hR(e,t,n,r,a,s,i){const o=t[0],l=s[0],A=new Array(l),u=new Array(o),c=t[1];if(0===l){if(0!==o)throw new Error(Jb(o));return[ri(n,0),[0,c],ri(a,0),A,u]}let h=!0,d=0;const p=new Array(l).fill(0);for(let t=0;t<o;++t){const n=e[t*c];if(n<0)throw new Error(Yb(t,n));if(n>=l)throw new Error(Zb(t,n,l));++p[n],h=h&&n>=d,d=n}let f=!0;for(let e=0;e<l;++e){const t=0===p[e];A[e]=t,f=f&&!t,p[e]=Math.max(p[e],1),e>0&&(p[e]+=p[e-1])}if(f&&h){const t=e,n=r;for(let e=0;e<o;++e)u[e]=e;return[t,[o,c],n,A,u]}{const t=p[l-1],s=ri(n,t*c),h=ri(a,t),d=new Array(l).fill(0);for(let t=0;t<o;++t){const n=e[t*c],a=d[n],i=(0===n?0:p[n-1])+a;d[n]++;for(let n=0;n<c;++n)s[i*c+n]=e[t*c+n];h[i]=r[t],u[t]=i}for(let e=0;e<l;++e)if(0===d[e]){const t=0===e?0:p[e-1];s[t*c+0]=e;for(let e=1;e<c;++e)s[t*c+e]=0;h[t]=i}return[s,[t,c],h,A,u]}}const dR={kernelName:cA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${s.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==a.shape.length)throw new Error(`Values must be a vector, saw:\n        ${a.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,A=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values[0],[c,h,d,p,f]=hR(o,r.shape,r.dtype,l,a.dtype,A,u);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([h[0]],a.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map((e=>Number(e))))),n.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}};function pR(e,t,n,r,a){const s=Gs(r),i=t[0],o=a.length,l=[];let A=1,u=-1;for(let e=0;e<o;++e){const t=a[e];if(-1===t){if(-1!==u)throw new Error(ew(u,e));u=e,l.push(1)}else{if(t<0)throw new Error(tw(e,t));A*=t,l.push(t)}}if(-1!==u){if(A<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(s/A);if(A*e!==s)throw new Error(rw(r,l));l[u]=e}if(Gs(l)!==s)throw new Error(aw(r,l));const c=r.length,h=[];if(c>0){h[c-1]=1;for(let e=c-2;e>=0;--e)h[e]=h[e+1]*r[e+1]}const d=[];if(o>0){d[o-1]=1;for(let e=o-2;e>=0;--e)d[e]=d[e+1]*l[e+1]}const p=ri(n,i*o);for(let t=0;t<i;++t){let n=0;for(let r=0;r<c;++r)n+=e[t*c+r]*h[r];for(let e=0;e<o;++e)p[t*o+e]=Math.trunc(n/d[e]),n%=d[e]}return[p,[i,o],l]}const fR={kernelName:hA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==a.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${a.shape}`);if(1!==s.shape.length)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[A,u,c]=pR(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,A),n.makeTensorInfo([c.length],s.dtype,new Int32Array(c))]}};function mR(e,t,n,r,a,s=!1,i=0){const o=r.length,l=[t[0],e.length/t[0]],A=l[1],u=o>0?a[o-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const c=t.slice();c[0]=u;const h=ri(n,c.reduce(((e,t)=>e*t),1));if(0===o)return u>0&&h.fill(i),[h,c];if(u<=0)throw new Error("segment ids must be >= 0");let d=0,p=1,f=0,m=a[d];for(;;){let t=0;if(p<o){if(t=a[p],m===t){++p;continue}if(m>=t)throw new Error("segment ids are not increasing")}if(m<0||m>=u)throw new Error(ow(m,u));m>f&&h.fill(i,f*A,m*A);for(let t=d;t<p;++t){const n=r[t];if(n<0||n>=l[0])throw new Error(lw(t,r[t],l[0]));for(let t=0;t<A;t++)h[m*A+t]+=e[n*A+t]}if(s)for(let e=0;e<A;e++)h[m*A+e]/=p-d;if(d=p,++p,f=m+1,m=t,p>o)break}return f<u&&h.fill(i,f*A,u*A),[h,c]}const gR={kernelName:dA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[A,u]=mR(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,A)}},yR={kernelName:pA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${s.shape}`);if(a.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values,[A,u]=mR(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,A)}},bR={kernelName:fA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:A,sliceSize:u,strides:c,outputSize:h}=Fg(0,a,o),d=!1,p=n.bufferSync(a);let f;switch(s.dtype){case"bool":f=K_(p,n.bufferSync(s),o,h,u,A,l,c,Boolean(n.data.get(i.dataId).values[0]),d);break;case"float32":case"int32":f=K_(p,n.bufferSync(s),o,h,u,A,l,c,n.data.get(i.dataId).values[0],d);break;case"string":f=K_(p,n.bufferSync(s),o,h,u,A,l,c,fu(n.data.get(i.dataId).values[0]),d);break;default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(o,f.dtype,f.values)}},wR={kernelName:AA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=r,o=ei(i,a.shape)[0],l=Xb(a,s,o),A=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map((e=>{const t=[...u];t[o]=e;const r=eT({inputs:{x:a},backend:n,attrs:{begin:A,size:t}});return A[o]+=e,r}))}},vR=_E((e=>Math.sqrt(e))),xR=RE(iA,(e=>Math.sqrt(e))),BR={kernelName:iA,backendName:"cpu",kernelFunc:xR},kR={kernelName:gA,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;TE(n,"square");const a=r.data.get(n.dataId).values,s=new Float32Array(a.length);for(let e=0;e<a.length;++e){const t=a[e];s[e]=t*t}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},CR=zE(((e,t)=>{const n=e-t;return n*n})),NR=AF(mA,CR),SR={kernelName:mA,backendName:"cpu",kernelFunc:NR},IR=_E(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:a}=t;return e.replace(new RegExp(n,r?"g":""),a)})),ER=DE(yA,IR),FR={kernelName:yA,backendName:"cpu",kernelFunc:ER},TR=RE(_A,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),LR={kernelName:_A,backendName:"cpu",kernelFunc:TR};function UR(e,t,n,r){const a=vh(e,t.dtype);for(let e=0;e<a.size;e++){const s=a.indexToLoc(e),i=new Array(s.length);for(let e=0;e<i.length;e++)i[e]=s[e]*n[e]+r[e];a.set(t.get(...i),...s)}return a}const _R={kernelName:bA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,end:i,strides:o,beginMask:l,endMask:A,ellipsisMask:u,newAxisMask:c,shrinkAxisMask:h}=r;TE(a,"stridedSlice");const{finalShapeSparse:d,finalShape:p,isIdentity:f,sliceDim0:m,isSimpleSlice:g,begin:y,end:b,strides:w}=Hd(a.shape,s,i,o,l,A,u,c,h);let v;if(f)v=fF({inputs:{x:a},backend:n,attrs:{shape:p}});else if(m||g){Vs(a.shape.length>=1,(()=>`Input must have rank at least 1, got: ${a.shape.length}`));const e=Ed(y,b,w),t=eT({inputs:{x:a},backend:n,attrs:{begin:y,size:e}});v=fF({inputs:{x:t},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(t)}else{const e=UR(d,n.bufferSync(a),w,y);v=n.makeTensorInfo(p,e.dtype,e.values)}return v}};class RR{constructor(e,t,n,r,a,s){this.separator=pu(e),this.nGramWidths=t,this.leftPad=pu(n),this.rightPad=pu(r),this.padWidth=a,this.preserveShort=s}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,s){for(let i=0;i<a;++i){const o=this.getPadWidth(s),l=Math.max(0,o-i),A=Math.max(0,o-(a-(i+1))),u=s-(l+A),c=t+(l>0?0:i-o);let h=0;h+=l*this.leftPad.length;for(let t=0;t<u;++t)h+=e[c+t].length;h+=A*this.rightPad.length,h+=(l+A+u-1)*this.separator.length,n[r+i]=new Uint8Array(h);const d=n[r+i];let p=0;const f=e=>e.forEach((e=>d[p++]=e));for(let e=0;e<l;++e)f(this.leftPad),f(this.separator);for(let t=0;t<u-1;++t)f(e[c+t]),f(this.separator);if(u>0){f(e[c+u-1]);for(let e=0;e<A;++e)f(this.separator),f(this.rightPad)}else{for(let e=0;e<A-1;++e)f(this.rightPad),f(this.separator);f(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error(`Invalid split value ${t[a]}, must be in [${e}, ${n}]`);e=t[a]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const a=r-1,s=ri("int32",r);if(0===n||0===r){const e=new Array(n);for(let e=0;e<=a;++e)s[e]=0;return[e,s]}s[0]=0;for(let e=1;e<=a;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),s[e]=s[e-1]+r}const i=new Array(s[a]);for(let n=0;n<a;++n){const r=t[n];let a=s[n];if(this.nGramWidths.forEach((s=>{const o=t[n+1]-t[n],l=this.getNumNGrams(o,s);this.createNGrams(e,r,i,a,l,s),a+=l})),this.preserveShort&&a===s[n]){const s=t[n+1]-t[n];if(0===s)continue;const o=s+2*this.padWidth,l=1;this.createNGrams(e,r,i,a,l,o)}}return[i,s]}}function DR(e,t,n,r,a,s,i,o){return new RR(n,r,a,s,i,o).compute(e,t)}const QR={kernelName:wA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:A}=r,{data:u,dataSplits:c}=t,h=n.data.get(u.dataId).values,d=n.data.get(c.dataId).values,[p,f]=DR(h,d,a,s,i,o,l,A);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(c.shape,"int32",f)]}};function OR(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const a=t[0];let s=e.indexOf(a);for(;-1!==s;){const t=e.subarray(0,s);n&&0===t.length||r.push(t),s=(e=e.subarray(s+1)).indexOf(a)}return void(n&&0===e.length||r.push(e))}let a=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==t.indexOf(e[s])){const t=e.subarray(a,s);n&&0===t.length||r.push(t),a=s+1}}function $R(e,t,n){const r=e.length,a=[];let s=0,i=0;const o=new Array(r);for(let l=0;l<r;++l){const r=a.length;OR(e[l],t,n,a);const A=a.length-r;o[l]=A,s+=A,i=Math.max(i,A)}const l=ri("int32",2*s),A=new Array(s),u=[r,i];let c=0;for(let e=0;e<r;++e)for(let t=0;t<o[e];++t)l[2*c]=e,l[2*c+1]=t,A[c]=a[c],++c;return[l,A,u]}const MR={kernelName:vA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values[0],[A,u,c]=$R(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",A),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};function PR(e,t){const n=ri("int32",e.length);for(let r=0;r<e.length;++r)n[r]=uu(e[r]).modulo(t).getLowBitsUnsigned();return n}const HR={kernelName:xA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=PR(n.data.get(s.dataId).values,a);return n.makeTensorInfo(s.shape,"int32",i)}},zR=RE(kA,(e=>Math.tan(e))),VR={kernelName:kA,backendName:"cpu",kernelFunc:zR},WR=RE(CA,(e=>Math.tanh(e))),KR={kernelName:Xl,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:s}=t,{sliceRank:i,numUpdates:o,sliceSize:l,strides:A,outputSize:u}=Fg(0,a,r.shape),c=n.bufferSync(a),h=n.bufferSync(s),d=n.bufferSync(r),p=K_(c,h,r.shape,u,l,o,i,A,d,!1);return n.makeTensorInfo(r.shape,p.dtype,p.values)}};function GR(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const r=vh(n,e.dtype);for(let t=0;t<r.values.length;++t){const n=r.indexToLoc(t),a=new Array(e.rank);for(let t=0;t<a.length;t++)a[t]=n[t]%e.shape[t];const s=e.locToIndex(a);r.values[t]=e.values[s]}return r}const jR={kernelName:NA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;TE(a,"tile");const i=GR(n.bufferSync(a),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},qR=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function XR(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,s=t-n+1,i=Math.log(a),o=.5*Math.exp(2*i/3),l=.5*Math.sqrt(i*o*(a-o)/a)*Math.sign(s-a/2);XR(e,t,Math.max(n,Math.floor(t-s*o/a+l)),Math.min(r,Math.floor(t+(a-s)*o/a+l)))}const a=e[t];let s=n,i=r;for(zs(e,n,t),qR(e[r],a)>0&&zs(e,n,r);s<i;){for(zs(e,s,i),s++,i--;qR(e[s],a)<0;)s+=1;for(;qR(e[i],a)>0;)i-=1}0===qR(e[n],a)?zs(e,n,i):(i+=1,zs(e,i,r)),i<=t&&(n=i+1),t<=i&&(r=i-1)}}function JR(e,t,n,r,a){const s=t[t.length-1],[i,o]=[e.length/s,s],l=ni(n,i*r),A=ni("int32",i*r);for(let t=0;t<i;t++){const n=t*o,s=e.subarray(n,n+o);let i=new Array(s.length);s.forEach(((e,t)=>i[t]={value:e,index:t})),r<i.length&&(XR(i,r),i=i.slice(0,r)),a&&i.sort(qR);const u=t*r,c=l.subarray(u,u+r),h=A.subarray(u,u+r);for(let e=0;e<r;e++)c[e]=i[e].value,h[e]=i[e].index}const u=t.slice();return u[u.length-1]=r,[vh(u,n,l),vh(u,"int32",A)]}const YR={kernelName:SA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s,sorted:i}=r;TE(a,"topk");const o=n.data.get(a.dataId).values,[l,A]=JR(o,a.shape,a.dtype,s,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}},ZR={kernelName:IA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:A}=n,[u,c,h,d]=a.shape,[p,f]=null!=A?A:[c,h],m=[u,p,f,d],g=ci(a.shape),y=g[0],b=g[1],w=g[2],v=ci(m),x=v[0],B=v[1],k=v[2],C=ni(a.dtype,Gs(m));C.fill(l);const N=r.data.get(a.dataId).values,S=r.data.get(s.dataId).values;for(let e=0;e<u;++e){const t=1===s.shape[0]?S:S.subarray(8*e,8*e+8);for(let n=0;n<p;++n)for(let r=0;r<f;++r)for(let a=0;a<d;++a){let s;const A=t[6]*r+t[7]*n+1;if(0===A)continue;const u=(t[0]*r+t[1]*n+t[2])/A,d=(t[3]*r+t[4]*n+t[5])/A,p=eD(u,h,o),f=eD(d,c,o);switch(i){case"nearest":s=nD(N,c,h,y,b,w,e,f,p,a,l);break;case"bilinear":s=rD(N,c,h,y,b,w,e,f,p,a,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}C[e*x+n*B+r*k+a]=s}return r.makeTensorInfo(m,a.dtype,C)}return{dataId:r.write(C,m,a.dtype),shape:a.shape,dtype:a.dtype}}};function eD(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return Ps(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return Ps(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Ps(0,e,t-1)}(e,t);default:return e}}function tD(e,t,n,r,a,s,i,o,l,A,u){return 0<=o&&o<t&&0<=l&&l<n?e[i*r+o*a+l*s+A]:u}function nD(e,t,n,r,a,s,i,o,l,A,u){return tD(e,t,n,r,a,s,i,Math.round(o),Math.round(l),A,u)}function rD(e,t,n,r,a,s,i,o,l,A,u){const c=Math.floor(o),h=Math.floor(l),d=c+1,p=h+1;return(d-o)*((p-l)*tD(e,t,n,r,a,s,i,c,h,A,u)+(l-h)*tD(e,t,n,r,a,s,i,c,p,A,u))+(o-c)*((p-l)*tD(e,t,n,r,a,s,i,d,h,A,u)+(l-h)*tD(e,t,n,r,a,s,i,d,p,A,u))}function aD(e,t,n,r){const a=ei(t,n)[0],s=[1,n[0],1];for(let e=0;e<a;e++)s[0]*=n[e];s[1]=n[a];for(let e=a+1;e<n.length;e++)s[2]*=n[e];const i=new Map,o=new Int32Array(n[a]),l=new Nu(s,r,e),A=[],u=1===s[0]&&1===s[2];for(let t=0;t<n[a];t++){let n;if(u)n=e[t].toString();else{const e=[];for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)e.push(l.get(n,t,r));n=e.join(",")}const r=i.get(n);if(null!=r)o[t]=r;else{const e=i.size;i.set(n,e),o[t]=e,A.push(t)}}const c=s.slice();c[1]=i.size;const h=new Nu(c,r);A.forEach(((e,t)=>{for(let n=0;n<s[0];n++)for(let r=0;r<s[2];r++)h.set(l.get(n,e,r),n,t,r)}));const d=n.slice();return d[a]=c[1],{outputValues:h.values,outputShape:d,indices:o}}const sD={kernelName:FA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;TE(s,"unique");const i=r.data.get(s.dataId).values,{outputValues:o,outputShape:l,indices:A}=aD(i,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([A.length],"int32",A)]}},iD={kernelName:TA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const i=a.shape.length,o=a.shape[s],l=new Array(i-1);let A=0;for(let e=0;e<i;e++)e!==s&&(l[A++]=a.shape[e]);const u=new Array(i).fill(0),c=a.shape.slice();c[s]=1;const h=new Array(o);for(let e=0;e<h.length;e++){u[s]=e;const t=eT({inputs:{x:a},backend:n,attrs:{begin:u,size:c}});h[e]=fF({inputs:{x:t},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(t)}return h}},oD={kernelName:LA,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:i}=r;TE(a,"unsortedSegmentSum");const o=[],l=[],A=a.shape.length-s.shape.length;let u=s;for(let e=0;e<A;++e){const t=pL({inputs:{input:u},backend:n,attrs:{dim:e+1}});u=t,l.push(t)}for(let e=0;e<i;++e){const t=cu(e,"int32"),r=n.makeTensorInfo([],"int32",t),s=tL({inputs:{a:r,b:u},backend:n}),i=oF({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),A=jT({inputs:{a:i,b:a},backend:n}),c=XT({inputs:{x:A},backend:n,attrs:{axis:0,keepDims:!1}});o.push(c),l.push(r),l.push(s),l.push(i),l.push(A),l.push(c)}const c=c_({inputs:o,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}},lD=[bF,vF,BF,CF,pF,NF,FF,TF,LF,UF,RF,QF,$F,HF,VF,jF,qF,XF,JF,yF,YF,nT,sT,lT,AT,lF,hT,pT,nF,fT,wT,xT,BT,kT,CT,NT,ST,ET,TT,LT,UT,_T,RT,DT,OT,$T,MT,PT,HT,zT,VT,WT,YT,OE,ZT,nL,uL,dL,fL,yL,EL,TL,LL,RL,OL,$L,ML,HL,VL,GL,XL,ME,JL,yT,ZL,tU,rU,HE,iU,AU,cU,pU,mU,bU,vU,kU,CU,NU,EU,LU,UU,_U,RU,DU,QU,OU,$U,HU,zU,KU,qU,qT,JU,ZU,t_,r_,i_,o_,u_,h_,d_,m_,KE,y_,v_,k_,F_,L_,sF,vL,__,jE,XE,mF,R_,D_,Q_,O_,$_,M_,H_,W_,G_,X_,J_,tR,ZE,rR,sR,oR,tT,jU,uR,cR,dR,fR,gR,yR,bR,wR,BR,kR,SR,FR,LR,_R,QR,MR,HR,CL,JT,VR,{kernelName:CA,backendName:"cpu",kernelFunc:WR},KR,jR,YR,ZR,EF,sD,iD,oD,A_];for(const e of lD)GA(e);const AD={},uD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function cD(e,t){if(!(e in AD)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(ki().getBool("IS_SAFARI")||"undefined"==typeof OffscreenCanvas||2!==e){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;return n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete AD[e]}),!1),ki().getBool("SOFTWARE_WEBGL_ENABLED")&&(uD.failIfMajorPerformanceCaveat=!1),1===e?n.getContext("webgl",uD)||n.getContext("experimental-webgl",uD):n.getContext("webgl2",uD)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;AD[e]=n}const n=AD[e];return null==n||n.isContextLost()?(delete AD[e],cD(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),AD[e])}var hD,dD,pD;function fD(e,t){return[t,e]}function mD(e){const t=Gs(e);return Xs(Math.ceil(t/4))}function gD(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function yD(e,t){const n=e;let r,a,s,i,o,l,A,u,c,h;return 2===ki().getNumber("WEBGL_VERSION")?(r=n.R32F,a=n.R16F,s=n.RGBA16F,i=n.RGBA32F,o=n.RED,A=4,u=1,c=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=e.RGBA,a=e.RGBA,s=e.RGBA,i=n.RGBA,o=e.RGBA,A=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:A,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:h}}function bD(e,t){const n=t();return ki().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}function wD(e){return!!(ki().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function vD(e,t){return FD(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(hD||(hD={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(dD||(dD={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(pD||(pD={}));const xD=/ERROR: [0-9]+:([0-9]+):/g;function BD(e,t){const n=xD.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],a=e.split("\n"),s=a.length.toString().length+2,i=a.map(((e,t)=>Js((t+1).toString(),s)+e));let o=0;for(let e=0;e<i.length;e++)o=Math.max(i[e].length,o);const l=i.slice(0,r-1),A=i.slice(r-1,r),u=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${Js(A[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function kD(e,t){if(bD(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function CD(e,t,n,r,a,s,i){const o=e.getAttribLocation(t,n);return-1!==o&&(bD(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),bD(e,(()=>e.vertexAttribPointer(o,a,e.FLOAT,!1,s,i))),bD(e,(()=>e.enableVertexAttribArray(o))),!0)}function ND(e,t,n,r){bD(e,(()=>function(e,t,n){(function(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${n}].`)})(e,n),bD(e,(()=>e.activeTexture(e.TEXTURE0+n))),bD(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),bD(e,(()=>e.uniform1i(n,r)))}function SD(e,t,n){bD(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),bD(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function ID(e,t){bD(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),bD(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function ED(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function FD(e,t,n){const r=bD(e,(()=>t()));if(null==r)throw new Error(n);return r}function TD(e,t=2){return Gs(e.slice(0,e.length-t))}function LD(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function UD(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[TD(e),...LD(e)]),t}function _D(e){return e%2==0}function RD(e,t){if(js(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(_D(n)&&_D(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&_D(e[0])&&_D(t[0])}let DD,QD;function OD(e,t){return null!=e.getExtension(t)}function $D(e){try{if(null!=cD(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function MD(e){const t=yD(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function PD(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Vs("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const HD=ki();function zD(){let e,t,n,r,a,s,i,o,l,A;return 2===ki().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",s="outputColor",i="out vec4 outputColor;",o=ki().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",A="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",s="gl_FragColor",i="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",A="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:s,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:A}}function VD(e,t,n="index"){const r=ci(t);return r.map(((t,a)=>`int ${e[a]} = ${n} / ${t}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${t}`:`index -= ${e[a]} * ${t}`};`)).join("")}function WD(e,t,n="index"){const r=ci(t);return r.map(((t,a)=>`int ${e[a]} = ${n} / outShapeStrides[${a}]; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * outShapeStrides[${a}]`:`index -= ${e[a]} * outShapeStrides[${a}]`};`)).join("")}function KD(e){const t=ci(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}HD.registerFlag("HAS_WEBGL",(()=>HD.getNumber("WEBGL_VERSION")>0)),HD.registerFlag("WEBGL_VERSION",(()=>$D(2)?2:$D(1)?1:0)),HD.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),HD.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===HD.get("WEBGL_VERSION"))),HD.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),HD.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),HD.registerFlag("WEBGL_PACK",(()=>HD.getBool("HAS_WEBGL"))),HD.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_CLIP",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_REDUCE",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_LAZILY_UNPACK",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_CONV_IM2COL",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>HD.getBool("WEBGL_PACK"))),HD.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==DD){const t=cD(e);DD=t.getParameter(t.MAX_TEXTURE_SIZE)}return DD}(HD.getNumber("WEBGL_VERSION")))),HD.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==QD){const t=cD(e);QD=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,QD)}(HD.getNumber("WEBGL_VERSION")))),HD.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=HD.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=cD(e);return t=OD(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:OD(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),HD.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>HD.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Zu())),HD.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=cD(e);if(1===e){if(!OD(t,"OES_texture_float"))return!1}else if(!OD(t,"EXT_color_buffer_float"))return!1;return MD(t)}(HD.getNumber("WEBGL_VERSION")))),HD.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!HD.getBool("WEBGL_FORCE_F16_TEXTURES")&&HD.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),HD.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>function(e){if(0===e)return!1;const t=cD(e);if(1!==e){if(OD(t,"EXT_color_buffer_float"))return MD(t);const e="EXT_color_buffer_half_float";if(OD(t,e)){const n=t.getExtension(e);return function(e,t){const n=yD(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}(t,n)}return!1}return!!OD(t,"OES_texture_float")&&!!OD(t,"WEBGL_color_buffer_float")&&MD(t)}(HD.getNumber("WEBGL_VERSION")))),HD.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=HD.getNumber("WEBGL_VERSION"))&&null!=cD(e).fenceSync;var e})),HD.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>HD.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),HD.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!=typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),HD.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>Zu()?1:-1),(e=>{if("number"!=typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),HD.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),HD.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),HD.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),HD.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),HD.registerFlag("WEBGL_EXP_CONV",(()=>!1)),HD.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>HD.getBool("IS_TEST"))),HD.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),HD.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),HD.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),HD.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const GD="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:jD}=a;function qD(e,t,n){const r=[];if(e.forEach((e=>{const t=Gs(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=sQ(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const a=r.join("\n"),s=e.map((e=>function(e,t,n=!1,r){let a="";a+=n?JD(e,r):XD(e,r);const s=e.shapeInfo.logicalShape,i=t.logicalShape;return s.length<=i.length&&(a+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,o=jD(e.shapeInfo.logicalShape,t.logicalShape),l=aQ(i),A=i-s;let u;const c=["x","y","z","w","u","v"];u=0===s?"":i<2&&o.length>=1?"coords = 0;":o.map((e=>`coords.${c[e+A]} = 0;`)).join("\n");let h="";h=i<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${c[t+A]}`)).join(", ");let d="return outputValue;";const p=1===Gs(e.shapeInfo.logicalShape),f=1===Gs(t.logicalShape);if(1!==s||p||f){if(p&&!f)d=1===i?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(o.length){const e=s-2,t=s-1;o.indexOf(e)>-1&&o.indexOf(t)>-1?d="return vec4(outputValue.x);":o.indexOf(e)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(t)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${a}() {\n      ${l} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${r}(${h});\n      ${d}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",s=t.texShape,i=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&js(i,s))return`\n      float ${a}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const A=aQ(l),u=jD(e.shapeInfo.logicalShape,t.logicalShape),c=l-o;let h;const d=["x","y","z","w","u","v"];h=0===o?"":l<2&&u.length>=1?"coords = 0;":u.map((e=>`coords.${d[e+c]} = 0;`)).join("\n");let p="";return p=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${d[t+c]}`)).join(", "),`\n    float ${a}() {\n      ${A} coords = getOutputCoords();\n      ${h}\n      return get${r}(${p});\n    }\n  `}(e,t)),a}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),i=t.texShape,o=zD(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(o);let A,u,c=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${YD}\n    ${ZD}\n    ${eQ}\n  `}(o);return t.isPacked?(A=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(js(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${a});\n      int c = imod(index, ${a}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),s=a*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${a});\n      int c = imod(index, ${a}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),s=a*Math.ceil(e[e.length-2]/2);let i=s,o="",l="b, r, c";for(let t=2;t<e.length-1;t++)i*=e[e.length-t-1],o=`\n      int b${t} = index / ${i};\n      index -= b${t} * ${i};\n    `+o,l=`b${t}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${s};\n      index -= b * ${s};\n\n      int r = 2 * (index / ${a});\n      int c = imod(index, ${a}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(o)):(A=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){return js(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${WD(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`;const r=VD(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${WD(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `;const r=VD(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=VD(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=VD(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,i,n.enableShapeUniforms),u=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(o)),n.packedInputs&&(c+=tQ),[c,l,u,a,A,s,n.userCode].join("\n")}function XD(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[a,s]=e.shapeInfo.texShape;if(1===a&&1===s)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const i=nQ(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[o,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${o}, ${l}, ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${rQ(e)}\n      }\n    `;const a=e.shapeInfo.texShape,s=a[0],i=a[1];if(1===i&&1===s)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const o=nQ(n);return 1===i?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${s}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:1===s?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:t?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${s}, ${i}, index + ${o});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape;if(null!=s&&js(n,s)){if(t)return`\n      float ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=s[0];return`\n    float ${a}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${s[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:i,keptDims:o}=ti(n),l=i;if(l.length<n.length){const n=["row","col"];return`\n      ${XD(iQ(e,l),t)}\n      float ${a}(int row, int col) {\n        return ${a}(${oQ(n,o)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${rQ(e)}\n      }\n    `;const A=s[0],u=s[1],c=nQ(r);return 1===u?t?`\n      float ${a}(int row, int col) {\n        float index = dot(vec3(row, col, ${c}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${a}(int row, int col) {\n      float index = dot(vec3(row, col, ${c}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${A}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===A?t?`\n      float ${a}(int row, int col) {\n        float index = dot(vec3(row, col, ${c}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${a}(int row, int col) {\n      float index = dot(vec3(row, col, ${c}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:t?`\n      float ${a}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${c};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${a}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${c};\n    vec2 uv = uvFromFlat(${A}, ${u}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],i=n[2],{newShape:o,keptDims:l}=ti(n),A=o;if(A.length<n.length){const n=["row","col","depth"];return`\n        ${XD(iQ(e,A),t)}\n        float ${a}(int row, int col, int depth) {\n          return ${a}(${oQ(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${s}, ${i}, 1)));\n        ${rQ(e)}\n      }\n    `;const u=e.shapeInfo.texShape,c=u[0],h=u[1],d=e.shapeInfo.flatOffset;if(h===s&&null==d)return t?`\n      float ${a}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${a}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${i}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${h}.0, ${c}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(h===i&&null==d)return t?`\n      float ${a}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${a}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${c}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const p=nQ(r);return t?`\n    float ${a}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${p};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${a}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${s} + col * ${i} + depth + ${p};\n        vec2 uv = uvFromFlat(${c}, ${h}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],i=n[2]*s,o=n[1]*i,{newShape:l,keptDims:A}=ti(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${XD(iQ(e,l),t)}\n      float ${a}(int row, int col, int depth, int depth2) {\n        return ${a}(${oQ(n,A)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${o}, ${i}, ${s}, 1)));\n        ${rQ(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,h=c[0],d=c[1],p=`int stride2 = ${r}Shape[3];`,f=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(d===o&&null==u)return t?`\n      float ${a}(int row, int col, int depth, int depth2) {\n        ${p}\n        ${f}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${a}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${i}, ${s}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${d}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(d===s&&null==u)return t?`\n      float ${a}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${a}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${d}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const g=nQ(r);return t?`\n    float ${a}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${p}\n      ${f}\n      ${m}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${a}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${i} +\n          depth * ${s} + depth2;\n      vec2 uv = uvFromFlat(${h}, ${d}, index + ${g});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],s=t[3]*a,i=t[2]*s,o=t[1]*i,{newShape:l,keptDims:A}=ti(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${XD(iQ(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${oQ(t,A)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${o}, ${i}, ${s}, ${a})) +\n          depth3;\n        ${rQ(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,c=e.shapeInfo.texShape,h=c[0],d=c[1];if(d===o&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${i}, ${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${d}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(d===a&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${d}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${i} + depth * ${s} +\n          depth2 * ${a} + depth3 + ${nQ(n)};\n      vec2 uv = uvFromFlat(${h}, ${d}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:s}=ti(t);if(a.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${XD(iQ(e,a))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${oQ(t,s)});\n      }\n    `}const i=t[5],o=t[4]*i,l=t[3]*o,A=t[2]*l,u=t[1]*A;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${A}, ${l}, ${o})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${i}, 1)));\n        ${rQ(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===u&&null==c)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${A}, ${l}, ${o}, ${i})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===i&&null==c)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${A} + depth * ${l} +\n          depth2 * ${o} + depth3 * ${i} + depth4 + ${nQ(n)};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function JD(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${zD().texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,s=zD();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `;const i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,i=s[0],o=s[1],l=zD();if(null!=s&&js(n,s))return t?`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${a}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${i}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${a}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const A=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${a}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(n[1]/2)}, ${A[0]}, ${A[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===n[0]){const r=[1,2],s=["b","row","col"];return`\n        ${JD(iQ(e,n.slice(1)),t)}\n        vec4 ${a}(int b, int row, int col) {\n          return ${a}(${oQ(s,r)});\n        }\n      `}const o=zD();if(t)return`\n    vec4 ${a}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `;const l=i[0],A=i[1],u=Math.ceil(n[2]/2);return`\n    vec4 ${a}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${A}, ${u*Math.ceil(n[1]/2)}, ${u}, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=zD();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);\n    }\n  `;const s=e.shapeInfo.logicalShape,i=s.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],A=l[0],u=l[1],c=Math.ceil(s[i-1]/2);let h=c*Math.ceil(s[i-2]/2),d="int b, int row, int col",p=`b * ${h} + (row / 2) * ${c} + (col / 2)`;for(let e=2;e<i-1;e++)d=`int b${e}, `+d,h*=s[i-e-1],p=`b${e} * ${h} + `+p;return`\n    vec4 ${r}(${d}) {\n      int index = ${p};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${A});\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const YD="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ZD="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",eQ="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",tQ="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function nQ(e){return`offset${e}`}function rQ(e){const t=e.name,n=Gs(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function aQ(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function sQ(e,t,n){const{newShape:r,keptDims:a}=ti(t),s=t.length,i=e&&3===s&&1===t[0],o=i?t.slice(1):r,l=!e&&s>1&&!js(t,n)&&r.length<s||i;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:a}}function iQ(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function oQ(e,t){return t.map((t=>e[t])).join(", ")}function lQ(e,t,n){const r=[],a=[];let s,i,o,l=null,A=null;A=e.getUniformLocation(n,"NAN",!1),1===ki().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const a of t.variableNames){const s={name:a,uniform:e.getUniformLocation(n,a,u),offset:e.getUniformLocation(n,`offset${a}`,u)};t.enableShapeUniforms&&(s.shape=e.getUniformLocation(n,`${a}Shape`,u),s.texShape=e.getUniformLocation(n,`${a}TexShape`,u)),r.push(s)}if(t.enableShapeUniforms&&(s=e.getUniformLocation(n,"outShape",u),o=e.getUniformLocation(n,"outShapeStrides",u),i=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const r of t.customUniforms)a.push(e.getUniformLocation(n,r.name,u));return{variablesLocations:r,customUniformLocations:a,infLoc:l,nanLoc:A,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:i}}function AQ(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,a=t[n],s=a.shape;if(!js(r,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${s} must match`);if(e.isUniform&&a.isUniform)return;const i=e.texShape,o=a.isUniform?null:a.texData.texShape;if(!js(i,o))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${o} must match`)}))}function uQ(e){return ki().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class cQ{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=hD.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=zD();this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?WD(["r","c","d"],e):VD(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class hQ{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=hD.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=zD();this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?WD(["r","c","d"],e):VD(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class dQ{constructor(e){this.variableNames=["A"],this.outTexUsage=dD.DOWNLOAD;const t=zD();this.outputShape=e,this.userCode=`\n      ${GD}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class pQ{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=dD.DOWNLOAD;const t=zD();this.outputShape=e,this.userCode=`\n      ${GD}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const fQ={R:0,G:1,B:2,A:3};class mQ{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=zD();this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let s="";for(let e=0;e<n.length;e++){const t=n[e];s+=`\n          if(offset == ${e}) {\n            result = values[${fQ[t]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":KD(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${s}\n        }\n        ${r.output} = vec4(${a}, 0., 0., 0.);\n      }\n    `}}class gQ{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zD();this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let a=0;a<=1;a++){const s=2*t+a;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${a};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${s}] = values[0];\n            } else if (offset == 1) {\n              result[${s}] = values[1];\n            } else if (offset == 2) {\n              result[${s}] = values[2];\n            } else {\n              result[${s}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":KD(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${a};\n        }\n    `}}function yQ(e,t,n,r,a,s){!function(e,t){const n=ki().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const i=function(e){return FD(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),o=e.TEXTURE_2D;return bD(e,(()=>e.bindTexture(o,i))),bD(e,(()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),bD(e,(()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),bD(e,(()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST))),bD(e,(()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===ki().getNumber("WEBGL_VERSION")?bD(e,(()=>e.texImage2D(o,0,r,t,n,0,a,s,null))):bD(e,(()=>e.texStorage2D(o,1,r,t,n))),bD(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:i,texShape:[n,t]}}function bQ(e){return e.internalFormatFloat}function wQ(e){return e.internalFormatHalfFloat}function vQ(e){return e.downloadTextureFormat}function xQ(e){return e.internalFormatPackedFloat}function BQ(e){return e.internalFormatPackedHalfFloat}class kQ{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=ki().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){AD[e]=t}(t,e)):this.gl=cD(t),e=this.gl,2===ki().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>bD(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>bD(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>bD(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>bD(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>bD(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>bD(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>bD(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>bD(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===ki().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=vD(this.gl,e),OD(this.gl,t))this.textureHalfFloatExtension=vD(this.gl,t);else if(ki().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),OD(this.gl,r))this.colorBufferHalfFloatExtension=vD(this.gl,r);else if(ki().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",OD(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!OD(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=function(e){return function(e,t){const n=FD(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return bD(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),bD(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(e){return function(e,t){const n=FD(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return bD(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),bD(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(e){return FD(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=yD(this.gl,this.textureHalfFloatExtension)}get debug(){return ki().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;bD(e,(()=>e.finish())),bD(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),bD(e,(()=>e.deleteFramebuffer(this.framebuffer))),bD(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),bD(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),bD(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=fD(t,n);return yQ(e,a,s,bQ(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=fD(t,n);return yQ(e,a,s,wQ(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=fD(t,n);return yQ(e,a,s,vQ(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){bD(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===ki().getNumber("WEBGL_VERSION")?bD(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):bD(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===ki().getNumber("WEBGL_VERSION")?bD(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):bD(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),bD(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,s){let i,o,l;bD(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*r*4),o=e.FLOAT,l=s.internalFormatPackedFloat),i.set(a),2===ki().getNumber("WEBGL_VERSION")?bD(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,i))):bD(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,i))),bD(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=gD(t,n);return yQ(e,a,s,BQ(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[a,s]=gD(t,n);return yQ(e,a,s,xQ(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(ID(this.gl,this.framebuffer),this.outputTexture=null),bD(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[a,s]=fD(t,n),i=new Uint8Array(t*n*4);return bD(e,(()=>e.readPixels(0,0,a,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,i))),new Float32Array(i.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,a,s){return function(e,t,n,r,a,s,i){const o=e,l=new Float32Array(function(e,t){const[n,r]=gD(e,t);return n*r*4}(s,i));return o.bindBuffer(o.PIXEL_PACK_BUFFER,t),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,l),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),l}(this.gl,e,0,0,0,a,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();bD(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const a=16*t*n;return bD(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ))),bD(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),bD(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(ki().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return bD(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=function(e){const t=zD();return function(e,t){const n=FD(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(bD(e,(()=>e.shaderSource(n,t))),bD(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(t));const n=function(e){return FD(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);bD(t,(()=>t.attachShader(n,this.vertexShader))),bD(t,(()=>t.attachShader(n,e))),function(e,t){if(bD(e,(()=>e.linkProgram(t))),!ki().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&kD(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;bD(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){bD(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),CD(e,t,"clipSpacePos",n,3,20,0)&&CD(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(bD(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&kD(this.gl,this.program),bD(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return FD(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),bD(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),ND(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,a]=gD(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&kD(this.gl,this.program),ED(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}bD(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),bD(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=vD(this.gl,2===ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Ys((()=>this.disposed||this.isQueryAvailable(e,ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in ki().platform&&(n=ki().platform.setTimeoutCustom.bind(ki().platform)),Ys((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),SD(this.gl,e,this.framebuffer),this.debug&&ED(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(SD(this.gl,this.outputTexture,this.framebuffer),this.debug&&ED(this.gl)):ID(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;SD(r,e,this.framebuffer),this.debug&&ED(r),this.outputTexture=e,bD(r,(()=>r.viewport(0,0,t,n))),bD(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),bD(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:CQ,XI:NQ,Nk:SQ,f6:IQ,ct:EQ,YG:FQ,hH:TQ,z3:LQ,sG:UQ,uM:_Q,vS:RQ,qB:DQ,GG:QQ,rq:OQ,lg:$Q,WR:MQ,cu:PQ,GE:HQ,px:zQ,jC:VQ,He:WQ,hE:KQ,BF:GQ,Dk:jQ,cl:qQ,_B:XQ,ub:JQ,_f:YQ,Ku:ZQ,qy:eO,Zy:tO,bu:nO,zv:rO,dH:aO,HS:sO,yH:iO,l3:oO,z9:lO,x6:AO,_m:uO,eW:cO,GK:hO,SP:dO,yr:pO,dl:fO,Dw:mO,xT:gO,_X:yO,wz:bO}=N;function wO(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function vO(e,t){return 1===t?[e]:wO(e,t)}class xO{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=uQ(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=vO("rc",this.rank),t=aQ(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),a=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${a}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)a=`${e[e.length-1-t]},`+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class BO{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var r,a;this.userCode=`\n      ${r=t,a=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${a?function(e,t,n="index"){const r=e.map(((e,t)=>t)),a=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),a=new Array(n-1);a[n-2]=r[n-1];for(let e=n-3;e>=0;--e)a[e]=`(${a[e+1]} * ${r[e+1]})`;return a}(r,t);return a.map(((t,r)=>`int ${e[r]} = ${n} / ${a[r]}; ${r===a.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${a[r]}`:`index -= ${e[r]} * ${a[r]}`};`)).join("")}(["r","c","d"],"inputShape"):VD(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":KD(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class kO{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=NO(t,n),a=SO(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const s=CO(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();const e=this.freeTextures[a].pop();return this.usedTextures[a].push(e),e}let i;return r===pD.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===pD.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===pD.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===pD.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===pD.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const a=NO(n,r),s=SO(t,a,r);s in this.freeTextures||(this.freeTextures[s]=[]);const i=CO(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=ki().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[s].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const l=this.usedTextures[s],A=l&&l.indexOf(e);if(null==A||A<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[A]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function CO(e,t,n,r,a){const s=function(e,t){switch(e){case pD.PACKED_2X2_FLOAT32:return xQ(t);case pD.PACKED_2X2_FLOAT16:return BQ(t);case pD.UNPACKED_FLOAT32:return bQ(t);case pD.UNPACKED_FLOAT16:return wQ(t);case pD.PACKED_4X1_UNSIGNED_BYTE:return vQ(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let i;if(a){const[t,n]=gD(e[0],e[1]);i=t*n}else{const[t,n]=fD(e[0],e[1]);i=t*n}const o=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,s);return i*o}function NO(e,t){if(e===dD.UPLOAD)return pD.PACKED_2X2_FLOAT32;if(e===dD.RENDER||null==e)return function(e){return ki().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?pD.PACKED_2X2_FLOAT32:pD.UNPACKED_FLOAT32:e?pD.PACKED_2X2_FLOAT16:pD.UNPACKED_FLOAT16}(t);if(e===dD.DOWNLOAD||e===dD.PIXELS)return pD.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function SO(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class IO{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const EO="if (isnan(x)) return x;",FO="return abs(x);",TO=EO+"\n  return (x < 0.0) ? 0.0 : x;\n",LO=EO+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",UO="return x;";class _O{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class RO{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length);const t=e.length,n=vO("rc",t),r=aQ(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),s=n.slice(-2),i=t<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${i}));\n      }\n    `}}const DO=$g,QO={},OO=ki().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class $O extends Os{nextDataId(){return $O.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ki().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof kQ)t=e;else{const n=cD(ki().getNumber("WEBGL_VERSION"),e);t=new kQ(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=cD(ki().getNumber("WEBGL_VERSION"));t=new kQ(e),this.binaryCache=((n=ki().getNumber("WEBGL_VERSION"))in QO||(QO[n]={}),QO[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new kO(this.gpgpu),this.numMBBeforeWarning=null==ki().global.screen?1024:ki().global.screen.height*ki().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Qs(this,pc())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,a,s){const i=this.makeTensorInfo(t,n),o=this.texData.get(i.dataId);o.isPacked=!1,o.texture={texture:e,texShape:[r,a]},o.texShape=[r,a];const l=UD(t),A=new mQ(l,!1,s),u=this.runWebGLProgram(A,[i],n,[[r,a]]);return u.shape=t,o.texture=null,this.disposeIntermediateTensorInfo(i),u.dataId}write(e,t,n){if((ki().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ki().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:dD.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,t,n,r,a){if(ki().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:dD.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:s,shape:i,isPacked:o}=t;if(null!=s){let t;t=o?new _O(i,UO):new IO(i,UO);const n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let A,u;return l&&(A=du()),u="complex64"===r?Lb(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.getValuesFromTexture(e),l&&(this.downloadWaitMs+=du()-A),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:s,complexTensorInfos:i,isPacked:o}=t;if(null!=a){let t;t=o?new _O(r,UO):new IO(r,UO);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:s}],s),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(ki().getBool("DEBUG")&&!ki().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===ki().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,A,u=null;if("complex64"!==s&&ki().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...mD(r))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){const e=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]);A=Lb(e[0],e[1])}else if(null==u)A=this.getValuesFromTexture(e);else{const e=Gs(r);A=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;bD(e,(()=>e.deleteBuffer(u)))}const c=this.convertAndCacheOnCPU(e,A),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach((e=>e(c))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&pc().removeDataId(e,this),this.pendingDeletes--),c}readToGPU(e,t={}){const n=this.texData.get(e),{values:r,shape:a,slice:s,dtype:i,isPacked:o,texture:l}=n;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=s){let n;n=o?new _O(a,UO):new IO(a,UO);const r=this.runWebGLProgram(n,[{dataId:e,shape:a,dtype:i}],i),s=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),s}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const A=this.decode(e,t.customTexShape),u=pc().makeTensorFromTensorInfo(A),c=this.texData.get(A.dataId);return Object.assign({tensorRef:u},c.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>fu(e)));return vh(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return vh(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!wD(n)){if(ki().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=Gs(t);if(ki().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),s=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...mD(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),s}const s=ki().getBool("WEBGL_PACK")&&!0===r,i=s?UD(t):t,o=s?new pQ(i):new dQ(i),l=this.runWebGLProgram(o,[{shape:i,dtype:n,dataId:e}],"float32"),A=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(A.texture.texture,A.texShape[0],A.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const a=gu(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),s=gu(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(a);i.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),i.getExtraProfileInfo=()=>e.map(((e,t)=>({name:s[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:du(),endMs:null}}endTimer(e){return ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=du(),e)}async getQueryTime(e){if(ki().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,s)));const A=this.texData.get(e);A.texture=null,A.texShape=null,A.isPacked=!1,A.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=OO){return ki().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&Gs(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){MA("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return DO(e.shape,t)}packedUnaryOp(e,t,n){const r=new _O(e.shape,t),a=this.compileAndRun(r,[e],n);return pc().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=aO(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(ki().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,FO,e.dtype);const t=new IO(e.shape,FO),n=this.compileAndRun(t,[e]);return pc().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&ii(n[0])){const a=n.map((e=>pu(e)));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return pc().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new RO(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new xO(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[TD(e.shape),...LD(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[TD(t),...LD(t)],s=new BO(a,n),i=[n],o=this.runWebGLProgram(s,[r],e.dtype,i,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:a,dtype:s}=n;null!=t&&Vs(Gs(a)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."));const i=UD(a);let o;o=r?new hQ(i):new cQ(i);const l=[null!=t?t:mD(i)];return{dtype:s,shape:a,dataId:this.runWebGLProgram(o,[{shape:i,dtype:s,dataId:e}],s,l,!0,t).dataId}}runWebGLProgram(e,t,n,r,a=!1,s){const i=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(i.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===hD.DENSE){const t=null!=s?s:mD(e.outputShape);o.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===Gs(i.shape))return o.values=ni(i.dtype,0),i;const l=[],A=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Gs(t.shape)<=ki().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!RD(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);const u={shape:i.shape,texData:o,isUniform:!1},c=function(e,t,n){let r="";t.concat(n).forEach((t=>{const a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const s=t.texData.texShape,{useSqueezeShape:i,uniformShape:o,keptDims:l}=sQ(e.packedInputs,t.shape,s);let A="",u="",c="";if(1===o.length&&e.packedInputs){const e=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];A=`${e[0]>1}_${e[1]>1}`}else if(2!==o.length||e.packedInputs){if(o.length>2&&!e.packedInputs){const e=ci(o);c=`${e[0]===s[1]}_${e[e.length-1]===s[1]}`}}else u=`${o[0]>1}_${o[1]>1}`;const h=t.shape.length,d=2===o.length&&js(t.shape,s),p=1===Gs(t.shape),f=Gh(t.shape,n.shape),m=!e.packedInputs&&h===n.shape.length&&js(s,n.texData.texShape),g=e.packedInputs||o.length>2?"":`${s[0]>1}_${s[1]>1}`;r+=`${h}_${m}_${i?l:""}_${o.length}_${p}_${f}_${d}_${A}_${u}_${c}_${g}_${a}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${a}`}}));const a=e.userCode;let s=e.constructor.name;return s+="_"+r+"_"+a+`${ki().getNumber("WEBGL_VERSION")}`,s}(e,A,u),h=this.getAndSaveBinary(c,(()=>function(e,t,n,r){const a=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),s=a.map((e=>e.shapeInfo)),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=qD(a,i,t),l=function(e,t){const n=FD(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(bD(e,(()=>e.shaderSource(n,t))),bD(e,(()=>e.compileShader(n))),ki().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw BD(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,o),A=e.createProgram(l);return ki().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:A,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(A),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:A,inShapeInfos:s,outShapeInfo:i},lQ(e,t,A)))}(this.gpgpu,e,A,u))),d=null!=this.activeTimers;let p;d&&(p=this.startTimer()),ki().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(AQ(t.inShapeInfos,n),AQ([t.outShapeInfo],[r]));const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):e.setOutputMatrixTexture(s.texture,i[0],i[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===ki().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let r=0;r<n.length;++r){const a=n[r],{uniform:s,offset:i,shape:o,texShape:l}=t.variablesLocations[r];if(o){const{uniformShape:n}=sQ(t.program.packedInputs,a.shape,a.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(o,new Int32Array(n));break;case 2:e.gl.uniform2iv(o,new Int32Array(n));break;case 3:e.gl.uniform3iv(o,new Int32Array(n));break;case 4:e.gl.uniform4iv(o,new Int32Array(n))}}if(l&&e.gl.uniform2i(l,a.texData.texShape[0],a.texData.texShape[1]),null!=s)if(a.isUniform)if(Gs(a.shape)<2)e.gl.uniform1f(s,a.uniformValues[0]);else{let t=a.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(s,t)}else null!=a.texData.slice&&null!=i&&e.gl.uniform1i(i,a.texData.slice.flatOffset),e.setInputMatrixTexture(a.texData.texture.texture,s,r)}const o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=ci(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(let n=0;n<t.program.customUniforms.length;++n){const r=t.program.customUniforms[n],s=t.customUniformLocations[n],i=a[n];if("float"===r.type)e.gl.uniform1fv(s,i);else if("vec2"===r.type)e.gl.uniform2fv(s,i);else if("vec3"===r.type)e.gl.uniform3fv(s,i);else if("vec4"===r.type)e.gl.uniform4fv(s,i);else if("int"===r.type)e.gl.uniform1iv(s,i);else if("ivec2"===r.type)e.gl.uniform2iv(s,i);else if("ivec3"===r.type)e.gl.uniform3iv(s,i);else{if("ivec4"!==r.type)throw Error(`uniform type ${r.type} is not supported yet.`);e.gl.uniform4iv(s,i)}}e.executeProgram()}(this.gpgpu,h,A,u,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),d&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)}));const f=ki().getNumber("WEBGL_FLUSH_THRESHOLD");if(f>0){const e=du();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!ki().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===a){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(e,t,n,r,a=!1){return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ki().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=mc((()=>{if(!ki().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ki().getBool("DEBUG");ki().set("DEBUG",!1);const t=this.abs(Uh(1e-8)).dataSync()[0];if(ki().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:s,usage:i,isPacked:o}=t;if(null!=s)return;const l=null!=this.activeTimers;let A;l&&(A=du());let u=t.texShape;if(null==u&&(u=function(e,t=!1){let n=ki().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ki().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&ki().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map(((t,n)=>n>=e.length-2?Hs(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=ti(e);e=t.newShape}let a=Gs(e),s=null;e.length<=1&&a<=n?s=[1,a]:2===e.length&&e[0]<=n&&e[1]<=n?s=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?s=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?s=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?s=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(s=[e[0],e[1]*e[2]*e[3]]);const i=null!=s&&Math.max(...s)>r&&Math.min(...s)<=(t?2:1)&&Math.min(...s)>0;if(null==s||i)if(t){const t=TD(e);let n=2,r=2;e.length&&([n,r]=LD(e)),a=t*(n/2)*(r/2),s=Xs(a).map((e=>2*e))}else s=Xs(a);return s}(n,o),t.texShape=u),null!=a){const e=UD(n);let s,i=u[1],c=u[0];const h=a instanceof Uint8Array||a instanceof Uint8ClampedArray;!o&&h||([i,c]=gD(u[0],u[1])),s=o?new gQ(e,h):new mQ(e,h);const d=h?[c,i]:u,p=this.makeTensorInfo(d,r),f=this.texData.get(p.dataId);f.usage=h?dD.PIXELS:dD.UPLOAD,f.texShape=d,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),i,c,a);const m=[[c,i]],g=!0,y=this.runWebGLProgram(s,[p],r,m,g),b=this.texData.get(y.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,ki().get("ENGINE_COMPILE_ONLY")?this.disposeData(y.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(y.dataId)),this.disposeIntermediateTensorInfo(p),l&&(this.uploadWaitMs+=du()-A)}else{const e=this.acquireTexture(u,i,r,o);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*si(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await ob(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw BD(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,outShapeLocation:s,outShapeStridesLocation:i,outTexShapeLocation:o}=lQ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=s,e.outShapeStridesLocation=i,e.outTexShapeLocation=o}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:a,width:s,channels:i}=e,o=pc().backend;if(!o.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=o.writeTexture(r,t,n,a,s,i);return pc().makeTensorFromDataId(l,t,n,o)}}$O.nextDataId=0,ec()&&bc("webgl",(()=>new $O),2);const MO="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class PO{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=qh(t,n),this.enableShapeUniforms=uQ(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const HO="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class zO{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=qh(t,n);const a=this.outputShape.length;this.enableShapeUniforms=uQ(a);let s="";if(r)if(0===a||1===Gs(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(s=`\n          ${aQ(a)} coords = getOutputCoords();\n        `,1===a)this.enableShapeUniforms?s+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":s+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=vO("coords",a);this.enableShapeUniforms?s+=`\n            bool nextRowOutOfBounds =\n              (${e[a-2]} + 1) >= outShape[${a} - 2];\n            bool nextColOutOfBounds =\n              (${e[a-1]} + 1) >= outShape[${a} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:s+=`\n            bool nextRowOutOfBounds =\n              (${e[a-2]} + 1) >= ${this.outputShape[a-2]};\n            bool nextColOutOfBounds =\n              (${e[a-1]} + 1) >= ${this.outputShape[a-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${s}\n\n        setOutput(result);\n      }\n    `}}function VO(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const WO={kernelName:Vo,backendName:"webgl",kernelFunc:VO};function KO(e){const{inputs:t,backend:n}=e,{real:r,imag:a}=t,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),o=VO({inputs:{x:r},backend:n}),l=VO({inputs:{x:a},backend:n});return i.complexTensorInfos={real:o,imag:l},s}const GO={kernelName:to,backendName:"webgl",kernelFunc:KO},jO="return (a < 0.) ? b * a : a;",qO="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",XO={kernelName:Xo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:s}=r,i=n.makeTensorInfo([],"float32",cu(s,"float32")),o=ki().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zO(qO,a.shape,i.shape):new PO(jO,a.shape,i.shape),l=n.runWebGLProgram(o,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),l}},JO="return (a < 0.) ? b * a : a;",YO="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",ZO={kernelName:Tl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:a}=t,s=ki().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zO(YO,r.shape,a.shape):new PO(JO,r.shape,a.shape);return n.runWebGLProgram(s,[r,a],"float32")}},e$="if (isnan(x)) return x;";function t$({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:s})=>{const{x:i}=a,o=s,l=r||i.dtype;if(o.shouldExecuteOnCPU([i])&&null!=n){const e=o.texData.get(i.dataId),t=n(e.values,l);return o.makeTensorInfo(i.shape,l,t)}let A;return A=ki().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new _O(i.shape,t):new IO(i.shape,e),o.runWebGLProgram(A,[i],l)}}function n$({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:s}){return({inputs:i,backend:o})=>{const{a:l,b:A}=i,u=o;if(r&&"complex64"===l.dtype){const t=u.texData.get(l.dataId),n=u.texData.get(A.dataId),[r,a]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},s={dataId:r.dataId,dtype:r.dtype,shape:A.shape},i=new PO(e,l.shape,A.shape);return u.runWebGLProgram(i,[a,s],$u(n.dtype,r.dtype))})),s=KO({inputs:{real:r,imag:a},backend:u});return u.disposeIntermediateTensorInfo(r),u.disposeIntermediateTensorInfo(a),s}const c=s||$u(l.dtype,A.dtype);if(("string"===l.dtype||"string"===A.dtype||u.shouldExecuteOnCPU([l,A]))&&null!=a){const e=u.texData.get(l.dataId).values,t=u.texData.get(A.dataId).values,n="string"===l.dtype?hw(e):e,r="string"===l.dtype?hw(t):t,[s,i]=a(l.shape,A.shape,n,r,c),o=u.makeTensorInfo(i,c);return u.texData.get(o.dataId).values=s,o}let h;return h=ki().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new zO(t,l.shape,A.shape,n):new PO(e,l.shape,A.shape),u.runWebGLProgram(h,[l,A],c)}}function r$(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":TO;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":LO;if("prelu"===e)return t?YO:JO;if("leakyrelu"===e)return t?qO:jO;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class a${constructor(e,t,n,r=!1,a=!1,s=!1,i=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=uQ(this.outputShape.length);const A=r?e[1]:e[2],u=Math.ceil(A/2),c=r?"i * 2, rc.y":"rc.y, i * 2",h=a?"rc.z, i * 2":"i * 2, rc.z",d=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",m="";i&&(f=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${i}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${i}\n        }`:`vec4 activation(vec4 x) {\n          ${i}\n        }`,m="result = activation(result);");const g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let y="rc.x",b="rc.x";e[0]<t[0]?y=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(b=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${f}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${y};\n        int batchB = ${b};\n        for (int i = 0; i < ${u}; i++) {\n          vec4 a = getMatrixA(batchA, ${c});\n          vec4 b = getMatrixB(batchB, ${h});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${d[0]} * ${p[0]});\n          result += (${d[1]} * ${p[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${m}\n\n        setOutput(result);\n      }\n    `}}class s${constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=qh(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const i$="return a * b;";function o$(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,s=$u(r.dtype,a.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),s=new s$("return areal * breal - aimag * bimag;",r.shape,a.shape),i=new s$("return areal * bimag + aimag * breal;",r.shape,a.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:a.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:a.shape}],l=n.runWebGLProgram(s,o,"float32"),A=n.runWebGLProgram(i,o,"float32"),u=KO({inputs:{real:l,imag:A},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(A),u}if(n.shouldExecuteOnCPU([r,a])){const e=n.texData.get(r.dataId),t=n.texData.get(a.dataId),[i,o]=GQ(r.shape,a.shape,e.values,t.values,s),l=n.makeTensorInfo(o,s);return n.texData.get(l.dataId).values=i,l}let i;return i=ki().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zO(i$,r.shape,a.shape):new PO(i$,r.shape,a.shape),n.runWebGLProgram(i,[r,a],s)}const l$={kernelName:wl,backendName:"webgl",kernelFunc:o$};function A$(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:s}=r,i=n,o=Gs(a.shape),l=Zs(s,o),A=Gs(l);Vs(o===A,(()=>`The new shape (${l}) has ${A} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`));const u=i.texData.get(a.dataId);return!u.isPacked||RD(a.shape,l)||null!==u.texture&&RD(u.shape,l)?(i.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){const r=[TD(e.shape),...LD(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},s=[TD(t),...LD(t)],i=new BO(s,r),o=[r],l=n.runWebGLProgram(i,[a],e.dtype,o,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(a,l,i)}const u$={kernelName:Ml,backendName:"webgl",kernelFunc:A$};class c${constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];const i=4*Math.floor(n/4),o=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${qs(e)?e.toPrecision(2):e}, ones);`}let A="";a%n>0&&(A=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${A}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===o}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class h${constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:a,outSize:s}=e;this.outputShape=[r,s];let i="0.0",o="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",o="min"):"max"===t&&(i="-1.0 / 1e-20",o="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const A=4*Math.floor(n/4),u=n%4;let c=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${o}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,h="vec4";"all"===t?(i="1.0",c="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(i="0.0",c="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");let d="";a%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${i};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${i});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${A}; i += 4) {\n          int inIdx = inOffset + i;\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${A};\n        if (${1===u}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${2===u}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${3===u}) {\n          ${h} values = ${h}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${c}\n        }\n        setOutput(${l});\n      }\n    `}}function d$(e,t,n,r){const a=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=mb(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let s=e;for(let i=0;i<a.length;i++){const{inSize:o,windowSize:l,outSize:A}=a[i];let u,c;u="mean"===n?0===i?new c$({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:A},o):new c$({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:A}):new h$({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:A},n),c=s,s=r.runWebGLProgram(u,[s],t),c.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(c)}return s}class p${constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;const r=aQ(this.rank),a=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}class f${constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=aQ(this.rank),a=wO("rc",this.rank),s=new Array(this.rank);for(let e=0;e<t.length;e++)s[t[e]]=a[e];const i=`vec2(${s.slice(-2).join()})`,o=`++${a[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${s.join()}), ${i})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${o}) {\n        result[1] = ${l};\n      }\n      --${a[this.rank-1]};\n      if(++${a[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${o}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function m$(e,t,n){const r=ki().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new f$(e.shape,t):new p$(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function g$(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r;return function(e,t,n,r){const a=t,s=e.shape.length,i=ei(a,e.shape);let o=i;const l=gf(o,s),A=null!=l;let u=e;A&&(u=m$(e,l,r),o=bf(o.length,s)),mf("sum",o,s);const[c,h]=pf(u.shape,o);let d=c;n&&(d=ff(c,i));const p=Gs(h),f=A$({inputs:{x:u},attrs:{shape:[Gs(e.shape)/p,p]},backend:r}),m=d$(f,Mu(e.dtype),"sum",r),g=A$({inputs:{x:m},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),A&&r.disposeIntermediateTensorInfo(u),g}(a,s,i,n)}const y$={kernelName:oA,backendName:"webgl",kernelFunc:g$};function b$(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{perm:s}=r,i=n,o=a.shape.length,l=new Array(o);for(let e=0;e<l.length;e++)l[e]=a.shape[s[e]];let A;if(i.shouldExecuteOnCPU([a])){const e=i.texData.get(a.dataId).values,t=yO(e,a.shape,a.dtype,s,l);A=i.makeTensorInfo(l,a.dtype),i.texData.get(A.dataId).values=t}else A=m$(a,s,i);return A}const w$={kernelName:EA,backendName:"webgl",kernelFunc:b$};function v$({a:e,b:t,transposeA:n,transposeB:r,backend:a,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){const A=e.shape.length,u=t.shape.length,c=n?e.shape[A-2]:e.shape[A-1],h=r?t.shape[u-1]:t.shape[u-2],d=n?e.shape[A-1]:e.shape[A-2],p=r?t.shape[u-2]:t.shape[u-1],f=e.shape.slice(0,-2),m=t.shape.slice(0,-2),g=Gs(f),y=Gs(m),b=qh(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([d,p]);Vs(c===h,(()=>`Error in matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const w=n?[g,c,d]:[g,d,c],v=r?[y,p,h]:[y,h,p],x=A$({inputs:{x:e},backend:a,attrs:{shape:w}}),B=A$({inputs:{x:t},backend:a,attrs:{shape:v}}),k=[x,B],C=Math.max(g,y),N=n?x.shape[1]:x.shape[2],S=null!=s,I=null!=i,E="leakyrelu"===l,F=null!=l?r$(l,!0):null;let T;if((1===d||1===p)&&N>1e3&&!1===(S||I||E||null!=F)){let e=x,t=B;n&&(e=b$({inputs:{x},backend:a,attrs:{perm:[0,2,1]}}),k.push(e)),r&&(t=b$({inputs:{x:B},backend:a,attrs:{perm:[0,2,1]}}),k.push(t));const s=1===p;let i=e;1!==p&&(i=A$({inputs:{x:e},backend:a,attrs:{shape:[C,N,1]}}),k.push(i));const o=1===p?2:1;let l=t;s&&(l=A$({inputs:{x:t},backend:a,attrs:{shape:[C,1,N]}}),k.push(l));const A=o$({inputs:{a:i,b:l},backend:a});T=g$({inputs:{x:A},backend:a,attrs:{axis:o,keepDims:!0}}),k.push(A)}else{const l=$u(e.dtype,t.dtype),A=new a$(w,v,[C,d,p],n,r,S,F,I,E),u=[x,B];if(null!=s&&u.push(s),I&&u.push(i),E){const e=a.makeTensorInfo([],"float32",cu(o,"float32"));u.push(e),k.push(e)}T=a.runWebGLProgram(A,u,l)}const L=A$({inputs:{x:T},backend:a,attrs:{shape:b}});k.push(T);for(const e of k)a.disposeIntermediateTensorInfo(e);return L}const x$={kernelName:QA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a,b:s,bias:i,preluActivationWeights:o}=t,{transposeA:l,transposeB:A,activation:u,leakyreluAlpha:c}=r;return v$({a,b:s,transposeA:l,transposeB:A,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:c,activation:u})}},B$="return abs(x);",k$={kernelName:Ei,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=aO(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let a;return a=ki().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new _O(r.shape,B$):new IO(r.shape,B$),n.runWebGLProgram(a,[r],r.dtype)}},C$=t$({opSnippet:EO+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),N$={kernelName:Fi,backendName:"webgl",kernelFunc:C$},S$=t$({opSnippet:EO+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),I$={kernelName:Ti,backendName:"webgl",kernelFunc:S$},E$="return a + b;",F$=n$({opSnippet:E$,packedOpSnippet:E$,supportsComplex:!0,cpuKernelImpl:CQ}),T$={kernelName:Li,backendName:"webgl",kernelFunc:F$};class L${constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class U${constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const _$={kernelName:Ui,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,a=n;if(1===a.length)return VO({inputs:{x:a[0]},backend:r});if(a.length>ki().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),s=e({inputs:a.slice(t),backend:r});return e({inputs:[n,s],backend:r})}const s=a.map((e=>e.dtype)).reduce(((e,t)=>$u(e,t))),i=a.map((e=>e.shape)),o=ki().getBool("WEBGL_PACK")?new U$(a[0].shape,i):new L$(a[0].shape,i);return r.runWebGLProgram(o,a,s)}},R$={kernelName:_i,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=ei(s,a.shape);let A=l;const u=gf(A,o);let c=a;null!=u&&(c=b$({inputs:{x:a},backend:n,attrs:{perm:u}}),A=bf(A.length,o)),mf("all",A,o);const[h,d]=pf(c.shape,A),p=A$({inputs:{x:c},backend:n,attrs:{shape:[-1,Gs(d)]}}),f=d$(p,p.dtype,"all",n);let m;return m=A$(i?{inputs:{x:f},backend:n,attrs:{shape:ff(h,l)}}:{inputs:{x:f},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),null!=u&&n.disposeIntermediateTensorInfo(c),m}},D$={kernelName:Ri,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=ei(s,a.shape);let A=l;const u=gf(A,o);let c=a;null!=u&&(c=b$({inputs:{x:a},backend:n,attrs:{perm:u}}),A=bf(A.length,o)),mf("any",A,o);const[h,d]=pf(c.shape,A),p=A$({inputs:{x:c},backend:n,attrs:{shape:[-1,Gs(d)]}}),f=d$(p,p.dtype,"any",n);let m;return m=A$(i?{inputs:{x:f},backend:n,attrs:{shape:ff(h,l)}}:{inputs:{x:f},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),null!=u&&n.disposeIntermediateTensorInfo(c),m}};class Q${constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:a,outSize:s}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s];const i="max"===t?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${o};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${i} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class O${constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Vs(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const a=e[e.length-1],s=Math.ceil(a/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");const i=this.outputShape,o=i.length,l=aQ(o),A=vO("coords",o);let u,c;if(1===s){c=o+1;const e=aQ(c);u=`\n        ${e} sourceLocR = ${e}(${A.join()}, 0);\n        ++${A[o-1]};\n        ${e} sourceLocG = ${e}(${A.join()}, 0);\n        ++${A[o-2]};\n        ${e} sourceLocA = ${e}(${A.join()}, 0);\n        --${A[o-1]};\n        ${e} sourceLocB = ${e}(${A.join()}, 0);\n        --${A[o-2]};`}else c=o,u=`\n        ${l} sourceLocR = coords;\n        ++${A[o-1]};\n        ${l} sourceLocG = coords;\n        ++${A[o-2]};\n        ${l} sourceLocA = coords;\n        --${A[o-1]};\n        ${l} sourceLocB = coords;\n        --${A[o-2]};`;const h=["x","y","z","w","u","v"].slice(0,c),d="."+h[c-1],p=h.map((e=>"int "+e)),f=vO("sourceLocR",c-1).concat("inIdx.r"),m=vO("sourceLocG",c-1).concat("inIdx.g"),g=vO("sourceLocB",c-1).concat("inIdx.b"),y=vO("sourceLocA",c-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${f.join()}),\n                             getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,v=`vec4(\n            getAChannel(${f.join()}),\n            hasNextCol ? getAChannel(${m.join()}) : 0.,\n            hasNextRow ? getAChannel(${g.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,x=r?"":`\n      float getBestIndicesAChannel(${p.join()}) {\n        return getChannel(getBestIndicesA(${h.join()}),\n                                          vec2(${h.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${p.join()}) {\n        return getChannel(getA(${h.join()}),\n                               vec2(${h.slice(-2).join()}));\n      }\n      ${x}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${A[o-1]} < ${i[o-1]-1};\n        bool hasNextRow = ${A[o-2]} < ${i[o-2]-1};\n        ${u}\n        ivec4 srcIdx = ivec4(sourceLocR${d}, sourceLocG${d},\n          sourceLocB${d}, sourceLocA${d}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${v};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${v};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function $$(e,t,n,r=null){let a=t.shape[0],s=t.shape[1];null!=r&&(a=r.shape[0],s=r.shape[1]);const i=mb(s),o={windowSize:i,inSize:s,batchSize:a,outSize:Math.ceil(s/i)},l=new Q$(o,n,null==r),A=[t];null!=r&&A.push(r);const u=e.runWebGLProgram(l,A,"int32");if(1===u.shape[1])return u;const c=$$(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}function M$(e,t,n,r=null){const a=null!=r?r.shape:t.shape,s=mb(a[a.length-1]),i=new O$(a,s,n,null==r),o=null==r?[t]:[t,r],l=e.runWebGLProgram(i,o,"int32");if(l.shape.length===t.shape.length){const r=M$(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function P$(e,t,n,r){const a=[n];if(mf("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!ki().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],s=e.texData.get(t.dataId);let i=t;null!==s&&s.isPacked&&(i=e.unpackTensor(t),n.push(i));const[o,l]=pf(i.shape,a),A=Gs(l),u=A$({inputs:{x:i},backend:e,attrs:{shape:[-1,A]}});n.push(u);const c=$$(e,u,r);n.push(c);const h=A$({inputs:{x:c},backend:e,attrs:{shape:o}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),h}return M$(e,t,r)}const H$={kernelName:Di,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;let i=ei(s,a.shape);const o=gf(i,a.shape.length);let l=a;const A=[];null!=o&&(l=b$({inputs:{x:a},backend:n,attrs:{perm:o}}),A.push(l),i=bf(i.length,l.shape.length)),mf("argMax",[i[0]],l.shape.length);const u=P$(n,l,i[0],"max");return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}},z$={kernelName:Qi,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s}=r;let i=ei(s,a.shape);const o=gf(i,a.shape.length);let l=a;const A=[];null!=o&&(l=b$({inputs:{x:a},backend:n,attrs:{perm:o}}),A.push(l),i=bf(i.length,l.shape.length)),mf("argMin",[i[0]],l.shape.length);const u=P$(n,l,i[0],"min");return A.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}},V$=t$({opSnippet:EO+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),W$={kernelName:Oi,backendName:"webgl",kernelFunc:V$},K$=t$({opSnippet:EO+"return log(x + sqrt(x * x + 1.0));"}),G$={kernelName:$i,backendName:"webgl",kernelFunc:K$},j$=t$({opSnippet:EO+"\n  return atan(x);\n"}),q$={kernelName:Mi,backendName:"webgl",kernelFunc:j$},X$=n$({opSnippet:MO+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+HO+"\n  return result;\n"}),J$={kernelName:Hi,backendName:"webgl",kernelFunc:X$},Y$=t$({opSnippet:EO+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Z$={kernelName:Pi,backendName:"webgl",kernelFunc:Y$};class eM{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,i=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,A=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,h=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;const p="avg"===t,f=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,m=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let g="0.0";if(p||(g="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${i}, ${o});\n        const ivec2 pads = ivec2(${h}, ${d});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${u};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${c};\n                wC += ${A}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?a?f:m:`wR * ${c} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let y=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(y="avgValue / max(count, 1.0)");const b=4*Math.floor(s/4),w=s%4,v=`\n      if (${p}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${h}, ${d});\n      const float initializationValue = ${g};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${g});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${u};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${b}; wC += 4) {\n            int xC = xCCorner + wC * ${A};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${A}, d),\n              getValue(batch, xR, xC + 2 * ${A}, d),\n              getValue(batch, xR, xC + 3 * ${A}, d)\n            );\n\n            ${v}\n          }\n\n          int xC = xCCorner + ${b};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${v}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${A}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${v}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${A}, d),\n              getValue(batch, xR, xC + 2 * ${A}, d),\n              initializationValue\n            );\n\n            ${v}\n          }\n        }\n        setOutput(${y});\n      }\n    `}}class tM{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,l=e.strideWidth,A=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,h=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.front,m=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y="avg"===t;let b="0.0";if(y||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${i}, ${o}, ${l});\n        const ivec3 pads = ivec3(${f}, ${m}, ${g});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${h};\n              wD += ${A}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${d};\n                wR += ${u}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${p};\n                  wC += ${c}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${d} * ${p} +\n                      wR * ${p} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / max(count, 1.0)");const v=4*Math.floor(s/4),x=s%4,B=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${i}, ${o}, ${l});\n      const ivec3 pads = ivec3(${f}, ${m}, ${g});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${h};\n            wD += ${A}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d};\n            wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${v}; wC += 4) {\n              int xC = xCCorner + wC * ${c};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${c}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${c}, ch)\n              );\n\n              ${B}\n            }\n\n            int xC = xCCorner + ${v};\n            if (${1===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${B}\n            } else if (${2===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${B}\n            } else if (${3===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${c}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${c}, ch),\n                initializationValue\n              );\n\n              ${B}\n            }\n          }\n        }\n        setOutput(${w});\n      }\n    `}}const nM={kernelName:zi,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;PD(a,"avgPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;Vs(dp(i,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const A=rp(a.shape,s,i,1,o,l);if(1===A.filterWidth&&1===A.filterHeight&&js(A.inShape,A.outShape))return VO({inputs:{x:a},backend:n});const u=new eM(A,"avg",!1);return n.runWebGLProgram(u,[a],"float32")}},rM={kernelName:Wi,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dimRoundingMode:l,dataFormat:A}=r,u=ap(a.shape,s,i,[1,1,1],o,l,A),c=new tM(u,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};class aM{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,A=o-1-e.padInfo.top,u=l-1-e.padInfo.left,c=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${A}, ${u});\n      const float avgMultiplier = float(${c});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${o};\n            wR += ${s}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${i}) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class sM{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,A=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=u-1-e.padInfo.front,p=c-1-e.padInfo.top,f=h-1-e.padInfo.left,m=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${d}, ${p}, ${f});\n      const float avgMultiplier = float(${m});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${u};\n            wD += ${o}) {\n          float dyD = float(dyDCorner + wD) / ${a}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${s}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${h};\n                wC += ${A}) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const iM={kernelName:Ki,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s,{filterSize:o,strides:l,pad:A,dimRoundingMode:u}=r,c=ap(i.shape,o,l,[1,1,1],A,u),h=new sM(c);return n.runWebGLProgram(h,[a],i.dtype)}},oM={kernelName:Vi,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s;PD([a,s],"avgPoolGrad");const{filterSize:o,strides:l,pad:A}=r,u=rp(i.shape,o,l,1,A),c=new aM(u);return n.runWebGLProgram(c,[a],i.dtype)}},lM={kernelName:Gi,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a,b:s}=t,{transposeA:i,transposeB:o}=r;return v$({a,b:s,transposeA:i,transposeB:o,backend:n})}};class AM{constructor(e,t,n,r,a,s){this.outputShape=[],this.variableNames=["x","mean","variance"],qh(e,t),qh(e,n);let i="0.0";null!=r&&(qh(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="1.0";null!=a&&(qh(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${i};\n        float scale = ${o};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class uM{constructor(e,t,n,r,a,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],qh(e,t),qh(e,n);let i="vec4(0.0)";null!=r&&(qh(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=a&&(qh(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${i};\n        vec4 scale = ${o};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const cM={kernelName:$o,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:a,variance:s,offset:i,scale:o}=e;Vs(a.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Vs(null==i||a.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Vs(null==o||a.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:l}=n;null==l&&(l=.001);const A=[r,a,s];let u=null;null!=i&&(u=i.shape,A.push(i));let c=null;null!=o&&(c=o.shape,A.push(o));const h=ki().getBool("WEBGL_PACK_NORMALIZATION")?new uM(r.shape,a.shape,s.shape,u,c,l):new AM(r.shape,a.shape,s.shape,u,c,l);return t.runWebGLProgram(h,A,A[0].dtype)}};class hM{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=aQ(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return dM.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;const a=e.map(((e,t)=>`sourceLoc.${dM[t]} = start[${t}] + coords.${dM[t]};`));r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${a.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const dM=["x","y","z","w","u","v"];class pM{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=aQ(this.rank),n=vO("coords",this.rank),r=vO("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${a})`,i=`\n      result.x = ${s};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${s};\n        --${r[this.rank-1]};\n      }\n    `,o=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${s};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${s};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${i}\n        ${o}\n        setOutput(result);\n      }\n    `}}function fM(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,size:i}=r,[o,l]=Pd(a,s,i);if(Sd(a,o,l),0===Gs(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){const e=n.texData.get(a.dataId),t=sO(e.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,t)}const{isPacked:A}=n.texData.get(a.dataId),u=$d(a.shape,o,l);if(A||!u){const e=ki().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pM(l):new hM(l),t=[o];return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){const a=r.texData.get(e.dataId),s=r.makeTensorInfo(n,e.dtype),i=r.texData.get(s.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;let o=Md(t,ci(e.shape));a.slice&&(o+=a.slice.flatOffset),i.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||e.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),s}(a,o,l,n)}const mM={kernelName:eA,backendName:"webgl",kernelFunc:fM},gM={kernelName:ji,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,crops:i}=r;Vs(a.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const o=s.reduce(((e,t)=>e*t)),l=yb(a.shape,s,o),A=bb(l.length,s.length),u=wb(a.shape,s,o),c=vb(i,s.length),h=xb(u,i,s.length),d=[],p=A$({inputs:{x:a},backend:n,attrs:{shape:l}}),f=b$({inputs:{x:p},backend:n,attrs:{perm:A}}),m=A$({inputs:{x:f},backend:n,attrs:{shape:u}}),g=fM({inputs:{x:m},backend:n,attrs:{begin:c,size:h}});return d.push(p),d.push(f),d.push(m),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}},yM={kernelName:qi,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i}=r,o=n.readSync(a.dataId),l=n.readSync(s.dataId),A=NQ(o,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,A)}},bM={kernelName:Xi,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:a}=t,s=ki().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=ki().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,a])||1===i){const e=n.texData.get(r.dataId).values,t=n.texData.get(a.dataId).values,[s,i]=IQ(r.shape,a.shape,e,t,r.dtype),o=n.makeTensorInfo(i,r.dtype);return n.texData.get(o.dataId).values=s,o}let o;return o=s?new zO("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,a.shape,!1):new PO("\n  return float(int(a.r) & int(b.r));\n",r.shape,a.shape),n.runWebGLProgram(o,[r,a],r.dtype)}},wM={kernelName:Ji,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:a}=t,s=n.readSync(r.dataId),i=n.readSync(a.dataId),o=qh(Array.from(s),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},vM=n$({opSnippet:"return float(a != b);",cpuKernelImpl:qQ,dtype:"bool"}),xM={kernelName:xl,backendName:"webgl",kernelFunc:vM};function BM(e){const{inputs:t,backend:n}=e,{input:r}=t;return VO({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const kM={kernelName:Ql,backendName:"webgl",kernelFunc:BM},CM={kernelName:Yi,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:a}=t,{x:s}=n,{dtype:i}=a;if("complex64"===i){if("complex64"===s.dtype)return VO({inputs:{x:s},backend:r});const t=lm(s.shape),n=e({inputs:{x:s},backend:r,attrs:{dtype:"float32"}}),a=KO({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===s.dtype){const t=BM({inputs:{input:s},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(t),n}if(!ai(s.dtype,i)){const e=VO({inputs:{x:s},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:i}}if(r.shouldExecuteOnCPU([s])){const e=r.texData.get(s.dataId).values,[t,n,a]=EQ(e,s.shape,s.dtype,i);return r.makeTensorInfo(t,n,a)}if("int32"===i)return function(e,t){const n=new IO(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(s,r);if("bool"===i){const e=r.makeTensorInfo([],"bool",ni("bool",1)),t=vM({inputs:{a:s,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}},NM="return ceil(x);",SM=t$({opSnippet:NM,packedOpSnippet:NM,cpuKernelImpl:FQ}),IM={kernelName:Zi,backendName:"webgl",kernelFunc:SM};class EM{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class FM{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const TM={kernelName:eo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:s,clipValueMax:i}=r;let o;o=ki().getBool("WEBGL_PACK_CLIP")?new FM(a.shape):new EM(a.shape);const l=[[s],[i]];return n.runWebGLProgram(o,[a],a.dtype,l)}};class LM{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function UM(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const _M={kernelName:no,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),s=new LM(r.shape),i=[UM(r,a.complexTensorInfos.real),UM(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}};class RM{constructor(e){this.outputShape=[],this.outputShape=Ab(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}const r=t.length,a=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${a}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class DM{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ab(e,t);const n=this.outputShape,r=n.length,a=aQ(r),s=vO("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const o=new Array(e.length-1);o[0]=e[0][t];for(let n=1;n<o.length;n++)o[n]=o[n-1]+e[n][t];const l=i[t],A=i.slice(-2),u=i.join();let c=`if (${l} < ${o[0]}) {\n        return getChannel(\n            getT0(${u}), vec2(${A.join()}));\n        }`;for(let e=1;e<o.length;e++){const t=o[e-1];c+=`\n        if (${l} < ${o[e]}  && ${l} >= ${o[e-1]}) {\n          return getChannel(\n            getT${e}(${QM(i,l,t)}),\n            vec2(${QM(A,l,t)}));\n        }`}const h=o.length,d=o[o.length-1];c+=`\n        return getChannel(\n          getT${h}(${QM(i,l,d)}),\n          vec2(${QM(A,l,d)}));`,this.userCode=`\n      float getValue(${i.map((e=>"int "+e))}) {\n        ${c}\n      }\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}function QM(e,t,n){const r=e.indexOf(t),a=e.map(((e,t)=>t===r?`${e} - ${n}`:e));return a.join()}function OM(e){const{inputs:t,backend:n}=e,{input:r}=t;return VO({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const $M={kernelName:Ko,backendName:"webgl",kernelFunc:OM};function MM(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>BM({inputs:{input:e},backend:n}))),a=e.map((e=>OM({inputs:{input:e},backend:n}))),s=MM(r,t,n),i=MM(a,t,n),o=KO({inputs:{real:s,imag:i},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),a.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),o}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){const a=e.map((e=>{const r=Gs(e.shape.slice(t));return A$({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),s=a.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),i=Ab(a.map((e=>e.shape)),1),o=1===a[0].shape[0],l=TQ(s,i,r,o),A=Ab(e.map((e=>e.shape)),t),u=n.makeTensorInfo(A,r,l);return a.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const s=e.filter((e=>Gs(e.shape)>0)),i=ki().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(1===s.length){const t=i?new IO(e[0].shape,UO):new _O(e[0].shape,UO);return n.runWebGLProgram(t,e,r)}const o=ki().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>o){const e=[];for(let r=0;r<s.length;r+=o){const a=s.slice(r,r+o);e.push(MM(a,t,n))}const r=MM(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(i){const e=new DM(s.map((e=>e.shape)),t);return n.runWebGLProgram(e,s,r)}const{tensors2D:l,outShape:A}=function(e,t,n){const r=Ab(e.map((e=>e.shape)),t),a=e.map((e=>A$({inputs:{x:e},attrs:{shape:[-1,Gs(e.shape.slice(t))]},backend:n})));return{tensors2D:a,outShape:r}}(s,t,n),u=new RM(l.map((e=>e.shape))),c=n.runWebGLProgram(u,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const h=A$({inputs:{x:c},attrs:{shape:A},backend:n});return n.disposeIntermediateTensorInfo(c),h}function PM(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,s=ei(a,t[0].shape)[0],i=t.map((e=>e.shape));lb(i,s);const o=Ab(t.map((e=>e.shape)),s);if(0===Gs(o))return n.makeTensorInfo(o,t[0].dtype,[]);const l=t.filter((e=>Gs(e.shape)>0));return 1===l.length?VO({inputs:{x:l[0]},backend:n}):MM(l,s,n)}const HM={kernelName:ro,backendName:"webgl",kernelFunc:PM};class zM{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,A=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,h=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4,f="channelsLast"===e.dataFormat,m=f?1:2,g=f?2:3,y=f?3:1;let b="",w="";n&&(b=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${o}, ${l});\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${y}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${m}], coords[${g}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${c}; wR++) {\n          int xR = xRCorner + wR * ${A};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${u};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${d}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${f}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===p}) {\n\n              if (${f}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${d}) *\n                    getW(wR, wC, ${d}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${d}, xR, xC) *\n                    getW(wR, wC, ${d}, d2);\n              }\n\n            } else if (${2===p}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2)\n              );\n\n              if (${f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===p}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2),\n                getW(wR, wC, ${d} + 2, d2)\n              );\n\n              if (${f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1),\n                  getX(batch, xR, xC, ${d} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC),\n                  getX(batch, ${d} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${v}\n        ${w}\n        setOutput(result);\n      }\n    `}}class VM{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,A=e.dilationWidth,u=e.filterDepth,c=e.filterHeight,h=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${a}, ${s}, ${i});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${u}; wF++) {\n          int xF = xFCorner + wF * ${o};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${c}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h}; wC++) {\n              int xC = xCCorner + wC * ${A};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${d}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===p}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${d}) *\n                  getW(wF, wR, wC, ${d}, d2);\n              } else if (${2===p}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${d}),\n                  getX(batch, xF, xR, xC, ${d} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${d}, d2),\n                  getW(wF, wR, wC, ${d} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===p}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${d}),\n                  getX(batch, xF, xR, xC, ${d} + 1),\n                  getX(batch, xF, xR, xC, ${d} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${d}, d2),\n                  getW(wF, wR, wC, ${d} + 1, d2),\n                  getW(wF, wR, wC, ${d} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class WM{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=uQ(this.outputShape.length);const s=e.padInfo.left,i=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,A=e.filterWidth,u=A;let c="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<A;e++)c+=`\n           vec4 xTexelC${2*e};\n           int xTexelC${2*e}Ready;\n           vec4 xTexelC${2*e+1};\n           int xTexelC${2*e+1}Ready;\n           vec4 xC${e};`;c+=`\n     for (int r = 0; r < ${l}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let e=0;e<A;e++)c+=`\n           xTexelC${2*e} = vec4(0.0);\n           xTexelC${2*e}Ready = 0;\n           xTexelC${2*e+1} = vec4(0.0);\n           xTexelC${2*e+1}Ready = 0;\n           xC${e} = vec4(0.0);`;c+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let t=0;t<(u+1)/2;t++){const n=2*t;if(c+=`\n           xC = xCCorner + ${n*o};\n           `,1===i){if(n<A&&(s%2==1?(c+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n               `,c+=1===o&&n>0?`\n                 xC${n} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${n} = vec4(previous.zw, xTexelC${n}.xy);\n                   } else {\n                     xC${n} = vec4(0.0, 0.0, xTexelC${n}.xy);\n                   }\n                   `):c+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 xC${n} = xTexelC${n};\n                 `,n+1<A)){const e=s%2==0?Hs(o):o;o%2==0&&s%2==1||o%2!=0&&s%2!=1?(c+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                     xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${n+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${n+1}Ready = 1;\n                   }\n                   `,c+=o>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${n+1} = vec4(previous.zw, xTexelC${n+1}.xy);\n                     } else {\n                      xC${n+1} = vec4(0.0, 0.0, xTexelC${n+1}.xy);\n                     }\n                     `:`\n                     xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.xy);\n                     `):c+=1===e?`\n                     xC${n+1} = xTexelC${n};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                       xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${n+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${n+1}Ready = 1;\n                     }\n\n                     xC${n+1} = xTexelC${n+1};\n                     `}}else n<A&&(s%2==1?(c+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${n+1}Ready == 0) {\n                   xTexelC${n+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${n+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${n+1}Ready = 1;\n                 }\n\n                 xC${n} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);\n               `,n+1<A&&(c+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${n+1} = vec4(xTexelC${n+1}.xy, final.xy);\n                 `)):(c+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                   xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n+1}.zw = vec2(0.);\n                   }\n                   xTexelC${n+1}Ready = 1;\n                 }\n\n                 xC${n} = vec4(\n                   xTexelC${n}.xy, xTexelC${n+1}.xy);\n               `,n+1<A&&(c+=`\n                   xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);\n                 `)));n<A&&(c+=`\n             wTexel = getW(r, ${n}, d1, d2);\n             dotProd += xC${n}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${n}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,n+1<A&&(c+=`\n               wTexel = getW(r, ${n+1}, d1, d2);\n               dotProd += xC${n+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${n+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}c+="\n     }\n   ",c+="\n     }\n   ",c+="\n     }\n   ";let h="",d="";n&&(h=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:a?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,d="result = activation(result);");const p=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${h}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${c}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${p}\n         ${d}\n         setOutput(result);\n       }\n     `}}class KM{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=uQ(this.outputShape.length);const{dataFormat:n}=t,r=zD(),a="channelsLast"===n,s=a?1:2,i=a?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)l+=`\n          blockIndex = rc.z + ${t};\n          pos = rc.y + ${e};\n\n          ${o}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${s}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${i}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${a}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}function GM(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function jM({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){const l=e.shape,A=r.texData.get(e.dataId),u=n.inChannels,c=l[0]*l[1]*l[2],h=n.outChannels,d="channelsLast"===n.dataFormat,p=!1;let f;const m=[];if(null!=s){const e=GM(s.shape,d);null!=e&&(s=A$({inputs:{x:s},backend:r,attrs:{shape:e}}),m.push(s))}if(null!=a){const e=GM(a.shape,d);null!=e&&(a=A$({inputs:{x:a},backend:r,attrs:{shape:e}}),m.push(a))}if((1!==c&&1!==h||!(u>1e3))&&A.isPacked&&d&&null!=A.texture&&l[2]%2!=0&&js(A.shape.slice(-3),l.slice(-3))){const u=l[0]*l[1]*(l[2]+1),c={dataId:e.dataId,shape:[1,u,n.inChannels],dtype:e.dtype},h=A.shape;A.shape=A.shape.slice(),A.shape[A.shape.length-2]++,Vs(RD(A.shape,c.shape),(()=>`packed reshape ${A.shape} to ${c.shape} isn't free`));const d=A$({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(d);const g=v$({a:c,b:d,backend:r,transposeA:!1,transposeB:p,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i}),y=r.texData.get(g.dataId);Vs(y.isPacked,(()=>"batchMatMul result is expected to be packed")),A.shape=h,y.shape=n.outShape,f=VO({inputs:{x:g},backend:r}),f.shape=n.outShape,m.push(g)}else{const l=n.outHeight*n.outWidth,A=A$({inputs:{x:e},backend:r,attrs:{shape:d?[n.batchSize,l,n.inChannels]:[n.batchSize,n.inChannels,l]}}),u=A$({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),c=v$({a:d?A:u,b:d?u:A,transposeA:!d,transposeB:p,backend:r,bias:a,activation:o,preluActivationWeights:s,leakyreluAlpha:i});f=A$({inputs:{x:c},backend:r,attrs:{shape:n.outShape}}),m.push(A),m.push(u),m.push(c)}for(const e of m)r.disposeIntermediateTensorInfo(e);return f}function qM({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:l,filterHeight:A,inChannels:u,outWidth:c,outHeight:h,dataFormat:d}=n,p="channelsLast"===d,f=l*A*u,m=h*c,g=[n.batchSize,f,m],y=[];if(null!=s){const e=GM(s.shape,p);null!=e&&(s=A$({inputs:{x:s},backend:r,attrs:{shape:e}}),y.push(s))}if(null!=a){const e=GM(a.shape,p);null!=e&&(a=A$({inputs:{x:a},backend:r,attrs:{shape:e}}),y.push(a))}const b=A$({inputs:{x:t},backend:r,attrs:{shape:[1,f,Gs(t.shape)/f]}});y.push(b);const w=new KM(g,n),v=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],x=r.runWebGLProgram(w,[e],"float32",v),B=A$({inputs:{x},backend:r,attrs:{shape:g}});y.push(x),y.push(B);const k=null!=a,C=null!=s,N="leakyrelu"===o,S=o?r$(o,!0):null,I=new a$(p?B.shape:b.shape,p?b.shape:B.shape,p?[n.batchSize,m,n.outChannels]:[n.batchSize,n.outChannels,m],!0,!1,k,S,C,N),E=p?[B,b]:[b,B];if(a&&E.push(a),C&&E.push(s),N){const e=r.makeTensorInfo([],"float32",cu(i,"float32"));E.push(e),y.push(e)}const F=r.runWebGLProgram(I,E,"float32"),T=A$({inputs:{x:F},backend:r,attrs:{shape:n.outShape}});y.push(F);for(const e of y)r.disposeIntermediateTensorInfo(e);return T}const XM={kernelName:ao,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dataFormat:l,dilations:A,dimRoundingMode:u}=r,c=fp(l),h=sp(a.shape,s.shape,i,A,o,u,!1,c);let d;if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===c&&ki().getBool("WEBGL_EXP_CONV")){const e=new WM(h),t=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];d=n.runWebGLProgram(e,[a,s],"float32",t)}else if(ki().getBool("WEBGL_CONV_IM2COL"))d=qM({x:a,filter:s,convInfo:h,backend:n});else{const e=new zM(h);d=n.runWebGLProgram(e,[a,s],"float32")}else d=jM({x:a,filter:s,convInfo:h,backend:n});const p=A$({inputs:{x:d},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(d),p}};class JM{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${a};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${s?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class YM{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=s?1:2,A=s?2:3,u=s?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${u}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${A}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${s}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ZM{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,s=e.padInfo.top,i=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${a};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${s};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${i};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class eP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,A=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${o}, ${l}, ${A});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${a}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${s}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${i}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const tP={kernelName:so,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,dataFormat:l,dimRoundingMode:A,filterShape:u}=r,c=fp(l),h=sp(a.shape,u,i,1,o,A,!1,c),d=new JM(h);return n.runWebGLProgram(d,[a,s],"float32")}};class nP{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=uQ(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            int wCPerm = ${n} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const rP={kernelName:io,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{inputShape:i,strides:o,pad:l,dataFormat:A,dimRoundingMode:u}=r,c=fp(A),h=sp(i,s.shape,o,1,l,u,!1,c);if(ki().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===c){const e=[[h.strideHeight,h.strideWidth]],t=new nP(h);return n.runWebGLProgram(t,[a,s],"float32",e)}{const e=new YM(h);return n.runWebGLProgram(e,[a,s],"float32")}}},aP={kernelName:oo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r,A=ip(a.shape,s.shape,i,l,o),u=new VM(A);return n.runWebGLProgram(u,[a,s],"float32")}},sP={kernelName:lo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,pad:o,filterShape:l}=r,A=ip(a.shape,l,i,1,o),u=new ZM(A);return n.runWebGLProgram(u,[a,s],"float32")}},iP={kernelName:Ao,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{pad:i,strides:o,inputShape:l}=r,A=ip(l,s.shape,o,1,i),u=new eP(A);return n.runWebGLProgram(u,[a,s],"float32")}},oP=t$({opSnippet:e$+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${HO}\n  return result;\n`}),lP={kernelName:uo,backendName:"webgl",kernelFunc:oP},AP=t$({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),uP={kernelName:co,backendName:"webgl",kernelFunc:AP};class cP{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,i,o,l]=e,[A]=t,[u,c]=n;this.outputShape=[A,u,c,l];const h="bilinear"===r?1:0,[d,p]=[i-1+".0",o-1+".0"],[f,m,g]=u>1?[""+(i-1)/(u-1),"(y2-y1) * height_ratio",`y1*${d} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${d}`],[y,b,w]=c>1?[""+(o-1)/(c-1),"(x2-x1) * width_ratio",`x1*${p} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${p}`];this.userCode=`\n      const float height_ratio = float(${f});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${s}) {\n          return;\n        }\n\n        float height_scale = ${m};\n        float width_scale = ${b};\n\n        float in_y = ${g};\n        if( in_y < 0.0 || in_y > ${d} ) {\n          setOutput(float(${a}));\n          return;\n        }\n        float in_x = ${w};\n        if( in_x < 0.0 || in_x > ${p} ) {\n          setOutput(float(${a}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${h} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const hP={kernelName:fo,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:s,boxInd:i}=t,{cropSize:o,method:l,extrapolationValue:A}=r,u=new cP(a.shape,s.shape,o,l,A);return n.runWebGLProgram(u,[a,s,i],"float32")}};var dP;!function(e){e.Prod="*",e.Sum="+"}(dP||(dP={}));class pP{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,s=this.op===dP.Prod?"1.0":"0.0",i=n?s:`getX(${fP(a,"coords",this.op)})`,o=this.outputShape[this.outputShape.length-1];let l="",A="";n?(l=r?"end != "+(o-1):"end != 0",A=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${o}`:"end >= pow2",A=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${aQ(a)} coords = getOutputCoords();\n        int end = ${mP(a,"coords",this.op)};\n        float val = ${i};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${A};\n          ${mP(a,"coords",this.op)} = idx;\n          val ${this.op}= getX(${fP(a,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function fP(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function mP(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function gP(e,t,n,r,a,s){const i=t.shape.length,o=gf([r],i);let l=t;null!=o&&(l=b$({inputs:{x:t},backend:n,attrs:{perm:o}}));const A=bf(1,i)[0];if(A!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const u=l.shape[A];let c=VO({inputs:{x:l},backend:n});for(let t=0;t<=Math.ceil(Math.log2(u))-1;t++){const r=new pP(e,l.shape,!1,s),a=[[t]],i=c;c=n.runWebGLProgram(r,[c],c.dtype,a),n.disposeIntermediateTensorInfo(i)}if(a){const t=new pP(e,l.shape,a,s),r=c;c=n.runWebGLProgram(t,[c],c.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=o){const e=b$({inputs:{x:c},backend:n,attrs:{perm:yf(o)}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),e}return c}const yP={kernelName:ho,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;return gP(dP.Prod,a,n,s,i,o)}},bP={kernelName:po,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,exclusive:i,reverse:o}=r;return gP(dP.Sum,a,n,s,i,o)}},wP={kernelName:mo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,weights:s}=t,{size:i,binaryOutput:o}=r;if(1===a.shape.length){const e=n.readSync(a.dataId),t=n.readSync(s.dataId),r=NQ(e,t,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,r)}if(2===a.shape.length){const e=n.bufferSync(a),t=n.bufferSync(s),r=SQ(e,t,i,o);return n.makeTensorInfo(r.shape,s.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}};class vP{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const xP={kernelName:go,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:s,dataFormat:i}=r,o=a.shape[0],l=("NHWC"===i?a.shape[1]:a.shape[2])*s,A=("NHWC"===i?a.shape[2]:a.shape[3])*s,u=("NHWC"===i?a.shape[3]:a.shape[1])/(s*s),c=new vP("NHWC"===i?[o,l,A,u]:[o,u,l,A],s,i);return n.runWebGLProgram(c,[a],a.dtype)}};class BP{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=uQ(this.outputShape.length);const s=e.filterHeight,i=e.filterWidth,o=e.outChannels/e.inChannels;let l="",A="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,A="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${s}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${i}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${u}\n        ${A}\n        setOutput(result);\n      }\n    `}}class kP{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=uQ(this.outputShape.length);const s=e.outChannels/e.inChannels,i=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,A=e.filterHeight,u=e.filterWidth,c=u;let h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<u;e++)h+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;h+=`\n    for (int r = 0; r < ${A}; r++) {\n      `;for(let e=0;e<u;e++)h+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(c+1)/2;e++){const t=2*e;if(h+=`\n          xC = xCCorner + ${t*l};\n          `,1===o){if(t<u&&(i%2==1?(h+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,h+=1===l&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):h+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<u)){const e=i%2==0?Hs(l):l;l%2==0&&i%2==1||l%2!=0&&i%2!=1?(h+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,h+=l>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                    } else {\n                     xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                    }\n                    `:`\n                    xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                    `):h+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<u&&(i%2==1?(h+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<u&&(h+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(h+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<u&&(h+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<u&&(h+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<u&&(h+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}h+="\n    }\n  ",h+="\n      }\n    ";let d="",p="";n&&(d=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:a?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${d}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${h}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${f}\n        ${p}\n        setOutput(result);\n      }\n    `}}const CP={kernelName:yo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l,dimRoundingMode:A}=r;let u=l;null==u&&(u=[1,1]),Vs(dp(i,u),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`));const c=sp(a.shape,s.shape,i,u,o,A,!0);let h;h=ki().getBool("WEBGL_PACK_DEPTHWISECONV")&&c.strideWidth<=2&&c.outChannels/c.inChannels===1?new kP(c):new BP(c);const d=[[c.padInfo.top,c.padInfo.left],[c.strideHeight,c.strideWidth],[c.dilationHeight,c.dilationWidth],[c.inHeight,c.inWidth]];return n.runWebGLProgram(h,[a,s],"float32",d)}};class NP{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${s} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${a};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class SP{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${a}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${o}; dm++) {\n              int d2 = d1 * ${o} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const IP={kernelName:bo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,dy:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:A,filterShape:u}=r,c=sp(a.shape,u,i,o,l,A,!0),h=new NP(c);return n.runWebGLProgram(h,[a,s],"float32")}},EP={kernelName:wo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:s}=t,{strides:i,dilations:o,pad:l,dimRoundingMode:A,inputShape:u}=r,c=sp(u,s.shape,i,o,l,A,!0),h=new SP(c);return n.runWebGLProgram(h,[a,s],"float32")}};class FP{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const TP={kernelName:vo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],s=Gs(r.shape),i=A$({inputs:{x:r},backend:n,attrs:{shape:[s]}}),o=new FP(s),l=n.runWebGLProgram(o,[i],i.dtype),A=A$({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),A}};class LP{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:s,filterHeight:i,filterWidth:o,dilationHeight:l,dilationWidth:A}=e,{top:u,left:c}=r;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${i}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${o}; w++) {\n              int wIn = wBeg + w * ${A};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const UP={kernelName:xo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s}=t,{strides:i,pad:o,dilations:l}=r,A=np(a.shape,s.shape,i,o,"NHWC",l);let u;const c=new LP(A);u=n.runWebGLProgram(c,[a,s],"float32");const h=A$({inputs:{x:u},backend:n,attrs:{shape:A.outShape}});return n.disposeIntermediateTensorInfo(u),h}},_P={kernelName:No,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,s=t,{allDims:i,summedDims:o,idDims:l}=Vb(a,s.length);Kb(i.length,l,s);const{path:A,steps:u}=Gb(o,l),c=u.length;let h=null,d=i.length;const p=[];for(let e=0;e<c;++e){for(const t of u[e]){const{permutationIndices:e,expandDims:r}=Wb(d,l[t]);let a;jb(e)?a=s[t]:(a=b$({inputs:{x:s[t]},backend:n,attrs:{perm:e}}),p.push(a));const i=a.shape.slice();for(let e=0;e<r.length;++e)i.splice(r[e],0,1);js(a.shape,i)||(a=A$({inputs:{x:a},backend:n,attrs:{shape:i}}),p.push(a)),null===h?h=a:(h=o$({inputs:{a,b:h},backend:n}),p.push(h))}e<c-1&&(A[e]>=0&&(h=g$({inputs:{x:h},backend:n,attrs:{axis:A[e]-(i.length-d),keepDims:!1}}),p.push(h)),d--)}for(const e of p)e!==h&&n.disposeIntermediateTensorInfo(e);return h}},RP=t$({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),DP={kernelName:So,backendName:"webgl",kernelFunc:RP},QP={kernelName:Io,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:a}=t,s=ki().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zO("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new PO("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(s,[r,a],r.dtype)}},OP=n$({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:LQ}),$P={kernelName:Fo,backendName:"webgl",kernelFunc:OP},MP=t$({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Nb};\n  float a1 = ${Sb};\n  float a2 = ${Ib};\n  float a3 = ${Eb};\n  float a4 = ${Fb};\n  float a5 = ${Tb};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),PP={kernelName:Eo,backendName:"webgl",kernelFunc:MP},HP=t$({opSnippet:e$+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:UQ,dtype:"float32"}),zP={kernelName:To,backendName:"webgl",kernelFunc:HP};function VP(e){const{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:s}=t,i=s.shape.length,o=s.shape.slice();let l=a;return a<0&&(Vs(-(i+1)<=a,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),l=i+a+1),o.splice(l,0,1),A$({inputs:{x:s},backend:r,attrs:{shape:o}})}const WP={kernelName:Lo,backendName:"webgl",kernelFunc:VP},KP="return exp(x) - 1.0;",GP=t$({opSnippet:KP,packedOpSnippet:KP,cpuKernelImpl:_Q}),jP={kernelName:Uo,backendName:"webgl",kernelFunc:GP};class qP{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const a=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=n?`${r}.0`:"1.0";let i;if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);i="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${a};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${i}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${s};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function XP(e,t,n){const r=n.texData.get(e.dataId),a=Gs(e.shape),s=e.shape[e.shape.length-1],i=A$({inputs:{x:e},backend:n,attrs:{shape:[a/s,s]}}),o=i.shape,l=new qP("real",o,t),A=new qP("imag",o,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o}],c=n.runWebGLProgram(l,u,"float32"),h=n.runWebGLProgram(A,u,"float32"),d=KO({inputs:{real:c,imag:h},backend:n});n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h);const p=A$({inputs:{x:d},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(d),p}const JP={kernelName:_o,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return XP(r,!1,n)}};class YP{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function ZP(e){const{backend:t,attrs:n}=e,{shape:r,value:a}=n;let{dtype:s}=n;if(s=s||li(a),"string"===s){const e=ri(s,Gs(r));return e.fill(a),t.makeTensorInfo(r,s,e)}{const e=new YP(r,a),n=[[a]];return t.runWebGLProgram(e,[],s,n)}}const eH={kernelName:Ro,backendName:"webgl",kernelFunc:ZP};class tH{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const nH={kernelName:Do,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,a=new tH(n.shape);return r.runWebGLProgram(a,[n],n.dtype)}},rH="return floor(x);",aH=t$({opSnippet:rH,packedOpSnippet:rH,cpuKernelImpl:RQ}),sH={kernelName:Qo,backendName:"webgl",kernelFunc:aH},iH=n$({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),oH={kernelName:Oo,backendName:"webgl",kernelFunc:iH};class lH{constructor(e){this.variableNames=["A"];const t=zD(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class AH{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=zD(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const uH={kernelName:RA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:a}=t;const{numChannels:s}=r,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,A]=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=[A,l],c=[A,l,s];if(o||i){const e=ki().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=cH&&e===hH||(hH=e,cH=document.createElement("canvas").getContext("2d",{willReadFrequently:hH})),cH.canvas.width=l,cH.canvas.height=A,cH.drawImage(a,0,0,l,A),a=cH.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=dD.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);const d=ki().getBool("WEBGL_PACK")?new AH(c):new lH(c),p=n.runWebGLProgram(d,[h],"int32");return n.disposeData(h.dataId),p}};let cH,hH=ki().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const dH={kernelName:OA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:A,dataFormat:u,dilations:c,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=fp(u),m=sp(a.shape,s.shape,l,c,A,h,!1,f);let g;const y=[],b=null!=i,w=null!=o,v="leakyrelu"===d,x=()=>{const e=[a,s],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=A$({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return y.push(t),t}return e};if(b&&e.push(t(i,u)),w&&e.push(t(o,u)),v){const t=n.makeTensorInfo([],"float32",cu(p,"float32"));e.push(t),y.push(t)}return e};if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===f&&ki().getBool("WEBGL_EXP_CONV")){const e=d?r$(d,!0):null,t=new WM(m,b,e,w,v),r=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],a=x();g=n.runWebGLProgram(t,a,"float32",r)}else if(ki().getBool("WEBGL_CONV_IM2COL"))g=qM({x:a,filter:s,convInfo:m,backend:n,bias:i,activation:d,preluActivationWeights:o,leakyreluAlpha:p});else{const e=d?r$(d,!1):null,t=new zM(m,b,e,w,v),r=x();g=n.runWebGLProgram(t,r,"float32")}else g=jM({x:a,filter:s,convInfo:m,backend:n,bias:i,activation:d,preluActivationWeights:o,leakyreluAlpha:p});const B=A$({inputs:{x:g},backend:n,attrs:{shape:m.outShape}});return y.push(g),y.forEach((e=>n.disposeIntermediateTensorInfo(e))),B}},pH={kernelName:$A,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,filter:s,bias:i,preluActivationWeights:o}=t,{strides:l,pad:A,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:d}=r,p=[];let f=u;null==f&&(f=[1,1]),Vs(dp(l,f),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${f}'`));const m=sp(a.shape,s.shape,l,f,A,c,!0),g=ki().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,y=h?r$(h,g):null,b=[a,s],w=null!=i,v=null!=o,x="leakyrelu"===h;if(w&&b.push(i),v&&b.push(o),x){const e=n.makeTensorInfo([],"float32",cu(d,"float32"));b.push(e),p.push(e)}let B;B=g?new kP(m,w,y,v,x):new BP(m,w,y,v,x);const k=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],C=n.runWebGLProgram(B,b,"float32",k);return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),C}};class fH{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const a=aQ(n.length);let s="\n    int index;";for(let e=0;e<this.sliceDim;e++)s+=`\n          index = round(getIndices(coords[0], ${e}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[e]};\n          flattenIndex += index * ${this.strides[e]};`;this.userCode=`\n         void main() {\n          ${a} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${s}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const mH={kernelName:Po,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:a}=t,s=a.shape,i=s[s.length-1],o=Gs(r.shape),[l,A,u,c]=Bb(r,a),h=A$({inputs:{x:a},backend:n,attrs:{shape:[A,i]}}),d=A$({inputs:{x:r},backend:n,attrs:{shape:[Gs(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){const e=n.readSync(a.dataId),t=n.bufferSync(r),s=DQ(e,t,r.dtype,A,i,u,c,r.shape,o);return n.makeTensorInfo(l,r.dtype,s.values)}const p=new fH(i,c,[A,u],r.shape),f=n.runWebGLProgram(p,[d,h],d.dtype),m=A$({inputs:{x:f},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),m}};class gH{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=aQ(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push(`${t[r]}`);return n.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function yH(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,indices:s}=t,{axis:i,batchDims:o}=r,l=ei(i,a.shape)[0];if(ki().get("DEBUG")){const e=n.readSync(s.dataId),t=a.shape[l];for(let n=0;n<e.length;++n){const r=e[n];Vs(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const A=cw(a,s,l,o),u=Gs(s.shape),c=[],h=A$({inputs:{x:a},backend:n,attrs:{shape:[A.batchSize,A.outerSize,A.dimSize,A.sliceSize]}}),d=A$({inputs:{x:s},backend:n,attrs:{shape:[A.batchSize,u/A.batchSize]}});c.push(h),c.push(d);const p=[A.batchSize,A.outerSize,u/A.batchSize,A.sliceSize];if(n.shouldExecuteOnCPU([a,s])||"string"===a.dtype){const e=n.bufferSync(d),t=n.bufferSync(h),r=QQ(t,e,p);return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(A.outputShape,r.dtype,r.values)}const f=new gH(h.shape,p),m=n.runWebGLProgram(f,[h,d],h.dtype);c.push(m);const g=A$({inputs:{x:m},backend:n,attrs:{shape:A.outputShape}});return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}const bH={kernelName:Mo,backendName:"webgl",kernelFunc:yH},wH=n$({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:OQ,dtype:"bool"}),vH={kernelName:Ho,backendName:"webgl",kernelFunc:wH},xH=n$({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:$Q}),BH={kernelName:zo,backendName:"webgl",kernelFunc:xH},kH={kernelName:Wo,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return XP(r,!0,n)}},CH=t$({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),NH={kernelName:Go,backendName:"webgl",kernelFunc:CH},SH=t$({opSnippet:"return float(isinf(x));",dtype:"bool"}),IH={kernelName:jo,backendName:"webgl",kernelFunc:SH},EH=t$({opSnippet:"return float(isnan(x));",dtype:"bool"}),FH={kernelName:qo,backendName:"webgl",kernelFunc:EH},TH=n$({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:MQ,dtype:"bool"}),LH={kernelName:Jo,backendName:"webgl",kernelFunc:TH},UH=n$({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:PQ,dtype:"bool"}),_H={kernelName:Yo,backendName:"webgl",kernelFunc:UH},RH={kernelName:Zo,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:a,num:s}=n,i=HQ(r,a,s);return t.makeTensorInfo([i.length],"float32",i)}},DH=t$({opSnippet:e$+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:zQ}),QH={kernelName:el,backendName:"webgl",kernelFunc:DH},OH=t$({opSnippet:e$+"\n  return log(1.0 + x);\n"}),$H={kernelName:tl,backendName:"webgl",kernelFunc:OH},MH=n$({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),PH={kernelName:nl,backendName:"webgl",kernelFunc:MH},HH=t$({opSnippet:"return float(!(x >= 1.0));"}),zH={kernelName:rl,backendName:"webgl",kernelFunc:HH},VH=n$({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),WH={kernelName:al,backendName:"webgl",kernelFunc:VH};class KH{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];const s=t,i=e[3]-1;let o;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;o=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${s}; j <= ${s}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${o};\n        setOutput(val);\n      }\n    `}}class GH{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=t,i=e[3]-1;let o;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;o=.5===a?`inversesqrt(${l})`:1===a?`1.0/(${l})`:`exp(log(${l}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${s};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${s}; j <= ${s}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${o};\n        setOutput(result);\n      }\n    `}}const jH={kernelName:sl,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:s,bias:i,alpha:o,beta:l}=r,A=ki().getBool("WEBGL_PACK_NORMALIZATION")?new GH(a.shape,s,i,o,l):new KH(a.shape,s,i,o,l);return n.runWebGLProgram(A,[a],a.dtype)}};class qH{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${a})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${a});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const XH={kernelName:il,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a,y:s,dy:i}=t,{depthRadius:o,bias:l,alpha:A,beta:u}=r,c=new qH(a.shape,o,l,A,u);return n.runWebGLProgram(c,[a,s,i],a.dtype)}};function JH(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:s,keepDims:i}=r,o=a.shape.length,l=ei(s,a.shape);let A=l;const u=gf(A,o),c=null!=u,h=n.shouldExecuteOnCPU([a]);let d=a;if(c){if(h){const e=n.texData.get(d.dataId).values,t=new Array(o);for(let e=0;e<t.length;e++)t[e]=a.shape[u[e]];const r=yO(e,a.shape,a.dtype,u,t);d=n.makeTensorInfo(t,a.dtype),n.texData.get(d.dataId).values=r}else d=m$(a,u,n);A=bf(A.length,o)}mf("max",A,o);const[p,f]=pf(d.shape,A);let m,g=p;if(i&&(g=ff(p,l)),h){const e=n.texData.get(d.dataId).values,t=VQ(e,Gs(f),g,a.dtype);m=n.makeTensorInfo(g,a.dtype),n.texData.get(m.dataId).values=t}else m=function(e,t,n,r){const a=Gs(t),s=A$({inputs:{x:e},attrs:{shape:[Gs(e.shape)/a,a]},backend:r}),i=d$(s,e.dtype,"max",r),o=A$({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}(d,f,g,n);return c&&n.disposeIntermediateTensorInfo(d),m}const YH={kernelName:ol,backendName:"webgl",kernelFunc:JH},ZH=n$({opSnippet:MO+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+HO+"\n  return result;\n",cpuKernelImpl:WQ}),ez={kernelName:ll,backendName:"webgl",kernelFunc:ZH},tz={kernelName:Al,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;PD(a,"maxPool");const{filterSize:s,strides:i,pad:o,dimRoundingMode:l}=r;Vs(dp(i,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '1'`));const A=rp(a.shape,s,i,1,o,l);if(1===A.filterWidth&&1===A.filterHeight&&js(A.inShape,A.outShape))return VO({inputs:{x:a},backend:n});const u=new eM(A,"max",!1);return n.runWebGLProgram(u,[a],a.dtype)}},nz={kernelName:cl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:s,strides:i,pad:o,dataFormat:l,dimRoundingMode:A}=r,u=ap(a.shape,s,i,[1,1,1],o,A,l),c=new tM(u,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};class rz{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,s=e.effectiveFilterWidth,i=a-1-e.padInfo.top,o=s-1-e.padInfo.left,l=a*s-1;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${s}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${s} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class az{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,s=e.dilationHeight,i=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,A=e.effectiveFilterWidth,u=o-1-e.padInfo.front,c=l-1-e.padInfo.top,h=A-1-e.padInfo.left,d=o*l*A-1;this.userCode=`\n      const ivec3 pads = ivec3(${u}, ${c}, ${h});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${o};\n           wD += ${a}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${s}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${A};\n                wC += ${i}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${d} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${A} +\n                  wR * ${A} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const sz={kernelName:hl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s}=t,i=s,{filterSize:o,strides:l,pad:A,dimRoundingMode:u}=r,c=ap(i.shape,o,l,[1,1,1],A,u),h=new tM(c,"max",!0),d=n.runWebGLProgram(h,[i],i.dtype),p=new az(c),f=n.runWebGLProgram(p,[a,d],i.dtype);return n.disposeIntermediateTensorInfo(d),f}},iz={kernelName:ul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:a,input:s,output:i}=t,o=s;PD([s,i],"maxPoolGrad");const{filterSize:l,strides:A,pad:u,dimRoundingMode:c}=r,h=rp(o.shape,l,A,1,u,c),d=new eM(h,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),f=new rz(h),m=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}},oz={kernelName:dl,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:a,strides:s,pad:i,includeBatchInIndex:o}=t,l=n;Vs(4===r.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`));const A=[1,1];Vs(dp(s,A),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${A}'`));const u=rp(r.shape,a,s,A,i),[c,h]=function(e,t,n,r){let a=new eM(n,"max",!1);const s=r.runWebGLProgram(a,[e],"float32");return a=new eM(n,"max",!0,!0,t),[s,r.runWebGLProgram(a,[e],"float32")]}(r,o,u,l);return[c,h]}},lz={kernelName:pl,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:a,axis:s}=t,i=n,o=r.shape.length,l=ei(s,r.shape);let A=l;const u=gf(A,o),c=null!=u,h=i.shouldExecuteOnCPU([r]),d=[];let p=r;if(c){if(h){const e=i.texData.get(p.dataId).values,t=new Array(o);for(let e=0;e<t.length;e++)t[e]=r.shape[u[e]];const n=yO(e,r.shape,r.dtype,u,t);p=i.makeTensorInfo(t,r.dtype),i.texData.get(p.dataId).values=n}else p=m$(r,u,i);d.push(p),A=bf(A.length,o)}mf("sum",A,o);const[f,m]=pf(p.shape,A);let g=f;a&&(g=ff(f,l));const y=function(e,t,n,r){const a=Gs(t),s=A$({inputs:{x:e},attrs:{shape:[Gs(e.shape)/a,a]},backend:r}),i=d$(s,"float32","mean",r),o=A$({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}(p,m,g,i);for(const e of d)i.disposeIntermediateTensorInfo(e);return y}},Az={kernelName:fl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=ei(s,a.shape);let A=l;const u=gf(A,o);let c=a;null!=u&&(c=b$({inputs:{x:a},backend:n,attrs:{perm:u}}),A=bf(A.length,a.shape.length)),mf("min",A,o);const[h,d]=pf(c.shape,A),p=A$({inputs:{x:c},backend:n,attrs:{shape:[-1,Gs(d)]}}),f=d$(p,p.dtype,"min",n);let m;return m=A$(i?{inputs:{x:f},backend:n,attrs:{shape:ff(h,l)}}:{inputs:{x:f},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),null!=u&&n.disposeIntermediateTensorInfo(c),m}},uz=n$({opSnippet:MO+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+HO+"\n  return result;\n",cpuKernelImpl:KQ}),cz={kernelName:ml,backendName:"webgl",kernelFunc:uz};class hz{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=aQ(r),s=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${a} coords = outC - start;\n        setOutput(getX(${o}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class dz{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=aQ(r),s=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=vO("rc",r),l=vO("source",r),A=`${o[r-1]} < ${this.outputShape[r-1]}`,u=1===r?"source":`vec2(${l.slice(-2).join()})`,c="reflect"===n?0:1;let h="";if(1===r){const e=`\n        ${a} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${c};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${c};\n        }\n        source -= start;\n      `;h=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${u});\n        ${o[r-1]} += 1;\n        if(${A}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${u});\n        }\n      `}else{const e=`\n        ${a} source = rc;\n        ${a} lt = ${a}(lessThan(source, start));\n        ${a} gte = ${a}(greaterThanEqual(source, end));\n        ${a} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${c}) +\n                gte * ((end - 1) * 2 - source + ${c});\n        source -= start;\n      `;h=`\n        ${a} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${u});\n        ${o[r-1]} += 1;\n        if(${A}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${u});\n        }\n        rc = outputLoc;\n        ${o[r-2]} += 1;\n        if(${o[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${u});\n          ${o[r-1]} += 1;\n          if(${A}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${u});\n          }\n        }\n      `}this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}const pz={kernelName:gl,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:a,mode:s}=n,i=ki().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dz(r.shape,a,s):new hz(r.shape,a,s);return t.runWebGLProgram(i,[r],r.dtype)}},fz=n$({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+HO+"\n  return result;\n"}),mz={kernelName:yl,backendName:"webgl",kernelFunc:fz};class gz{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const yz=n$({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),bz={kernelName:Co,backendName:"webgl",kernelFunc:yz},wz="return a - b;",vz=n$({opSnippet:wz,packedOpSnippet:wz,supportsComplex:!0,cpuKernelImpl:fO}),xz={kernelName:BA,backendName:"webgl",kernelFunc:vz};function Bz(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:s}=r,i=ei([s],a.shape),o=JH({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=ff(o.shape,i),A=A$({inputs:{x:o},backend:n,attrs:{shape:l}}),u=vz({inputs:{a,b:A},backend:n}),c=HP({inputs:{x:u},backend:n}),h=g$({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),d=A$({inputs:{x:h},backend:n,attrs:{shape:l}}),p=yz({inputs:{a:c,b:d},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),p}const kz={kernelName:uA,backendName:"webgl",kernelFunc:Bz},Cz={kernelName:bl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:s,seed:i,normalized:o}=r,l=o?a:Bz({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),A=l.shape[0],u=l.shape[1],c=new gz(A,u,s),h=[[i]],d=n.runWebGLProgram(c,[l],"int32",h);return o||n.disposeIntermediateTensorInfo(l),d}},Nz=EO+"\n  return -x;\n",Sz={kernelName:vl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,a]=jQ(e.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,t)}let a;return a=ki().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new _O(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new IO(r.shape,Nz),n.runWebGLProgram(a,[r],r.dtype)}},Iz=wy,Ez={kernelName:Bl,backendName:"webgl",kernelFunc:function(e){MA("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,A=n.readSync(a.dataId),u=n.readSync(s.dataId),{selectedIndices:c}=Iz(A,u,i,o,l);return n.makeTensorInfo([c.length],"int32",new Int32Array(c))}},Fz=vy,Tz={kernelName:kl,backendName:"webgl",kernelFunc:function(e){MA("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:A}=r,u=n.readSync(a.dataId),c=n.readSync(s.dataId),{selectedIndices:h,validOutputs:d}=Fz(u,c,i,o,l,A);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},Lz=xy,Uz={kernelName:Cl,backendName:"webgl",kernelFunc:function(e){MA("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:s}=t,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:A}=r,u=n.readSync(a.dataId),c=n.readSync(s.dataId),h=i,d=o,p=l,f=A,{selectedIndices:m,selectedScores:g}=Lz(u,c,h,d,p,f);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}};class _z{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const Rz={kernelName:Sl,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:s,depth:i,onValue:o,offValue:l}=r,A=Gs(a.shape),u=new _z(A,i,o,l),c=A$({inputs:{x:a},backend:n,attrs:{shape:[A]}}),h=n.runWebGLProgram(u,[c],s);n.disposeIntermediateTensorInfo(c);const d=A$({inputs:{x:h},backend:n,attrs:{shape:[...a.shape,i]}});return n.disposeIntermediateTensorInfo(h),d}};function Dz(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=BM({inputs:{input:r},backend:n}),t=Dz({inputs:{x:e},backend:n}),a=OM({inputs:{input:r},backend:n}),s=Dz({inputs:{x:a},backend:n}),i=KO({inputs:{real:t,imag:s},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),i}return ZP({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const Qz={kernelName:UA,backendName:"webgl",kernelFunc:Dz},Oz={kernelName:Nl,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){const t=BM({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),s=OM({inputs:{input:a},backend:r}),i=Dz({inputs:{x:s},backend:r}),o=KO({inputs:{real:n,imag:i},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(i),o}return ZP({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},$z={kernelName:Il,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return VP({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const s=t[0].shape,i=t[0].dtype;t.forEach((e=>{Ws(s,e.shape,"All tensors passed to stack must have matching shapes"),Vs(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const o=[],l=t.map((e=>{const t=VP({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t})),A=PM({inputs:l,backend:n,attrs:{axis:a}});return o.forEach((e=>n.disposeIntermediateTensorInfo(e))),A}};class Mz{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=aQ(r),s=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${a} start = ${a}(${s});\n      ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${a} coords = outC - start;\n          setOutput(getX(${o}));\n        }\n      }\n    `:`\n        int start = ${s};\n        int end = ${i};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class Pz{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,a=aQ(r),s=t.map((e=>e[0])).join(","),i=t.map(((t,n)=>t[0]+e[n])).join(","),o=vO("rc",r),l=vO("source",r),A=`${o[r-1]} < ${this.outputShape[r-1]}`,u=1===r?"source":`vec2(${l.slice(-2).join()})`,c=[`${a} rc = outputLoc;`,`${o[r-1]} += 1;\n       if(${A}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${o[r-2]} += 1;\n       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${o[r-1]} += 1;\n         if(${A}) {`],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let d="";for(let e=0,t=1===r?2:4;e<t;e++)d+=`\n        ${c[e]}\n        if (${h}) {\n          result[${e}] = float(value);\n        } else {\n          ${a} source = rc - start;\n          result[${e}] = getChannel(getX(${l.join()}), ${u});\n        }\n      `;d+=1===r?"} ":"}}",this.userCode=`\n      const ${a} start = ${a}(${s});\n      const ${a} end = ${a}(${i});\n\n      void main() {\n        ${a} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const Hz=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:s,constantValue:i}=r;if(0===Gs(a.shape)){const e=s.map(((e,t)=>e[0]+a.shape[t]+e[1]));return ZP({backend:n,attrs:{shape:e,value:i,dtype:a.dtype}})}const o=ki().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Pz(a.shape,s,i):new Mz(a.shape,s,i),l=[[i]];return n.runWebGLProgram(o,[a],a.dtype,l)},zz={kernelName:El,backendName:"webgl",kernelFunc:Hz},Vz=n$({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+HO+"\n  return result;\n"}),Wz={kernelName:Fl,backendName:"webgl",kernelFunc:Vz},Kz={kernelName:Ll,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:s,keepDims:i}=r,o=a.shape.length,l=[],A=ei(s,a.shape);let u=A;const c=gf(u,o);let h,d=a;if(null!=c&&(d=b$({inputs:{x:a},backend:n,attrs:{perm:c}}),u=bf(u.length,o),l.push(d)),mf("prod",u,o),n.shouldExecuteOnCPU([d])){const e=n.texData.get(d.dataId).values,{outVals:t,outShape:r,outDtype:a}=XQ(d.shape,d.dtype,e,u);h=n.makeTensorInfo(r,a,t)}else{const[e,t]=pf(d.shape,u),r=Gs(t),s=A$({inputs:{x:d},backend:n,attrs:{shape:[-1,r]}}),i=d$(s,Mu(a.dtype),"prod",n);h=A$({inputs:{x:i},backend:n,attrs:{shape:e}}),l.push(s),l.push(i)}if(i){l.push(h);const e=ff(h.shape,A);h=A$({inputs:{x:h},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},Gz={kernelName:Ul,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:s,indices:i}=t,{outputRaggedRank:o}=r,l=a.map((e=>n.readSync(e.dataId))),A=a.map((e=>e.shape)),u=n.readSync(s.dataId),c=n.readSync(i.dataId),[h,d,p]=JQ(l,A,u,s.shape,s.dtype,c,i.shape,o),f=h.map((e=>n.makeTensorInfo([e.length],"int32",e))),m=n.makeTensorInfo(p,s.dtype,d);return f.concat([m])}},jz={kernelName:_l,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:s}=t,i=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(s.dataId),[A,u]=YQ(i,r.shape,r.dtype,o,a.shape,l,s.shape);return[n.makeTensorInfo([A.length],"int32",A),n.makeTensorInfo([u.length],r.dtype,u)]}},qz={kernelName:Rl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:a,values:s,defaultValue:i,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,A=n.readSync(a.dataId),u=n.readSync(s.dataId),c=n.readSync(i.dataId),h=o.map((e=>n.readSync(e.dataId))),d=o.map((e=>e.shape)),[p,f]=ZQ(A,a.shape,u,s.shape,s.dtype,c,i.shape,h,d,l);return n.makeTensorInfo(p,s.dtype,f)}},Xz=e=>{const{backend:t,attrs:n}=e,{start:r,stop:a,step:s,dtype:i}=n,o=eO(r,a,s,i);return t.makeTensorInfo([o.length],i,o)},Jz={kernelName:Dl,backendName:"webgl",kernelFunc:Xz},Yz=t$({opSnippet:"return 1.0 / x;"}),Zz={kernelName:Ol,backendName:"webgl",kernelFunc:Yz},eV=t$({opSnippet:EO+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),tV={kernelName:$l,backendName:"webgl",kernelFunc:eV},nV=t$({opSnippet:EO+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),rV={kernelName:Wl,backendName:"webgl",kernelFunc:nV};class aV{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const A=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let c;c=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${A[0]/u[0]},\n          ${A[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${c};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class sV{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const A=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let c;c=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${A[0]/u[0]},\n          ${A[1]/u[1]},\n          ${A[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${c};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const iV={kernelName:zl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r,[l,A]=o,u=ki().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new sV(a.shape,l,A,s,i):new aV(a.shape,l,A,s,i);return n.runWebGLProgram(u,[a],"float32")}};class oV{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,i]=e,o=[n&&s>1?r-1:r,n&&i>1?a-1:a],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],A=o[0]/l[0],u=o[1]/l[1],c=1/A,h=1/u,d=2*Math.ceil(c)+2,p=2*Math.ceil(h)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${A});\n        const float widthScale = float(${u});\n\n        const float invHeightScale = float(${c});\n        const float invWidthScale = float(${h});\n\n        const int winHeight = int(${d});\n        const int winWidth = int(${p});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const lV={kernelName:Vl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r,o=new oV(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}};class AV{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const A=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";let h;h=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${A[0]/u[0]},\n          ${A[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${i}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${c})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class uV{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[s,i,o,l]=e;this.outputShape=[s,t,n,l];const A=[r&&t>1?i-1:i,r&&n>1?o-1:o],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";let h;h=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${A[0]/u[0]},\n          ${A[1]/u[1]},\n          ${A[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${i}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${c})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const cV={kernelName:Pl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:s,halfPixelCenters:i,size:o}=r,[l,A]=o,u=ki().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new uV(a.shape,l,A,s,i):new AV(a.shape,l,A,s,i);return n.runWebGLProgram(u,[a],a.dtype)}};class hV{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,a]=t,[,s,i]=e,o=[n&&s>1?r-1:r,n&&i>1?a-1:a],l=[n&&s>1?s-1:s,n&&i>1?i-1:i],A=o[0]/l[0],u=o[1]/l[1],c=1/A,h=1/u,d=2*Math.ceil(c)+2,p=2*Math.ceil(h)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${A});\n        const float widthScale = float(${u});\n\n        const float invHeightScale = float(${c});\n        const float invWidthScale = float(${h});\n\n        const int winHeight = int(${d});\n        const int winWidth = int(${p});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${o[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${o[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const dV={kernelName:Hl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:a,dy:s}=t,{alignCorners:i}=r,o=new hV(s.shape,a.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}};class pV{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),a=aQ(n);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class fV{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=vO("rc",n),a=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,i=aQ(n);function o(n){const r=e.map(((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(a,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${a}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${i} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return o(e)}(r.slice())};\n          if(${a}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(r.slice())};\n          }\n          if(${s}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())};\n            if(${a}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const mV={kernelName:Kl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:s}=r,i=a.shape.length,o=ei(s,a.shape);if(0===i)return VO({inputs:{x:a},backend:n});const l=ki().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fV(a.shape,o):new pV(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}};class gV{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let a="";a="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${a}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const yV={kernelName:DA,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:a,fillValue:s,center:i}=t,o=n,l=new gV(r.shape,s),[A,u]=gb(i,r.shape[1],r.shape[2]),c=[[A,u,Math.sin(a),Math.cos(a)]];return o.runWebGLProgram(l,[r],r.dtype,c)}},bV=t$({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),wV={kernelName:Gl,backendName:"webgl",kernelFunc:bV},vV=t$({opSnippet:"return inversesqrt(x);",cpuKernelImpl:tO}),xV={kernelName:jl,backendName:"webgl",kernelFunc:vV};class BV{constructor(e,t,n,r,a,s,i=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const l=aQ(a.length),A=aQ(s.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";o&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides";this.userCode=`\n        ${l} strides = ${l}(${a});\n\n        void main() {\n          ${A} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${m};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(${f}, sum, float(found)));\n        }\n      `}}class kV{constructor(e,t,n,r,a,s,i=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;const l=aQ(a.length),A=aQ(s.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";o&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode=`\n        ${l} strides = ${l}(${a});\n\n        void main() {\n          ${A} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${t}; j+=2) {\n              ivec4 index = round(${c});\n              flattenedIndex += index.xz * ${m};\n              if (j + 1 < ${t}) {\n                flattenedIndex += index.yw * ${g};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ${d};\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(${f}, sum, found));\n        }\n      `}}const CV={kernelName:ql,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:s}=t,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:A,strides:u,outputSize:c}=Fg(0,a,i),h=[c/A,A];if(0===c)return n.makeTensorInfo(i,a.dtype);const d=A$({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),p=A$({inputs:{x:s},backend:n,attrs:{shape:[l,A]}}),f=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;m=ki().getBool("WEBGL_PACK")?new kV(l,o,d.shape.length,p.shape.length,u,h):new BV(l,o,d.shape.length,p.shape.length,u,h);const g=n.runWebGLProgram(m,[p,d,f],p.dtype),y=A$({inputs:{x:g},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(f),y}};class NV{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const a=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,s=2===ki().getNumber("WEBGL_VERSION")?"while (left < right) {":a,i="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${s}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${i} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const SV={kernelName:Jl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:s}=t,{side:i}=r,o=new NV(a.shape[0],a.shape[1],s.shape[1],i),l=[[a.shape[1]]];return n.runWebGLProgram(o,[a,s],"int32",l)}};class IV{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)a="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],i=[];for(let r=0;r<t.length;r++)i.push(`${n[r]}`),r<e&&s.push(`${n[r]}`);r=s.join(),a=i.join()}const s=aQ(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${a}));\n        } else {\n          setOutput(getB(${a}));\n        }\n      }\n    `}}const EV={kernelName:Yl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:a,e:s}=t,i=new IV(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,s],$u(a.dtype,s.dtype))}},FV=t$({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${kb};\n  float scale = ${Cb};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),TV={kernelName:Zl,backendName:"webgl",kernelFunc:FV},LV=t$({opSnippet:e$+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:rO}),UV={kernelName:aA,backendName:"webgl",kernelFunc:LV},_V=t$({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),RV={kernelName:rA,backendName:"webgl",kernelFunc:_V},DV=t$({opSnippet:e$+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${HO}\n  return result;\n`}),QV={kernelName:tA,backendName:"webgl",kernelFunc:DV},OV=t$({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),$V={kernelName:nA,backendName:"webgl",kernelFunc:OV},MV=t$({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),PV={kernelName:sA,backendName:"webgl",kernelFunc:MV},HV={kernelName:lA,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:s,paddings:i}=r;Vs(a.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const o=s.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...i);for(let e=1+s.length;e<a.shape.length;++e)l.push([0,0]);const A=[],u=Hz({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),c=yb(u.shape,s,o,!1),h=bb(c.length,s.length,!1),d=wb(u.shape,s,o,!1),p=A$({inputs:{x:u},backend:n,attrs:{shape:c}}),f=b$({inputs:{x:p},backend:n,attrs:{perm:h}}),m=A$({inputs:{x:f},backend:n,attrs:{shape:d}});return A.push(u),A.push(p),A.push(f),A.forEach((e=>n.disposeIntermediateTensorInfo(e))),m}},zV={kernelName:cA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:s,defaultValue:i}=t;if(1!==s.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${s.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==a.shape.length)throw new Error(`Values must be a vector, saw:\n         ${a.shape}`);if(0!==i.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${i.shape}`);const o=n.readSync(r.dataId),l=n.readSync(a.dataId),A=n.readSync(s.dataId),u=n.readSync(i.dataId)[0],[c,h,d,p,f]=iO(o,r.shape,r.dtype,l,a.dtype,A,u);return[n.makeTensorInfo(h,r.dtype,c),n.makeTensorInfo([h[0]],a.dtype,d),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map((e=>Number(e))))),n.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}},VV={kernelName:hA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:s}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==a.shape.length)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(1!==s.shape.length)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[A,u,c]=oO(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,A),n.makeTensorInfo([c.length],s.dtype,new Int32Array(c))]}},WV={kernelName:dA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${s.shape}`);const i=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(s.dataId),[A,u]=lO(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,A)}},KV={kernelName:pA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:s}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${a.shape}`);if(1!==s.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${s.shape}`);const i=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(s.dataId),[A,u]=lO(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,A)}},GV={kernelName:fA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:s,defaultValue:i}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:A,sliceSize:u,strides:c,outputSize:h}=Fg(0,a,o),d=!1;if("string"===s.dtype){const e=n.bufferSync(a),t=n.bufferSync(s),r=fu(n.readSync(i.dataId)[0]),p=nO(e,t,o,h,u,A,l,c,r,d);return n.makeTensorInfo(o,p.dtype,p.values)}const p=new BV(A,l,a.shape.length,s.shape.length,c,[h,1],d),f=n.runWebGLProgram(p,[s,a,i],s.dtype),m=A$({inputs:{x:f},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),m}},jV={kernelName:AA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:s,axis:i}=r,o=ei(i,a.shape)[0],l=Xb(a,s,o),A=a.shape.length,u=new Array(A).fill(0),c=a.shape.slice();return l.map((e=>{const t=[...c];t[o]=e;const r=fM({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},qV="return sqrt(x);",XV=t$({opSnippet:qV,packedOpSnippet:qV,cpuKernelImpl:AO}),JV={kernelName:iA,backendName:"webgl",kernelFunc:XV},YV={kernelName:gA,backendName:"webgl",kernelFunc:t$({opSnippet:"return x * x;"})},ZV="return (a - b) * (a - b);",eW=n$({opSnippet:ZV,packedOpSnippet:ZV}),tW={kernelName:mA,backendName:"webgl",kernelFunc:eW},nW={kernelName:yA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");const s=hw(n.readSync(a.dataId)),i=uO(s,"string",r);return n.makeTensorInfo(a.shape,"string",i)}},rW={kernelName:_A,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:r}=e,a=EO+`\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,s=new IO(r.shape,a);return n.runWebGLProgram(s,[r],r.dtype)}};class aW{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,a=aQ(n.length),s=aQ(n.length);let i="";if(1===r)i="coords * strides + begin";else{let e=0;i=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${a} begin = ${a}(${e});\n      ${a} strides = ${a}(${t});\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}const sW={kernelName:bA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:s,end:i,strides:o,beginMask:l,endMask:A,ellipsisMask:u,newAxisMask:c,shrinkAxisMask:h}=r,{finalShapeSparse:d,finalShape:p,isIdentity:f,sliceDim0:m,isSimpleSlice:g,begin:y,end:b,strides:w}=Hd(a.shape,s,i,o,l,A,u,c,h);let v;if(f)v=A$({inputs:{x:a},backend:n,attrs:{shape:p}});else if(m||g){Vs(a.shape.length>=1,(()=>`Input must have rank at least 1, got: ${a.shape.length}`));const e=Ed(y,b,w),t=fM({inputs:{x:a},backend:n,attrs:{begin:y,size:e}});v=A$({inputs:{x:t},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(t)}else if(n.shouldExecuteOnCPU([a])){const e=n.readSync(a.dataId),t=vh(a.shape,a.dtype,e),r=cO(d,t,w,y);v=n.makeTensorInfo(p,a.dtype,r.values)}else{const e=new aW(y,w,d);v=n.runWebGLProgram(e,[a],a.dtype)}const x=A$({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(v),x}},iW={kernelName:wA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:s,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:A}=r,{data:u,dataSplits:c}=t,h=n.readSync(u.dataId),d=n.readSync(c.dataId),[p,f]=hO(h,d,a,s,i,o,l,A);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(c.shape,"int32",f)]}},oW={kernelName:vA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:s,delimiter:i}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(1!==s.shape.length)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(0!==i.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.readSync(s.dataId),l=n.readSync(i.dataId)[0],[A,u,c]=dO(o,l,a),h=u.length;return[n.makeTensorInfo([h,2],"int32",A),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}},lW={kernelName:xA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:s}=t;if("string"!==s.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),o=pO(i,a);return n.makeTensorInfo(s.shape,"int32",o)}},AW=t$({opSnippet:"return tan(x);"}),uW={kernelName:kA,backendName:"webgl",kernelFunc:AW},cW=t$({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),hW={kernelName:CA,backendName:"webgl",kernelFunc:cW},dW={kernelName:Xl,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:a,indices:s,updates:i}=t,{}=r,{sliceRank:o,numUpdates:l,sliceSize:A,strides:u,outputSize:c}=Fg(0,s,a.shape),h=[c/A,A];if(0===c)return n.makeTensorInfo(a.shape,s.dtype);const d=A$({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),p=A$({inputs:{x:i},backend:n,attrs:{shape:[l,A]}}),f=A$({inputs:{x:a},backend:n,attrs:{shape:h}}),m=new BV(l,o,d.shape.length,p.shape.length,u,h,!1,!0),g=n.runWebGLProgram(m,[p,d,f],f.dtype),y=A$({inputs:{x:g},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}};class pW{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;const r=aQ(this.rank),a=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}function fW(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:s}=r;if("string"===a.dtype||a.shape.length>5){const e=n.readSync(a.dataId),t="string"===a.dtype?e.map((e=>fu(e))):e,r=vh(a.shape,a.dtype,t),i=mO(r,s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const i=new pW(a.shape,s);return n.runWebGLProgram(i,[a],a.dtype)}const mW={kernelName:NA,backendName:"webgl",kernelFunc:fW};class gW{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class yW{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function bW(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function wW(e){let t=1;for(;t<e;)t*=2;return t}const vW={kernelName:SA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:s,sorted:i}=r,o=ki().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ki().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),A=a.shape,u=A[A.length-1];if(n.shouldExecuteOnCPU([a])||u<o||s>l){const e=n.readSync(a.dataId),[t,r]=gO(e,A,a.dtype,s,i);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===s)return A[A.length-1]=0,[n.makeTensorInfo(A,a.dtype,[]),n.makeTensorInfo(A,"int32",[])];if(1===u)return[a,ZP({attrs:{shape:A,dtype:"int32",value:0},backend:n})];const c=n.texData.get(a.dataId),h=null!==c&&c.isPacked,d=h?n.unpackTensor(a):a,p=Gs(A)/u,f=A$({inputs:{x:d},attrs:{shape:[p,u]},backend:n});h&&bW(n,d);const m=wW(s),g=wW(u);let y=null;const b=()=>null===y?[f,f]:[f,y],w=(e,t,r)=>{const a=b(),s=new gW(r),i=[[u],[null===y?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],o=y;y=n.runWebGLProgram(s,a,"int32",i),bW(n,o)};for(let e=1;e<m;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)w(t,n,[p,g])}for(let e=g;e>m;e/=2){const t=b(),r=new yW([p,e/2]),a=[[u],[null===y?1:0],[m]],s=y;y=n.runWebGLProgram(r,t,"int32",a),bW(n,s);const i=m/2,o=2*i;for(let e=i;e>=1;e/=2)w(o,e,y.shape)}let v=y;y=fM({inputs:{x:y},backend:n,attrs:{begin:0,size:[p,s]}}),bW(n,v);let x=yH({inputs:{x:f,indices:y},backend:n,attrs:{axis:1,batchDims:1}});bW(n,f);const B=A.slice(0,-1);B.push(s),v=y,y=A$({inputs:{x:y},attrs:{shape:B},backend:n}),bW(n,v);const k=x;return x=A$({inputs:{x},attrs:{shape:B},backend:n}),bW(n,k),[x,y]}};class xW{constructor(e,t,n,r,a,s){this.variableNames=["Image","Transforms"],this.outputShape=s;const i="nearest"===n?1:2;let o;switch(r){case"constant":default:o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${o} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${a});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${a});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${i} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const BW={kernelName:IA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:s}=t,{interpolation:i,fillMode:o,fillValue:l,outputShape:A}=r,[u,c,h,d]=a.shape,[p,f]=null!=A?A:[c,h],m=new xW(c,h,i,o,l,[u,p,f,d]);return n.runWebGLProgram(m,[a,s],"float32")}},kW={kernelName:FA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:s}=t;PD(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(s.dataId),{outputValues:o,outputShape:l,indices:A}=bO(i,a,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,o),r.makeTensorInfo([A.length],"int32",A)]}},CW={kernelName:TA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:a}=t;let{axis:s}=r;s<0&&(s+=a.shape.length);const i=a,o=i.shape.length,l=a.shape[s],A=new Array(o-1);let u=0;for(let e=0;e<o;e++)e!==s&&(A[u++]=i.shape[e]);const c=[],h=new Array(o).fill(0),d=i.shape.slice();d[s]=1;const p=new Array(l);for(let e=0;e<p.length;e++){h[s]=e;const t=fM({inputs:{x:i},backend:n,attrs:{begin:h,size:d}}),r=A$({inputs:{x:t},backend:n,attrs:{shape:A}});p[e]=r,c.push(t)}return c.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};class NW{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,a=e.inSize,s=e.numSegments,i=s*Math.ceil(a/n);this.outputShape=[r,i];const o=4*Math.floor(n/4),l=n%4,A="\n        sumValue += dot(values, segFilter);\n    ";let u="";a%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let c="";a%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${c}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${s})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${s})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${o}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${A}\n        }\n\n        int inIdx = inOffset + ${o};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${A}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${A}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${A}\n        }\n        setOutput(sumValue);\n      }\n    `}}const SW={kernelName:LA,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:s}=t,{numSegments:i}=r,o=a.shape.length,l=[];let A=0;const u=gf([A],o);let c=a;null!=u&&(c=b$({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(c),A=bf(1,o)[0]);const h=uw(c.shape,A,i),d=Gs([c.shape[A]]),p=A$({inputs:{x:c},backend:n,attrs:{shape:[-1,d]}});l.push(p);const f=Mu(a.dtype),m=(e,t,r,a,s)=>{const i=e.shape[0],o=e.shape[1],A=Aw(o,s),u=new NW({windowSize:A,inSize:o,batchSize:i,numSegments:s},t),c=n.compileAndRun(u,[e,r],a);if(l.push(c),c.shape[1]===s)return c;const h=Xz({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),d=fW({inputs:{x:h},backend:n,attrs:{reps:[o/A]}});return l.push(h),l.push(d),m(c,t,d,a,s)},g=A$({inputs:{x:m(p,"unsortedSegmentSum",s,f,i)},backend:n,attrs:{shape:h}});let y=g;if(null!=u){l.push(g);const e=yf(u);y=b$({inputs:{x:y},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}},IW=[x$,k$,N$,I$,T$,_$,R$,D$,H$,z$,W$,G$,q$,J$,Z$,nM,rM,iM,oM,lM,cM,gM,yM,bM,wM,CM,IM,TM,GO,_M,HM,XM,tP,rP,aP,sP,iP,lP,uP,hP,yP,bP,wP,xP,CP,IP,EP,TP,UP,_P,DP,QP,$P,PP,zP,WP,jP,JP,eH,nH,sH,oH,uH,dH,pH,mH,bH,vH,BH,WO,kH,$M,NH,IH,FH,XO,LH,_H,RH,QH,$H,PH,zH,WH,jH,XH,YH,ez,tz,nz,sz,iz,oz,lz,Az,cz,pz,mz,Cz,l$,Sz,Ez,Tz,Uz,xM,Rz,Oz,$z,zz,Wz,ZO,Kz,Gz,jz,qz,Jz,kM,bz,Zz,tV,rV,u$,iV,lV,cV,dV,mV,yV,wV,xV,CV,SV,EV,TV,UV,RV,QV,$V,mM,kz,PV,HV,zV,VV,WV,KV,GV,jV,JV,YV,tW,nW,rW,sW,iW,oW,lW,xz,y$,uW,hW,dW,mW,vW,BW,w$,kW,CW,SW,Qz];for(const e of IW)GA(e);const EW=["Hawar","Karat","Layu","Sehat"],FW=e=>{let{message:t="Memuat model, mohon tunggu..."}=e;return S.createElement("div",{className:"min-h-screen flex items-center justify-center"},S.createElement("div",{className:"text-center"},S.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),S.createElement("p",{className:"text-gray-600"},t)))},TW=e=>{let{model:t,isLoadingModel:n,error:r}=e;return t||n||r?null:S.createElement("div",{className:"text-amber-500 text-center my-5 px-4 py-3 bg-amber-100/40 rounded-md italic border-l-4 border-amber-500"},"Model belum siap atau gagal dimuat tanpa error eksplisit. Periksa konsol untuk detail.")},LW=e=>{let{onFileChange:t,disabled:n}=e;const r=(0,S.useRef)(null),[a,s]=(0,S.useState)(!1);return S.createElement("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 transition-all duration-200 cursor-pointer min-h-[200px] flex items-center justify-center ".concat(n?"opacity-50 cursor-not-allowed pointer-events-none":a?"border-green-500 bg-green-50":"hover:border-green-400 hover:bg-green-50"),onClick:()=>{n||r.current.click()},onDragOver:e=>{e.preventDefault(),n||s(!0)},onDragLeave:e=>{e.preventDefault(),s(!1)},onDrop:e=>{if(e.preventDefault(),s(!1),!n&&e.dataTransfer.files.length>0){const n=e.dataTransfer.files[0];n.type.startsWith("image/")&&t({target:{files:[n]}})}}},S.createElement("div",{className:"text-center"},S.createElement(xn,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),S.createElement("p",{className:"text-gray-600 mb-2"},"Drag & drop foto daun jagung di sini"),S.createElement("p",{className:"text-sm text-gray-400 mb-4"},"atau"),S.createElement("button",{className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors",type:"button"},"Pilih File"),S.createElement("div",{className:"mt-4 text-xs text-gray-500"},"Format: JPG, PNG (max 5MB)")),S.createElement("input",{type:"file",accept:"image/*",onChange:e=>{t(e)},ref:r,className:"hidden",disabled:n}))},UW=e=>{let{preview:t}=e;return t?S.createElement("div",{className:"my-8 mx-5 text-center animate-fade-in-up"},S.createElement("h3",{className:"text-gray-800 font-semibold text-xl mb-5"},"Pratinjau Gambar:"),S.createElement("img",{src:t,alt:"Preview",className:"max-w-full max-h-[400px] mx-auto rounded-xl object-contain shadow-lg hover:scale-[1.02] transition-transform duration-300"})):null},_W=Tt("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),RW=Tt("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),DW={Sehat:{icon:"🌿",title:"Sehat",description:"Daun jagung dalam kondisi sehat dan optimal.",actions:["Lanjutkan pemantauan rutin daun dan kondisi tanaman secara berkala.","Jaga kelembaban dan nutrisi tanah tetap optimal.","Lakukan rotasi tanaman secara berkala untuk mencegah penumpukan patogen."],color:"green",severity:"low"},Hawar:{icon:"🟠",title:"Hawar Daun (Leaf Blight)",description:"Bercak kecoklatan memanjang, cepat menyebar di permukaan daun.",actions:["Gunakan fungisida berbahan aktif seperti **mancozeb**, **chlorothalonil**, atau **azoxystrobin**.","Pangkas daun yang sudah parah agar tidak menyebar.","Tingkatkan sirkulasi udara antar tanaman dengan jarak tanam yang baik.","Hindari penyiraman dari atas (basahi tanah, bukan daun)."],color:"orange",severity:"medium"},Karat:{icon:"🧡",title:"Karat Daun (Common Rust)",description:"Bintik kecil berwarna oranye atau kecoklatan seperti serbuk di permukaan daun.",actions:["Aplikasikan fungisida sistemik seperti **propiconazole** atau **tebuconazole**.","Gunakan varietas jagung yang tahan karat bila tersedia.","Lakukan sanitasi lahan: bersihkan sisa tanaman dan gulma yang bisa jadi inang penyakit."],color:"orange",severity:"medium"},Layu:{icon:"🔴",title:"Layu (Wilt)",description:"Daun menguning lalu layu meskipun tanah cukup air, batang kadang membusuk.",actions:["Periksa kemungkinan serangan jamur seperti *Fusarium* atau bakteri penyebab layu.","Gunakan fungisida seperti **carbendazim** untuk infeksi jamur.","Tingkatkan drainase lahan jika terlalu becek.","Cabut tanaman yang sudah parah untuk mencegah penyebaran ke tanaman sehat."],color:"red",severity:"high"}},QW=e=>DW[e]||{icon:"❓",title:"Tidak Diketahui",description:"Kondisi daun tidak dapat diidentifikasi dengan pasti.",actions:["Silakan ambil foto ulang dengan kualitas yang lebih baik.","Pastikan pencahayaan cukup dan foto tidak blur.","Konsultasikan dengan ahli pertanian jika masalah berlanjut."],color:"gray",severity:"unknown"},OW=e=>{let{result:t,error:n}=e;if(!t||n)return null;const r=(100*t.probability).toFixed(2),a=QW(t.className);let s="bg-gradient-to-r from-green-400 to-green-600",i="from-green-50 to-emerald-50",o="text-green-600",l="Sangat Baik",A=Pt;t.probability<.7&&t.probability>=.4?(s="bg-gradient-to-r from-yellow-400 to-orange-500",i="from-yellow-50 to-orange-50",o="text-yellow-600",l="Cukup Yakin",A=$t):t.probability<.4&&(s="bg-gradient-to-r from-red-400 to-red-600",i="from-red-50 to-pink-50",o="text-red-600",l="Kurang Yakin",A=_W);const u=(e=>{switch(e){case"low":return{bgGradient:"from-green-50 to-emerald-50",borderColor:"border-green-200",iconColor:"text-green-600",titleColor:"text-green-800",RecommendationIcon:Qt};case"medium":return{bgGradient:"from-orange-50 to-yellow-50",borderColor:"border-orange-200",iconColor:"text-orange-600",titleColor:"text-orange-800",RecommendationIcon:$t};case"high":return{bgGradient:"from-red-50 to-pink-50",borderColor:"border-red-200",iconColor:"text-red-600",titleColor:"text-red-800",RecommendationIcon:RW};default:return{bgGradient:"from-gray-50 to-slate-50",borderColor:"border-gray-200",iconColor:"text-gray-600",titleColor:"text-gray-800",RecommendationIcon:$t}}})(a.severity);return S.createElement("div",{className:"my-8 p-8 bg-white rounded-3xl shadow-xl border border-gray-100 transform transition-all duration-500 hover:shadow-2xl"},S.createElement("div",{className:"flex items-center justify-center mb-8"},S.createElement("div",{className:"flex items-center space-x-3"},S.createElement(Lt,{className:"w-8 h-8 text-[#039b62]"}),S.createElement("h3",{className:"text-2xl font-bold text-[#039b62]"},"Hasil Analisis Daun"))),S.createElement("div",{className:"space-y-6"},S.createElement("div",{className:"p-6 bg-gradient-to-br ".concat(i," rounded-2xl border border-gray-200 shadow-sm")},S.createElement("div",{className:"flex items-center justify-between mb-4"},S.createElement("span",{className:"text-sm font-semibold uppercase tracking-wider text-gray-600"},"Kondisi Terdeteksi"),S.createElement(A,{className:"w-6 h-6 ".concat(o)})),S.createElement("div",{className:"flex items-center space-x-3"},S.createElement("span",{className:"text-3xl mr-2"},a.icon),S.createElement("span",{className:"text-2xl font-bold text-gray-800"},t.className))),S.createElement("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-gray-200 shadow-sm"},S.createElement("div",{className:"flex items-center justify-between mb-4"},S.createElement("span",{className:"text-sm font-semibold uppercase tracking-wider text-gray-600"},"Akurasi Deteksi"),S.createElement("span",{className:"text-sm font-bold px-3 py-1 rounded-full ".concat(t.probability>=.7?"bg-green-100 text-green-700":t.probability>=.4?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700")},l)),S.createElement("div",{className:"space-y-3"},S.createElement("div",{className:"flex justify-between items-center"},S.createElement("span",{className:"text-3xl font-bold text-gray-800"},r,"%")),S.createElement("div",{className:"relative bg-gray-200 rounded-full h-4 shadow-inner overflow-hidden"},S.createElement("div",{className:"h-full ".concat(s," transition-all duration-1000 ease-out shadow-lg"),style:{width:"".concat(r,"%")}},S.createElement("div",{className:"absolute inset-0 bg-white bg-opacity-20 animate-pulse"}))),S.createElement("div",{className:"flex justify-between text-xs text-gray-500 mt-2"},S.createElement("span",null,"0%"),S.createElement("span",null,"25%"),S.createElement("span",null,"50%"),S.createElement("span",null,"75%"),S.createElement("span",null,"100%")))),S.createElement("div",{className:"p-6 bg-gradient-to-br ".concat(u.bgGradient," rounded-2xl border ").concat(u.borderColor," shadow-sm")},S.createElement("div",{className:"flex items-center space-x-3 mb-4"},S.createElement(u.RecommendationIcon,{className:"w-6 h-6 ".concat(u.iconColor)}),S.createElement("span",{className:"text-sm font-semibold uppercase tracking-wider text-gray-600"},"Informasi Kondisi")),S.createElement("h4",{className:"text-xl font-bold ".concat(u.titleColor," mb-2")},a.title),S.createElement("p",{className:"text-gray-700 leading-relaxed"},a.description)),S.createElement("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 shadow-sm"},S.createElement("div",{className:"flex items-center space-x-3 mb-4"},S.createElement(Qt,{className:"w-6 h-6 text-blue-600"}),S.createElement("span",{className:"text-sm font-semibold uppercase tracking-wider text-gray-600"},"Rekomendasi Tindakan")),S.createElement("div",{className:"space-y-3"},a.actions.map(((e,t)=>S.createElement("div",{key:t,className:"flex items-start space-x-3"},S.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5"},S.createElement("span",{className:"text-blue-600 text-sm font-bold"},t+1)),S.createElement("p",{className:"text-gray-700 leading-relaxed text-left flex-1"},e.split("**").map(((e,t)=>t%2==1?S.createElement("strong",{key:t,className:"font-semibold text-gray-800"},e):e)))))))),S.createElement("div",{className:"p-6 bg-gradient-to-br from-gray-50 to-slate-50 rounded-2xl border border-gray-200 shadow-sm"},S.createElement("span",{className:"text-sm font-semibold uppercase tracking-wider text-gray-600 block mb-3"},"Catatan Akurasi"),S.createElement("p",{className:"text-gray-700 leading-relaxed"},t.probability>=.7?"Hasil deteksi sangat akurat. Kondisi daun telah teridentifikasi dengan baik. Lakukan tindakan sesuai rekomendasi di atas.":t.probability>=.4?"Hasil deteksi cukup baik. Disarankan untuk mengambil foto dengan pencahayaan lebih baik untuk konfirmasi yang lebih akurat.":"Hasil deteksi kurang akurat. Silakan ambil foto ulang dengan kualitas yang lebih baik. Jika masalah berlanjut, konsultasikan dengan ahli pertanian."))))},$W=e=>{let{error:t}=e;return t?S.createElement("div",{className:"mx-5 my-5 px-5 py-4 bg-gradient-to-r from-red-500 to-red-400 text-white rounded-xl shadow-lg font-medium animate-slide-in-down"},"Error: ",t):null},MW=e=>{let{model:t,isPredicting:n,error:r,result:a,preview:s,onImageUpload:i,onReset:o}=e;const l=(0,S.useRef)(null);return S.createElement("div",null,S.createElement($W,{error:r}),S.createElement(LW,{onFileChange:i,disabled:!t||n,ref:l}),n&&S.createElement(FW,null),S.createElement(UW,{preview:s,onReset:()=>{l.current&&(l.current.value=""),o()}}),S.createElement(OW,{result:a,error:r}))},PW=Tt("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),HW=e=>{let{videoRef:t,isCameraOpen:n,cameraError:r,openCamera:a,closeCamera:s,capturePhoto:i,isPredicting:o,modelReady:l}=e;return S.createElement("div",null,S.createElement($W,{error:r}),n?S.createElement("div",{className:"relative"},S.createElement("video",{ref:t,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg"}),S.createElement("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-4"},S.createElement("button",{onClick:s,className:"bg-red-500 hover:bg-red-600 text-white p-3 rounded-full transition-colors shadow-lg",title:"Tutup Kamera"},S.createElement(PW,{className:"w-6 h-6"})),S.createElement("button",{onClick:i,disabled:o,className:"bg-white hover:bg-gray-100 disabled:bg-gray-300 text-green-600 p-4 rounded-full transition-colors shadow-lg border-4 border-green-500",title:"Ambil Foto"},S.createElement(Mt,{className:"w-8 h-8"}))),S.createElement("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-2 rounded-lg text-sm"},S.createElement("p",null,"📸 Arahkan kamera ke daun jagung"),S.createElement("p",null,"💡 Pastikan pencahayaan cukup")),o&&S.createElement("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg"},S.createElement("div",{className:"bg-white p-4 rounded-lg"},S.createElement(FW,null),S.createElement("p",{className:"text-gray-600 mt-2"},"Menganalisis foto...")))):S.createElement("div",{className:"text-center py-12"},S.createElement(Mt,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),S.createElement("h3",{className:"text-lg font-medium text-gray-800 mb-2"},"Gunakan Kamera"),S.createElement("p",{className:"text-gray-600 mb-6"},"Ambil foto daun jagung langsung dengan kamera"),S.createElement("button",{onClick:a,disabled:!l,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors"},S.createElement(Mt,{className:"w-5 h-5 inline mr-2"}),"Buka Kamera")))},zW=()=>{const e=be(),{model:t,isLoadingModel:n,modelError:r}=(()=>{const[e,t]=(0,S.useState)(null),[n,r]=(0,S.useState)(!0),[a,s]=(0,S.useState)(null);return(0,S.useEffect)((()=>{(async()=>{r(!0),s(null);const{model:e,error:n}=await(async()=>{try{await Ju.ready();const e="/model/model.json";return{model:await eE(e),error:null}}catch(e){return{model:null,error:e.message}}})();e?t(e):s(n),r(!1)})()}),[]),{model:e,isLoadingModel:n,modelError:a}})(),{result:a,isPredicting:s,predictionError:i,performPrediction:o,resetPrediction:l}=(()=>{const[e,t]=(0,S.useState)(null),[n,r]=(0,S.useState)(!1),[a,s]=(0,S.useState)(null);return{result:e,isPredicting:n,predictionError:a,performPrediction:async(e,n)=>{if(e)if(s(null),t(null),(e=>{const t=100,n=100,r=document.createElement("canvas");r.width=t,r.height=n;const a=r.getContext("2d");a.drawImage(e,0,0,t,n);const s=a.getImageData(0,0,t,n).data;let i=0;for(let e=0;e<s.length;e+=4){const t=s[e],n=s[e+1],r=s[e+2];n>t+20&&n>r+20&&i++}return i/(t*n)>.1})(n))try{r(!0);const a=(e=>mc((()=>{const t=kd(e);return eb.resizeBilinear(t,[224,224]).toFloat().sub(Uh(127.5)).div(Uh(127.5)).expandDims()})))(n),i=await(async(e,t)=>{try{console.log("Melakukan prediksi dengan GraphModel...");const n=e.predict(t);let r;if(n instanceof Fu)r=await n.data(),gc(n);else{if(!(Array.isArray(n)&&n[0]instanceof Fu))throw console.error("Format output prediksi tidak terduga:",n),new Error("Format output prediksi dari GraphModel tidak dikenali.");r=await n[0].data(),gc(n)}return r}catch(e){throw console.error("Error saat prediksi dengan GraphModel:",e),new Error("Error saat prediksi: ".concat(e.message))}})(e,a),o=((e,t)=>{let n=-1,r=-1;for(let t=0;t<e.length;t++)e[t]>n&&(n=e[t],r=t);if(-1!==r&&t&&t[r])return{className:t[r],probability:n};throw new Error("Gagal memproses hasil prediksi (indeks atau nama kelas tidak valid).")})(i,EW);o.confidence<.5?(s("Gambar tidak dapat dikenali sebagai salah satu kategori penyakit jagung."),t(null)):t(o),gc(a)}catch(e){s("Terjadi error saat prediksi: "+e.message)}finally{r(!1)}else s("Gambar yang diunggah sepertinya bukan daun jagung.");else s("Model belum siap. Mohon tunggu.")},resetPrediction:()=>{t(null),s(null)}}})(),[A,u]=(0,S.useState)(null),[c,h]=(0,S.useState)("upload"),[d,p]=(0,S.useState)(!1),[f,m]=(0,S.useState)(!1),[g,y]=(0,S.useState)(""),[b,w]=(0,S.useState)("");(0,S.useEffect)((()=>{const e=localStorage.getItem("token");if(p(!!e),e){const e=JSON.parse(localStorage.getItem("user"));e&&e.name&&w(e.name)}}),[]);const v=(0,S.useCallback)((e=>{const n=new FileReader;n.onload=e=>{u(e.target.result);const n=new Image;n.src=e.target.result,n.onload=()=>{o(t,n)}},n.readAsDataURL(e)}),[t,o]),{videoRef:x,canvasRef:B,isCameraOpen:k,cameraError:C,openCamera:N,closeCamera:I,capturePhoto:E}=(e=>{const[t,n]=(0,S.useState)(!1),[r,a]=(0,S.useState)(null),s=(0,S.useRef)(null),i=(0,S.useRef)(null),o=(0,S.useRef)(null),l=(0,S.useCallback)((()=>{a(null),n(!0)}),[]),A=(0,S.useCallback)((()=>{o.current&&(o.current.getTracks().forEach((e=>e.stop())),o.current=null),s.current&&(s.current.srcObject=null),n(!1)}),[]);(0,S.useEffect)((()=>{if(t)return(async()=>{try{const e=(()=>{const e=navigator.userAgent||"",t=/iPhone|iPad|iPod/.test(e),n=/Android/.test(e),r=window.innerWidth<window.innerHeight;return t||n||r})()?{width:{ideal:480},height:{ideal:640},aspectRatio:{ideal:3/4},facingMode:{ideal:"environment"},frameRate:{ideal:30}}:{width:{ideal:1280},height:{ideal:720},aspectRatio:{ideal:16/9},facingMode:{ideal:"environment"},frameRate:{ideal:30}},t=await navigator.mediaDevices.getUserMedia({video:e,audio:!1});s.current&&(s.current.srcObject=t,o.current=t,a(null),await s.current.play().catch(console.warn))}catch(e){let t;switch(e.name){case"NotAllowedError":t="Akses kamera ditolak. Mohon izinkan di pengaturan browser.";break;case"NotFoundError":t="Tidak ada kamera yang ditemukan di perangkat ini.";break;case"NotReadableError":t="Kamera sedang digunakan oleh aplikasi lain.";break;case"OverconstrainedError":t="Kamera tidak mendukung resolusi yang diminta.";break;default:t="Error mengakses kamera: ".concat(e.message)}a(t),n(!1)}})(),()=>{o.current&&o.current.getTracks().forEach((e=>e.stop()))};o.current&&o.current.getTracks().forEach((e=>e.stop()))}),[t]);const u=(0,S.useCallback)((()=>{if(s.current&&i.current){const t=i.current,n=s.current;t.width=n.videoWidth,t.height=n.videoHeight,t.getContext("2d").drawImage(n,0,0,t.width,t.height),t.toBlob((t=>{if(t){const n=new File([t],"capture-".concat(Date.now(),".jpg"),{type:"image/jpeg"});e&&e(n)}}),"image/jpeg",.9),A()}}),[e,A]);return{videoRef:s,canvasRef:i,isCameraOpen:t,cameraError:r,openCamera:l,closeCamera:A,capturePhoto:u}})((e=>{v(e),h("upload")})),F=(0,S.useCallback)((()=>{u(null),l(),y("")}),[l]),T=e=>{h(e),k&&I(),e!==c&&(F(),u(null))};if(n)return S.createElement(FW,{text:"Memuat model AI, mohon tunggu..."});const L="camera"===c&&!k&&A;return S.createElement("div",{className:"min-h-screen py-12 px-6"},S.createElement("div",{className:"max-w-4xl mx-auto text-center"},S.createElement(Lt,{className:"w-16 h-16 mx-auto text-green-500 mb-4"}),S.createElement("h1",{className:"text-4xl font-bold text-gray-800 mb-4"},"Scanner Daun Jagung"),S.createElement("p",{className:"text-gray-600 mb-8"},"Unggah gambar atau gunakan kamera untuk analisis penyakit secara instan."),S.createElement("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden mb-8"},S.createElement("div",{className:"flex border-b border-gray-200"},S.createElement("button",{onClick:()=>T("upload"),className:"flex-1 py-4 px-6 font-medium transition-colors ".concat("upload"===c?"bg-green-50 text-green-600 border-b-2 border-green-500":"text-gray-600 hover:text-gray-800")},S.createElement(xn,{className:"w-5 h-5 inline mr-2"})," Unggah Gambar"),S.createElement("button",{onClick:()=>T("camera"),className:"flex-1 py-4 px-6 font-medium transition-colors ".concat("camera"===c?"bg-green-50 text-green-600 border-b-2 border-green-500":"text-gray-600 hover:text-gray-800")},S.createElement(Mt,{className:"w-5 h-5 inline mr-2"})," Gunakan Kamera")),S.createElement("div",{className:"p-6"},"upload"===c&&S.createElement(MW,{model:t,isPredicting:s,error:i||r,result:a,preview:A,onImageUpload:e=>{const t=e.target.files[0];t?(F(),v(t)):F()},onReset:F}),"camera"===c&&S.createElement(S.Fragment,null,S.createElement(HW,{videoRef:x,isCameraOpen:k,cameraError:C||r,openCamera:N,closeCamera:I,capturePhoto:E,isPredicting:s,modelReady:!!t}),L&&S.createElement(S.Fragment,null,S.createElement(UW,{preview:A,onReset:F}),S.createElement(OW,{result:a,error:i}))),a&&!i&&S.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200 text-center"},S.createElement("div",{className:"flex justify-center space-x-4 mb-4"},d&&S.createElement("button",{onClick:async()=>{if(!a||!d||!A)return;const t=localStorage.getItem("token");m(!0),y("");const n=QW(a.className);n&&Array.isArray(n.actions)&&n.actions.join("\n");try{const r=await fetch("http://localhost:3001/api/history/save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({detection_result:a.className,accuracy:a.probability,recommendation:n.description||"Tidak ada deskripsi rekomendasi.",image_data:A})});if(401===r.status||403===r.status)return localStorage.removeItem("token"),localStorage.removeItem("user"),void e("/login");const s=await r.json();if(!r.ok)throw new Error(s.message||"Gagal menyimpan.");y(s.message)}catch(e){y(e.message)}finally{m(!1)}},disabled:f||!!g,className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"},S.createElement(Bn,{className:"w-5 h-5 mr-2"}),f?"Menyimpan...":"Simpan Hasil ke Riwayat"),S.createElement("button",{onClick:async()=>{if(!a||!A)return void alert("Tidak ada hasil deteksi atau gambar untuk diunduh.");const e=new Yr,t=new Date,n=QW(a.className),r=n&&Array.isArray(n.actions)?n.actions:["Tidak ada rekomendasi penanganan yang tersedia."],s=n.title||a.className,i=n.description||"Tidak ada deskripsi tersedia.",o=n.icon||"";e.setFontSize(22),e.text("Laporan Deteksi Penyakit Daun Jagung",10,20),e.setFontSize(10),e.text("Aplikasi Scanner Daun Jagung - Powered by AI",10,27),e.setLineWidth(.5),e.line(10,30,200,30),e.setFontSize(12),e.text("Tanggal Deteksi: ".concat(t.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),10,40),e.text("Waktu Deteksi: ".concat(t.toLocaleTimeString("id-ID")),10,47),b&&e.text("Pengguna: ".concat(b),10,54),e.text("Sumber Gambar: ".concat("upload"===c?"Unggah Gambar":"Kamera"),10,b?61:54);const l=b?70:63;if(e.setFontSize(14),e.text("Gambar yang Dideteksi:",10,l),A){const n=new Image;n.src=A,n.onload=()=>{const u=80*n.height/n.width,c=l+7;e.addImage(A,"JPEG",10,c,80,u);let h=c+u+10;e.setFontSize(14),e.text("Hasil Deteksi:",10,h),h+=10,e.setFontSize(12),e.text("Penyakit Teridentifikasi: ".concat(o," ").concat(s),10,h),h+=7,e.text("Deskripsi: ".concat(i),10,h),h+=7,e.text("Tingkat Keyakinan: ".concat((100*a.probability).toFixed(2),"%"),10,h),h+=17,e.setFontSize(14),e.text("Rekomendasi Penanganan:",10,h),h+=10,e.setFontSize(12),r.forEach(((t,n)=>{const r="".concat(n+1,". ").concat(t),a=e.splitTextToSize(r,180);e.text(a,10,h),h+=5*a.length+3})),h=Math.max(h,e.internal.pageSize.height-30);const d=e.splitTextToSize("Catatan: Hasil deteksi ini dihasilkan oleh model AI dan ditujukan sebagai panduan awal. Untuk diagnosis dan penanganan yang lebih akurat, sangat disarankan untuk berkonsultasi dengan ahli pertanian atau agronomis.",180);e.setFontSize(8),e.setTextColor(100),e.text(d,10,h),e.save("Laporan_Deteksi_Daun_Jagung_".concat(t.toISOString().slice(0,10),".pdf"))},n.onerror=()=>{alert("Gagal memuat gambar untuk PDF.")}}else{let n=l+7;e.setFontSize(14),e.text("Hasil Deteksi:",10,n),n+=10,e.setFontSize(12),e.text("Penyakit Teridentifikasi: ".concat(o," ").concat(s),10,n),n+=7,e.text("Deskripsi: ".concat(i),10,n),n+=7,e.text("Tingkat Keyakinan: ".concat((100*a.probability).toFixed(2),"%"),10,n),n+=17,e.setFontSize(14),e.text("Rekomendasi Penanganan:",10,n),n+=10,e.setFontSize(12),r.forEach(((t,r)=>{const a="".concat(r+1,". ").concat(t),s=e.splitTextToSize(a,180);e.text(s,10,n),n+=5*s.length+3})),n=Math.max(n,e.internal.pageSize.height-30);const A="Catatan: Hasil deteksi ini dihasilkan oleh model AI dan ditujukan sebagai panduan awal. Untuk diagnosis dan penanganan yang lebih akurat, sangat disarankan untuk berkonsultasi dengan ahli pertanian atau agronomis.",u=e.splitTextToSize(A,180);e.setFontSize(8),e.setTextColor(100),e.text(u,10,n),e.save("Laporan_Deteksi_Daun_Jagung_".concat(t.toISOString().slice(0,10),".pdf"))}},className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",disabled:!a||!A},S.createElement(kn,{className:"w-5 h-5 mr-2"}),"Unduh Laporan PDF")),g&&S.createElement("p",{className:"mt-4 text-sm font-medium ".concat(g.includes("berhasil")?"text-green-600":"text-red-600")},g),!d&&S.createElement("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},S.createElement("div",{className:"flex items-center justify-center"},S.createElement(Cn,{className:"w-6 h-6 mr-3 text-blue-600"}),S.createElement("p",{className:"text-gray-700"},"Silakan"," ",S.createElement(st,{to:"/login",className:"font-bold text-blue-600 hover:underline"},"login")," ","untuk menyimpan hasil pindai ini.")))))),S.createElement(TW,{model:t,isLoadingModel:n,error:r}),S.createElement("canvas",{ref:B,style:{display:"none"}})))},VW=Tt("scan-line",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]),WW=Tt("chart-no-axes-column",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),KW=Tt("file-clock",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"37hlfg"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"8",cy:"16",r:"6",key:"10v15b"}],["path",{d:"M9.5 17.5 8 16.25V14",key:"1o80t2"}]]),GW=Tt("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),jW=Tt("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),qW=Tt("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var XW=i(4761),JW={};JW.styleTagTransform=xt(),JW.setAttributes=yt(),JW.insert=mt().bind(null,"head"),JW.domAPI=pt(),JW.insertStyleElement=wt(),ht()(XW.A,JW),XW.A&&XW.A.locals&&XW.A.locals;const YW=()=>{const[e,t]=(0,S.useState)(""),[n,r]=(0,S.useState)(null),[a,s]=(0,S.useState)(!0),[i,o]=(0,S.useState)(null),l=be();return(0,S.useEffect)((()=>{const e=localStorage.getItem("user");if(e){const n=JSON.parse(e);t(n.fullName||"Pengguna")}(async()=>{const e=localStorage.getItem("token");if(e)try{const t=await fetch("http://localhost:3001/api/stats",{headers:{Authorization:"Bearer ".concat(e)}});if(401===t.status||403===t.status)return localStorage.removeItem("token"),localStorage.removeItem("user"),void l("/login");if(!t.ok){const e=await t.json();throw new Error(e.message||"Gagal memuat statistik.")}const n=await t.json();r(n)}catch(e){o(e.message)}finally{s(!1)}else l("/login")})()}),[l]),a?S.createElement("div",{className:"content-area"},S.createElement(FW,{text:"Memuat Statistik..."})):i?S.createElement("div",{className:"content-area text-center"},S.createElement($t,{className:"w-12 h-12 mx-auto text-red-500 mb-4"}),S.createElement("h3",{className:"text-xl font-semibold text-red-600"},"Terjadi Kesalahan"),S.createElement("p",{className:"text-gray-600 mt-2"},i)):S.createElement("div",{className:"content-area"},S.createElement("h2",{style:{textAlign:"left",background:"none",WebkitBackgroundClip:"unset",WebkitTextFillColor:"unset",paddingBottom:0}},"Selamat Datang, ",e,"!"),S.createElement("p",{style:{textAlign:"left",marginTop:0,marginBottom:"2rem"}},"Ringkasan aktivitas CornLeaf AI Anda."),S.createElement("div",{className:"stats-grid"},S.createElement("div",{className:"stat-card"},S.createElement("div",{className:"stat-icon"},S.createElement(VW,{size:32})),S.createElement("div",{className:"stat-content"},S.createElement("h3",null,"Total Pindai"),S.createElement("div",{className:"stat-number"},n.totalScans.toLocaleString("id-ID")))),S.createElement("div",{className:"stat-card"},S.createElement("div",{className:"stat-icon"},S.createElement(Lt,{size:32})),S.createElement("div",{className:"stat-content"},S.createElement("h3",null,"Penyakit Terdeteksi"),S.createElement("div",{className:"stat-number"},n.diseasesDetected.toLocaleString("id-ID")))),S.createElement("div",{className:"stat-card"},S.createElement("div",{className:"stat-icon"},S.createElement(WW,{size:32})),S.createElement("div",{className:"stat-content"},S.createElement("h3",null,"Akurasi Rata-rata"),S.createElement("div",{className:"stat-number"},n.totalScans>0?"".concat((100*n.averageAccuracy).toFixed(1),"%"):"N/A"))),S.createElement("div",{className:"stat-card"},S.createElement("div",{className:"stat-icon"},S.createElement(KW,{size:32})),S.createElement("div",{className:"stat-content"},S.createElement("h3",null,"Pindai Bulan Ini"),S.createElement("div",{className:"stat-number"},n.scansThisMonth.toLocaleString("id-ID"))))),S.createElement("div",{className:"card"},S.createElement("h3",{style:{fontWeight:600,color:"var(--text-color)",marginBottom:"1.5rem",fontSize:"1.2rem"}},"Aksi Cepat"),S.createElement("div",{className:"quick-actions"},S.createElement(st,{to:"/cornLeafScanner",className:"action-button"},S.createElement("div",{className:"action-icon"},S.createElement(GW,{size:24})),S.createElement("span",null,"Mulai Pindai Baru")),S.createElement(st,{to:"/riwayat",className:"action-button"},S.createElement("div",{className:"action-icon"},S.createElement(KW,{size:24})),S.createElement("span",null,"Lihat Riwayat")),S.createElement(st,{to:"/team",className:"action-button"},S.createElement("div",{className:"action-icon"},S.createElement(jW,{size:24})),S.createElement("span",null,"Profil Tim")),S.createElement(st,{to:"/about",className:"action-button"},S.createElement("div",{className:"action-icon"},S.createElement(qW,{size:24})),S.createElement("span",null,"Tentang Aplikasi")))))},ZW=Tt("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),eK=Tt("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var tK=i(6593),nK={};nK.styleTagTransform=xt(),nK.setAttributes=yt(),nK.insert=mt().bind(null,"head"),nK.domAPI=pt(),nK.insertStyleElement=wt(),ht()(tK.A,nK),tK.A&&tK.A.locals&&tK.A.locals;const rK=()=>{const e=be(),[t,n]=(0,S.useState)([]),[r,a]=(0,S.useState)(!0),[s,i]=(0,S.useState)(null),[o,l]=(0,S.useState)(!1),[A,u]=(0,S.useState)(null),[c,h]=(0,S.useState)(!1),[d,p]=(0,S.useState)(!1),[f,m]=(0,S.useState)(null),g=(0,S.useCallback)((async()=>{a(!0),i(null);const t=localStorage.getItem("token");if(!t)return i("Anda harus login untuk melihat riwayat."),void a(!1);try{const r=await fetch("http://localhost:3001/api/history",{headers:{Authorization:"Bearer ".concat(t)}});if(401===r.status||403===r.status)return localStorage.removeItem("token"),localStorage.removeItem("user"),void e("/login");const a=await r.json();if(!r.ok)throw new Error(a.message||"Gagal mengambil data riwayat.");n(a)}catch(e){i(e.message)}finally{a(!1)}}),[e]);(0,S.useEffect)((()=>{g()}),[g]);const y=()=>{u(null),l(!1)},b=()=>{m(null),p(!1)},w=async e=>{if(!e)return void alert("Tidak ada data riwayat untuk diunduh.");const t=new Yr,n=new Date(e.scanned_at),r=QW(e.detection_result),a=r&&Array.isArray(r.actions)?r.actions:["Tidak ada rekomendasi penanganan yang tersedia."],s=r.title||e.detection_result,i=r.description||"Tidak ada deskripsi tersedia.",o=r.icon||"";if(t.setFontSize(22),t.text("Laporan Deteksi Penyakit Daun Jagung",10,20),t.setFontSize(10),t.text("Aplikasi Scanner Daun Jagung - Riwayat",10,27),t.setLineWidth(.5),t.line(10,30,200,30),t.setFontSize(12),t.text("Tanggal Deteksi: ".concat(n.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),10,40),t.text("Waktu Deteksi: ".concat(n.toLocaleTimeString("id-ID")),10,47),t.text("Sumber Gambar: Riwayat Pindai",10,54),t.setFontSize(14),t.text("Gambar yang Dideteksi:",10,63),e.image_data){const r=new Image;r.src=e.image_data,r.onload=()=>{const l=80*r.height/r.width;t.addImage(e.image_data,"JPEG",10,70,80,l);let A=70+l+10;t.setFontSize(14),t.text("Hasil Deteksi:",10,A),A+=10,t.setFontSize(12),t.text("Penyakit Teridentifikasi: ".concat(o," ").concat(s),10,A),A+=7,t.text("Deskripsi: ".concat(i),10,A),A+=7,t.text("Tingkat Keyakinan: ".concat((100*e.accuracy).toFixed(2),"%"),10,A),A+=17,t.setFontSize(14),t.text("Rekomendasi Penanganan:",10,A),A+=10,t.setFontSize(12),a.forEach(((e,n)=>{const r="".concat(n+1,". ").concat(e),a=t.splitTextToSize(r,180);t.text(a,10,A),A+=5*a.length+3})),A=Math.max(A,t.internal.pageSize.height-30);const u=t.splitTextToSize("Catatan: Hasil deteksi ini dihasilkan oleh model AI dan ditujukan sebagai panduan awal. Untuk diagnosis dan penanganan yang lebih akurat, sangat disarankan untuk berkonsultasi dengan ahli pertanian atau agronomis.",180);t.setFontSize(8),t.setTextColor(100),t.text(u,10,A),t.save("Laporan_Deteksi_Riwayat_".concat(e.detection_result,"_").concat(n.toISOString().slice(0,10),".pdf"))},r.onerror=()=>{alert("Gagal memuat gambar untuk PDF.")}}else{let r=70;t.setFontSize(14),t.text("Hasil Deteksi:",10,r),r+=10,t.setFontSize(12),t.text("Penyakit Teridentifikasi: ".concat(o," ").concat(s),10,r),r+=7,t.text("Deskripsi: ".concat(i),10,r),r+=7,t.text("Tingkat Keyakinan: ".concat((100*e.accuracy).toFixed(2),"%"),10,r),r+=17,t.setFontSize(14),t.text("Rekomendasi Penanganan:",10,r),r+=10,t.setFontSize(12),a.forEach(((e,n)=>{const a="".concat(n+1,". ").concat(e),s=t.splitTextToSize(a,180);t.text(s,10,r),r+=5*s.length+3})),r=Math.max(r,t.internal.pageSize.height-30);const l="Catatan: Hasil deteksi ini dihasilkan oleh model AI dan ditujukan sebagai panduan awal. Untuk diagnosis dan penanganan yang lebih akurat, sangat disarankan untuk berkonsultasi dengan ahli pertanian atau agronomis.",A=t.splitTextToSize(l,180);t.setFontSize(8),t.setTextColor(100),t.text(A,10,r),t.save("Laporan_Deteksi_Riwayat_".concat(e.detection_result,"_").concat(n.toISOString().slice(0,10),".pdf"))}},v=e=>new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=e=>"Sehat"===e?"status-sehat":"Karat"===e||"Hawar"===e?"status-sedang":"status-diperlukan",B=e=>"Sehat"===e?"Sehat":"Tindakan Diperlukan";return r?S.createElement(FW,{text:"Memuat riwayat Anda..."}):S.createElement(S.Fragment,null,S.createElement("div",{className:"content-area"},S.createElement("h2",{className:"text-left"},"Riwayat Pindai"),s&&S.createElement("div",{className:"error-message"},s),S.createElement("div",{className:"card"},S.createElement("div",{className:"table-container"},t.length>0?S.createElement("table",{className:"custom-table"},S.createElement("thead",null,S.createElement("tr",null,S.createElement("th",null,"Gambar"),S.createElement("th",null,"Tanggal"),S.createElement("th",null,"Hasil Deteksi"),S.createElement("th",null,"Akurasi"),S.createElement("th",{className:"text-center"},"Status"),S.createElement("th",{className:"text-center"},"Aksi"))),S.createElement("tbody",null,t.map((e=>S.createElement("tr",{key:e.id},S.createElement("td",null,S.createElement("img",{src:e.image_data,alt:e.detection_result,className:"history-image"})),S.createElement("td",null,v(e.scanned_at)),S.createElement("td",{className:"font-medium"},e.detection_result),S.createElement("td",{className:"font-medium"},(100*e.accuracy).toFixed(1),"%"),S.createElement("td",{className:"text-center"},S.createElement("span",{className:"status-badge ".concat(x(e.detection_result))},B(e.detection_result))),S.createElement("td",{className:"text-center action-buttons"},S.createElement("button",{onClick:()=>(e=>{m(e),p(!0)})(e),className:"btn-icon",title:"Lihat Detail"},S.createElement(ZW,{size:18})),S.createElement("button",{onClick:()=>w(e),className:"btn-icon",title:"Unduh PDF"},S.createElement(kn,{size:18})),S.createElement("button",{onClick:()=>(e=>{u(e),l(!0)})(e),className:"btn-icon btn-delete",title:"Hapus"},S.createElement(eK,{size:18})))))))):S.createElement("div",{className:"text-center py-12"},S.createElement("p",{className:"text-gray-500"},"Anda belum memiliki riwayat pemindaian."))))),o&&S.createElement("div",{className:"modal-backdrop"},S.createElement("div",{className:"modal-content"},S.createElement("h3",{className:"modal-title"},"Konfirmasi Hapus"),S.createElement("p",{className:"modal-body"},"Apakah Anda yakin ingin menghapus riwayat pindai ini secara permanen?"),S.createElement("div",{className:"modal-actions"},S.createElement("button",{onClick:y,className:"btn-secondary",disabled:c},"Batal"),S.createElement("button",{onClick:async()=>{if(!A)return;h(!0),i(null);const e=localStorage.getItem("token");try{const t=await fetch("http://localhost:3001/api/history/".concat(A.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Gagal menghapus riwayat.")}n((e=>e.filter((e=>e.id!==A.id))))}catch(e){i(e.message)}finally{h(!1),y()}},disabled:c,className:"btn-danger"},c?"Menghapus...":"Ya, Hapus")))),d&&f&&S.createElement("div",{className:"modal-backdrop"},S.createElement("div",{className:"modal-content large"},S.createElement("button",{onClick:b,className:"close-modal-button",title:"Tutup"},S.createElement(PW,{size:24})),S.createElement("h3",{className:"modal-title"},"Detail Hasil Pindai"),S.createElement("div",{className:"modal-body detail-modal-body"},S.createElement("div",{className:"detail-header"},S.createElement("img",{src:f.image_data,alt:"Hasil Pindai",className:"detail-image"}),S.createElement("div",{className:"detail-info"},S.createElement("p",{className:"detail-date"},"Tanggal: ",v(f.scanned_at)),S.createElement("p",{className:"detail-accuracy"},"Akurasi: ",(100*f.accuracy).toFixed(1),"%"))),(()=>{const e=QW(f.detection_result);return S.createElement("div",{className:"detail-content"},S.createElement("h4",{className:"detail-section-title"},"Penyakit Teridentifikasi:"),S.createElement("p",{className:"text-lg font-bold text-gray-800"},e.icon," ",e.title||f.detection_result,S.createElement("span",{className:"status-badge ml-2 ".concat(x(f.detection_result))},B(f.detection_result))),S.createElement("p",{className:"text-gray-700 mt-2"},e.description),S.createElement("h4",{className:"detail-section-title mt-4"},"Rekomendasi Penanganan:"),S.createElement("ul",{className:"list-disc list-inside text-gray-700 space-y-1"},e.actions.map(((e,t)=>S.createElement("li",{key:t},e)))))})()),S.createElement("div",{className:"modal-actions"},S.createElement("button",{onClick:b,className:"btn-primary"},"Tutup"),S.createElement("button",{onClick:()=>w(f),className:"btn-download-detail"},S.createElement(kn,{size:18,className:"inline mr-2"})," Unduh Laporan PDF")))))};var aK=i(937),sK={};function iK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iK(Object(n),!0).forEach((function(t){lK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lK(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}sK.styleTagTransform=xt(),sK.setAttributes=yt(),sK.insert=mt().bind(null,"head"),sK.domAPI=pt(),sK.insertStyleElement=wt(),ht()(aK.A,sK),aK.A&&aK.A.locals&&aK.A.locals;const AK=()=>{const e=be(),[t,n]=(0,S.useState)({email:"",password:""}),[r,a]=(0,S.useState)(""),[s,i]=(0,S.useState)(!1),[o,l]=(0,S.useState)(!1),{email:A,password:u}=t,c=e=>{n(oK(oK({},t),{},{[e.target.id]:e.target.value}))};return S.createElement("div",{className:"auth-container"},S.createElement("div",{className:"card auth-card"},S.createElement("form",{onSubmit:async t=>{t.preventDefault(),a(""),i(!1),l(!0);try{const t=await fetch("http://localhost:3001/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:A,password:u})}),n=await t.json();if(!t.ok)throw new Error(n.message||"Something went wrong");i(!1),a(n.message),localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),setTimeout((()=>{e("/dashboard")}),1500)}catch(e){i(!0),a(e.message)}finally{l(!1)}}},S.createElement("h2",{className:"text-center"},"Selamat Datang Kembali!"),S.createElement("p",{className:"text-center mb-3"},"Silakan masuk untuk melanjutkan."),S.createElement("div",{className:"form-group"},S.createElement("label",{htmlFor:"email"},"Alamat Email"),S.createElement("input",{type:"email",id:"email",placeholder:"contoh@email.com",value:A,onChange:c,required:!0})),S.createElement("div",{className:"form-group"},S.createElement("div",{className:"label-group"},S.createElement("label",{htmlFor:"password"},"Kata Sandi"),S.createElement(st,{to:"/forgot-password",className:"link-forgot-password"},"Lupa Kata Sandi?")),S.createElement("input",{type:"password",id:"password",placeholder:"••••••••",value:u,onChange:c,required:!0})),r&&S.createElement("p",{className:"message ".concat(s?"error":"success")},r),S.createElement("button",{type:"submit",className:"btn-primary",disabled:o},S.createElement(Cn,{size:18}),S.createElement("span",null,o?"Memproses...":"Login")),S.createElement("p",{className:"text-center mt-3"},"Belum punya akun?"," ",S.createElement(st,{to:"/register",className:"link-primary"},"Daftar di sini")))))},uK=Tt("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function cK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cK(Object(n),!0).forEach((function(t){dK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dK(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pK=()=>{const e=be(),[t,n]=(0,S.useState)({fullName:"",email:"",password:""}),[r,a]=(0,S.useState)(""),[s,i]=(0,S.useState)(!1),{fullName:o,email:l,password:A}=t,u=e=>{n(hK(hK({},t),{},{[e.target.id]:e.target.value}))};return S.createElement("div",{className:"auth-container"},S.createElement("div",{className:"card auth-card"},S.createElement("form",{onSubmit:async t=>{t.preventDefault(),a(""),i(!1);try{const t=await fetch("http://localhost:3001/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:o,email:l,password:A})}),n=await t.json();if(!t.ok)throw new Error(n.message||"Something went wrong");i(!1),a(n.message),setTimeout((()=>{e("/login")}),2e3)}catch(e){i(!0),a(e.message)}}},S.createElement("h2",{className:"text-center"},"Buat Akun Baru"),S.createElement("p",{className:"text-center mb-3"},"Isi form di bawah untuk mendaftar."),S.createElement("div",{className:"form-group"},S.createElement("label",{htmlFor:"fullName"},"Nama Lengkap"),S.createElement("input",{type:"text",id:"fullName",placeholder:"Masukkan nama lengkap Anda",value:o,onChange:u,required:!0})),S.createElement("div",{className:"form-group"},S.createElement("label",{htmlFor:"email"},"Alamat Email"),S.createElement("input",{type:"email",id:"email",placeholder:"contoh@email.com",value:l,onChange:u,required:!0})),S.createElement("div",{className:"form-group"},S.createElement("label",{htmlFor:"password"},"Buat Kata Sandi"),S.createElement("input",{type:"password",id:"password",placeholder:"••••••••",value:A,onChange:u,required:!0,minLength:"6"})),r&&S.createElement("p",{className:"message ".concat(s?"error":"success")},r),S.createElement("button",{type:"submit",className:"btn-primary"},S.createElement(uK,{size:18}),S.createElement("span",null,"Daftar")),S.createElement("p",{className:"text-center mt-3"},"Sudah punya akun?"," ",S.createElement(st,{to:"/login",className:"link-primary"},"Login di sini")))))},fK=Tt("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),mK=Tt("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var gK=i(2478),yK={};yK.styleTagTransform=xt(),yK.setAttributes=yt(),yK.insert=mt().bind(null,"head"),yK.domAPI=pt(),yK.insertStyleElement=wt(),ht()(gK.A,yK),gK.A&&gK.A.locals&&gK.A.locals;const bK=()=>{const e=be(),t=(0,S.useRef)(null),[n,r]=(0,S.useState)(null),[a,s]=(0,S.useState)(""),[i,o]=(0,S.useState)(null),[l,A]=(0,S.useState)(null),[u,c]=(0,S.useState)(""),[h,d]=(0,S.useState)(""),[p,f]=(0,S.useState)(""),[m,g]=(0,S.useState)(!0),[y,b]=(0,S.useState)(!1),[w,v]=(0,S.useState)(!1),[x,B]=(0,S.useState)({type:"",text:""});return(0,S.useEffect)((()=>{(async()=>{const t=localStorage.getItem("token");if(t)try{const n=await fetch("http://localhost:3001/api/profile",{headers:{Authorization:"Bearer ".concat(t)}});if(401===n.status||403===n.status)return localStorage.clear(),void e("/login");if(!n.ok)throw new Error("Gagal memuat profil.");const a=await n.json();r(a),s(a.full_name),o(a.profile_picture||"https://placehold.co/120x120/E2E8F0/4A5568?text=User")}catch(e){B({type:"error",text:e.message})}finally{g(!1)}else e("/login")})()}),[e]),m?S.createElement(FW,{text:"Memuat Profil..."}):S.createElement("div",{className:"profile-container"},S.createElement("h2",{className:"profile-header"},"Pengaturan Profil"),x.text&&S.createElement("div",{className:"message-banner ".concat("success"===x.type?"success":"error")},"success"===x.type?S.createElement(Pt,{size:20}):S.createElement(RW,{size:20}),S.createElement("span",null,x.text)),S.createElement("div",{className:"profile-grid"},S.createElement("div",{className:"profile-card"},S.createElement("h3",null,"Detail Profil"),S.createElement("form",{onSubmit:async e=>{e.preventDefault(),b(!0),B({type:"",text:""});const t=localStorage.getItem("token");try{const e=await fetch("http://localhost:3001/api/profile/details",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({fullName:a,profilePicture:l||n.profile_picture})}),r=await e.json();if(!e.ok)throw new Error(r.message);localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),window.dispatchEvent(new Event("storage")),B({type:"success",text:"Detail profil berhasil diperbarui!"})}catch(e){B({type:"error",text:e.message})}finally{b(!1)}}},S.createElement("div",{className:"avatar-section"},S.createElement("img",{src:i,alt:"Avatar",className:"avatar-preview",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/120x120/E2E8F0/4A5568?text=User"}}),S.createElement("button",{type:"button",className:"btn-change-avatar",onClick:()=>t.current.click()},S.createElement(Mt,{size:16})," Ubah Foto"),S.createElement("input",{type:"file",ref:t,onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{o(e.result),A(e.result)},e.readAsDataURL(t)}},style:{display:"none"},accept:"image/*"})),S.createElement("div",{className:"input-group"},S.createElement("label",{htmlFor:"fullName"},"Nama Lengkap"),S.createElement("div",{className:"input-with-icon"},S.createElement(jW,{size:18}),S.createElement("input",{type:"text",id:"fullName",value:a,onChange:e=>s(e.target.value),required:!0}))),S.createElement("div",{className:"input-group"},S.createElement("label",{htmlFor:"email"},"Email"),S.createElement("div",{className:"input-with-icon"},S.createElement(fK,{size:18}),S.createElement("input",{type:"email",id:"email",value:(null==n?void 0:n.email)||"",disabled:!0}))),S.createElement("button",{type:"submit",className:"btn-save",disabled:y},S.createElement(Bn,{size:18}),y?"Menyimpan...":"Simpan Perubahan"))),S.createElement("div",{className:"profile-card"},S.createElement("h3",null,"Ubah Kata Sandi"),S.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),h!==p)return void B({type:"error",text:"Konfirmasi kata sandi baru tidak cocok."});if(h.length<6)return void B({type:"error",text:"Kata sandi baru minimal harus 6 karakter."});v(!0),B({type:"",text:""});const t=localStorage.getItem("token");try{const e=await fetch("http://localhost:3001/api/profile/password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({currentPassword:u,newPassword:h})}),n=await e.json();if(!e.ok)throw new Error(n.message);B({type:"success",text:"Kata sandi berhasil diubah!"}),c(""),d(""),f("")}catch(e){B({type:"error",text:e.message})}finally{v(!1)}}},S.createElement("div",{className:"input-group"},S.createElement("label",{htmlFor:"currentPassword"},"Kata Sandi Saat Ini"),S.createElement("div",{className:"input-with-icon"},S.createElement(mK,{size:18}),S.createElement("input",{type:"password",id:"currentPassword",value:u,onChange:e=>c(e.target.value),required:!0}))),S.createElement("div",{className:"input-group"},S.createElement("label",{htmlFor:"newPassword"},"Kata Sandi Baru"),S.createElement("div",{className:"input-with-icon"},S.createElement(mK,{size:18}),S.createElement("input",{type:"password",id:"newPassword",value:h,onChange:e=>d(e.target.value),required:!0,minLength:"6"}))),S.createElement("div",{className:"input-group"},S.createElement("label",{htmlFor:"confirmPassword"},"Konfirmasi Kata Sandi Baru"),S.createElement("div",{className:"input-with-icon"},S.createElement(mK,{size:18}),S.createElement("input",{type:"password",id:"confirmPassword",value:p,onChange:e=>f(e.target.value),required:!0}))),S.createElement("button",{type:"submit",className:"btn-save",disabled:w},S.createElement(Bn,{size:18}),w?"Menyimpan...":"Ubah Kata Sandi")))))},wK=()=>{const[e,t]=(0,S.useState)(""),[n,r]=(0,S.useState)({type:"",text:""}),[a,s]=(0,S.useState)(!1);return S.createElement("div",{className:"auth-container"},S.createElement("div",{className:"card auth-card"},S.createElement("form",{onSubmit:async t=>{t.preventDefault(),s(!0),r({type:"",text:""});try{const t=await fetch("http://localhost:3001/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),n=await t.json();if(!t.ok)throw new Error(n.message);r({type:"success",text:n.message})}catch(e){r({type:"error",text:e.message})}finally{s(!1)}}},S.createElement("h2",{className:"text-center"},"Lupa Kata Sandi"),S.createElement("p",{className:"text-center mb-4"},"Masukkan email Anda untuk menerima link pemulihan."),n.text&&S.createElement("p",{className:"message ".concat("success"===n.type?"success":"error")},"success"===n.type?S.createElement(Pt,{size:16}):S.createElement(RW,{size:16}),n.text),S.createElement("div",{className:"form-group"},S.createElement("label",{htmlFor:"email"},"Alamat Email"),S.createElement("input",{type:"email",id:"email",placeholder:"contoh@email.com",value:e,onChange:e=>t(e.target.value),required:!0})),S.createElement("button",{type:"submit",className:"btn-primary",disabled:a},S.createElement(fK,{size:18}),S.createElement("span",null,a?"Mengirim...":"Kirim Link Pemulihan")),S.createElement("p",{className:"text-center mt-3"},"Kembali ke halaman"," ",S.createElement(st,{to:"/login",className:"link-primary"},"Login")))))},vK=()=>{const{token:e}=function(){let{matches:e}=S.useContext(de),t=e[e.length-1];return t?t.params:{}}(),t=be(),[n,r]=(0,S.useState)(""),[a,s]=(0,S.useState)(""),[i,o]=(0,S.useState)({type:"",text:""}),[l,A]=(0,S.useState)(!1);return S.createElement("div",{className:"auth-container"},S.createElement("div",{className:"card auth-card"},S.createElement("form",{onSubmit:async r=>{if(r.preventDefault(),n===a){A(!0),o({type:"",text:""});try{const r=await fetch("http://localhost:3001/api/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,newPassword:n})}),a=await r.json();if(!r.ok)throw new Error(a.message);o({type:"success",text:a.message}),setTimeout((()=>t("/login")),2e3)}catch(e){o({type:"error",text:e.message})}finally{A(!1)}}else o({type:"error",text:"Kata sandi tidak cocok."})}},S.createElement("h2",{className:"text-center"},"Atur Ulang Kata Sandi"),S.createElement("p",{className:"text-center mb-4"},"Masukkan kata sandi baru Anda."),i.text&&S.createElement("p",{className:"message ".concat("success"===i.type?"success":"error")},"success"===i.type?S.createElement(Pt,{size:16}):S.createElement(RW,{size:16}),i.text),S.createElement("div",{className:"form-group"},S.createElement("label",{htmlFor:"password"},"Kata Sandi Baru"),S.createElement("input",{type:"password",id:"password",placeholder:"••••••••",value:n,onChange:e=>r(e.target.value),required:!0})),S.createElement("div",{className:"form-group"},S.createElement("label",{htmlFor:"confirmPassword"},"Konfirmasi Kata Sandi"),S.createElement("input",{type:"password",id:"confirmPassword",placeholder:"••••••••",value:a,onChange:e=>s(e.target.value),required:!0})),S.createElement("button",{type:"submit",className:"btn-primary",disabled:l},S.createElement(Bn,{size:18}),S.createElement("span",null,l?"Menyimpan...":"Simpan Kata Sandi")))))},xK=Tt("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),BK=Tt("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),kK=Tt("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),CK=Tt("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),NK=Tt("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);function SK(){return SK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SK.apply(null,arguments)}const IK=()=>{const[e,t]=(0,S.useState)(!1),[n,r]=(0,S.useState)(!1),a=me(),s=be();(0,S.useEffect)((()=>{const e=localStorage.getItem("token");r(!!e)}),[a]);const i=[{path:"/",label:"Beranda",icon:xK},{path:"/cornLeafScanner",label:"Scanner",icon:Lt},{path:"/team",label:"Team",icon:jW},{path:"/about",label:"Tentang",icon:BK}],o=[{path:"/dashboard",label:"Dashboard",icon:WW},{path:"/riwayat",label:"Riwayat",icon:KW},{path:"/profile",label:"Profil",icon:kK}],l=[{path:"/login",label:"Login",icon:Cn},{path:"/register",label:"Register",icon:uK,isPrimary:!0}],A=n?[...i,...o]:i,u=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r(!1),t(!1),s("/login")},c=e=>a.pathname===e,h=e=>{let{path:n,label:r,icon:a,isPrimary:s=!1}=e;return S.createElement(st,{to:n,onClick:()=>t(!1),className:"flex items-center space-x-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 ".concat(s?"bg-green-600 text-white hover:bg-green-700 shadow-md":c(n)?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:text-green-600 hover:bg-green-50")},S.createElement(a,{className:"w-5 h-5"}),S.createElement("span",null,r))},d=e=>{let{isMobile:t=!1}=e;return S.createElement("button",{onClick:u,className:"flex items-center space-x-2 px-3 py-2 rounded-lg font-medium transition-all duration-200 text-gray-600 hover:text-red-600 hover:bg-red-50 w-full text-left ".concat(t?"space-x-3 px-4 py-3":"")},S.createElement(CK,{className:"w-5 h-5"}),S.createElement("span",null,"Logout"))};return S.createElement("nav",{className:"bg-white shadow-lg sticky top-0 z-50"},S.createElement("div",{className:"container mx-auto px-4"},S.createElement("div",{className:"flex justify-between items-center py-4"},S.createElement(st,{to:"/",className:"flex items-center space-x-2 text-2xl font-bold text-[#039b62]"},S.createElement(Lt,{className:"w-8 h-8"}),S.createElement("span",{className:"bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent"},"CornLeaf AI")),S.createElement("div",{className:"hidden md:flex items-center space-x-1"},A.map((e=>S.createElement(h,SK({key:e.path},e)))),S.createElement("div",{className:"w-px h-6 bg-gray-200 mx-2"}),n?S.createElement(d,null):l.map((e=>S.createElement(h,SK({key:e.path},e))))),S.createElement("button",{onClick:()=>t(!e),className:"md:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"},e?S.createElement(PW,{className:"w-6 h-6"}):S.createElement(NK,{className:"w-6 h-6"}))),e&&S.createElement("div",{className:"md:hidden pb-4 animate-in slide-in-from-top duration-200"},S.createElement("div",{className:"flex flex-col space-y-2 bg-gray-50 rounded-lg p-4"},A.map((e=>S.createElement(st,{key:e.path,to:e.path,onClick:()=>t(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-all duration-200 ".concat(c(e.path)?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:text-green-600 hover:bg-white")},S.createElement(e.icon,{className:"w-5 h-5"}),S.createElement("span",null,e.label)))),S.createElement("hr",{className:"my-2"}),n?S.createElement(d,{isMobile:!0}):l.map((e=>S.createElement(st,{key:e.path,to:e.path,onClick:()=>t(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-all duration-200 ".concat(c(e.path)?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:text-green-600 hover:bg-white")},S.createElement(e.icon,{className:"w-5 h-5"}),S.createElement("span",null,e.label))))))))},EK=()=>localStorage.getItem("token")?S.createElement(Le,null):S.createElement(Te,{to:"/login",replace:!0}),FK=function(){return S.createElement(rt,null,S.createElement("div",{className:"bg-white flex flex-col min-h-screen"},S.createElement(IK,null),S.createElement("main",{className:"mx-auto flex-grow w-full"},S.createElement(Re,null,S.createElement(Ue,{path:"/",element:S.createElement(zt,null)}),S.createElement(Ue,{path:"/about",element:S.createElement(gn,null)}),S.createElement(Ue,{path:"/cornLeafScanner",element:S.createElement(zW,null)}),S.createElement(Ue,{path:"/team",element:S.createElement(vn,null)}),S.createElement(Ue,{path:"/login",element:S.createElement(AK,null)}),S.createElement(Ue,{path:"/register",element:S.createElement(pK,null)}),S.createElement(Ue,{path:"/forgot-password",element:S.createElement(wK,null)})," ",S.createElement(Ue,{path:"/reset-password/:token",element:S.createElement(vK,null)})," ",S.createElement(Ue,{element:S.createElement(EK,null)},S.createElement(Ue,{path:"/dashboard",element:S.createElement(YW,null)}),S.createElement(Ue,{path:"/riwayat",element:S.createElement(rK,null)}),S.createElement(Ue,{path:"/profile",element:S.createElement(bK,null)})))),S.createElement("footer",{className:"bg-gradient-to-r from-gray-800 to-gray-900 text-white py-12"},S.createElement("div",{className:"container mx-auto px-4 text-center"},S.createElement("span",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent"},"CornLeaf AI"),S.createElement("p",{className:"text-gray-400 mt-2"},"Teknologi AI terdepan untuk deteksi penyakit daun jagung."),S.createElement("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center"},S.createElement("p",{className:"text-gray-400"},"© ",(new Date).getFullYear()," CornLeaf AI. Teknologi AI untuk pertanian yang lebih baik."))))))};I.createRoot(document.getElementById("root")).render(S.createElement(FK,null))})()})();